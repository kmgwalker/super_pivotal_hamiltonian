\documentclass[12pt,a4paper]{article}
\usepackage[margin=1in]{geometry}  
\usepackage{amsmath,amsfonts,amssymb,latexsym,dsfont}
\usepackage{hhline}
\usepackage{amsthm}
\newtheorem{theorem}{Theorem}[subsection]
\newtheorem{axiom}[theorem]{Axiom}
\newtheorem{lemma}[theorem]{Lemma}
\usepackage{graphicx}
\usepackage[all]{xy}
\usepackage{tikz}
\usepackage{tikz-cd}
\definecolor{hanpurple}{rgb}{0.32, 0.09, 0.98}
\setcounter{MaxMatrixCols}{12}
\usepackage{tabu}

\usepackage[numbers]{natbib}
\usepackage[colorlinks]{hyperref}
\hypersetup{linkcolor={hanpurple}}

% number tables and figures within subsections
%%%%%KW: should we also number eqns within subsections?
\usepackage{chngcntr}
\counterwithin{table}{subsection}
\counterwithin{figure}{subsection}

\usetikzlibrary{positioning,arrows}
\usetikzlibrary{decorations.pathmorphing}
\usetikzlibrary{decorations.markings}

\usetikzlibrary{decorations.pathreplacing,calc}

\newcommand{\tikzmark}[2][-3pt]{\tikz[remember picture, overlay, baseline=-0.5ex]\node[#1](#2){};}

\tikzset{brace/.style={decorate, decoration={brace}},
 brace mirrored/.style={decorate, decoration={brace,mirror}},
}

\newcounter{brace}
\setcounter{brace}{0}
\newcommand{\drawbrace}[3][brace]{%
 \refstepcounter{brace}
 \tikz[remember picture, overlay]\draw[#1] (#2.center)--(#3.center)node[pos=0.5, name=brace-\thebrace]{};
}

\newcounter{arrow}
\setcounter{arrow}{0}
\newcommand{\drawcurvedarrow}[3][]{%
 \refstepcounter{arrow}
 \tikz[remember picture, overlay]\draw (#2.center)edge[#1]node[coordinate,pos=0.5, name=arrow-\thearrow]{}(#3.center);
}

\newcommand{\annote}[3][]{%
 \tikz[remember picture, overlay]\node[#1] at (#2) {#3};
}

\newcommand{\tp}{\otimes}
\newcommand{\tpc}{\tilde{\otimes}}
\newcommand{\bigtp}{\bigotimes}
\newcommand{\ra}{\rightarrow}
\newcommand{\unit}{\mathds{1}}
\newcommand{\zz}{\mathbb{Z}}
\newcommand{\mce}{\mathcal{E}}
\newcommand{\mcb}{\mathcal{B}}
\newcommand{\cc}{\mathbb{C}}
\newcommand{\rr}{\mathbb{R}}
\newcommand{\mcr}{\mathcal{R}}
\newcommand{\mcz}{\mathcal{Z}}
\newcommand{\mca}{\mathcal{A}}
\newcommand{\mcd}{\mathcal{D}}
\newcommand{\mcg}{\mathcal{G}}
\newcommand{\mct}{\mathcal{T}}
\newcommand{\mcs}{\mathcal{S}}
\newcommand{\mch}{\mathcal{H}}
\newcommand{\mcl}{\mathcal{L}}
\newcommand{\mcc}{\mathcal{C}}
\newcommand{\mck}{\mathcal{K}}
\newcommand{\mco}{\mathcal{O}}
\newcommand{\mcm}{\mathcal{M}}
\newcommand{\mcp}{\mathcal{P}}
\newcommand{\mcv}{\mathcal{V}}
\newcommand{\mcx}{\mathcal{X}}
\newcommand{\ul}{\underline}
\newcommand{\Mod}{\text{Mod}}
\newcommand{\Aut}{\text{Aut}}
\newcommand{\ulmcc}{\underline{\mathcal{C}}}
\newcommand{\zt}{\mathbb{Z}_2}
\newcommand{\oeo}{\text{others = 1}}
\newcommand\be            {\begin{equation}}
\newcommand\ee            {\end{equation}}
\newcommand\ba            {\begin{aligned}}
\newcommand\ea            {\end{aligned}}
\newcommand{\mcf}{\mathcal{F}}
\newcommand{\spinz}{\text{\sffamily{Z}}}
\newcommand{\spinx}{\text{\sffamily{X}}}
\newcommand{\zc}{\mathcal{Z}(\mathcal{C})}
\newcommand{\id}{\text{id}}
\newcommand{\Hom}{\text{Hom}}
\newcommand{\mor}{\text{mor}}
\newcommand{\obj}{\text{obj}}
\newcommand{\End}{\text{End}}
\newcommand{\Tor}{\text{Tor}}
\newcommand{\Ext}{\text{Ext}}
\newcommand{\tr}{\text{tr}}
\newcommand{\str}{\text{str}}
\newcommand{\p}{\partial}
\newcommand{\wt}{\widetilde}
\usepackage{verbatim}
\newcommand{\cl}{\mathbb{C}\ell}
\newcommand{\vect}{\text{Vec}}
\newcommand{\svect}{\text{sVec}}
\newcommand{\spin}{\text{Spin}}
\newcommand{\pin}{\text{Pin}}	% name of group, should be capitalized (like \spin = Spin)
\newcommand{\fube}{\textbf{Tube}}
\newcommand{\tube}{\textbf{Tube}}
\newcommand{\fld}{\mathcal{F}} 
\newcommand{\Tr}{\text{Tr}}
\newcommand{\du}{\sqcup}

%%
\newcommand{\sob}{\text{sob}_r}
\newcommand{\sobm}{\text{sob}_r^m}
\newcommand{\sobq}{\text{sob}_r^q}
\newcommand{\sobi}{\text{sob}_i} %%% this is not currently used

% KW
\newcommand{\ot}{\otimes}
\newcommand{\bd}{\partial}
\DeclareMathOperator{\Arf}{Arf}
\definecolor{kwcolor}{rgb}{0.2, 0.5, 0.85}
\newcommand{\kw}[1]{{\color{kwcolor}\footnotesize{(KW) #1}}}
\newcommand{\kwsep}{\bigskip\hrule\medskip\hrule\medskip\hrule\bigskip}
% \nn is for compatibility with stuff copied from my other papers; can be deleted eventually
\newcommand{\nn}[1]{{\color{kwcolor}[#1]}}

\newcommand{\bra}[1]{\ensuremath{\left\langle#1\right|}}
\newcommand{\ket}[1]{\ensuremath{\left|#1\right\rangle}}

\definecolor{ao(english)}{rgb}{0.0, 0.5, 0.0}
\definecolor{americanrose}{rgb}{1.0, 0.01, 0.24}
\definecolor{amber(sae/ece)}{rgb}{1.0, 0.49, 0.0}

\newcommand{\dave}[1]{{\color{ao(english)}\footnotesize{(DA) #1}}}
\newcommand{\questionable}[1]{{\color{amber(sae/ece)}\footnotesize{(??) #1}}} 
%use this to flag questionable stuff

%a purple that looks different from red.
\definecolor{amethyst}{rgb}{0.6, 0.4, 0.8}
\newcommand{\ethan}[1]{{\color{amethyst}\footnotesize{(EL) #1}}}

\newcommand{\abullet}{{\color{amethyst} \bullet}}


\newcommand{\CapDotLeft}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{CapDotLeft.pdf}}}}}
\newcommand{\CapDotRight}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{CapDotRight.pdf}}}}}
\newcommand{\CupDotLeft}{\mathord{\vcenter{\hbox{\includegraphics[scale=1,angle=180,origin=c]{CapDotRight.pdf}}}}}
\newcommand{\CupDotRight}{\mathord{\vcenter{\hbox{\includegraphics[scale=1,angle=180,origin=c]{CapDotLeft.pdf}}}}}



\newcommand{\CupCapPsi}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{cupcappsi.pdf}}}}}

\newcommand{\Qcap}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{Qcap.pdf}}}}}
\newcommand{\Qcup}{\mathord{\vcenter{\hbox{\includegraphics[scale=1,angle=180,origin=c]{Qcap.pdf}}}}}
\newcommand{\Qdotdot}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{Qdotdot.pdf}}}}}
\newcommand{\QIdentity}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{QIdentity.pdf}}}}}

\newcommand{\CupCap}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{CupCap.pdf}}}}}
\newcommand{\CupCapDots}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{CupCapDots.pdf}}}}}

\newcommand{\dbeta}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{dbeta.pdf}}}}}
\newcommand{\dpsi}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{dpsi.pdf}}}}}
\newcommand{\dblank}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{dblank.pdf}}}}}





\newcommand{\SigmaDotDot}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{SigmaDotDot.pdf}}}}}
\newcommand{\SigmaDotDotExchange}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{SigmaDotDotExchange.pdf}}}}}
\newcommand{\TwoLine}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{TwoLine.pdf}}}}}
\newcommand{\TwoLineDots}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{TwoLineDots.pdf}}}}}


\newcommand{\RDotTwo}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{RDotTwo.pdf}}}}}
\newcommand{\RDotTwoa}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{RDotTwoa.pdf}}}}}
\newcommand{\RDotTwob}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{RDotTwob.pdf}}}}}
\newcommand{\RDotTwoc}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{RDotTwoc.pdf}}}}}

\newcommand{\FubeXXX}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{EmptyTube.pdf}}}}}
\newcommand{\FubeXss}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{OneLine.pdf}}}}}
\newcommand{\FubeXsds}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{OneLineDot.pdf}}}}}



\newcommand{\AnnulusCut}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{AnnulusCut.pdf}}}}}
\newcommand{\AnnulusFlat}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{AnnulusFlat.pdf}}}}}
\newcommand{\Disc}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{Disc.pdf}}}}}
\newcommand{\RotatedTube}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{RotatedTube.pdf}}}}}
\newcommand{\AnnulusGeneric}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{AnnulusGeneric.pdf}}}}}

\newcommand{\DiskLarge}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{DiskLarge.pdf}}}}}
\newcommand{\TubeIdempotentBasistrace}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{TubeIdempotentBasistrace.pdf}}}}}


\newcommand{\FubeXXXA}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{EmptyTubeA.pdf}}}}}
\newcommand{\FubeXssA}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{OneLineA.pdf}}}}}
\newcommand{\FubeXsdsA}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{OneLineDotA.pdf}}}}}

\newcommand{\FubesddXsA}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{FubesddXsA.pdf}}}}}

\newcommand{\RDotTwobA}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{RDotTwobA.pdf}}}}}\newcommand{\RDotTwocA}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{RDotTwocA.pdf}}}}}


 
\newcommand{\Fubex}[2]{{\mathord{\ooalign{ \vphantom{$\Big|^2$}\cr\hidewidth\ensuremath{\scriptstyle{#2}}\hidewidth\cr$\vcenter{\hbox{$#1$}}$\cr
  \hidewidth\raise0ex\hbox{$\scale{1.2}{\VerticalSpace}$}\cr
  }}}}	




\newcommand{\TubeBC}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{TubeBC.pdf}}}}}

\newcommand{\TubeBCx}[1]{{\mathord{\ooalign{ \vphantom{$\Big|^2$}\cr\hidewidth\ensuremath{\scriptstyle{#1}}\hidewidth\cr$\vcenter{\hbox{$\scale{1}{\TubeBC}$}}$\cr
  \hidewidth\raise0ex\hbox{$\scale{.25}{\VerticalSpace}$}\cr
  }}}}	

\newcommand{\AnnulusBare}{\mathord{\vcenter{\hbox{\includegraphics[scale=.6]{AnnulusBare.pdf}}}}}
\newcommand{\AnnularTube}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{AnnularTube.pdf}}}}}
\newcommand{\AnnularTubeNoIndex}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{AnnularTubeNoIndex.pdf}}}}}
\newcommand{\AnnulusTubeTube}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{AnnulusTubeTube.pdf}}}}}

\newcommand{\SAnnulusNoLabel}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{SAnnulusNoLabel.pdf}}}}}
\newcommand{\TAnnulusNoLabel}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{TAnnulusNoLabel.pdf}}}}}


\newcommand{\EdgeTensor}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{EdgeTensor.pdf}}}}}

\newcommand{\OneHandleTheta}{\mathord{\vcenter{\hbox{\includegraphics[scale=.7]{OneHandleTheta.pdf}}}}}
\newcommand{\OneHandlemud}{\mathord{\vcenter{\hbox{\includegraphics[scale=.7]{OneHandlemud.pdf}}}}}
\newcommand{\OneHandlemu}{\mathord{\vcenter{\hbox{\includegraphics[scale=.7]{OneHandlemu.pdf}}}}}
\newcommand{\OneHandlea}{\mathord{\vcenter{\hbox{\includegraphics[scale=.7]{OneHandlea.pdf}}}}}

\newcommand{\Bilineara}{\mathord{\vcenter{\hbox{\includegraphics[scale=0.85]{Bilineara.pdf}}}}}
\newcommand{\Bilinearb}{\mathord{\vcenter{\hbox{\includegraphics[scale=0.85]{Bilinearb.pdf}}}}}
\newcommand{\Bilinearc}{\mathord{\vcenter{\hbox{\includegraphics[scale=0.85]{Bilinearc.pdf}}}}}




\newcommand{\Tetrahedron}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{Tetrahedron.pdf}}}}}
\newcommand{\StandardZeroCell}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{StandardZeroCell.pdf}}}}}
\newcommand{\HorshoeIdentity}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{HorshoeIdentity.pdf}}}}}

\newcommand{\PitchforkIdempotent}{\mathord{\vcenter{\hbox{\includegraphics[scale=0.7]{PitchforkIdempotent.pdf}}}}}

\newcommand{\Pitchforkabc}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{Pitchforkabc.pdf}}}}}
\newcommand{\Pitchforkabcrot}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{Pitchforkabcrot.pdf}}}}}
\newcommand{\PivotThreeTimes}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{PivotThreeTimes.pdf}}}}}



\newcommand{\FaceWeight}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{FaceWeight.pdf}}}}}
\newcommand{\EdgeTensorprime}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{EdgeTensorprime.pdf}}}}}








\newcommand{\AnnulsLabel}[5]{\mathord{ 
\mkern2mu\overset{#3}{{\Annulusxprime{#1}{#2}}}\mkern2mu\raisebox{0ex}{$\scriptstyle{#4}$} }}

\newcommand*{\Annulus}[2]{{ #1 }
\kern-3.5em\raisebox{1ex}{ $\scriptstyle{#2}$} \kern2.6em} %Could change 0 to 1.2 to raise the B.

\newcommand*{\AnnulusP}[3]{{{\Annulus{#1}{#2}} }
\kern-.5em\raisebox{3.5ex}{ $\scriptstyle{#3}$} \kern.3em} %Could change 0 to 1.2 to raise the B.

\newcommand*{\AnnulusPx}[4]{\AnnulusP{#1}{#2}{#3}
\kern-3.6em\raisebox{-4.5ex}{ $\scriptstyle{#4}$} \kern2.6em} %Could change 0 to 1.2 to raise the B.

\newcommand*{\AnularTubex}[6]{\AnnulusPx{#1}{#2}{#3}{#4}
\kern-4em\raisebox{-4.5ex}{ $\overset{#6}{\underset{#5}{\vphantom{\Big|^2}}}$} \kern3em} %Could change 0 to 1.2 to raise the B.

\newcommand*{\TorusTubex}[6]{\AnnulusPx{#1}{#2}{#3}{#4}
\kern-4em\raisebox{-4.5ex}{ $\overset{#6}{\underset{#5}{\vphantom{\Big|^2}}}$} \kern3em} %Could change 0 to 1.2 to raise the B.



\newcommand{\SAnnulusx}[3]{\mathrel{\ooalign{$\SAnnulusNoLabel$\cr
  \hidewidth\raise5ex\hbox{$\scriptstyle{#3}\mkern1mu$}\cr
  \hidewidth\raise.8ex\hbox{$\scriptstyle{#2}\mkern63mu$}\cr
    \hidewidth\raise-3.8ex\hbox{$\scriptstyle{#1}\mkern39mu$}\cr
  }}}
  
  \newcommand{\TAnnulusx}[3]{\mathrel{\ooalign{$\TAnnulusNoLabel$\cr
  \hidewidth\raise5ex\hbox{$\scriptstyle{#3}\mkern1mu$}\cr
  \hidewidth\raise.8ex\hbox{$\scriptstyle{#2}\mkern63mu$}\cr
    \hidewidth\raise-4.9ex\hbox{$\scriptstyle{#1}\mkern51mu$}\cr
  }}}

\newcommand{\AnnularTubex}[6]{\mathrel{\ooalign{$#1$\cr
  \hidewidth\raise5ex\hbox{$\scriptstyle{#6}\mkern1mu$}\cr
  \hidewidth\raise.8ex\hbox{$\scriptstyle{#5}\mkern63mu$}\cr
  \hidewidth\raise-.9ex\hbox{$\scriptstyle{#3}\mkern68mu$}\cr
    \hidewidth\raise-4.5ex\hbox{$\scriptstyle{#4} \mkern50mu$}\cr
  \hidewidth\raise-7ex\hbox{$\scriptstyle{#2}\mkern68mu$}\cr
  }}}
  




\newcommand{\AnnularTubexp}[9]{\mathrel{\ooalign{$#1$\cr
  \hidewidth\raise5ex\hbox{$\scriptstyle{#9}\mkern1mu$}\cr
 \hidewidth\raise.8ex\hbox{$\scriptstyle{#8}\mkern63mu$}\cr
  \hidewidth\raise-3.7ex\hbox{$\scriptstyle{#7}\mkern50mu$}\cr
    \hidewidth\raise-5.1ex\hbox{$\scriptstyle{#6}\mkern57mu$}\cr
  \hidewidth\raise-2.2ex\hbox{$\scriptstyle{#5}\mkern90mu$}\cr
  \hidewidth\raise-.9ex\hbox{$\scriptstyle{#4}\mkern68mu$}\cr
    \hidewidth\raise-3.8ex\hbox{$\scriptstyle{#3} \mkern69mu$}\cr
  \hidewidth\raise-7ex\hbox{$\scriptstyle{#2}\mkern68mu$}\cr
  }}}


\newcommand{\SmallTorus}[3]{\mathrel{\ooalign{$#1$\cr
  \hidewidth\raise0ex\hbox{$\scriptstyle{#2}\mkern36mu$}\cr
    \hidewidth\raise-1.5ex\hbox{$\scriptstyle{#3}\mkern10mu$}\cr
  }}}
  
  
  \newcommand{\AnnulusTubeTubex}[6]{\mathrel{\ooalign{$#1$\cr
  \hidewidth\raise.8ex\hbox{$\scriptstyle{#6}\mkern65mu$}\cr
  \hidewidth\raise-.5ex\hbox{$\scriptstyle{#3}\mkern68mu$}\cr
    \hidewidth\raise-4.9ex\hbox{$\scriptstyle{#4} \mkern50mu$}\cr
     \hidewidth\raise-2.7ex\hbox{$\scriptstyle{#5} \mkern54mu$}\cr
  \hidewidth\raise-7.3ex\hbox{$\scriptstyle{#2}\mkern68mu$}\cr
  }}}
  

  \newcommand{\Cellup}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{Cellup.pdf}}}}}
    \newcommand{\Celldown}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{Celldown.pdf}}}}}
        \newcommand{\Cellmid}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{Cellmid.pdf}}}}}
        \newcommand{\TwoCell}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{TwoCell.pdf}}}}}
                \newcommand{\Onecell}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{Onecell.pdf}}}}}      
        
        

 


\newcommand{\TorusLocalRelationc}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{TorusLocalRelationc.pdf}}}}}
\newcommand{\TorusLocalRelationb}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{TorusLocalRelationb.pdf}}}}}
\newcommand{\TorusLocalRelationa}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{TorusLocalRelationa.pdf}}}}}


\newcommand{\Dv}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{Dv.pdf}}}}}
\newcommand{\Dfv}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{Dfv.pdf}}}}}


\newcommand{\Horseshoe}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{Horseshoe.pdf}}}}}
\newcommand{\HorseshoeTwist}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{HorseshoeTwist.pdf}}}}}
\newcommand{\euv}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{euv.pdf}}}}}
\newcommand{\chieuv}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{chieuv.pdf}}}}}


\newcommand{\TubeElement}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{TubeElement.pdf}}}}}


\newcommand{\LoopOverId}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{LoopOverId.pdf}}}}}
\newcommand{\Ida}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{Ida.pdf}}}}}
\newcommand{\OmegaSLoop}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{OmegaSLoop.pdf}}}}}

\newcommand{\IdxOmegaLoopa}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{IdxOmegaLoopa.pdf}}}}}
\newcommand{\IdxOmegaLoopb}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{IdxOmegaLoopb.pdf}}}}}


\newcommand{\HandleSlidea}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{HandleSlidea.pdf}}}}}
\newcommand{\HandleSlideb}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{HandleSlideb.pdf}}}}}


\newcommand{\TubeBasisa}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{TubeBasisa.pdf}}}}}
\newcommand{\TubeBasisb}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{TubeBasisb.pdf}}}}}
\newcommand{\TubeBasisc}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{TubeBasisc.pdf}}}}}
\newcommand{\TubeBasisd}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{TubeBasisd.pdf}}}}}
\newcommand{\TubeBasisdprime}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{TubeBasisdprime.pdf}}}}}


\newcommand{\TubeBasisaF}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{TubebasisaF.pdf}}}}}
\newcommand{\TubeBasisbF}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{TubebasisbF.pdf}}}}}
\newcommand{\TubeBasiscF}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{TubebasiscF.pdf}}}}}
\newcommand{\TubeBasisdF}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{TubebasisdF.pdf}}}}}






\newcommand{\gxyaj}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{gxyaj.pdf}}}}}
\newcommand{\hxyai}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{hxyai.pdf}}}}}

\newcommand{\VxyaoVxya}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{VxyaoVxya.pdf}}}}}
\newcommand{\idaprime}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{idaprime.pdf}}}}}

\newcommand{\Vxyxy}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{Vxyxy.pdf}}}}}
\newcommand{\idxy}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{idxy.pdf}}}}}
\newcommand{\Vxyxyomega}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{Vxyxyomega.pdf}}}}}



\newcommand{\SpinStructureProjector}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{SpinStructureProjector.pdf}}}}}


\newcommand{\EmptyTubeW}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{EmptyTubeW.pdf}}}}}

\newcommand{\TubeProject}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{TubeProject.pdf}}}}}


\newcommand{\TuberraJ}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{TuberraJ.pdf}}}}}
\newcommand{\Tubeidr}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{Tubeidr.pdf}}}}}
\newcommand{\Tuberr}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{Tuberr.pdf}}}}}


\newcommand{\TuberrTraceCe}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{TuberrTraceCe.pdf}}}}}
\newcommand{\TuberrTraceCo}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{TuberrTraceCo.pdf}}}}}



\newcommand{\exyomegaa}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{exyomegaa.pdf}}}}}
\newcommand{\exyomegab}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{exyomegab.pdf}}}}}
\newcommand{\exyomegac}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{exyomegac.pdf}}}}}

\newcommand{\EFunctora}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{EFunctora.pdf}}}}}
\newcommand{\EFunctorb}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{EFunctorb.pdf}}}}}
\newcommand{\EFunctorc}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{EFunctorc.pdf}}}}}


\newcommand{\IdempotentBasis}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{IdempotentBasis.pdf}}}}}

\newcommand{\TubeIdempotentTwoStrand}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{TubeIdempotentTwoStrand.pdf}}}}}
\newcommand{\fTubeCf}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{fTubeCf.pdf}}}}}
\newcommand{\fTubefOdd}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{fTubefOdd.pdf}}}}}
\newcommand{\minimalBosonic}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{minimalBosonic.pdf}}}}}

\newcommand{\minimalBosonicRHS}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{minimalBosonicRHS.pdf}}}}}
\newcommand{\ftubefOddRHS}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{ftubefOddRHS.pdf}}}}}




\newcommand{\FusionIsomorphism}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{FusionIsomorphism.pdf}}}}}


\newcommand{\TubeCompletea}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{TubeCompletea.pdf}}}}}
\newcommand{\TubeCompleteb}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{TubeCompleteb.pdf}}}}}
\newcommand{\TubeCompletec}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{TubeCompletec.pdf}}}}}
\newcommand{\TubeCompletecprime}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{TubeCompletecprime.pdf}}}}}



\newcommand{\Ufghk}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{Ufghk.pdf}}}}}


\newcommand{\fxyaJ}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{fxyaJ.pdf}}}}}


\newcommand{\TubeTwotoOneStrand}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{TubeTwotoOneStrand.pdf}}}}}
\newcommand{\TubeOnetoTwoStrand}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{TubeOnetoTwoStrand.pdf}}}}}
 

\newcommand{\SMatrix}[2]{\mathrel{\ooalign{$\OmegaSLoop$\cr
  \hidewidth\raise0ex\hbox{$\scriptstyle{#1}\mkern18mu$}\cr
    \hidewidth\raise0ex\hbox{$\scriptstyle{#2}\mkern-10mu$}\cr
  }}}
  
  
  \newcommand{\SMatrixx}[2]{\mathrel{\ooalign{$\OmegaSLoop$\cr
  \hidewidth\raise0ex\hbox{$\scriptstyle{#1}\mkern12mu$}\cr
    \hidewidth\raise0ex\hbox{$\scriptstyle{#2}\mkern-10mu$}\cr
  }}}
  
  
  \newcommand{\SMatrixxx}[2]{\mathrel{\ooalign{$\OmegaSLoop$\cr
  \hidewidth\raise0ex\hbox{$\scriptstyle{#1}\mkern12mu$}\cr
    \hidewidth\raise0ex\hbox{$\scriptstyle{#2}\mkern-38mu$}\cr
  }}}

  
  
  \newcommand{\OmegaLoopDefectx}[2]{\mathrel{\ooalign{$\OmegaLoopDefect$\cr
  \hidewidth\raise0ex\hbox{$\scriptstyle{#1}\mkern8mu$}\cr
    \hidewidth\raise0ex\hbox{$\scriptstyle{#2}\mkern-22mu$}\cr
  }}}
  
  \newcommand{\OmegaLoopDefect}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{OmegaLoopDefect.pdf}}}}}
    \newcommand{\DiscGray}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{DiscGray.pdf}}}}}
    
    
    
\newcommand{\DCSmatrixf}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{DCSmatrixf.pdf}}}}}
\newcommand{\DCSmatrixa}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{DCSmatrixa.pdf}}}}}
\newcommand{\DCSmatrixb}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{DCSmatrixb.pdf}}}}}\newcommand{\DCSmatrixc}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{DCSmatrixc.pdf}}}}}
\newcommand{\DCSmatrixd}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{DCSmatrixd.pdf}}}}}
\newcommand{\DCSmatrixe}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{DCSmatrixe.pdf}}}}}

\newcommand{\DCSmatrixg}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{DCSmatrixg.pdf}}}}}
\newcommand{\DCSmatrixh}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{DCSmatrixh.pdf}}}}}


\newcommand{\STorusBasisa}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{STorusBasisa.pdf}}}}}


\newcommand{\Scalcae}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{Scalcae.pdf}}}}}  
\newcommand{\Scalcad}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{Scalcad.pdf}}}}}  
\newcommand{\Scalcac}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{Scalcac.pdf}}}}}  
\newcommand{\Scalcab}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{Scalcab.pdf}}}}}
\newcommand{\Scalcaa}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{Scalcaa.pdf}}}}}  


\newcommand{\Scalcbe}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{Scalcbe.pdf}}}}}  
\newcommand{\Scalcbd}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{Scalcbd.pdf}}}}}  
\newcommand{\Scalcbc}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{Scalcbc.pdf}}}}}  
\newcommand{\Scalcbb}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{Scalcbb.pdf}}}}}
\newcommand{\Scalcba}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{Scalcba.pdf}}}}}  


\newcommand{\Scalcbedot}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{Scalcbedot.pdf}}}}}  
\newcommand{\Scalcbddot}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{Scalcbddot.pdf}}}}}  
\newcommand{\Scalcbadot}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{Scalcbadot.pdf}}}}}    

\newcommand{\Scalcbddotprime}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{Scalcbddotprime.pdf}}}}}
\newcommand{\Scalcbadotprime}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{Scalcbadotprime.pdf}}}}}

\newcommand{\Szmatrix}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{Szmatrix.pdf}}}}}

 

  
\newcommand{\LoopArrow}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{LoopArrow.pdf}}}}}  
\newcommand{\LoopArrowx}[1]{\mathrel{\ooalign{$\LoopArrow_{\mathrel{\raisebox{4pt}{$\scriptstyle{#1}$}}}$
  }}}
  
  
\newcommand{\OmegaLoop}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{OmegaLoop.pdf}}}}}  
\newcommand{\OmegaLoopx}[1]{\mathrel{\ooalign{$\OmegaLoop_{\mathrel{\raisebox{4pt}{$\scriptstyle{#1}$}}}$
  }}}



\newcommand{\TubeElementx}[3]{\mathrel{\ooalign{$\TubeElement$\cr
  \hidewidth\raise-3.55ex\hbox{$\scriptstyle{#1}\mkern62mu$}\cr
        \hidewidth\raise-6.3ex\hbox{$\scriptstyle{#2}\mkern61mu$}\cr
                \hidewidth\raise-0.3ex\hbox{$\scriptstyle{#3}\mkern60mu$}\cr
          \hidewidth\raise0ex\hbox{$\scale{1.5}{\VerticalSpace}$}\cr
  }}}

\newcommand{\IdempotentMTCNoLabel}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{IdempotentMTC.pdf}}}}}
\newcommand{\IdempBraid}[5]{\mathrel{\ooalign{$\IdempotentMTCNoLabel$\cr
  \hidewidth\raise-4.3ex\hbox{$\scriptstyle{#1}\mkern78mu$}\cr
    \hidewidth\raise-4.3ex\hbox{$\scriptstyle{#2}\mkern43mu$}\cr
        \hidewidth\raise-6.3ex\hbox{$\scriptstyle{#3}\mkern61mu$}\cr
        \hidewidth\raise4.1ex\hbox{$\scriptstyle{#4}\mkern25mu$}\cr
                \hidewidth\raise0ex\hbox{$\scriptstyle{#5}\mkern60mu$}\cr
          \hidewidth\raise0ex\hbox{$\scale{1.5}{\VerticalSpace}$}\cr
  }}}
  
\newcommand{\TorusBasisMTCNoLabel}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{TorusBasisMTC.pdf}}}}}
\newcommand{\TorusBraidBasis}[6]{\mathrel{\ooalign{$\TorusBasisMTCNoLabel$\cr
  \hidewidth\raise-4.3ex\hbox{$\scriptstyle{#1}\mkern78mu$}\cr
    \hidewidth\raise-4.3ex\hbox{$\scriptstyle{#2}\mkern40mu$}\cr
        \hidewidth\raise-6.3ex\hbox{$\scriptstyle{#3}\mkern61mu$}\cr
        \hidewidth\raise4.1ex\hbox{$\scriptstyle{#4}\mkern25mu$}\cr
                \hidewidth\raise0ex\hbox{$\scriptstyle{#5}\mkern58mu$}\cr
                                \hidewidth\raise4.7ex\hbox{$\scriptstyle{#6}\mkern0mu$}\cr
          \hidewidth\raise0ex\hbox{$\scale{1.5}{\VerticalSpace}$}\cr
  }}}
  
  \newcommand{\tcca}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{tcca.pdf}}}}}
    \newcommand{\tccb}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{tccb.pdf}}}}}
     \newcommand{\tccc}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{tccc.pdf}}}}}
      \newcommand{\tccd}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{tccd.pdf}}}}}
   
  
 


\newcommand{\TorusBasisMTCdl}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{TorusBasisMTCdl.pdf}}}}}
\newcommand{\TorusBasisMTCdr}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{TorusBasisMTCdr.pdf}}}}}
\newcommand{\TorusBasisMTCdd}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{TorusBasisMTCdd.pdf}}}}}
 
 \newcommand{\TorusBraidBasisd}[7]{\mathrel{\ooalign{$#7$\cr
  \hidewidth\raise-4.3ex\hbox{$\scriptstyle{#1}\mkern78mu$}\cr
    \hidewidth\raise-4.3ex\hbox{$\scriptstyle{#2}\mkern40mu$}\cr
        \hidewidth\raise-6.3ex\hbox{$\scriptstyle{#3}\mkern61mu$}\cr
        \hidewidth\raise4.1ex\hbox{$\scriptstyle{#4}\mkern25mu$}\cr
                \hidewidth\raise0ex\hbox{$\scriptstyle{#5}\mkern58mu$}\cr
                                \hidewidth\raise4.7ex\hbox{$\scriptstyle{#6}\mkern0mu$}\cr
          \hidewidth\raise0ex\hbox{$\scale{1.5}{\VerticalSpace}$}\cr
  }}}



\newcommand{\TaddownTubeNoLabel}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{TaddownTube.pdf}}}}}
\newcommand{\TadupTubeNoLabel}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{TadupTube.pdf}}}}}
\newcommand{\hTube}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{hTube.pdf}}}}}
\newcommand{\tTube}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{tTube.pdf}}}}}
\newcommand{\eTube}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{eTube.pdf}}}}}
\newcommand{\vTube}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{vTube.pdf}}}}}


\newcommand{\dota}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{dota.pdf}}}}}
\newcommand{\dotb}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{dotb.pdf}}}}}
\newcommand{\dotc}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{dotc.pdf}}}}}

\newcommand{\XTubeNoLabel}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{XTube.pdf}}}}}
\newcommand{\XTube}[2]{\mathrel{\ooalign{$\XTubeNoLabel$\cr
  \hidewidth\raise-2.5ex\hbox{$\scriptstyle{#2}\mkern28mu$}\cr
    \hidewidth\raise-2.9ex\hbox{$\scriptstyle{#1}\mkern50mu$}\cr
  }}}


\newcommand{\TaddownTube}[1]{\mathrel{\ooalign{$\TaddownTubeNoLabel$\cr
    \hidewidth\raise-2.8ex\hbox{$\scriptstyle{#1}\mkern30mu$}\cr
  }}}
  \newcommand{\TadupTube}[1]{\mathrel{\ooalign{$\TadupTubeNoLabel$\cr
    \hidewidth\raise-2.6ex\hbox{$\scriptstyle{#1}\mkern30mu$}\cr
  }}}
  
  \newcommand{\TorusNoLabels}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{TorusNoLabels.pdf}}}}}
\newcommand{\TorusNoLabelsx}[1]{\mathrel{\ooalign{$\TorusNoLabels$\cr
    \hidewidth\raise-2.8ex\hbox{$\scriptstyle{#1}\mkern30mu$}\cr
  }}}

\newcommand{\VerticalSpace}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{VerticalSpace.pdf}}}}}

\newcommand{\AddDat}[3]{\mathrel{\ooalign{  $#1$\cr
  \hidewidth\raise0ex\hbox{$\scriptstyle{#2}\mkern38mu$}\cr
  \hidewidth\raise0ex\hbox{${#3}\mkern0mu$}\cr
  \hidewidth\raise0ex\hbox{$\VerticalSpace$}\cr
  }}}
  
  \newcommand{\AddDatTorus}[3]{\mathrel{\ooalign{  $#1$\cr
  \hidewidth\raise0ex\hbox{$\scriptstyle{#2}\mkern38mu$}\cr
  \hidewidth\raise3.8ex\hbox{$\scriptstyle{#3}\mkern0mu$}\cr
  \hidewidth\raise0ex\hbox{$\VerticalSpace$}\cr
  }}}
  
    \newcommand{\AddDatTorusDot}[4]{\mathrel{\ooalign{  $#1$\cr
  \hidewidth\raise0ex\hbox{$\scriptstyle{#2}\mkern38mu$}\cr
  \hidewidth\raise3.8ex\hbox{$\scriptstyle{#3}\mkern0mu$}\cr
  \hidewidth\raise0ex\hbox{${#4}\mkern0mu$}\cr
  \hidewidth\raise0ex\hbox{$\VerticalSpace$}\cr
  }}}
  
  
  
 
  
   
  \newcommand{\TubeProductCoefficienta}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{TubeProductCoefficienta.pdf}}}}}
  \newcommand{\TubeProductCoefficientb}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{TubeProductCoefficientb.pdf}}}}}
  
    \newcommand{\ThetaSymbol}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{Theta.pdf}}}}}
 
   \newcommand{\ThetaSymbolx}[1]{\mathrel{\ooalign{$\ThetaSymbol$\cr
      \hidewidth\raise-1.3ex\hbox{$\scriptstyle{#1} \mkern0mu$}\cr
  }}}
  
  
    
  \newcommand{\TubeProductCoefficientbx}[2]{\mathrel{\ooalign{$\TubeProductCoefficientb \;\;\; $\cr
      \hidewidth\raise-.8ex\hbox{$\scriptstyle{#1} \mkern54mu$}\cr
      \hidewidth\raise-.8ex\hbox{$\scriptstyle{#2} \mkern6mu$}\cr
  }}}
  
  \newcommand{\TubeProductCoefficientax}[5]{\mathrel{\ooalign{$\TubeProductCoefficienta$\cr
      \hidewidth\raise-4.2ex\hbox{$\scriptstyle{#1} \mkern30mu$}\cr
      \hidewidth\raise-1.8ex\hbox{$\scriptstyle{#2} \mkern30mu$}\cr
  \hidewidth\raise6.1ex\hbox{$\scriptstyle{#3}\mkern44mu$}\cr
  \hidewidth\raise2.05ex\hbox{$\scriptstyle{#4}\mkern82mu$}\cr
    \hidewidth\raise3.2ex\hbox{$\scriptstyle{#5}\mkern3mu$}\cr
  }}}

  

  
    
\newcommand{\tubex}[8]{#1 \left(\substack{#8\\ \\ #5\\ } \; \substack{#4\\ #3\\ #2\\ }\; \substack{ #7 \\ #6} \right)}


\newcommand{\FubesXs}{\mathord{\vcenter{\hbox{\includegraphics[scale=1,angle=90,origin=c]{OneLine.pdf}}}}}
\newcommand{\FubesdXs}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{FubesdXs.pdf}}}}}

\newcommand{\FubessX}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{FubessX.pdf}}}}}
\newcommand{\FubessdX}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{FubessdX.pdf}}}}}

\newcommand{\FubesdXsA}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{FubesdXsA.pdf}}}}}
\newcommand{\FubessXA}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{FubessXA.pdf}}}}}
\newcommand{\FubessdXA}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{FubessdXA.pdf}}}}}


\newcommand{\FubesXsA}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{FubesXshA.pdf}}}}}
\newcommand{\FubesXsa}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{FubesXsa.pdf}}}}}
\newcommand{\FubesXsb}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{FubesXsb.pdf}}}}}
\newcommand{\FubesXsc}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{FubesXsc.pdf}}}}}


\newcommand{\FubesXscA}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{FubeXscA.pdf}}}}}
\newcommand{\FubesXsbA}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{FubeXsbA.pdf}}}}}
\newcommand{\FubesXsaA}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{FubeXsaA.pdf}}}}}






\newcommand{\qqo}{\mathord{\vcenter{\hbox{\includegraphics[scale=.4]{qq1.pdf}}}}}
\newcommand{\qtqo}{\mathord{\vcenter{\hbox{\includegraphics[scale=.4]{qtq1.pdf}}}}}
\newcommand{\qqto}{\mathord{\vcenter{\hbox{\includegraphics[scale=.4]{qqt1.pdf}}}}}
\newcommand{\qtqto}{\mathord{\vcenter{\hbox{\includegraphics[scale=.4]{qtqt1.pdf}}}}}
\newcommand{\qqm}{\mathord{\vcenter{\hbox{\includegraphics[scale=.4]{qqm.pdf}}}}}
\newcommand{\qtqm}{\mathord{\vcenter{\hbox{\includegraphics[scale=.4]{qtqm.pdf}}}}}
\newcommand{\qqtm}{\mathord{\vcenter{\hbox{\includegraphics[scale=.4]{qqtm.pdf}}}}}
\newcommand{\qtqtm}{\mathord{\vcenter{\hbox{\includegraphics[scale=.4]{qtqtm.pdf}}}}}

\newcommand{\PantsPAP}{\mathord{\vcenter{\hbox{\includegraphics[scale=0.7]{PantsPAP.pdf}}}}}
\newcommand{\PantsPAsP}{\mathord{\vcenter{\hbox{\includegraphics[scale=0.7]{PantsPAsP.pdf}}}}}

\newcommand{\PantsPsdAP}{\mathord{\vcenter{\hbox{\includegraphics[scale=0.7]{PantsPsdAP.pdf}}}}}
\newcommand{\PantsPsdAsP}{\mathord{\vcenter{\hbox{\includegraphics[scale=0.7]{PantsPsdAsP.pdf}}}}}



\newcommand{\PantsPPA}{\mathord{\vcenter{\hbox{\includegraphics[scale=0.7]{PantsPPA.pdf}}}}}
\newcommand{\PantsPPAs}{\mathord{\vcenter{\hbox{\includegraphics[scale=0.7]{PantsPPAs.pdf}}}}}

\newcommand{\PantsAsAshAsvt}{\mathord{\vcenter{\hbox{\includegraphics[scale=0.7]{PantsAsAshAsvt.pdf}}}}}
\newcommand{\PantsAstAAs}{\mathord{\vcenter{\hbox{\includegraphics[scale=0.7]{PantsAstAAs.pdf}}}}}

\newcommand{\PantsAstAshAs}{\mathord{\vcenter{\hbox{\includegraphics[scale=0.7]{PantsAstAshAs.pdf}}}}}
\newcommand{\PantsAsAshAs}{\mathord{\vcenter{\hbox{\includegraphics[scale=0.7]{PantsAsAshAs.pdf}}}}}
\newcommand{\PantsAsAAs}{\mathord{\vcenter{\hbox{\includegraphics[scale=0.7]{PantsAsAAs.pdf}}}}}

\newcommand{\Pantssvtsvtsh}{\mathord{\vcenter{\hbox{\includegraphics[scale=.7,origin=c]{Pantssvtsvtsh.pdf}}}}}
\newcommand{\Pantssvtsvsh}{\mathord{\vcenter{\hbox{\includegraphics[scale=.7,angle=0,origin=c]{Pantssvtsvsh.pdf}}}}}
\newcommand{\Pantssvsvtsh}{\mathord{\vcenter{\hbox{\includegraphics[scale=.7,angle=0,origin=c]{Pantssvsvtsh.pdf}}}}}
\newcommand{\Pantssvsvsh}{\mathord{\vcenter{\hbox{\includegraphics[scale=.7,angle=0,origin=c]{Pantssvsvsh.pdf}}}}}
\newcommand{\PantssvtsvtX}{\mathord{\vcenter{\hbox{\includegraphics[scale=.7,angle=0,origin=c]{PantssvtsvtX.pdf}}}}}
\newcommand{\PantssvtsvX}{\mathord{\vcenter{\hbox{\includegraphics[scale=.7,angle=0,origin=c]{PantssvtsvX.pdf}}}}}

\newcommand{\PantssvsvtX}{\mathord{\vcenter{\hbox{\includegraphics[scale=.7,angle=0,origin=c]{PantssvsvtX.pdf}}}}}
\newcommand{\PantssvsvX}{\mathord{\vcenter{\hbox{\includegraphics[scale=.7,angle=0,origin=c]{PantssvsvX.pdf}}}}}

\newcommand{\PantssvtXsvd}{\mathord{\vcenter{\hbox{\includegraphics[scale=.7,angle=0,origin=c]{PantssvtXsvd.pdf}}}}}
\newcommand{\Pantssvtshsvd}{\mathord{\vcenter{\hbox{\includegraphics[scale=.7,angle=0,origin=c]{Pantssvtshsvd.pdf}}}}}
\newcommand{\Pantssvshsvd}{\mathord{\vcenter{\hbox{\includegraphics[scale=.7,angle=0,origin=c]{Pantssvshsvd.pdf}}}}}
\newcommand{\PantssvXsvd}{\mathord{\vcenter{\hbox{\includegraphics[scale=.7,angle=0,origin=c]{PantssvXsvd.pdf}}}}}

\newcommand{\PantssvtXsvt}{\mathord{\vcenter{\hbox{\includegraphics[scale=.7,angle=0,origin=c]{PantssvtXsvt.pdf}}}}}
\newcommand{\PantssvXsvt}{\mathord{\vcenter{\hbox{\includegraphics[scale=.7,angle=0,origin=c]{PantssvXsvt.pdf}}}}}

\newcommand{\PantssvtXsv}{\mathord{\vcenter{\hbox{\includegraphics[scale=.7,angle=0,origin=c]{PantssvtXsv.pdf}}}}}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\PantssvXsvdA}{\mathord{\vcenter{\hbox{\includegraphics[scale=.8,angle=0,origin=c]{PantssvXsvdA.pdf}}}}}
\newcommand{\PantssvtXsvdA}{\mathord{\vcenter{\hbox{\includegraphics[scale=.8,angle=0,origin=c]{PantssvtXsvdA.pdf}}}}}
\newcommand{\PantssvtshsvdA}{\mathord{\vcenter{\hbox{\includegraphics[scale=.8,angle=0,origin=c]{PantssvtshsvdA.pdf}}}}}
\newcommand{\PantssvshsvdA}{\mathord{\vcenter{\hbox{\includegraphics[scale=.8,angle=0,origin=c]{PantssvshsvdA.pdf}}}}}
\newcommand{\PantsPsdAsPA}{\mathord{\vcenter{\hbox{\includegraphics[scale=.8,angle=0,origin=c]{PantsPsdAsPA.pdf}}}}}
\newcommand{\PantsPsdAPA}{\mathord{\vcenter{\hbox{\includegraphics[scale=.8,angle=0,origin=c]{PantsPsdAPA.pdf}}}}}
\newcommand{\PantsPPAsA}{\mathord{\vcenter{\hbox{\includegraphics[scale=.8,angle=0,origin=c]{PantsPPAsA.pdf}}}}}
\newcommand{\PantsPPAA}{\mathord{\vcenter{\hbox{\includegraphics[scale=.8,angle=0,origin=c]{PantsPPAA.pdf}}}}}
\newcommand{\PantsPAsPA}{\mathord{\vcenter{\hbox{\includegraphics[scale=.8,angle=0,origin=c]{PantsPAsPA.pdf}}}}}
\newcommand{\PantsPAPA}{\mathord{\vcenter{\hbox{\includegraphics[scale=.8,angle=0,origin=c]{PantsPAPA.pdf}}}}}
\newcommand{\PantsAstAAsA}{\mathord{\vcenter{\hbox{\includegraphics[scale=.8,angle=0,origin=c]{PantsAstAAsA.pdf}}}}}
\newcommand{\PantsAsAshAsvtA}{\mathord{\vcenter{\hbox{\includegraphics[scale=.8,angle=0,origin=c]{PantsAsAshAsvtA.pdf}}}}}
\newcommand{\PantsNNda}{\mathord{\vcenter{\hbox{\includegraphics[scale=.8,angle=0,origin=c]{PantsNNda.pdf}}}}}
\newcommand{\PantsNNd}{\mathord{\vcenter{\hbox{\includegraphics[scale=.8,angle=0,origin=c]{PantsNNd.pdf}}}}}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newcommand{\TwoLinedotdot}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.5,angle=0,origin=c]{TwoLinedotdot.pdf}}}}}

\newcommand{\Id}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.5,angle=0,origin=c]{Id.pdf}}}}}

\newcommand{\CupSigmadot}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.5,angle=0,origin=c]{Cupdot.pdf}}}}}

\newcommand{\CupSigma}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.5,angle=0,origin=c]{Cup.pdf}}}}}

\newcommand{\StaggaredGSOdd}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.5,angle=0,origin=c]{StaggaredGSOdd.pdf}}}}}
\newcommand{\StaggaredGSEven}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.5,angle=0,origin=c]{StaggeredGSEven.pdf}}}}}

\newcommand{\StaggaredGSEvenR}{\mathord{\vcenter{\hbox{\reflectbox{\includegraphics[scale=1.5,angle=0,origin=c]{StaggeredGSEven.pdf}}}}}}





\newcommand{\VxsdsY}{\mathord{\vcenter{\hbox{\includegraphics[scale=0.3,angle=0,origin=c]{Vxsds.pdf}}}}}
\newcommand{\VsdxsY}{\mathord{\vcenter{\hbox{\includegraphics[scale=0.3,angle=0,origin=c]{Vsdxs.pdf}}}}}
\newcommand{\VtssdxY}{\mathord{\vcenter{\hbox{\includegraphics[scale=0.3,angle=0,origin=c]{Vtssdx.pdf}}}}}

\newcommand{\Vssdx}{\mathord{\vcenter{\hbox{\includegraphics[scale=0.3,angle=0,origin=c]{Vssdx.pdf}}}}}
\newcommand{\Vxsds}{\mathord{\vcenter{\hbox{\reflectbox{\includegraphics[scale=0.3,angle=0,origin=c]{Vssdx.pdf}}}}}}

\newcommand{\Vssx}{\mathord{\vcenter{\hbox{\includegraphics[scale=0.3,angle=0,origin=c]{Vssx.pdf}}}}}
\newcommand{\Vxss}{\mathord{\vcenter{\hbox{\reflectbox{\includegraphics[scale=0.3,angle=0,origin=c]{Vssx.pdf}}}}}}

\newcommand{\Vsxs}{\mathord{\vcenter{\hbox{\includegraphics[scale=0.3,angle=0,origin=c]{Vsxs.pdf}}}}}
\newcommand{\Vsxsd}{\mathord{\vcenter{\hbox{\includegraphics[scale=0.3,angle=0,origin=c]{Vsxsd.pdf}}}}}

\newcommand{\VsxsY}{\mathord{\vcenter{\hbox{\includegraphics[scale=0.3,angle=180,origin=c]{Vsxs.pdf}}}}}
\newcommand{\VssxY}{\mathord{\vcenter{\hbox{\includegraphics[scale=0.3,angle=180,origin=c]{Vssx.pdf}}}}}
\newcommand{\VxssY}{\mathord{\vcenter{\hbox{\reflectbox{\includegraphics[scale=0.3,angle=180,origin=c]{Vssx.pdf}}}}}}

\newcommand{\PsiFermion}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.5]{PsiFermion.pdf}}}}}
\newcommand{\PsiFermionTwist}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.5]{PsiFermionTwist.pdf}}}}}

\newcommand{\TwoFermion}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.5]{TwoFermion.pdf}}}}}
\newcommand{\TwoFermionExchange}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.5]{TwoFermionExchange.pdf}}}}}
\newcommand{\TwoFermionNoLabels}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.5]{TwoFermion_nolabels.pdf}}}}}
\newcommand{\TwoFermionExchangeNoLabels}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.5]{TwoFermionExchange_nolabels.pdf}}}}}


\newcommand{\Spin}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.5]{Spin.pdf}}}}}
\newcommand{\PsiIdentity}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.5]{PsiIdentity.pdf}}}}}

\newcommand{\TwoPsiExchange}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.5]{TwoPsiExchange.pdf}}}}}
\newcommand{\TwoPsiIdentity}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.5]{TwoPsiIdentity.pdf}}}}}


\newcommand{\PsiEnd}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.5]{PsiEnd.pdf}}}}}
\newcommand{\PsiEndExchange}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.5]{PsiEndExchange.pdf}}}}}

\newcommand{\DotSlidea}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{DotSlidea.pdf}}}}}
\newcommand{\DotSlideb}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{DotSlideb.pdf}}}}}
\newcommand{\DotSlidec}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{DotSlidec.pdf}}}}}
\newcommand{\DotSlided}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{DotSlided.pdf}}}}}

\newcommand{\QCapDotL}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{QDotslide.pdf}}}}}
\newcommand{\QCupDotR}{\mathord{\vcenter{\hbox{\includegraphics[scale=1,angle=180,origin=c]{QDotslide.pdf}}}}}
\newcommand{\QCapDotR}{\mathord{\vcenter{\hbox{\reflectbox{\includegraphics[scale=1]{QDotslide.pdf}}}}}}
\newcommand{\QCupDotL}{\mathord{\vcenter{\hbox{\reflectbox{\includegraphics[scale=1,angle=180,origin=c]{QDotslide.pdf}}}}}}

\newcommand{\TwodotCap}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{TwodotCap.pdf}}}}}
\newcommand{\TwodotCup}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{TwodotCup.pdf}}}}}


\newcommand{\Bpa}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{Bpa.pdf}}}}}
\newcommand{\Bpb}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{Bpb.pdf}}}}}
\newcommand{\Bpc}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{Bpc.pdf}}}}}
\newcommand{\Bpd}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{Bpd.pdf}}}}}
\newcommand{\Bpe}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{Bpe.pdf}}}}}
\newcommand{\Bpf}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{Bpf.pdf}}}}}
\newcommand{\Bpg}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{Bpg.pdf}}}}}
\newcommand{\Bph}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{Bph.pdf}}}}}
\newcommand{\Bpi}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{Bpi.pdf}}}}}

\newcommand{\LocalRelationLeft}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{LocalRelationLeft.pdf}}}}}
\newcommand{\LocalRelationRight}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{LocalRelationRight.pdf}}}}}
\newcommand{\LocalRelationUp}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{LocalRelationUp.pdf}}}}}
\newcommand{\LocalRelationDown}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{LocalRelationDown.pdf}}}}}

\newcommand{\PlaquettePrime}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{PlaquettePrime.pdf}}}}}

\newcommand{\ebox}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{ycenterNoLabel.pdf}}}}}
\newcommand{\ex}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{exNoLabel.pdf}}}}}
\newcommand{\ey}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{eyNoLabel.pdf}}}}}
\newcommand{\eone}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{eoneNoLabel.pdf}}}}}
\newcommand{\egeneral}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{egeneral.pdf}}}}}

\newcommand{\CTwoFusion}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{CTwoFusion.pdf}}}}}
\newcommand{\IdempEnd}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{IdempEnd.pdf}}}}}

\newcommand{\qqmbraida}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{qqmbraida.pdf}}}}}
\newcommand{\qqmbraidb}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{qqmbraidb.pdf}}}}}
\newcommand{\qqmbraidc}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{qqmbraidc.pdf}}}}}

\newcommand{\mmmbraida}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{mmmbraida.pdf}}}}}
\newcommand{\mmmbraidb}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{mmmbraidb.pdf}}}}}
\newcommand{\mmmbraidc}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{mmmbraidc.pdf}}}}}


\newcommand{\qqmbraidaOdd}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{qqmbraidaOdd.pdf}}}}}
\newcommand{\qqmbraidbOdd}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{qqmbraidbOdd.pdf}}}}}
\newcommand{\qqmbraidcOdd}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{qqmbraidcOdd.pdf}}}}}

\newcommand{\qqmbraidOdda}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{qqmbraidOdda.pdf}}}}}
\newcommand{\qqmbraidOddb}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{qqmbraidOddb.pdf}}}}}
\newcommand{\qqmbraidOddc}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{qqmbraidOddc.pdf}}}}}
\newcommand{\qqmbraidOddd}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{qqmbraidOddd.pdf}}}}}


%%
%%
\usepackage{leftidx}
\newcommand{\overunderset}[3]{\overset{#3}{\underset{#2}{#1}}}

  \newcommand{\halfbraid}[4]{\mathrel{\ooalign{
  \vphantom{$\Big|^2$}  
  $\leftidx{_{#2}}{\overunderset{#1}{#3}{#3}}{^{#2}}$\cr
   \hidewidth \hbox{$\scriptstyle{#4}\mkern32mu$}\cr
     \hidewidth\raise0ex\hbox{$\scale{1.5}{\VerticalSpace}$}\cr
 }}}

 
  \newcommand{\halfbraidHex}[5]{\mathrel{\ooalign{
  \vphantom{$\Big|^2$}  
  $\leftidx{_{#2}}{\overunderset{#1}{#3}{#4 \quad \; \; \; #5}}{^{#2}}$\cr
     \hidewidth\raise0ex\hbox{$\scale{2.5}{\VerticalSpace}$}\cr
 }}}
%%
%%



\newcommand{\HalfBraidHexa}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{HalfBraidHexa.pdf}}}}}
\newcommand{\HalfBraidHexb}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{HalfBraidHexb.pdf}}}}}
 



\newcommand{\TubeXb}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{TubeXb.pdf}}}}}
\newcommand{\TubeXa}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{TubeXa.pdf}}}}}
\newcommand{\TubeXtwist}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{TubeXtwist.pdf}}}}}
\newcommand{\Tubeidx}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{Tubeidx.pdf}}}}}
\newcommand{\Tubexloop}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{Tubexloop.pdf}}}}}
\newcommand{\TubeEmpty}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{TubeEmpty.pdf}}}}}

\newcommand{\xOdd}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{xOdd.pdf}}}}}
\newcommand{\tOdd}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{tOdd.pdf}}}}}
\newcommand{\vOdd}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{vOdd.pdf}}}}}
\newcommand{\hOdd}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{hOdd.pdf}}}}}

\newcommand{\TorusBasisa}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{TorusBasisa.pdf}}}}}
\newcommand{\TorusBasisb}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{TorusBasisb.pdf}}}}}


\newcommand{\scale}[2]{\scalebox{#1}{$#2$}}



\newcommand{\TubeXbv}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{TubeXbv.pdf}}}}}
\newcommand{\TubeXav}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{TubeXav.pdf}}}}}
\newcommand{\TubeXtwistv}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{TubeXtwistv.pdf}}}}}
\newcommand{\Tubeidxv}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{Tubeidxv.pdf}}}}}
\newcommand{\TubeEmptyv}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{TubeEmptyv.pdf}}}}}



\newcommand{\TorusQQQa}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{TorusQQQa.pdf}}}}}
\newcommand{\TorusQQQb}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{TorusQQQb.pdf}}}}}
\newcommand{\TorusQQQc}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{TorusQQQc.pdf}}}}}
\newcommand{\TorusQQQd}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{TorusQQQd.pdf}}}}}

\newcommand{\VSa}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{VSa.pdf}}}}}
\newcommand{\VSb}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{VSb.pdf}}}}}
\newcommand{\VSc}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{VSc.pdf}}}}}
\newcommand{\VSd}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{VSd.pdf}}}}}


\newcommand{\VNoLabel}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{VNoLabel.pdf}}}}}
\newcommand{\VVNoLabel}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{VVNolabel.pdf}}}}}

\newcommand{\DotX}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{DotX.pdf}}}}}
\newcommand{\DotY}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{DotY.pdf}}}}}
\newcommand{\DotZ}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{DotZ.pdf}}}}} 

\newcommand{\VVDotX}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{VVDotX.pdf}}}}}
\newcommand{\VVDotY}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{VVDotY.pdf}}}}}
\newcommand{\VVDotZ}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{VVDotZ.pdf}}}}} 

\newcommand{\VertexInnerProduct}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{VertexInnerProduct.pdf}}}}}


\newcommand{\EdgeVecNoLabel}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{EdgeVec.pdf}}}}}
\newcommand{\EdgeVec}[2]{\leftidx{_{#1\; }}{\EdgeVecNoLabel}{_{\; #2}}}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%



\newcommand{\PitchForkNoLabel}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{PitchForkNoLabel.pdf}}}}}
\newcommand{\PitchForkNoLabelas}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{PitchForkNoLabeladual.pdf}}}}}

\newcommand{\PitchForkWithEdge}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{PitchForkWithEdge.pdf}}}}}

\newcommand{\NonpitchforkNoLabel}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{Nonpitchfork.pdf}}}}}
%\newcommand{\Nonpitchfork}[4]{\leftidx{_{}^{#1}}{\underset{#3}{\NonpitchforkNoLabel}}{^{#2}}}
\newcommand{\NonpitchforkNoVertex}[3]{\overset{#1 \quad \quad  \;\; #2}{\underset{#3}{\NonpitchforkNoLabel}}}

  \newcommand{\Nonpitchfork}[4]{\mathrel{\ooalign{$\NonpitchforkNoVertex{#1}{#2}{#3}$\cr
      \hidewidth\raise0ex\hbox{$\scriptstyle{#4} \mkern18mu$}\cr
  }}}


\newcommand{\PitchFork}[4]{\overset{#2}{\leftidx{_{}^{#1}}{\underset{#4}{\PitchForkNoLabel}}{^{#3}}}}
\newcommand{\PitchForkas}[4]{\underset{#4}{\overset{#2}{\leftidx{_{}^{#1}}{\PitchForkNoLabelas}{^{#3}}}}}


\newcommand{\NonPitchforkDotDisplacedNoLabel}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{NonPitchforkDotDisplaced.pdf}}}}}
%\newcommand{\Nonpitchfork}[4]{\leftidx{_{}^{#1}}{\underset{#3}{\NonpitchforkNoLabel}}{^{#2}}}
\newcommand{\NonPitchforkDotDisplacedNoVertex}[3]{\overset{#1 \quad \quad  \;\; #2}{\underset{#3}{\NonPitchforkDotDisplacedNoLabel}}}

  \newcommand{\NonPitchforkDotDisplaced}[4]{\mathrel{\ooalign{$\NonPitchforkDotDisplacedNoVertex{#1}{#2}{#3}$\cr
      \hidewidth\raise0ex\hbox{$\scriptstyle{#4} \mkern13mu$}\cr
      \hidewidth\raise0ex\hbox{$\scale{1.5}{\VerticalSpace}$}\cr
  }}}

\newcommand{\NonPitchforkDotNoLabel}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{NonPitchforkDot.pdf}}}}}
%\newcommand{\Nonpitchfork}[4]{\leftidx{_{}^{#1}}{\underset{#3}{\NonpitchforkNoLabel}}{^{#2}}}
\newcommand{\NonPitchforkDotNoVertex}[3]{\overset{#1 \quad \quad  \;\; #2}{\underset{#3}{\NonPitchforkDotNoLabel}}}

  \newcommand{\NonPitchforkDot}[4]{\mathrel{\ooalign{$\NonPitchforkDotNoVertex{#1}{#2}{#3}$\cr
      \hidewidth\raise0ex\hbox{$\scriptstyle{#4} \mkern13mu$}\cr
            \hidewidth\raise0ex\hbox{$\scale{1.5}{\VerticalSpace}$}\cr
  }}}

\newcommand{\fPLPR}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{fPLPR.pdf}}}}}
\newcommand{\fstar}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{fstar.pdf}}}}}

\newcommand{\Tensora}{\mathord{\vcenter{\hbox{\includegraphics[scale=.7]{Tensora.pdf}}}}}
\newcommand{\Tensorb}{\mathord{\vcenter{\hbox{\includegraphics[scale=.7]{Tensorb.pdf}}}}}
\newcommand{\Tensorc}{\mathord{\vcenter{\hbox{\includegraphics[scale=.7]{Tensorc.pdf}}}}}


\newcommand{\Tensoraa}{\mathord{\vcenter{\hbox{\includegraphics[scale=.7]{Tensoraa.pdf}}}}}
\newcommand{\Tensorbb}{\mathord{\vcenter{\hbox{\includegraphics[scale=.7]{Tensorbb.pdf}}}}}
\newcommand{\Tensorcc}{\mathord{\vcenter{\hbox{\includegraphics[scale=.7]{Tensorcc.pdf}}}}}





\newcommand{\PivotYa}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{PivotYa.pdf}}}}}
\newcommand{\PivotYb}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{PivotYb.pdf}}}}}


\newcommand{\Fusionspacea}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{Fusionspacea.pdf}}}}}
\newcommand{\Fusionspaceb}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{Fusionspaceb.pdf}}}}}
\newcommand{\Fusionspacec}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{Fusionspacec.pdf}}}}}


\newcommand{\TensorProducta}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{TensorProducta.pdf}}}}}
\newcommand{\TensorProductb}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{TensorProductb.pdf}}}}}
\newcommand{\TensorProductc}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{TensorProductc.pdf}}}}}
\newcommand{\TensorProductd}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{TensorProductd.pdf}}}}}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

 
     \newcommand{\VNoLabelDot}[1]{\mathrel{\ooalign{  $\VNoLabel$\cr
  \hidewidth\raise0ex\hbox{${#1}\mkern0mu$}\cr 
  }}}
  
       \newcommand{\VVNoLabelDot}[1]{\mathrel{\ooalign{  $\VVNoLabel$\cr
  \hidewidth\raise0ex\hbox{${#1}\mkern0mu$}\cr 
  }}}
 
    \newcommand{\Vx}[4]{\mathrel{\ooalign{  $\overset{#1\kern2.8em #2}{\underset{#3}{\VNoLabel}}$\cr
  \hidewidth\raise0ex\hbox{${#4}\mkern12mu$}\cr 
  }}}

    \newcommand{\VDotx}[5]{\mathrel{\ooalign{  $\overset{#1\kern2.8em #2}{\underset{#3}{\VNoLabelDot{#5}}}$\cr
  \hidewidth\raise0ex\hbox{${#4}\mkern12mu$}\cr 
       \hidewidth\raise0ex\hbox{$\scale{1.1}{\VerticalSpace}$}\cr
  }}}
  
      \newcommand{\VVDotx}[3]{\mathrel{\ooalign{  $\VVNoLabelDot{#3}$\cr
  \hidewidth\raise-.7ex\hbox{${#2}\mkern-8mu$}\cr 
    \hidewidth\raise-.7ex\hbox{${#1}\mkern65mu$}\cr 
       \hidewidth\raise0ex\hbox{$\scale{1.1}{\VerticalSpace}$}\cr
  }}}
  



\newcommand{\Vxyxxa}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{Vxyxxa.pdf}}}}}
\newcommand{\Vxyxxb}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{Vxyxxb.pdf}}}}}
\newcommand{\Vyxxxa}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{Vyxxxa.pdf}}}}}
\newcommand{\Vyxxxb}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{Vyxxxb.pdf}}}}}
\newcommand{\Vxxyxa}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{Vxxyxa.pdf}}}}}
\newcommand{\Vxxyxb}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{Vxxyxb.pdf}}}}}

\newcommand{\Vxxxa}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{Vxxxa.pdf}}}}}


\newcommand{\Vxxxya}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{Vxxxya.pdf}}}}}
\newcommand{\Vxxxyb}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{Vxxxyb.pdf}}}}}

\newcommand{\Vxxxva}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{Vxxxva.pdf}}}}}
\newcommand{\Vxxxvb}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{Vxxxvb.pdf}}}}}

\newcommand{\VSeven}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{VSeven.pdf}}}}}

\newcommand{\Vrhorhorhoodd}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{Vrhorhorhoodd.pdf}}}}}
\newcommand{\Vrhorhorho}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{Vrhorhorho.pdf}}}}}
\newcommand{\PivotEsixOdd}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{PivotE6Odd.pdf}}}}}
\newcommand{\PivotEsixEven}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{PivotE6even.pdf}}}}}
 
 \newcommand{\EsixDynkin}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{EsixDynkin.pdf}}}}}
 \newcommand{\EsixCondensePsi}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{EsixCondensePsi.pdf}}}}}

 \newcommand{\AThreeDynkin}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{AThreeDynkin.pdf}}}}}
  \newcommand{\CTwoDynkin}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{CTwoDynkin.pdf}}}}} 
 
 
 \newcommand{\halfesix}{\frac{1}{2}\text{E}_6}
 \newcommand{\SphereTube}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.5]{SphereTube.pdf}}}}}
  \newcommand{\SphereTubeTube}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.5]{SphereTubeTube.pdf}}}}}
    \newcommand{\TubeMultiplyTopCoefficent}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.5]{TubeMultiplyTopCoefficent.pdf}}}}}
        \newcommand{\TubeMultiplyBottomCoefficient}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.5]{TubeMultiplyBottomCoefficient.pdf}}}}}
  
 \newcommand{\TTorus}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{TTorus.pdf}}}}}
 

\newcommand{\Idx}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{Idx.pdf}}}}}
\newcommand{\Idy}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{Idy.pdf}}}}}
\newcommand{\Kappay}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{Kappay.pdf}}}}}
\newcommand{\Kappax}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{Kappax.pdf}}}}}

\newcommand{\Vxxy}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{Vxxy.pdf}}}}}
\newcommand{\Vxxydual}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{Vxxydual.pdf}}}}}

\newcommand{\xxypivota}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{xxypivota.pdf}}}}}
\newcommand{\xxypivotb}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{xxypivotb.pdf}}}}}
\newcommand{\xxypivotadual}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{xxypivotadual.pdf}}}}}
\newcommand{\xxypivotbdual}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{xxypivotbdual.pdf}}}}}


\newcommand{\Vyxxdual}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{Vyxxdual.pdf}}}}}
\newcommand{\yxxpivotbdual}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{yxxpivotbdual.pdf}}}}}
\newcommand{\yxxpivotadual}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{yxxpivotadual.pdf}}}}}
\newcommand{\Vxyxdual}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{Vxyxdual.pdf}}}}}
\newcommand{\xyxpivotbdual}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{xyxpivotbdual.pdf}}}}}
\newcommand{\xyxpivotadual}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{xyxpivotadual.pdf}}}}}
\newcommand{\Vyxx}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{Vyxx.pdf}}}}}
\newcommand{\yxxpivotb}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{yxxpivotb.pdf}}}}}
\newcommand{\yxxpivota}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{yxxpivota.pdf}}}}}
\newcommand{\Vxyx}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{Vxyx.pdf}}}}}
\newcommand{\xyxpivotb}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{xyxpivotb.pdf}}}}}
\newcommand{\xyxpivota}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{xyxpivota.pdf}}}}}

\newcommand{\cupleftdot}{\mathord{\vcenter{\hbox{\includegraphics{cup_left_dot.pdf}}}}}
\newcommand{\cuprightdot}{\mathord{\vcenter{\hbox{\includegraphics{cup_right_dot.pdf}}}}}
\newcommand{\capleftdot}{\mathord{\vcenter{\hbox{\includegraphics{cap_left_dot.pdf}}}}}
\newcommand{\caprightdot}{\mathord{\vcenter{\hbox{\includegraphics{cap_right_dot.pdf}}}}}

\newcommand{\doublebeta}{\mathord{\vcenter{\hbox{\includegraphics{double_straight_beta.pdf}}}}}
\newcommand{\doublebetadots}{\mathord{\vcenter{\hbox{\includegraphics{double_straight_beta_dots.pdf}}}}}
\newcommand{\doublecups}{\mathord{\vcenter{\hbox{\includegraphics{double_cup.pdf}}}}}
\newcommand{\doublecupdots}{\mathord{\vcenter{\hbox{\includegraphics{double_cup_dots.pdf}}}}}
\newcommand{\doublecuppsi}{\mathord{\vcenter{\hbox{\includegraphics{double_cup_psi_line.pdf}}}}}

\newcommand{\Vertexa}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{Vertexa.pdf}}}}}
\newcommand{\Vertexb}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{Vertexb.pdf}}}}}
\newcommand{\Vertexc}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{Vertexc.pdf}}}}}
\newcommand{\Vertexd}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{Vertexd.pdf}}}}}
\newcommand{\Vertexe}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{Vertexe.pdf}}}}}

\newcommand{\HedgeZa}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{HedgeZa.pdf}}}}}
\newcommand{\HedgeZb}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{HedgeZb.pdf}}}}}
\newcommand{\HedgeZc}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{HedgeZc.pdf}}}}}
\newcommand{\HedgeZd}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{HedgeZd.pdf}}}}}


\newcommand{\IsingDat}[5]{\underset{{\scriptstyle{#4} \quad\; \; \; \; \scriptstyle{#5}}}{\overset{\scriptstyle{#2}  \quad\; \; \; \; \scriptstyle{#3}}{#1}}}

\newcommand{\ScriptOverSymbol}[2]{{\mathord{\ooalign{ \vphantom{$\idpsishort$}\cr\hidewidth\ensuremath{\scriptstyle{#2}}\hidewidth\cr$\vcenter{\hbox{$\scale{1}{#1}$}}$\cr
  }}}}	




\newcommand{\idorange}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{idorange.pdf}}}}}
\newcommand{\idblue}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{idblue.pdf}}}}}
\newcommand{\idblack}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{idblack.pdf}}}}}
\newcommand{\Bubblessp}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{Bubblessp.pdf}}}}}
\newcommand{\Bubblesps}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{Bubblesps.pdf}}}}}
\newcommand{\Bubbleabc}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{Bubbleabc.pdf}}}}}

\newcommand{\Vssp}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{Vssp.pdf}}}}}
\newcommand{\VppI}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{VppI.pdf}}}}}
\newcommand{\Vsps}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{Vsps.pdf}}}}}
\newcommand{\VssI}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{VssI.pdf}}}}}
\newcommand{\Hssp}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{Hssp.pdf}}}}}
\newcommand{\HssI}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{HssI.pdf}}}}}
\newcommand{\HspI}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{HspI.pdf}}}}}
\newcommand{\HppI}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{HppI.pdf}}}}}


\newcommand{\Braidpsconj}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{Braidpsconj.pdf}}}}}
\newcommand{\Braidsp}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{Braidsp.pdf}}}}}
\newcommand{\Braidpp}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{Braidpp.pdf}}}}}
\newcommand{\Braidss}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{Braidss.pdf}}}}}



\newcommand{\Twistp}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{Twistp.pdf}}}}}
\newcommand{\Twists}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{Twists.pdf}}}}}

\newcommand{\idsigmashort}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{idsigmashort.pdf}}}}}
\newcommand{\idpsishort}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{idpsishort.pdf}}}}}


\newcommand{\Rpss}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{Rpss.pdf}}}}}
\newcommand{\Vsigmapsisigma}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{Vsigmapsisigma.pdf}}}}}


\newcommand{\FusionSpaceRightOrdered}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{FusionSpaceRightOrdered.pdf}}}}}
\newcommand{\FusionSpaceLeftOrdered}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{FusionSpaceLeftOrdered.pdf}}}}}


\newcommand{\PitchforkFLeft}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{PitchforkFLeft.pdf}}}}}
\newcommand{\PitchforkFRight}{\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{PitchforkFRight.pdf}}}}} 
 









\begin{document}


\title{Fermion condensation and super lattice models} 
%since the Hamiltonian isn't a huge part of the paper, I'd be inclined to say ``fermion condensation and super tensor categories'' or ``fermionic topological phases from fermion condensation'' or something. 
%\dave{I like ``fermion condensation and super tensor categories"
% super lattice models sounds weird to me.}

\author{David Aasen, Ethan Lake, and Kevin Walker}
%\affiliation{Department of Physics and Astronomy, University of Utah, Salt Lake City, UT 84112, USA}
%\emailAdd{lake@physics.utah.edu}

\date{\today}

\maketitle

\begin{abstract}
\ethan{sorta happy with this---make any edits you like, though}
We study fermionic topological phases through the lens of fermion condensation. 
We give a prescription for performing fermion condensation in generic 
bosonic topological phases which contain a fermion. 
Our approach to fermion condensation can roughly be understood 
as coupling the parent bosonic topological phase to a phase of physical fermions, and condensing 
pairs of physical and emergent fermions. 
There are two distinct types of objects in fermionic theories, which we dub ``m-type particles'' and ``q-type particles''. 
The endomorphism algebras of q-type particles are complex Clifford algebras, and they
have no analogues in bosonic theories. 
We construct a fermionic generalization of the tube category, which allows us to compute
the quasiparticle excitations in fermionic topological phases and in which 
spin structures play a prominent role.  
We then prove a series of results relating data in condensed theories to data in their parent theories, 
namely that if $\mcc$ is a modular tensor category containing a fermion, then the tube category 
of the condensed theory satisfies 
$\tube(\mcc/\psi) \cong \mcc \times (\mcc/\psi)$.  
We also study how modular transformations, fusion rules, and coherence relations 
are modified in the fermionic setting, construct 
a commuting projector lattice Hamiltonian for fermionic theories, and 
write down a fermionic version of the Turaev-Viro-Barrett-Westbury state sum.  
%Spin structures play a prominent role throughout our analysis. 
A large portion of this work is devoted to three detailed examples of performing fermion condensation to produce fermionic topological phases: we condense fermions 
in the Ising theory, the $SO(3)_6$ theory, and the $\halfesix$ theory, and compute the 
quasiparticle excitation spectrum in each of these examples. 
\end{abstract}

\tableofcontents



%%%%%%%%%%%%%%%%%%%%%%%
\section{Introduction}
%%%%%%%%%%%%%%%%%%%%%%%

%\dave{Lets not forget to cite \cite{Walker2014,Walker2015} in the intro.}
%\ethan{done}

A large program in condensed matter physics in recent years has been to classify 
topological phases of matter which host emergent quasiparticle excitations 
with topological properties like exotic braiding statistics. 
The mathematical framework of category theory has proven to provide the right 
framework needed to formally develop classification efforts \cite{kitaev2006}. 
Thus far, the bulk of these efforts have focused on understanding bosonic topological phases.
These phases are ``bosonic'' because the topological excitations emerge from bosonic 
local degrees of freedom.

By contrast, much less is known about how to complete a classification program for {\it fermionic} topological phases, in which fermions constitute 
the underlying degrees of freedom. 
Progress on understanding the coherence relations used to classify fermionic topological phases and the identification of a class of examples of such phases was made in \cite{gu2015,gu2014,Lan2016b}. 
Recently, Majorana dimer lattice models have appeared \cite{ware2016,tarantino2016}, 
which give an explicit Hamiltonian construction of a 
non-trivial
fermionic phase closely related to the Ising theory. 
There has also been some recent work in the math community \cite{usher2016,brundan2016,bruillard2017,bonderson2017} 
devoted to studying the formal category-theoretic description of fermionic topological phases and spin-TQFTs. 

Intimately related to the description of fermionic topological phases is the concept of fermion condensation, 
whereby emergent (anyonic) fermions are driven through a topological phase transition to become 
local particles (meaning that they can be created and destroyed locally). 
\dave{This is a nice sentence. But subtle. 
Is the idea is that 'condensing' something is the same as saying it's a local excitation?
Also are you considering physical fermions as local?
We could add a footnote which describes this sentence in more detail....
Also for the phase transition bit we can cite \cite{Bais2009}.}
\ethan{Right. I'm saying it means you can create/destroy something in a condensate locally. Feel free to add whatever explanatory remarks you like}
There have been several recent approaches related to understanding 
fermionic topological phases with field theoretic methods, fermion condensation, and bosonization \cite{gaiotto2016, bhardwaj2016, bhardwaj2016b,kapustin2017,putrov2016}, 
with a more algebraic take on fermion condensation given in \cite{wan2016}. 

In this work, we perform a systematic study of fermionic topological phases and fermion condensation from a category-theoretic
point of view, taking the approach of \cite{Walker2014,Walker2014}. 
The strategy we will use to construct examples of fermionic topological phases will be to start with 
a bosonic phase described by a tensor category $\mcc$
which contains an emergent fermion $\psi$.
To obtain a fermionic theory, we will condense $\psi$.
That is, we will show how to introduce a phase transition in the bosonic phase 
described by $\mcc$ to a phase where $\psi$ is a {\it local} (as opposed to an anyonic) excitation.
The resulting fermionic topological phase is described by a super tensor category, which we denote
as $\mcc / \psi$.
$\mcc/\psi$ is a fermionic phase because in order for a phase to support local fermionic excitations, 
its underlying degrees of freedom must be fermionic. 

Due to their nontrivial spin and statistics, condensing fermions is not a straightforward business. 
From a mathematical perspective, in order to perform the condensation it is necessary to equip the configuration 
space of $\psi$ worldline endpoints with a certain complex line bundle. 
Physically, the construction of this bundle amounts to attaching a phase of physical (not emergent) fermions $f$ 
to the parent bosonic theory: 
fermion condensation then schematically proceeds by coupling the $\psi$ fermions to 
the $f$ fermions, and condensing $\psi f$ bound states. 
In most cases (when $\psi$ is not transparent in $\mcc$), we will also need to perform 
the condensation with a device we dub the ``back wall'', which is a codimension-1 surface 
on which $\psi$ worldlines are allowed to end. 

\kw{I think we need to be clearer when talking about simple objects of $\mcc$ (or $\mcc/\psi$)
versus simple objects of Tube($\mcc$) (or Tube($\mcc/\psi$)).
Are we calling both of these ``anyons"?}
\ethan{we've waffled a bit on the terminology. I've been calling all of the stuff in the tube category as ``quasiparticles'' because this is unambiguous if a bit long to write out. I'm fine with calling things in $\mcc$ ``objects'' or ``string-net labels'' and things in $\tube(\mcc)$ as ``anyons'', though.}
\ethan{any recent thoughts on terminology? I'm fine with what we're doing currently}

A central difference between fermionic topological phases and their bosonic counterparts is that 
the former possesses two distinct classes of simple objects (or anyons). 
One class of simple objects, which we refer to as ``m-type'' objects, are identical in character
to the simple objects found in bosonic theories. 
The other class of objects, dubbed ``q-type'' objects, have no bosonic analogues. 
From a formal perspective, they are distinguished by their nontrivial endomorphism algebras---if 
$a$ is a q-type simple object, then $\End(a) \cong \cl_1$, the first complex Clifford algebra. 
From a physical point of view, these can be thought of as ``Majorana objects'', which have the ability 
to ``absorb'' fermions. 
In string-net constructions, strings labeled by q-type objects behave like Kitaev wires in the 
topological phase: the fermion parity of a closed loop of such a string is determined by 
the spin structure inherited by the string, and is ``delocalized'' in the sense that fermions living on the q-type string are allowed to fluctuate freely along its length.
One rather trivial way to produce a fermionic phase is to simply form a non-interacting stack of a phase of physical fermions 
and a known bosonic topological phase. 
To obtain examples of fermionic phases that do not arise in this way (which are called ``primitive'' in \cite{Lan2016b}),
it is essential to examine theories that contain q-type objects, which are fundamentally fermionic in nature. 

A categorical description of the condensed phase $\mcc / \psi$ cannot be obtained within the framework 
of regular tensor categories, and one needs to instead adopt the framework of ``super pivotal tensor categories''. 
The fermionic nature of $\mcc / \psi$ means that the fusion spaces of the theory become supervector spaces 
(as opposed to normal vector spaces),
the tensor product of morphisms is modified to become supercommutative rather than commutative, 
coherence relations like the pentagon identity are modified to incorporate Koszul signs, and so on.

We should stress that all of the constructions we employ in this paper are mathematically well-defined and 
self-contained, independent of their physical interpretations. 
Most of the paper uses techniques from category theory, TQFTs and string nets to construct what one
might call fermionic Turaev-Viro theory, and this paper is mostly about fermionic TQFTs from this perspective, 
rather than studying the ground states of Hamiltonians. 
Indeed, not until near the end of the paper do we define a fermionic Levin-Wen style Hamiltonian whose ground states coincide with 
the Hilbert spaces of this TQFT.
Foreshadowing the introduction of this Hamiltonian, we will, throughout the paper, talk about physical notions like ``excitations", "ground state degeneracies", 
etc, even though
strictly speaking this point of view does not make sense until after we have introduced the Hamiltonian.
We emphasize that the Hamiltonian point of view is optional; most of the paper can be viewed as taking place
in the self-contained world of (fermionic) string-net TQFTs.

In order to examine the quasiparticle excitation spectrum of fermionic phases, 
we use the tube category construction \cite{ocneanu1994}\footnote{Again, it is technically imprecise to call the objects 
of the tube category ``excitations'' until after we have carefully defined a Hamiltonian.}.
The construction of the tube category is modified for fermionic theories, and produces a theory
equivalent to a fermionic version of Drinfeld center of the input category.
For bosonic theories we have the isomorphism $\tube(\mcc)\cong\mcc\times\bar{\mcc}$ \cite{muger2003b}, where $\bar{\mcc}$ denotes the opposite category of $\mcc$. 
We prove fermionic version of this isomorphism, namely 
that the tube category $\tube(\mcc/\psi)$ for a fermionic theory can be obtained from $\mcc$ through
\be \tube(\mcc / \psi) \cong \bar{\mcc \times (\mcc / \psi)}\ee
In terms of Drinfeld centers, this can be read as $\mcz(\mcc / \psi)\cong \mcz(\mcc)/\psi$, where on the right-hand side, 
$\psi$ represents an embedding of $\psi$ into $\mcz(\mcc)$.


Because quasiparticle excitations are supported on circular boundary components of the ambient 
manifold on which the theory is defined, there are two distinct classes of quasiparticles (aka objects in the tube category) in 
fermionic theories: those with anti-periodic fermion boundary conditions around the circle, and 
those with periodic boundary conditions. 
Thus, the tubes in the tube category come equipped with spin structures, which gives the tube category a $\zt$ grading
and separates the quasiparticle spectrum in to vortex quasiparticles (those which bind spin structure defects) 
and non-vortex quasiparticles (which are similar in character to the quasiparticles present in bosonic theories). 






The analysis of things related to the tube category like modular transformations, braiding statistics, and the computation of ground state degeneracies on various spin surfaces
is also modified in the fermionic setting.  
The behavior of the $S$ and $T$ modular transformations on the torus depends on the spin structure of the torus in question, and 
certain relations like $(ST)^3 = \unit$ are realized projectively in the fermionic setting, becoming 
$(ST)^3=(-1)^F\unit$ where $(-1)^F$ is the fermion parity operator.
%Unlike in bosonic phases, the matrix of double braids (mutual statistics) is not identical to the 
%modular $S$-matrix, although complete information about the double braids 
%is enough to reconstruct the modular $S$-matrix. 

Next, we show how to construct a commuting projector lattice Hamiltonian 
for fermionic phases, whose excitation spectrum is given by the objects in the fermionic tube category.  
It is similar in character to the Levin-Wen Hamiltonian \cite{levin2005}, 
except that it includes an extra edge term which is responsible for moving fermions along
edges labeled by q-type objects. 
Depending on the form of the edge term, spin structure defect excitations 
are realized as violations of this edge term, and are linearly confined. 

Finally, we show how to construct a tensor network which produces the ground state 
wavefunction of our lattice Hamiltonian. We do this using a cut-and-glue approach to 
the construction of the Turaev-Viro-Barrett-Westbury state sum, which allows us to concisely write the bosonic partition function
as a tensor contraction. We then show how to modify the tensors 
and the way we contract them in order to obtain a fermionic version of the TVBW state sum.  

We illustrate all of the above points in a series of several in-depth examples, which occupy a large portion 
of this paper.
Our presentation is characterized by an emphasis on examples, 
and we often save formal definitions and more general statements 
for later sections after relevant examples have been presented.  
Many general observations are mixed in with the example sections,
and we stress that the more general sections are intended as a supplement
the example sections; they are not stand-alone.
We also note that a more mathematical presentation of this work will appear in \cite{Kevin and scott's paper?}. 


Due to the length of this paper, we will quickly give a summary of the remainder of its contents.
Sections \ref{C2_condense_sect} and \ref{C2_quasiparticles} are devoted to a detailed study of 
fermion condensation in the Ising TQFT, which is a simple case study that allows us to build intuition for the condensation procedure.
This condensed theory has been examined before in \cite{bhardwaj2016, kapustin2017}; 
here we examine it in greater detail. 
In Section \ref{C2_condense_sect} we review the Ising TQFT, describe how to perform the 
fermion condensation, and write down the local string-net rules in the condensed theory, 
which we dub the $C_2$ theory. 
In Section \ref{C2_quasiparticles} we use a fermionic generalization of the tube category 
construction to study the excitation spectrum of this model, compute its ground state 
degeneracy on the torus, and study the modular transformations %and braiding data 
of the theory. 

In Section \ref{generalities}, we present a collection of more general results
on the machinery of fermionic theories. 
We show how to perform fermion condensation in more general settings
and discuss our fermionic generalization 
of the tube category construction in more generality.
We also discuss how to compute quantum dimensions and fusion rules,
and we prove some general
relations between the total quantum dimensions of condensed theories, their 
tube parent theories, and their tube categories.
Additionally, we present a Verlinde-type
dimension formula for fermionic theories.

We devote Section \ref{more_on_tubes} to a detailed study of the tube category 
for fermionic theories which result from fermion condensation in a modular tensor category (MTC). 
We introduce several convenient tools for performing calculations in tube categories, 
and use them to prove that if $\mcc$ is an MTC containing a fermion $\psi$, then
$\tube(\mcc/\psi)\cong \mcc\times \bar{\mcc/\psi}$ as tensor 
categories. We also describe a way of easily computing the $S$-matrix in 
$\tube(\mcc/\psi)$. 

Section \ref{so36} is devoted to the example of performing condensation in the $SO(3)_6$ 
and $SU(2)_6$ theories, while Section \ref{halfesix} discusses fermion condensation in the $
\halfesix$ theory. 
Both of these examples are more involved than the $C_2$ theory, 
and illustrate some of the more interesting features of generic fermionic topological phases. 

In Section \ref{def_sect} we define and discuss super pivotal categories from a more formal point of view. 
We show how fermionic fusion spaces are constructed and tensored together, how 
coherence relations like the pentagon identity are modified in the fermionic case, 
and how the fermionic nature of the vector spaces used in the construction of super 
pivotal categories affects their construction. 

Section \ref{Super_pivotal_Hamiltonian} is devoted to a discussion of a lattice Hamiltonian for fermionic theories, which is a generalization of the Levin-Wen Hamiltonian. 
It differs most significantly from the Levin-Wen Hamiltonian its possession of an edge term, which 
is responsible for allowing fermions to fluctuate across q-type strings and the violation 
of which produces linearly confined defects. 

We show how to construct a tensor network realizing the ground state of our lattice Hamiltonian 
in Section \ref{state_sums}. We first review how to write the partition function of a bosonic theory 
as a tensor contraction in a way amenable to generalization, and then show how our construction 
can be extended to cover the fermionic case. 

Finally, we end with a conclusion and discussion in Section \ref{discussion}. 
Several appendices contain miscellaneous results and background information. 

\bigskip
\kw{Maybe insert a table of notation here}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Fermion condensation in the Ising TQFT}  \label{C2_condense_sect}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

Before discussing super pivotal categories in the abstract and general techniques for constructing examples thereof,
we will give a detailed account of one of the simplest examples:
the $C_2$ super pivotal category.
This theory 
is obtained from the Ising TQFT by condensing the emergent fermion $\psi$, and provides a good demonstration of the 
qualitatively new features that occur as a result of fermion condensation. 
This section (and the next) is organized as follows: in \ref{Ising_review} we briefly review the aspects of the 
Ising TQFT we will need in later sections. 
In \ref{general_condensation} we comment on the general procedure of anyon condensation, and in \ref{condensing_psi} 
we show how to condense $\psi$ in the Ising theory, obtaining the $C_2$ super pivotal theory. 
\ref{C2_local_relns} details the diagrammatic properties of the $C_2$ theory, and in \ref{C2excitations} we compute 
the quasiparticle excitations of the theory. 
In \ref{C2_fusion_rules} we determine the fusion rules of these quasiparticles, and in \ref{C2_braiding} we compute 
their statistical and braiding data and analyze the modular $S$ and $T$ matrices in detail. 


%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Ising TQFT}  \label{Ising_review}
%%%%%%%%%%%%%%%%%%%%%%%

Here we provide a brief review the the Ising TQFT (see e.g. \cite{Lins1994}). 
There are three particles in the theory, which we label as $\unit$ (the trivial particle), $\sigma$ 
(the non-abelian Ising anyon), and $\psi$ (the emergent fermion).
The nontrivial fusion rules of the theory are as follows:
\be 
	\sigma\tp\sigma\cong\unit\oplus\psi,\quad \sigma\tp\psi\cong\sigma,\quad\psi\tp\psi\cong\unit.
\ee

The quantum dimensions of the particles are 
\be
\label{QuantumDimensions}
d_\unit = 1 \quad d:=d_\sigma = -A^2 - A^{-2} \quad d_\psi =1,
\ee
where $A$ is a primitive 16th root of unity. Graphically, this means that
\begin{align}
\dpsi_\psi = \text{(vaccuum)} \qquad \qquad \dbeta_\beta = d \times \text{(vaccuum)}
\end{align}
where the blue (orange) circle denotes a circular $\psi$ ($\sigma$) worldline.
$\unit$ worldlines, being identified with the vaccuum, are not drawn in diagrams. 

Out of the eight possible choices for $A$, the four different choices $A = ie^{\pm i\pi/8}, -ie^{\pm i\pi/8}$ 
all give a positive quantum dimension for the $\sigma$ particle of $d = \sqrt{2}$.
The other four choices of $A$ give $d=-\sqrt{2}$, which can alternatively be defined
with $d=\sqrt{2}$ but with a negative Frobenius-Schur indicator of $\kappa_\sigma=-1$. 
In what follows, we will specify to $A = ie^{\pm i\pi/8}, -ie^{\pm i\pi/8}$ so that $d_\sigma = \sqrt{2},\kappa_\sigma=1$. 


We now turn our attention to the graphical calculus of the Ising TQFT. 
We pick a normalization more common in the physics literature,
bubbles in diagrams can be eliminated by using the rule
\be
\overset{\;c'}{\underset{c}{{\scriptstyle{a}}\Bubbleabc {\scriptstyle{b}}}} = \delta_{c c'} \sqrt{\frac{d_a d_b}{d_c}}\times \overset{c}{\underset{c}{\idblack}}\ee
In particular, we have 
\be
\overset{\sigma}{\underset{\sigma}{{\scriptstyle{\sigma}}\Bubblesps {\scriptstyle{\psi}}}} = \overset{\sigma}{\underset{\sigma}{\idorange}}\;, \quad \quad 
\overset{\sigma}{\underset{\sigma}{{\scriptstyle{\sigma}}\Bubblessp {\scriptstyle{\sigma}}}}
 = d \times \overset{\psi}{\underset{\psi}{\idblue}}\; ,
  \label{Ising_bubble_relns} 
\ee
where again, we are marking $\psi$ worldlines in dark blue and $\sigma$ worldlines in orange. 


The non-trivial $F$-moves in the theory are as follows:
\begin{align}	
& \IsingDat{\VssI}{\sigma}{\sigma}{\sigma}{\sigma}  =\frac{1}{d} \left(   \IsingDat{\HssI}{\sigma}{\sigma}{\sigma}{\sigma} + \IsingDat{\ScriptOverSymbol{\Hssp}{\substack{\; \\ \; \\ \psi }}}{\sigma}{\sigma}{\sigma}{\sigma} \right) \qquad \qquad
\IsingDat{\ScriptOverSymbol{\Vsps}{\;\; \;\; \sigma }}{\sigma}{\psi}{\sigma}{\psi} = 
 \IsingDat{\HspI}{\sigma}{\psi}{\sigma}{\psi}  \\[4ex]
& \IsingDat{\ScriptOverSymbol{\Vssp}{\;\; \;\; \psi }}{\sigma}{\sigma}{\sigma}{\sigma}  = \frac{1}{d} \left(   \IsingDat{\HssI}{\sigma}{\sigma}{\sigma}{\sigma} - \IsingDat{\ScriptOverSymbol{\Hssp}{\substack{\; \\ \; \\ \psi }}}{\sigma}{\sigma}{\sigma}{\sigma} \right) \qquad \qquad 
 \IsingDat{\VppI}{\psi}{\psi}{\psi}{\psi} =  \IsingDat{\HppI}{\psi}{\psi}{\psi}{\psi} 	
 \end{align} 
The twist and braiding of the $\sigma$ particle are given by 
\begin{align}
\underset{\;\;\; \; \;\;\;  \sigma }{\overset{\;\;\; \; \;\;\;  \sigma }{\Twists} } = -A^3\; \underset{\sigma}{\overset{\sigma}{\idsigmashort}}  \qquad \qquad 
\IsingDat{\Braidss}{\sigma}{\sigma}{\sigma}{\sigma} = A \: \IsingDat{\HssI}{\sigma}{\sigma}{\sigma}{\sigma} + A^{-1} \IsingDat{\VssI}{\sigma}{\sigma}{\sigma}{\sigma} 
\label{sigma_braiding}
\end{align}
The formula for the topological twist on the left follows from the relation given on the right.
Using that $\sigma \tp \sigma = \unit \oplus \psi$ and \eqref{sigma_braiding} 
we can derive the braiding data for the $\psi$ particle. 
Most importantly for us, the
$\psi$ particle is fermionic in both its topological twist 
and statistics, regardless of the choice of $A$:
\begin{align}
  \underset{\;\;\; \; \;\;\;  \psi }{\overset{\;\;\; \; \;\;\;  \psi }{\Twistp} }= -\;  \underset{\psi}{\overset{\psi}{\idpsishort}} \qquad \qquad \IsingDat{\Braidpp}{\psi}{\psi}{\psi}{\psi}  = (-1) \IsingDat{\HppI}{\psi}{\psi}{\psi}{\psi} 
\label{psi_a_fermion}
\end{align}
Additionally, $\psi$ is not transparent, as it braids nontrivially with $\sigma$:
\begin{align}
 \overset{\sigma \quad \; \; \; \; \psi }{\underset{\sigma}{\Rpss}}
 =A^4 \;  \overset{\sigma \quad \; \; \; \; \psi }{\underset{\sigma}{\Vsigmapsisigma}}, \qquad \qquad \IsingDat{\Braidsp}{\psi}{\sigma}{\sigma}{\psi}  = - \IsingDat{\Braidpsconj}{\psi}{\sigma}{\sigma}{\psi}. 
  \label{sig_psi_Rsymbol}
\end{align}

Our goal in what follows is to describe how to condense the $\psi$ particle in the Ising TQFT. 
To put this in context, we will first make a few remarks on the more familiar bosonic condensation. 






%%%%%%%%%%%%%%%%%%%
\subsection{Condensation of transparent bosons}\label{general_condensation}
%%%%%%%%%%%%%%%%%%%

We now briefly review how to perform condensation with transparent bosons (see e.g. \cite{eliens2014diagrammatics}).  
Let $\mcc$ be a ribbon category and let $\alpha$ be a particle (simple object) of $\mcc$ which we hope to condense.
In category theoretic terms, we want to add morphisms to $\mcc$ so that $\alpha$ becomes
isomorphic to the trivial particle $\unit$ (or, more generally, to a direct sum of several copies of $\unit$). 
We can think of this as a categorical quotient, denoted $\mcc/\langle \alpha \cong \unit \rangle$ or
more simply as $\mcc/\alpha$.
Physically, this amounts to turning the anyon $\alpha$ into a {\it local} particle (one which 
can be created locally).

In our graphical calculus, condensing $\alpha$ means that $\alpha$ worldlines are allowed to 
have endpoints at locations where they are ``absorbed'' into the condensate (allowing them 
to be created locally).
We will mark the locations where $\alpha$ particles are absorbed into the condensate with boxes
\begin{align}
\label{box_def}
\alpha\; \PsiFermion\; , 
\end{align}
where the horizontal blue line is an $\alpha$ worldline. 
We can also think of these boxes as morphisms from $\alpha$ to the trivial particle.
For simplicity, we will assume that $\alpha\otimes\alpha\cong \unit$ (which will be true in the examples considered in this paper), 
although most of the following discussion can be made to work more generally.

In order for this condensation procedure to not cause unintended collapse 
in $\mcc$ (e.g.\ confine other particles of $\mcc$, or result in a trivial theory),
$\alpha$ must satisfy three conditions:

\begin{itemize}

\item First, the twist of $\alpha$ must be 1.
This is because
\be 
\label{twist_inconsistency} \PsiFermion = \mathord{\vcenter{\hbox{\includegraphics[trim=0 0 0 .25cm,scale=1.3]{half_bent_fermion_line.pdf}}}} = \PsiFermionTwist = 
\mathord{\vcenter{\hbox{\includegraphics[scale=1.3]{kinked_fermion_line.pdf}}}} =
\theta_\alpha \ \PsiFermion\;,
\ee
and so if $\theta_\alpha \neq 1$, diagrams in which $\alpha$ worldlines are absorbed into the 
condensate are identically zero, and condensation is impossible. 

\item Secondly, $\alpha$ must be statistically bosonic, i.e.\ it must braid trivially with itself.  
This is because
\be \label{statistics_inconsistency}
\mathord{\vcenter{\hbox{\includegraphics[scale=1.5]{TwoFermion_nolabels.pdf}}}} = \ \mathord{\vcenter{\hbox{\includegraphics[scale=1.5]{TwoFermionExchange_nolabels.pdf}}}} = \theta_{\alpha,\alpha} \mathord{\vcenter{\hbox{\includegraphics[scale=1.5]{TwoFermion_nolabels.pdf}}}},\ee
where $\theta_{\alpha,\alpha}$ is the self-statistics of $\alpha$. 
(By our assumption that $\alpha\otimes\alpha \cong \unit$, the last equality
must hold with $\theta_{\alpha,\alpha} = \pm 1$.)
By the spin-statistics relation this condition is not independent of the previous one, but it will be 
useful to regard them as separate constraints for the purpose of the fermion condensation 
procedure described in the next section\footnote{If we drop positivity requirements, we can 
violate the spin-statistics theorem and have particles which are fermionic in spin but not statistics 
or vice-versa; see [Scott and Kevin's paper] for a discussion of this.}. 

\item Finally, 
$\alpha$ must braid trivially with every particle in $\mcc$. In category-theoretic language, 
this means that $\alpha$ must lie in the transparent subcategory of $\mcc$.
If a particle $\beta$ braids non-trivially with $\alpha$ (i.e.\ if the left and right braidings are not equal),
then any string diagram which includes a $\beta$ particle must be zero: (we assume the quantum 
dimension of alpha is one for convenience)
\be\label{transparency_inconsistency} 
\mathord{\vcenter{\hbox{\includegraphics[scale=1]{alphabox_beta_braiding.pdf}}}},
\ee
where the orange line is a $\beta$ worldline and $\theta_{\alpha,\beta}$ is the mutual statistics of $\alpha$ and $\beta$. 
The first two equalities follow from the fact that the location of a particle being absorbed into the 
condensate is not physically significant: no operator can distinguish between states that differ only 
by the location of an $\alpha$ endpoint. 
Therefore, if $\theta_{\alpha,\beta}\neq1$, condensing $\alpha$ causes unintended collapse in $\mcc$, since it confines $\beta$.
\end{itemize}

To summarize, in order to condense $\alpha$, $\alpha$ must have a twist of 1, have bosonic self-statistics, 
and braid trivially with every other particle in the theory. 
If any of these conditions are violated, we
will have to work harder to construct $\mcc/\alpha$.



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Condensing $\psi$ in Ising} \label{condensing_psi}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

In this subsection we describe our procedure for condensing $\psi$ in the Ising theory. 
While we will focus on the Ising theory in this section, our discussion will be fairly general, and can be 
applied to perform fermion condensation in more general scenarios. 

We would like to ``condense" the $\psi$ particle by constructing the quotient theory $\mcc / \psi$. 
We will denote the condensed theory by $C_2$, since the fusion rules are described by the $C_2$ Dynkin diagram; see below.
We will denote the image of $\sigma$ in the condensed theory $C_2$ as $\beta$.

First, from \eqref{psi_a_fermion}, we recall that $\psi$ is fermionic in both spin and statistics,
Additionally, we recall that $\psi$ has nontrivial braiding with $\sigma$, and as such $\psi$ is not transparent. 
Thus, $\psi$ violates all three of the conditions that particles in a condensate must satisfy! 
To condense $\psi$, we will clearly need some new tricks. 

\medskip

We will first examine how to address the non-transparency of $\psi$. 
As we saw above in \eqref{transparency_inconsistency}, 
we can't allow world lines of $\psi$ to disappear at arbitrary points in the 3-dimensional spacetime,
since this would confine $\beta$ (a.k.a.\ $\sigma$).
\be \label{box_beta_nowall_braiding}
\mathord{\vcenter{\hbox{\includegraphics[scale=1]{box_beta_nowall_braiding.pdf}}}},\ee
However, if we restrict the $\psi$ worldline endpoints to lie on a 2-dimensional 
subset of the boundary of the ambient 3-dimensional spacetime,
we {\it can} obtain a consistent graphical calculus.

In this paper, we will adopt the convention that $\psi$ world lines are allowed to terminate 
on a codimension-1 ``back wall", located on a boundary of the system that is positioned ``behind'' all 
other world lines drawn in our graphical calculus. 

\begin{figure}
  \centering
    \includegraphics{Backwall_figure.pdf}
      \caption{\label{backwall} (a) The ``back wall'' picture. 
      The box represents a section of a (2+1)D Ising TQFT, with the codimension-1 back wall 
      indicated by the blue back side of the box. 
$\psi$ worldlines are absorbed into (or emitted from) the back wall at marked points labelled by $1,2,3,4$. 
Free $\psi$ endpoints which do not terminate on the back wall are not allowed. 
(b) Our way of representing the picture (a) in a (1+1)D graphical calculus. 
We have squashed the box down to a two dimensional plane, with the blue boxes representing the 
points at which the $\psi$ lines ``go straight back and hit the back wall''.}
\end{figure}

Figure \ref{backwall}(a) demonstrates this graphically, 
with the light blue back section of the box denoting the back wall, 
on which the $\psi$ worldlines can be absorbed or emitted. 
String-net graphs in our (2+1)D spacetime can be reduced to string-net graphs 
in (1+1)D spacetime by introducing a shorthand notation for $\psi$-lines terminating on the back wall. 
This notation is shown in Figure \ref{backwall}(b), 
where we use boxes to denote places where $\psi$ worldlines head straight back into the back wall and terminate.


Even though we use the same box-at-the-end-of-the-string graphical convention to denote ordinary condensation
and back wall condensation, there is an important difference.
In both cases, we can slide a box behind another strand, with the before and after pictures differing by an isotopy:
\be
\mathord{\vcenter{\hbox{\includegraphics[scale=1]{sliding_behind.pdf}}}}.\ee
However, in the back wall case, we cannot slide a box in front of another strand
\be \mathord{\vcenter{\hbox{\includegraphics[scale=1]{no_sliding_above.pdf}}}}.\ee
This is because doing so would involve the other strand crossing the $\psi$ strand as it
heads into the page en route to the back wall; the before and after pictures are not isotopic.
Thus restricting $\psi$ emission/absorption to the back wall
disallows the series of diagram equalities in Figure \ref{box_beta_nowall_braiding}.

An important consequence of the existence of the back wall this is that the quotient category $C_2$ 
is not braided (although there is a way to perform the condensation so that the resulting theory is 
braided, which we mention briefly in \ref{spin_defects_condensation}).
String diagrams for braided categories (such as Ising) can be glued together in three independent 
dimensions: right/left, top/bottom, and back/front.
In more formal terms, braided categories are (special cases of) 3-categories.
Because of the back wall, it does not make sense to glue string diagrams for the $C_2$ category in the back/front
dimension.
In more formal terms, $C_2$ is a mere 2-category, or, more specifically, a (super) tensor category.
We can, however, glue an Ising string diagram to the front (but not back) of a $C_2$ diagram.
In category theoretic language, $C_2$ is a module 2-category for the Ising 3-category; equivalently, $C_2$ is a codimension 1 defect
connecting Ising to the vacuum.


\medskip

The back wall construction fixes the problems caused by $\psi$ not being transparent.
However, we have not yet addressed the spin and statistics 
inconsistencies \eqref{twist_inconsistency} and \eqref{statistics_inconsistency}.
To fix these inconsistencies, we will couple the boxes marking the $\psi$ endpoints to a 
complex line bundle associated to a spin structure. 
(When we later consider reflections, this spin structure will be promoted to a $\mbox{pin}_+$ structure.)
Readers unfamiliar with spin and pin structures are referred to Appendix \ref{spin_and_pin}. 
The spin structure will enable us to cancel out the factors of $-1$ 
arising from the endpoints of $\psi$ worldlines twisting through $2\pi$ as in \eqref{twist_inconsistency}.
This ``bosonizes'' the $\psi$ endpoints and allowing the condensation process to go through. 


\medskip

To make this precise, let $Y$ be an oriented 2-manifold, let $M = Y\times [0,1]$, and let $B = Y\times \{1\}$.
(Everything we do in this subsection will work more generally for $M$ any oriented 
3-manifold and $B$ some codimension 0 submanifold
of $\bd M$.)
In addition, choose a spin structure on $B$.
Our goal is to associate a Hilbert space to $Y$ based on string nets in $M = Y\times I$
and some extra data on the back wall $B$.

Consider the configuration space $\mcr(B)$ of all $\psi$ ribbon endpoints on $B$.
Let $\mcr(B)_k$ denote the subspace of $\mcr(B)$ corresponding to configurations with exactly $k$ endpoints.
(If $B$ is connected, then these are the connected components of $\mcr(B)$.)
We can think of the ribbon endpoint as a point $p$ of $B$ plus a tangent vector at $p$ which
points in the direction of the ``front" of the ribbon.\footnote{Ribbons 
have a distinguished front and back; if they did not, then we would have to assign
phases $\theta_a^{1/2}$ corresponding to half twists of ribbons.}
This means that $\mcr(B)_1$ is diffeomorphic to the unit tangent bundle of $B$.
We also stipulate that $\mcr(B)_0$ consists of a single point.

In the next subsection we will construct a complex line bundle $F(B)$, with flat connection, over $\mcr(B)$, 
which will provide us with the additional structure we need to perform the condensation.
The extra data alluded to above will be a vector in this vector bundle.
More specifically, for each string net $S$ in $M$, we have and endpoint configuration $e(S) \in \mcr(B)$.
Our Hilbert space will be generated by pairs $(S, v)$, where $v \in F(B)_{e(S)}$, the fiber of the bundle $F(B)$
at the configuration $e(S)$.

We impose the usual local string net relations in the interior of $M$.
(Ribbon end points are fixed for these relations.)
We also impose the following additional relation:
Let $\{S_t\}$, with $0 \le t \le 1$, be a 1-parameter family of string nets.
The $\psi$ endpoints on $B$ are allowed to move, but any other ribbon endpoints must remain fixed.
Let $v \in F(B)_{e(S_0)}$.
Using parallel translation for the connection on $F(B)$ and the path of configurations $\{e(S_t)\}$, 
we obtain $v' \in F(B)_{e(S_1)}$.
We now identify these configurations by imposing the relation
\be \label{bw_rel}
	(S_0, v) = (S_1, v') .
\ee

\medskip

Let us now see how coupling the system to $F(B)$ fixes the inconsistencies 
\eqref{twist_inconsistency} and \eqref{statistics_inconsistency}.
The crucial property of the flat connection on $F(B)$ is the the holonomies around loops
corresponding to \eqref{twist_inconsistency} and \eqref{statistics_inconsistency} is $-1$.
In other words, in \eqref{bw_rel}, we have $v = -v'$ if $\{S_t\}$ is the family of string nets
depicted in \eqref{twist_inconsistency} or \eqref{statistics_inconsistency}.

So, \eqref{twist_inconsistency} now becomes
\begin{align} \label{boxspin}
	\PsiFermion = (-1)\ \PsiFermionTwist = (-1)^2\ \PsiFermion\;. 
\end{align}
and \eqref{statistics_inconsistency} becomes
\begin{align} \label{boxbraid}
\TwoFermionNoLabels =(-1)\ \TwoFermionExchangeNoLabels = (-1)^2\ \TwoFermionNoLabels\;.
\end{align}

\medskip

Is the choice of $F(B)$ together with its flat connection uniquely determined by the above holonomy requirements?
No: in fact, there is a natural bijection between the set of spin structures on $B$ and flat connections fulfilling
the above holonomy requirements.
In other words, in order to perform this sort of fermionic condensation, we 
we need to choose a spin structure on $B$ (or on $Y$, in the main case where $M = Y\times I$ and $B \cong Y$).

\medskip

The details of the construction of the bundle-with-connection $F(B)$ are somewhat technical, 
and can be found in in Appendix \ref{flb_appendix}.
%Our discussion in the next subsection will be fairly mathematical, and physically-inclined 
%readers are invited to skip it on first reading. 
%For readers who want to skip the next subsection, we summarize some additional important facts about $F(B)$:
Some of the key properties of $F(B)$ are:
\begin{itemize}
\item In order to specify an element $v\in F(B)_{e(S)}$, it suffices to (a) assign an ordering to the $\psi$-endpoints,
and (b) choose a spin-framing at each such endpoint.
Recall that a spin structure can be thought of as a double-covering of the unit tangent bundle of $B$.
By ``spin framing" we mean a choice of lift to this double cover from the unit tangent vector determined by the ribbon orientation.
\item The most general way of specifying a spin framing is via a ``Dirac belt" connecting a base framing 
on $B$ to the tangent vector in question.
For manifolds equipped with global framings there are no ambiguities, and we can choose
a ``gauge'' in which the orientation of the belt is consistent
with the global framing, allowing us to drop the belts from the figures.
The standard Euclidean structure on a page of this paper determines a global framing (the ``blackboard framing"),
and unless stated otherwise we implicitly equip each 
$\psi$ endpoint with a spin framing determined by this choice of global framing.
In some figures we have in mind a spin structure with a different global framing,
and in these cases we will draw dashed ``branch cut" lines to indicate how the framing
differs from the standard blackboard framing. 
The branch cuts will be chosen such that 
the spin framing rotates by $2\pi$ (switches sheets on the double cover) across a branch cut. 
\item Another important property of $F(B)$ is locality: The bundles behave well with respect to gluing surfaces.
By ``behave well'', we roughly mean that for $B = B' \cup B''$, 
there is an isomorphism between $F(B)$ and $F(B')\tp F(B'')$.
\item $F(B)$ comes equipped with a way to cancel pairs of $\psi$ endpoints, which is required since the fermion 
$\psi$ we will be condensing satisfies the fusion rule $\psi \tp \psi \cong \unit$.
This requires us to supplement the parallel transport of the flat connection with additional isomorphisms of
fibers of $F(B)$ connecting points of $\mcr(B)_k$ to $\mcr(B)_{k-2}$.
\item Finally, in order to define Hermitian inner products on our Hilbert spaces, $F(B)$ comes equipped with 
an antilinear bundle map $F(B) \to F(B')$ for all orientation-reversing maps $B \to B'$.
\end{itemize}

\medskip

Our spin-structure-equipped back wall construction admits a simple physical interpretation: coupling the 
theory to the bundle $F(B)$ is equivalent to adding a phase of {\it physical} (not emergent) fermions to the theory, 
and binding single physical fermions to each $\psi$ endpoint.
The physical fermion attached to each $\psi$ endpoint compensates for the fermionic nature of the $\psi$ particle 
in the condensate: the factors of $-1$ that relate two different orderings of the $\psi$ endpoints are the Koszul 
signs associated with the physical fermions, and the factors of $-1$ that we pick up when rotating the $\psi$ 
endpoint framing by $2\pi$ come from the spin $1/2$ of the physical fermions. 
Thus, attaching physical fermions to the $\psi$ endpoints transforms them into bosonic objects, which are then 
allowed to undergo normal boson condensation. 
Therefore, although we are indeed identifying emergent fermions with the vacuum, the term ``fermion condensation'' 
is a bit misleading, as what we are actually doing is closer to {\it boson} condensation of bound states of $\psi$ 
and a physical fermion. 
However, we reiterate that the $\psi$ endpoints are not technically bosons, since they see the background spin structure: 
the emergent $\psi$ fermions do not see the spin structure, but the physical fermions attached to their endpoints do. 

\medskip

To summarize, we have seen that by introducing the back wall and equipping it with a spin structure, all three 
conditions necessary for $\psi$ endpoints to condense are satisfied.
We emphasize that we have utilized the back wall and the spin structure for two {\it independent} reasons 
(the non-transparency of $\psi$ and $\psi$'s fermionic spin and statistics, respectively). 
For example, if $\psi$ were non-transparent but bosonic, we would still need a back wall, but the back wall 
would not need a spin structure.
Conversely, if $\psi$ were transparent but fermionic, then we would not need a back wall, but we would still 
need to introduce spin
structures.


 
 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Local relations in the $C_2$ theory} \label{C2_local_relns}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

Now that we have worked out how to condense $\psi$, we can determine the graphical rules that govern the condensed theory. 

We have already seen that in order for the condensation procedure to go through, 
the manifold on which we define the $C_2$ theory must be equipped with a spin structure. 
The interaction of fermionic morphisms with this spin structure leads to
relations in the diagrammatic calculus that are not present in bosonic theories.  

First, we first observe that any $\psi$ strands can be absorbed into the 
condensate at the expense of phase factors, 
and so in the condensed theory the only object remaining will be the image of $\sigma$ under condensation, 
which will denote by $\beta$. 
$\beta$ lines will be drawn in orange, and $\psi$ lines will be drawn in blue (and can also be distinguished 
from $\beta$ lines through their termination points). 
In the condensed theory, the $\beta$ line may or may not have $\psi$ fermions attached to them. 
We will introduce a blue dot as a compact notation for a $\psi$ worldline that terminates on a $\beta$ line:
\be \mathord{\vcenter{\hbox{\includegraphics[scale=1]{straight_beta_dot.pdf}}}}\quad = \quad\mathord{\vcenter{\hbox{\includegraphics[scale=1]{straight_beta_box.pdf}}}}\ee
Note that in order for the dot notation to be unambiguous, we must specify
a spin-framing at the dot.
We will usually do this implicitly as follows.
The dots are only allowed to occur on vertical strands,
and the spin framing at the dot is obtained from the base framing of the manifold
by rigidly translating with respect to the ``blackboard framing" of the page.
For diagrams which do not inherit their spin structure from the blackboard,
we will have to use other means to specify the spin-framing.
\kw{the above discussion needs improvement}
%Note that in order for the dot notation to be unambiguous, the dots can only occur on
%vertical strands, and the diagram should have an implicit framing. 
%We usually take this to be the ``backboard framing'' 
%inherited from the inclusion of the diagram into $\mathbb R^2$ (the blackboard).
%We will depart from this convention when the surfaces on which our diagrams live
%possess non-bounding spin structures, and in these cases we will indicate departures
%from the blackboard framing convention by drawing branch cuts in figures. 

Because $\beta$ lines in the condensed theory can have fermionic dots on them, 
there are several new diagrammatic rules involving them that need to be included in our graphical calculus. 
One of the most important local relations is 
the addition and removal of an even number of fermions on $\beta$ lines. 
The process of removing two fermions can be done at the cost of a phase factor: 
\begin{align} \label{removing_fermions}
\mathord{\vcenter{\hbox{\includegraphics[scale=1]{beta_dotdot.pdf}}}} \quad =  \quad \mathord{\vcenter{\hbox{\includegraphics[scale=1]{beta_boxbox.pdf}}}} \quad = \quad 
\mathord{\vcenter{\hbox{\includegraphics[scale=1]{beta_curvy_boxbox.pdf}}}} \quad =\quad  
\lambda\; \mathord{\vcenter{\hbox{\includegraphics[scale=1]{straight_beta.pdf}}}}\;,
\end{align}
where the labels $1$ and $2$ denote the 
ordering of the fermions in question.
We have performed an $F$-move on the $\psi$ worldlines to get the second equality, 
used \eqref{Ising_bubble_relns} 
to remove the $\psi$ line attached to the $\sigma$ line in the third diagram, 
and have used  
\be \label{eval_psi_semicirc}
   \PsiEnd  = \lambda \times \text{(vaccuum)},
\ee
in the last step to remove the semicircular $\psi$ line, where $\lambda\in \cc$ is some complex number. 
\kw{should probably move this (above) to previous subsection.  KW will take care of it.}
We show in Appendix \ref{flb_appendix} that we must have $\lambda=\pm i$, and since $A^4=\pm i$ in the Ising theory, 
we may choose either $\lambda = A^4$ or $\lambda = -A^{4}$ (the choice of $A$ does not constrain the choice of $\lambda$).  
The choice of $\lambda = \pm A^4$ affects the $F$-symbols in the condensed theory, 
but does not affect observable quantities like the twists or mutual statistics of the 
quasiparticles in the theory\footnote{This is because the choice of $\lambda=\pm A^4$ doesn't 
change the ``multiplication table'' of the tube category, which we will discuss below. 
Essentially, changing $\lambda$ just performs a scaling on the $\psi$ endpoints in the figures.}.
Therefore without loss of generality we may choose a gauge in which $\lambda=A^4$, and so 
\begin{align}  \label{removing_fermions}
\mathord{\vcenter{\hbox{\includegraphics[scale=1]{beta_dotdot.pdf}}}} \quad = A^4\; \mathord{\vcenter{\hbox{\includegraphics[scale=1]{straight_beta.pdf}}}}\;,
\end{align}


Since $\psi$ is statistically fermionic, exchanging two fermions on a $\beta$ line results in a minus sign:
\begin{align}
\mathord{\vcenter{\hbox{\includegraphics[scale=1]{beta_dotdot.pdf}}}} \quad = \quad (-1)\times
\mathord{\vcenter{\hbox{\includegraphics[scale=1]{beta_dotdot_switched.pdf}}}}\;.
\end{align}
%%KW: the following discussion seems unnecessary (and also a little confusing) to me
%In order to account for all statistical signs like this correctly, 
%when we annihilate a pair of dots using \eqref{removing_fermions}, 
%we must be careful to only annihilate pairs that have the same ordering as they did when they were created, 
%so that their orders are adjacent to one another.
%For example, if we create a pair of dots using \eqref{removing_fermions} in a 
%configuration where the upper fermion has order $m$ and the lower fermion has order $n$, 
%we must be careful to only annihilate them when they are in this configuration. 
%Failing to follow this rule will result in diagrams possessing erroneous minus signs. 


The braiding in the parent Ising theory means that we pick up non-trivial phase 
factors when sliding fermion dots over and around $\beta$ caps and cups. 
For example, we can compute
\begin{align} \label{capslide}
\capleftdot =
\mathord{\vcenter{\hbox{\includegraphics[scale=1]{cap_left_box.pdf}}}} =
\mathord{\vcenter{\hbox{\includegraphics[scale=1]{cap_left_through_box.pdf}}}} =
\mathord{\vcenter{\hbox{\includegraphics[scale=1]{cap_right_twist_box.pdf}}}}
= A^4 \caprightdot,
\end{align}
where in the last step we have used \eqref{sig_psi_Rsymbol}. 
Since in the Ising theory $A^4=\pm i$, we can invert \eqref{capslide} to find 
\begin{align} \label{cap_slide_back}
\caprightdot\; &= - A^4 \; \capleftdot.
\end{align}
By a similar argument we find
\be  \cuprightdot\; =  A^4 \; \cupleftdot\;. \ee
Because of the nontrivial rules for sliding dots through cups and caps, dots which live 
on the apex of a cup or the bottom of a cap (where the $\beta$ line is horizontal) are ambiguous, 
and we will not allow them to be drawn in our fusion diagrams.

We stress that these phases are derived completely from the {\it braiding data} of the Ising theory. 
%They also must be such that taking a fermion dot around a circular $\beta$ loop gives a factor of $-1$, 
%which enforces the constraint that $A^8 = -1$. 

Note that the above relations imply that even-parity $\beta$ loops are non-zero, while odd-parity $\beta$ loops vanish:
\be \mathord{\vcenter{\hbox{\includegraphics[scale=1]{beta_circle.pdf}}}}=0 .\ee
This is as expected -- dragging the fermionic dot around the circle rotates it through $2\pi$.
%which can be easily seen by dragging the dot once around the circle. 
%The fact that $A^8=-1$ must also be true because dragging the fermion once around the circle 
%amounts to a $2\pi$ rotation of the fermion framing, which must be equivalent to multiplication by $-1$. 
%The constraint $A^8=-1$ is satisfied in all the Ising theories. 
%However, in more general examples this constraint on the braiding data is a strong one, 
%and significantly limits the types of theories that can have objects with $\cl_1$ 
%endomorphism algebras capable of ``absorbing'' fermions.


The final local relations that will be important in what follows are the $F$-moves, 
which provide linear relations between different isotopy classes of diagrams.
The $F$-symbols in the condensed $C_2$ theory can be worked out using our rules 
for manipulating condensed $\psi$ worldlines and our knowledge of the $F$-symbols 
in the parent Ising theory.
We begin with a diagram in the Ising theory, apply an $F$-move, 
and then remove all $\psi$ lines through condensation to evaluate the $F$-move in the $C_2$ theory. 
For example, in the parent Ising theory we have
\begin{align}
\doublebeta = \frac{1}{d} \left(\doublecups + \doublecuppsi\right).
\end{align}
When we condense $\psi$, the second diagram on the left hand side becomes 
\be \label{fmove_isingtoC2}
\doublecuppsi = A^{-4}\; \mathord{\vcenter{\hbox{\includegraphics[scale=1]{double_cup_psi_line_wsemicircle.pdf}}}}\; \mapsto A^{-4}\;
\doublecupdots\;. \ee
Note that in the first step of \eqref{fmove_isingtoC2} we have displaced the 
vertical $\psi$ line to the right, so that it never intersects the $\beta$ line at 
the apex of a cap or the bottom of a cup.
We do this to avoid ambiguities in the fermion framing, 
which as discussed earlier always points ``to the left'', 
meaning that dots living on horizontal $\beta$ lines are not well-defined. 
While we choose to displace the $\psi$ line to the right in \eqref{fmove_isingtoC2}, 
this is merely a gauge choice: we could have equally well chosen it to be displaced to the left. 
Recapitulating, we see that in the $C_2$ theory we have the $F$-move
\be \doublebeta\; = \frac{1}{d} \left( \doublecups \; + \;A^{-4} \doublecupdots\right).
\label{Fmove}\ee
By similar reasoning we can derive the other nontrivial $F$-move in the $C_2$ theory, which is
\begin{align}
\doublecups\; &= \frac{1}{d} \left(\doublebeta \; + \; \doublebetadots \right).
\end{align}

The fact that $\beta$ lines can host dots means that $\beta$ has an endomorphism which 
is not a multiple of the identity, 
which is a hallmark of physics that cannot be found in bosonic topological phases. 
Indeed, any section of a given $\beta$ worldline may look like
\begin{align} \label{betaendos}
\mathord{\vcenter{\hbox{\includegraphics[scale=1]{straight_beta.pdf}}}} \qquad {\rm or} \qquad \mathord{\vcenter{\hbox{\includegraphics[scale=1]{straight_beta_dot.pdf}}}}.
\end{align}
The two diagrams in \eqref{betaendos} are the generators of the endorphism algebra of $\beta$.
Since we have one even generator and one odd generator we see that $\text{End}(\beta) \cong \mathbb{C}\ell_1$, 
where $\cl_1$ is the first complex Clifford algebra (generated by $1$ and a single odd-parity generator). 
More generally, the vector space assigned to a disk with $2n$ $\beta$ strings ending on its boundary is 
has dimension $2^n$, and the endomorphism algebra of $\beta^{\tp n}$ (i.e.\ $n$ copies of $\beta$ on a line) is
isomorphic to $\cl_n$.

In more general contexts, we will refer to simple objects whose endomorphism algebras are isomorphic 
to $\cl_1$ as ``q-type objects'', and those whose endomorphism algebras are isomorphic to $\cc$ 
as ``m-type objects''. 
From the above information, we can infer the fusion rule
\be \beta\tp\beta \cong \cc^{1|1} \cdot \unit, \ee
where $\cc^{1|1}$ is the complex vector space with a single even generator and a single odd generator, 
corresponding to the even and odd channels of the fusion product $\beta\tp\beta$. 


In bosonic theories, having $\End(\beta)\cong\cl_1$ would imply that $\beta$ is not a simple object, 
since by Shur's lemma the endomorphism algebra of any simple object must be a division algebra, and
since $\cc$ is the only ungraded division algebra.
Nevertheless, $\beta$ {\it is} a simple object\footnote{Indeed, if we tried to decompose $\beta$ 
into two idempotents, they would each be linear combinations of the two pictures in \eqref{betaendos}, 
which have different fermion parity.
But idempotents must have even parity.}
%Since diagrams with different fermion parities are in different superselection sectors, 
%we are not allowed to add them together to form linear combinations, which is a contradiction.}.
This is possible because in fermionic theories, the Hilbert spaces we use are supervector spaces, 
compared to the regular vector spaces of bosonic theories. 
Unlike in the bosonic case, there are {\it two} super division algebras, $\cc$ and $\cl_1$.
This means that simple objects in the fermionic setting can have endomorphism algebras of either $\cc$ or $\cl_1$.  
Later on, we will see that the existence of simple objects with $\cl_1$ endomorphism 
algebras is responsible for a large part of the novel physics that occurs as a result of fermion condensation. 

Finally, we mention a higher-level way of understanding the content of the $C_2$ theory from the
parent Ising theory. We begin by noting that the principle graph for the Ising theory 
is given by the $A_3$ Dynkin diagram (see the top left of Table \ref{C2_data_table}). 
Condensing $\psi$ means establishing an isomorphism between $\psi$ and $\unit$, 
so that in the condensed theory $\unit$ and $\psi$ correspond to the same node of the 
principal graph. This identification can be done by ``folding'' the $A_3$ principal graph 
about the central node so that the $\unit$ and $\psi$ nodes are identified. 
Note that $\sigma$ is preserved under the folding, which translates into the fact that the 
image of $\sigma$ in the condensed theory (namely $\beta$) has a nontrivial endomorphism 
algebra. 
The resulting folded principal graph is shown in the top right of Table \ref{C2_data_table}: the double 
line indicates the two fusion channels in $\beta\tp\beta \cong\cc^{1|1}\cdot \unit$, the 
double circle indicates that $\beta$ has a two-dimensional endomorphism algebra, and 
the arrows have been chosen to point away from the object with larger endomorphism 
algebra. The resulting principal graph is precisely the $C_2$ Dynkin diagram, 
which is why we call the condensed theory the $C_2$ theory. 
This idea can be applied to perform fermion condensation in many other theories (most straightforwardly 
the other theories in the $A_n$ series which contain a fermion). 
We will explore several examples along these lines in later sections. 



\begin{table}
	\fbox{\begin{minipage}{148mm}
	\vspace{3mm}\begin{center}{\begin{minipage}{128mm}
		\setlength{\parskip}{0ex}
		\begin{align*}
		\xymatrix @!0 @M=4mm @R=6mm @C=60mm {
		 \AThreeDynkin \ar@<7pt>[r]^{\text{condense $\psi$}}&   \CTwoDynkin
		 }
		\end{align*}
		
		\textbf{Basic data:}\\[-4ex]
\begin{flalign*} & \begin{array}{c @{\quad \quad  } c @{\quad \quad } c @{\quad \quad } c}
			\text{simple objects}	&	\text{fusion rules} &   \text{dimensions} & \text{Koszul signs}
		\\[.5ex]
			\text{$\unit$ and $\beta$}
			&	 \beta \tp \beta \cong \mathbb{C}^{1|1}\cdot \mathds{1}  & \dbeta_\beta  = d &  \SigmaDotDot = - \SigmaDotDotExchange
		\end{array} & \end{flalign*}
\vspace{3mm}
		\textbf{Linear relations:}\\[-4ex]
		\begin{flalign*} & \begin{array}{r @{\quad \quad} l @{\quad \quad} l @{\quad \quad} l}
			\text{F-symbols}
			&	d\;  \TwoLine =  \CupCap  +A^{12}\CupCapDots  & d\; \CupCap =\TwoLine + \TwoLineDots
				&	\eqref{Fmove}
		\\[4ex]
			\begin{tabular}{c}Fermion\\ pairing\end{tabular}
			&	\;\;  \SigmaDotDot = A^4\; \FubeXss \quad  \eqref{removing_fermions} & \; \begin{tabular}{l}$\CapDotLeft =  A^4 \CapDotRight$ \\ \\$ \CupDotRight = A^{4} \CupDotLeft $ \end{tabular}
				&	\eqref{cap_slide_back}
			\end{array} & \end{flalign*}
			 $A^2 = - e^{\pm i \pi /4}$ \quad \quad $d  = -A^2 - A^{-2}$ \quad  \eqref{QuantumDimensions}
	\end{minipage}}\end{center}\vspace{1mm}
	\end{minipage}}
	\caption{Summary of $C_2$ data}  \label{C2_data_table}
\end{table}




%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Quasiparticle excitations and the tube category of $C_2$} \label{C2_quasiparticles}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

In this section, we identify the quasiparticle excitations 
in the $C_2$ theory.
We will discuss the quasiparticles in the theory, their fusion rules, their statistics, and the 
modular transformations of the ground states on the torus.
We will identify the excitations using a fermionic generalization of a device known as the {\it tube category}. 
We will briefly review the tube category as applied to the $C_2$ theory below; 
for a more detailed overview and for an explanation of why the fermionic version of the tube category computes the excitations, 
we refer the reader to Section \ref{more_on_tubes}, where we discuss the construction in full generality. 

%As mentioned in the introduction, it is premature to call the objects in the tube category ``excitations'' until 
%we have defined a Hamiltonian that produces the ground states of the fermionic string-net TQFTs 
%we are studying and shown that that the excitation spectrum of this Hamiltonian is reproduced by the 
%objects of the tube category, 
%However, we should reiterate that what we're about to say makes sense without the Hamiltonian point of view (indeed, 
%the paper would make perfectly good sense if we ignored Hamiltonians altogether), and 
%exists as a legitimate mathematical construction in its own right 
%within the self-contained world of fermionic TQFTs. 
%For the benefit of more physically-inclined readers 
%we will use the ``Hamiltonian/ground-state/excitation'' terminology 
%in this section, although not until Section \ref{Super_pivotal_Hamiltonian} will we describe a Hamiltonian whose 
%ground state is isomorphic to the Hilbert space of this string net model.

For the benefit of more physically-inclined readers 
we will use the ``Hamiltonian/ground-state/excitation'' terminology 
in this section, 
even though (as discussed in the introduction) we will not define the relevant Hamiltonian until Section \ref{Super_pivotal_Hamiltonian}.
The constructions in this section all take place within the self-contained world of TQFTs defined via string nets;
the Hamiltonian/ground-state/excitation interpretation is optional.

%%KW: This paragraph seems too dense to me.  Is it necessary?
%The setting for examining a collection of $n$ excitations in a given topological phase is a manifold with $n$ circular punctures, 
%with an excitation localized at the location of each puncture. 
%The tube category $\tube(C_2)$ contains all spin tubes with $C_2$ string-nets drawn on their surfaces modulo local relations, 
%and $\tube(C_2)$ acts on the punctures by gluing in tubes to each puncture. 
%Two tubes $a$ and $b$ can be composed by stacking $a$ on top of $b$, with the stacking operation playing the role of a 
%multiplication law in an algebra. 
%Determining the spectrum of excitations in the $C_2$ theory can thus be done by writing down a collection of independent 
%spin-structure-equipped tubes with string nets drawn on their surfaces, 
%finding their algebraic behavior under stacking, and computing the minimal idempotents of the resulting algebra. 



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Finding the quasiparticle excitations}   \label{C2excitations}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

We now turn to a detailed study of the tube category for $C_2$. 
The objects of $\tube(C_2)$ are given by spin circles with a finite number of marked points 
labeled by simple objects of $C_2$.
There are two spin structures on the circle: bounding (anti-periodic boundary conditions; non-vortex) and 
non-bounding (periodic boundary conditions; vortex).
%Each object in $\tube(C_2)$ thus possesses an additional label identifying the spin structure of the underlying circle. 
Each object in $\tube(C_2)$ thus determines a choice of spin structure of the underlying circle. 

It suffices to consider only objects with at most one labeled point.
This is because any other object is isomorphic to a direct sum of objects with at most one labeled point.
Note also that an object with a point labeled by $\mathds{1}$ (the trivial object of $C_2$)
is isomorphic to the object obtained by erasing that marked point.
In particular, a circle with no marked points is isomorphic to a circle with a single point labeled by $\mathds{1}$.


Since there are two simple objects in $C_2$, 
for a fixed spin structure there are only two possible labels that can be assigned to a marked point,
\begin{align}
\underset{\mathds{1}}{\TubeBCx{B}} \quad \quad \quad \underset{\beta}{\TubeBCx{B}} \quad \quad \quad \quad \quad \quad \underset{\mathds{1}}{\TubeBCx{N}} \quad \quad \quad \underset{\beta}{\TubeBCx{N}}
\end{align}
where $B$, $N$ denote bounding and non-bounding spin structures respectively. 

Morphisms of $\tube(C_2)$ are 
defined to be cylinders (which we will draw as annuli) decorated by $C_2$ string-nets.
A given morphism $a\ra b$ is thus an annulus whose outer (inner) boundary conditions are determined by the object $a$ ($b$). 

After applying local relations (F-moves, dot-cancellations, removing trivial loops), 
an arbitrary string-net diagram on any tube can be reduced to a linear 
combination of the following diagrams:
\begin{align}
\label{mortube}
\text{mor}(\underset{\mathds{1}}{\TubeBCx{J}} \rightarrow \underset{\mathds{1}}{\TubeBCx{J}}) &= \mathbb{C}\left[ \Fubex{\FubeXXXA}{J} ,  \Fubex{\FubesXsA}{J}, \Fubex{\FubesdXsA}{J} \right] \\
\text{mor}(\underset{\beta}{\TubeBCx{J}} \rightarrow \underset{\beta}{\TubeBCx{J}}) &= \mathbb{C}\left[   \Fubex{\FubeXssA}{J} ,  \Fubex{\FubessXA}{J}, \Fubex{\FubeXsdsA}{J} , \Fubex{\FubessdXA}{J} \right] \\
\\
\text{mor}(\underset{\mathds{1}}{\TubeBCx{B}} \rightarrow \underset{\beta}{\TubeBCx{N}}) &= 0 \quad \quad \quad \quad \text{mor}(\underset{\beta}{\TubeBCx{N}} \rightarrow \underset{\mathds{1}}{\TubeBCx{B}}) = 0
\end{align}
with $J =B$ for bounding spin structure, and $J =N$ for non-bounding spin structure. 
In the first row we have listed all possible tubes which take the trivial boundary condition back to itself, 
and in the second row the tubes which take the $\beta$ marked point back to itself.
Notice that all non-zero tubes for $C_2$ have the same label at the two marked points.
For general input categories this won't happen; see Sections \ref{so36} and \ref{halfesix} for examples.



Depending on the spin structure on the annulus, some of the above diagrams may be zero.
With a bounding spin structure, a fermionic dot picks up a factor of $-1$ if it moves around the annulus.
On the other hand a fermionic dot picks up a factor of $+1$ if it moves around the annulus with non-bounding spin structure.

As we said above, not every string diagram in the annulus is consistent with a given spin structure.
For example,
\begin{align}
\label{BoundingNullVector}
\Fubex{\FubesdXsA}{B}\;  = - \; \Fubex{\FubesdXsA}{B} \implies \Fubex{\FubesdXsA}{B} = 0,
\end{align}
where we have simply pulled the fermion around the non-contractible loop on the tube. 
A non-bounding tube with a horizontal $\beta$ line is also zero, since
\begin{align}
\label{non-boundingNullVector}
\Fubex{\FubesXsA}{N}\; =\; A^{-4} \Fubex{\FubesXsaA}{N} \; = A^{-4} \Fubex{\FubesXscA}{N} \; = \; -\Fubex{\FubesXsA}{N}
\end{align}
Where in the second step we have dragged one of the two fermions around the annulus.
All other tubes are nonzero for both spin structures, and so a complete basis for tubes in the bounding sector is given by
\begin{align}
 \label{atubes}
\tube^B_{\unit \rightarrow \unit} &= \mathbb{C} \left[\Fubex{\FubeXXXA}{B}  ,\Fubex{\FubesXsA}{B}\right]\\
\tube^B_{\beta \rightarrow \beta}  &=  \mathbb{C} \left[\Fubex{\FubeXssA}{B}  ,\Fubex{\FubessXA}{B},\Fubex{\FubeXsdsA}{B},\Fubex{\FubessdXA}{B}\right]
\end{align}
while a basis for the non-bounding sector is given by
\begin{align}
\label{ptubes}
\tube_{\unit \rightarrow \unit}^N &= \mathbb{C}\left[ \Fubex{\FubeXXXA}{N}  ,\Fubex{\FubesdXsA}{N} \right]\\
\tube_{\beta \rightarrow \beta}^N &= \mathbb{C}\left[ \Fubex{\FubeXssA}{N}  ,\Fubex{\FubessXA}{N} ,\Fubex{\FubeXsdsA}{N} ,\Fubex{\FubessdXA}{N}  \right]
\end{align}

The multiplication operation in the tube category is given by stacking tubes on top of one another 
and simplifying the resulting tube using local relations.  
For example, in the non-bounding sector we have
\begin{align}
\label{OddOddC2Stack}
\Fubex{\FubesdXsA}{N} \;  \cdot  \; \Fubex{\FubesdXsA}{N}  \;=\; \Fubex{\FubesddXsA}{N} \;=\; \frac{1}{d} \left(
\Fubex{\RDotTwobA}{N}
+ A^{-4} \Fubex{\RDotTwocA}{N}  \right) \; = \; 2 \Fubex{\FubeXXXA}{N}
\end{align}
\kw{Using $\times$ for composition in a category is a little weird/unconventional.
We might want to change to $\bullet$ or $\cdot$.
\dave{What about using $\circ$? I think we sometimes use this for composition of morphisms.}}
\kw{$\circ$ is common, but is always used with the ``function" convention for ordering morphisms,
rather than the ``arrow" convention which we use here.}
\dave{Ok. I don't mind which dot we use.}
\kw{I propose we go with cdot, and maybe add a quick explanation before we first use it.}
\dave{Sounds good. 
I made the change to the equation.
How about we replace `For example... by: 
We denote the multiplication operation by a $\cdot$, 
and glue the first tube into the inner circle of the second, 
as the following example illustrates,}

Note that since the spin structures on two tubes being fused must agree on the boundary 
at which they are fused, non-bounding tubes can only be stacked on top of non-bounding tubes, 
and similarly for bounding tubes.



Relations like the ones above allow us to find the (isomorphism classes of) minimal idempotents of the tube category. 
First, we turn to an analysis of tubes with bounding spin structure. 



%%%%%%%%%%%%%%%%%%%%%%%
\subsubsection{Non-vortex spin structure}
%%%%%%%%%%%%%%%%%%%%%%%%

Let us first examine the tubes with no charge\footnote{We define the ``charge'' of a tube to be the label of the 
marked point of the upper boundary of the tube, so that tubes in $\tube_{a \rightarrow b}$ have charge $b$. 
This is slightly misleading however, because charge is not a good quantum number: in more general theories, 
$\tube_{a \ra b}$ will be nonzero even when $a\neq b$. 
%We will also see examples of theories in which certain 
%equivalence classes of excitations contain tubes of different charge (a non-fermionic version of this is the 
%doubled Fibonacci theory).
}, that is, cylinders 
with bounding spin structures and empty boundary conditions on both their top and bottom, which are the cylinders in $\tube^B_{\unit \rightarrow \unit}$. 
We see that this algeba \eqref{atubes} has two even generators, and so as a vector space
\begin{align}
\tube^B_{\unit \rightarrow \unit} \cong \mathbb{C}^{2|0}
\end{align}
There is only one possible super algebra structure on $\mathbb{C}^{2|0}$; it is the sum of two trivial 1-dimensional algebras
$\End(\cc)\oplus \End(\cc)$ (or $\cc \oplus \cc$ for short, where here $\cc$ denotes a 1-dimensional 
algebra rather than a 1-dimensional vector space).
This sector therefore contains two minimal idempotents, which we will call $m_\unit$ and $m_\psi$.
Explicitly, they are 
\be
m_\unit = \frac{1}{2}\left( \Fubex{\FubeXXXA}{B} \; +\; \frac{1}{d}\Fubex{\FubesXsA}{B}\right),\qquad 
m_\psi = \frac{1}{2} \left( \Fubex{\FubeXXXA}{B} \; -\; \frac{1}{d} \Fubex{\FubesXsA}{B}\right).\ee
One can check that the action of any element from $\tube_{\unit \rightarrow \unit}^B$
on both $m_\unit$ and $m_\psi$ is simply scalar multiplication. 


Now we turn to the endomorphism algebra $\tube^B_{\beta \rightarrow \beta}$, defined in \eqref{atubes}, 
of charged tubes: those whose top and bottom 
boundary conditions consist of a single marked $\beta$ point. 
There are two non-zero even tubes and two non-zero odd tubes, hence as a vector space we have,
\begin{align}
\tube^B_{\beta \rightarrow \beta} \cong \cc^{2|2}.
\end{align}
This means that as an algebra $\tube^B_{\beta \rightarrow \beta}$ is either 
$\cl_2$ (a.k.a.\ $\End(\cc^{1|1})$) or $\cl_1\oplus \cl_1$. 

To figure out which case we have, we begin by writing down the multiplication rules. 
By using the local relations in the $C_2$ theory we can work out the multiplication table, 
which is presented in the following table. 
In the table, $A\times B$ means ``stack $A$ (left most column) on top of $B$ (top most row)''. 
For multiplications involving odd tubes, we always take fermions in the $A$ tube to have a 
higher ordering than the fermions in the $B$ tube. 

\be
\renewcommand{\arraystretch}{3}
\centering
\begin{tabular}{c | r r r r r}
$\times$ in $\tube^B_{\beta\rightarrow \beta} \vphantom{\scale{1.3}{\VerticalSpace}}$          & $\FubeXssA $ & $\FubeXsdsA $ & $\FubessXA $&$ \FubessdXA$  \\
\hline
$\FubeXssA$ & $\FubeXssA$ & $\ \FubeXsdsA$  & $\FubessXA$ & $\FubessdXA$  \\

$\FubeXsdsA$ & $\FubeXsdsA $& $A^{4}\FubeXssA$ & $-\FubessdXA $& $-A^{4}\FubessXA  $\\

$\FubessXA$   & $\FubessXA $&$ \FubessdXA  $&$A^{10}\FubeXssA $&$-A^{2}\FubeXsdsA $\\

$\FubessdXA    $&$ \FubessdXA $&$ A^{4}\FubessXA $&$ A^2 \FubeXsdsA $&$ A^6\FubeXssA$   \\
\end{tabular}
\ee


Since the multiplication table for $\tube_\beta^B$ is non-abelian, 
as an algebra it must be $\cl_2$, as the other possibility (namely 
$\cl_1\oplus\cl_1$) is abelian. 
In order to show that the previous table is indeed the multiplication table of $\cl_2$, 
one can identify,
\begin{align}
1 = \Fubex{\FubeXssA}{B} \qquad \gamma_1 = A^6 \Fubex{\FubeXsdsA}{B} \qquad \gamma_2 = A^5  \Fubex{\FubessdXA}{B} 
\end{align}
and check that the odd generators $\gamma_1$ and $\gamma_2$ satisfy $\gamma_1^2 = \gamma_2^2 = 1$, and $\{ \gamma_i, \gamma_j \} = 2 \delta_{ij}$. 
These are precisely the defining relations of $\cl_2 \cong \langle 1, \gamma_1,\gamma_2 \rangle$, and so we have $\tube_{\beta \rightarrow \beta}^B \cong \cl_2$.


The super algebra $\cl_2$ contains exactly two minimal idempotents, which we will call $m_\sigma^+$ and $m_\sigma^-$.
Explicitly,
\begin{align}
m_\sigma^{\pm} = \frac{1}{2}\left( \Fubex{\FubeXssA}{B} \pm  A^{3}\Fubex{\FubessXA}{B} \right) .
\end{align}
These two idempotents are isomorphic, in the sense that there exist 
endomorphisms (tubes) $u$ and $v$ such that $uv = m_\sigma^+$
and $vu = m_\sigma^-$\footnote{Indeed this must be the case, since $\cl_2$ is Morita equivalent to $\cc$, 
which has only one minimal idempotent.}.
%%KW: I don't understand this.  Is it necessary?  Would it make more sense to give an explicit u and v?
%This isomorphism is realized by creating a fermion on the top of the $\gamma_2$ tube (through the 
%isomorphism given by left multiplication by $\gamma_1$), dragging it around the $\gamma_2$ 
%tube to the bottom, and then annihilating it (through the isomorphism given by right 
%multiplication by $\gamma_1$)
The existence of this isomorphism means that $m_\sigma^+$ and $m_\sigma^-$ correspond to isomorphic simple 
modules and so represent the same
quasiparticle type.
Note that in this case $u$ and $v$ are necessarily odd; we say that $m_\sigma^+$ and $m_\sigma^-$ are {\it oddly} isomorphic.
When doing calculations we fix a particular representative of the $m_\sigma^\pm$ 
equivalence class, which we will choose to be $m_\sigma^+$. 




\subsubsection{Vortex spin structure} 
As in the last section, we first examine the endomorphism algebra $\tube^N_{\unit \rightarrow \unit}$, 
consisting of tubes with no charge and non-bounding spin structure.
As we saw in \eqref{ptubes}, this algebra is two dimensional, and generated by a single even vector 
and a single odd vector, so as a vector space we have
\be \tube^N_{\unit \rightarrow \unit } \cong \cc^{1|1}
\ee
The only possible algebra structure on $\cc^{1|1}$ is $\cl_1$. 
$\cl_1 = \langle 1,\gamma\rangle$ has only one simple module, namely $\cc^{1|1}$ with the matrix representation 
$\rho(1) = \sigma^0,\rho(\gamma)=\sigma^x$. 
Therefore, this endomorphism algebra will support only one quasiparticle. Since idempotents must always be even, 
the explicit presentation of this quasiparticle is simply the empty tube. We will denote this quasiparticle by $q_\sigma$:
\be q_\sigma = \Fubex{\FubeXXXA}{N} \ee


Now we examine the charge sector, corresponding to the algebra $\tube_{\beta \rightarrow \beta}^N$ 
of vortex tubes with nontrivial charge. 
As we have seen in \eqref{ptubes} this subalgebra again has two even generators and two odd generators, 
and so as a vector space:
\be \tube_{\beta \rightarrow \beta}^N \cong \cc^{2|2} \ee
Therefore, as an algebra, we must have $\tube_{\beta \rightarrow \beta}^N \cong \cl_2$ or $\tube_{\beta \rightarrow \beta}^N \cong \cl_1\oplus\cl_1$. 
To determine which choice is correct, we work out the multiplication table, which is
\be
\renewcommand{\arraystretch}{3}
\centering
\begin{tabular}{c | r r r r r}
$\times$ in $\tube^N_{\beta\rightarrow \beta} \vphantom{\scale{1.3}{\VerticalSpace}}$          & $\FubeXssA $ & $\FubeXsdsA $ & $\FubessXA $&$ \FubessdXA$  \\
\hline
$\FubeXssA$ & $\FubeXssA$ & $\ \FubeXsdsA$  & $\FubessXA$ & $\FubessdXA$  \\

$\FubeXsdsA$ & $\FubeXsdsA $& $A^{4}\FubeXssA$ & $\FubessdXA $& $A^{4}\FubessXA  $\\

$\FubessXA$   & $\FubessXA $&$ \FubessdXA  $&$A^{6}\FubeXssA $&$A^{6}\FubeXsdsA $\\

$\FubessdXA    $&$ \FubessdXA $&$ A^{4}\FubessXA $&$ A^6 \FubeXsdsA $&$ A^{10}\FubeXssA$   \\
\end{tabular}
\ee
Since the multiplication table is abelian, we must have $\tube_\beta^N \cong \cl_1\oplus\cl_1$ (as the other choice, $\cl_2$, is non-abelian). 
To see this explicitly, we make the identifications
\be \unit^\pm = \frac{1}{2}\left ( \Fubex{\FubeXssA}{N}  \pm A^5\Fubex{\FubessXA}{N} \right),\qquad   \gamma^\pm = \frac{A^6}{2}\left ( \Fubex{\FubeXsdsA}{N}  \pm A^5\Fubex{\FubessdXA}{N} \right).\ee
If we then re-write the multiplication table for $\tube_{\beta \rightarrow \beta}^N$ in terms of these generators, 
we see that it is indeed isomorphic to $\langle \unit^+ ,\gamma^+\rangle \oplus \langle \unit^- , \gamma^-\rangle =\cl_1\oplus\cl_1$, with $(\gamma^\pm)^2 = \unit^\pm$. 
We therefore have two (non-isomorphic) idempotents, $q_\unit = \unit^+$ and $q_\psi = \unit^-$.
Thus, the $\tube_{\beta \rightarrow \beta}^N$ 
endomorphism algebra gives rise to two q-type quasiparticles. (Recall that a q-type object is a simple
object whose endomorphism algebra is $\cc^{1|1}$. Simple 
objects whose endomorphism algebras are isomorphic to $\cc$ are referred to as m-type.)

\medskip

To summarize, we have found six types of quasiparticles in the theory: three non-vortex quasiparticles 
associated with tubes possessing bounding spin structures, and three vortex quasiparticles associated 
with tubes possessing non-bounding spin structures. 
They are displayed in Table \ref{CTwoParticles}.
The quantum dimension of these excitations can be computed \kw{how does that go? 
\dave{Perhaps the same way we do for bosonic theories. 
Compute the dimension of the vector space as a function of the number of strands.
Ethan is that true? Or did you have something else in mind?}
\ethan{yeah, by either finding eigenvalues of fusion matrices, or by computing asymptotic dimensions
of fusion spaces. Not sure if it'll work for arbitrary fermionic theories though, so I modified the sentence 
to just talk about tracing} }
by tracing out the 
idempotents associated with each excitation, which we elaborate on in Section \ref{qdims_and_traces}. 
The quantum dimensions are displayed in Table \ref{C2Data}. 
\begin{table}
  \centering
    \begin{align}
\nonumber
\begin{array}{l l l}
\multicolumn{1}{c}{\text{bounding}} &{\quad \quad \quad}& \multicolumn{1}{c}{\text{non-bounding}} \\
\cline{1-1}\cline{3-3}&\qquad&\\
m_\unit = \frac{1}{2}\left( \Fubex{\FubeXXXA}{B} \; +\; \frac{1}{d}\Fubex{\FubesXsA}{B}\right) & & 
q_\unit = \frac{1}{2}\left ( \Fubex{\FubeXssA}{N}  + A^5\Fubex{\FubessXA}{N} \right)\\
&&\\
m_\sigma^{+} = \frac{1}{2}\left( \Fubex{\FubeXssA}{B} +  A^{3}\Fubex{\FubessXA}{B} \right) & &
q_\sigma = \Fubex{\FubeXXXA}{N} \\
&&\\
m_\psi = \frac{1}{2} \left( \Fubex{\FubeXXXA}{B} \; -\; \frac{1}{d} \Fubex{\FubesXsA}{B}\right) & & 
q_\psi = \frac{1}{2}\left ( \Fubex{\FubeXssA}{N}  - A^5\Fubex{\FubessXA}{N} \right)\\
&&\\
\end{array}
\end{align}
\caption{\label{CTwoParticles} Representative idempotents for the six quasiparticles in the $C_2$ theory.
The non-bounding (i.e., vortices) are all q-type particles, while the bounding (i.e., non-vortex) particles are all m-type.
We have chosen $m_\sigma^+$ as the representative of the isomorphism class given by $m_{\sigma}^+$ and $m_\sigma^-$. }
\end{table}




\begin{table}
\begin{flalign*} & \begin{array}{r@{ \quad \quad \quad}  c @{\quad \quad} c @{\quad \quad} c @{\quad \quad \quad \quad } c  @{\quad \quad} c @{\quad \quad} c  }
			\text{particle}				&m_\unit		&m_\sigma^+		&m_\psi	&q_\unit	&q_\sigma	&q_\psi \\[.5ex] \hline \\ [-2ex]
			\text{quantum dimension}		&1			&\sqrt{2}		&1		&\sqrt{2}	&2		&\sqrt{2} \\ [.5ex]
						\end{array} & \end{flalign*}
	\caption{\label{C2Data} $\tube(C_2)$ quantum dimensions. The total quantum dimension is $\mcd = \sqrt{8}$.
	The quantum dimensions above have been normalized so that the trivial idempotent $m_\unit$ has unit quantum dimension.
}
	
\end{table}






%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Quasiparticle fusion rules} \label{C2_fusion_rules}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

With all quasiparticles in hand, we are ready to compute their fusion rules. 
We postpone a more general discussion of how to compute fusion rules in fermionic theories to Section \ref{fusion_rules}, 
and in this section restrict ourselves to working out examples for the $C_2$ theory. 


%The quasiparticles -- or primitive idempotents -- displayed in Table \ref{CTwoParticles} naturally define 
%simple modules of the tube category, which are the images of the primitive idempotents.
%These simple modules are irreducible representations 
%of the tube category, and so to each quasiparticle $a$ we can construct an irreducible representation, 
%which we will also denote as $a$. 

Recall that to each minimal idempotent $e$ we can associate an irreducible module 
(a.k.a.\ irreducible representation) $M_e$ as follows.
Let $\mct$ denote the tube category, and let $x$ be object
of $\mct$ which hosts $e$ (i.e.\ $e\in \End(x)$).
To each object $y$ of $\mct$, the module $M_e$ associates the subspace of $\mor(x\to y)$ consisting of morphisms
of the form $ef$, where $e$ is our chosen idempotent and $f$ is an arbitrary morphism from $x$ to $y$.
We can express this compactly as
\be
	M_e = e\mct .
\ee
It is easy to check that if $e$ and $e'$ are isomorphic idempotents, then $M_e$ and $M_{e'}$ are isomorphic modules, and conversely.
Geometrically, the module $M_e$ consists of tubes with $e$ fixed at one end and arbitrary string nets ($f$ above)
at the other end.

We will frequently simplify notation and denote both the idempotent $e$ and the corresponding module $M_e$ as simply $e$.

%Even after modding out by local relations, there will often exist several irreducible representations which are 
%isomorphic to one another, the collection of which form a single isomorphism class, 
%The choice of representative affects the explicit representation of the fusion space, but does not affect the 
%values of any gauge invariant quantities. 
%For example, the idempotent given by ${m_\sigma^+}$ constitutes a choice of representative of the isomorphism 
%class formed by $m_\sigma^+$ and $m_\sigma^-$, but we could have just as easily chosen ${m_\sigma^-}$ as a representative.

It is important to note that there many idempotents within a given equivalence class,
and these idempotents might be hosted at different objects.
Furthermore, the isomorphism relating two idempotents might be odd
(i.e.\ it reverses fermion parity).
Despite these differences, all of the idempotents within an equivalence class should be thought of as representing the same
anyon type.
To do calculations, we must choose a particular idempotent within the equivalence class.
This is analogous to a gauge choice.
For example, the idempotent given by ${m_\sigma^+}$ constitutes a choice of representative of the equivalence 
class containing $m_\sigma^+$ and $m_\sigma^-$, but we could have just as easily chosen ${m_\sigma^-}$ as a representative.

%Given two irreps $a$ and $b$, we can form the tensor product representation $a\tp b$, which need not be irreducible.
%Intuitively, forming $a\tp b$ amounts to fusing the quasiparticles $a$ and $b$ together by bringing them close 
%to one another, and ``zooming out'' to view $a$ and $b$ as a single composite quasiparticle. 
%The $\tp$ operation is the usual tensor product of representations when the tube category, viewed as an algebra, 
%comes equipped with a natural tensor product operation. 
%However, to precisely define the $\tp$ operation in general, we need to examine vector spaces on the pair of 
%pants: the tensor product $a \tp b$ is constructed by constructing a pair of pants with 
%boundary conditions on the two ``incoming'' legs determined by $a$ and $b$.
%We will defer a more precise discussion of this to Section \ref{fusion_rules}. 

Given two modules $a$ and $b$ of $\mct$, we can construct a tensor product module $a\tp b$.
Intuitively, forming $a\tp b$ amounts to fusing the quasiparticles $a$ and $b$ together by bringing them close 
to one another, and ``zooming out'' to view $a$ and $b$ as a single composite quasiparticle. 
To make this precise, we can impost the idempotent versions of $a$ and $b$ as boundary conditions on the two inner boundary components
of a twice-punctured disk $P$ (a.k.a.\ pair of pants).
Adding tubes to the outer boundary component of $P$ gives a module for the tube category, and this
module is, by definition $a\tp b$.
We will discuss this in more detail in \ref{fusion_rules}. 

We define the fusion space $V^{ab}_c$ as the space
\be V^{ab}_c \equiv {\rm mor}(c \ra a \tp b).\ee
Geometrically, $V^{ab}_c$ corresponds to the space of all string-net configurations (modulo local relations) 
on a pair of pants whose outgoing legs are labeled by the quasiparticles $a$ and $b$, and whose incoming leg is labelled by $c$. 

One subtle property of fermion theories is that the vector spaces $V^{ab}_c$ are {\it not} 
the vector spaces which appear in the direct sum decomposition of $a\tp b$. 
Instead, we define the fusion rule coefficients $\Delta^{ab}_c$ via\footnote{The $\Delta^{ab}_c$ are 
complex super vector spaces, not numbers.
They are a categorified version of the coefficients used to write a general vector as a linear combination
of basis vectors.}
\be \label{fusion_coeffs_defn} 
	a \tp b \cong \bigoplus_c \Delta^{ab}_ c c,
\ee
where the sum runs over a set of representatives for the equivalence classes of irreducible 
representations (equivalently, of minimal idempotents). 
In bosonic theories $V^{ab}_c = \Delta^{ab}_c$, but in fermionic theories the fusion spaces 
can be larger than the the fusion coefficients:
\be V^{ab}_c \cong \Delta^{ab}_c \tp \End(c).\ee
We demonstrate and elaborate on this in Section \ref{fusion_rules_and_fusion_spaces}. 

\medskip

We will now illustrate how to compute the fusion spaces with simple examples in the $C_2$ theory. 
Suppose we want to find the fusion rule for $q_\sigma \otimes m_\unit$.
We first note that spin structure considerations on the pair of pants require that any quasiparticle 
appearing in $q_\sigma \tp m_\unit$ be a vortex-type quasiparticle (one with a non-bounding spin structure). 
Furthermore, since both $m_\unit$ and $q_\sigma$ have no charge (no $\beta$ lines fixed to the boundaries of their tubes), 
we know that their fusion products cannot have any charge.
Since $q_\sigma$ is the only vortex-type quasi particle with no charge we know that it is the only particle 
which can appear in the tensor product of $q_\sigma$ and $m_\unit$.
By searching for pants invariant under the applications of the appropriate idempotents, we see that the super vector space 
$V^{q_\sigma m_\unit}_{q_\sigma}$ is isomorphic to $\cc^{1|1}$, with the even subspace generated by a single even vector
\begin{align}
[V^{q_\sigma m_1}_{q_\sigma}]^0 = \left\langle \PantsPAPA \; +\;  \frac{1}{d} \PantsPAsPA \right \rangle
\end{align}
and the odd subspace generated by a single odd vector
\begin{align}
[V^{q_\sigma m_1}_{q_\sigma}]^1 = \left\langle \PantsPsdAPA \; +\;  \frac{1}{d} \PantsPsdAsPA \right \rangle.
\label{apply_odd_endo}
\end{align}
Notice that to find the odd generator from the even one, we apply the odd endomorphism of $q_\sigma$ to the ``exterior'' 
boundary of the pair of pants.
Graphically, this corresponds to taking a $\beta$ loop with a single dot on it and inserting it in a position parallel 
to the outer boundary of the pair of pants. 



A more nontrivial fusion rule is $q_\sigma \tp q_\sigma$.
Since $q_\sigma$ has no charge, any quasiparticles appearing in $q_\sigma \tp q_\sigma$ must also carry no charge, 
since for the $C_2$ theory charge is a good quantum number. 
Additionally, any quasiparticles in $q_\sigma \tp q_\sigma$ must have non-vortex spin structures, so we know that 
only $m_\unit$ and $m_\psi$ can appear in $q_\sigma \tp q_\sigma$. This lets us work out the fusion spaces explicitly. 
We first work out the fusion space for $V^{q_\sigma q_\sigma}_{m_\unit}$.
The even part is generated by a single vector:
\begin{align}
[V^{q_\sigma  q_\sigma}_{m_\unit}]^0 = \left\langle \PantsPPAA  + \frac{1}{\sqrt{2}} \PantsPPAsA \right \rangle.
\end{align}
As with \eqref{apply_odd_endo}, we find the odd generator by using the odd endomorphism coming from $q_\sigma$:
\begin{align}
[V^{q_\sigma  q_\sigma}_{m_\unit}]^1 =\left \langle \PantsNNda  + \frac{1}{\sqrt{2}} \PantsNNd \right \rangle.
\end{align}
%The same odd vector space is found from applying the odd endomorphism from either of the $q_\sigma$ quasiparticles,
Therefore, $V^{q_\sigma q_\sigma}_{m_\unit} =  [V^{q_\sigma\tp q_\sigma}_{m_\unit}]^0 \oplus [V^{q_\sigma\tp q_\sigma}_{m_\unit}]^1 \cong \cc^{1|1}$.
An analogous calculation shows that $V^{q_\sigma q_\sigma}_{m_\psi} \cong \cc^{1|1}$,
and is generated by the two vectors
\begin{align}
V^{q_\sigma q_\sigma}_{m_\psi} =
\left \langle \PantsPPAA  - \frac{1}{\sqrt{2}} \PantsPPAsA \right \rangle 
\oplus \left\langle \PantsNNda  - \frac{1}{\sqrt{2}} \PantsNNd \right \rangle.
\end{align}
Summarizing, we have $q_\sigma \tp q_\sigma \cong \mathbb{C}^{1|1}m_\unit \oplus \mathbb{C}^{1|1} m_\psi$, with $V^{q_\sigma q_\sigma}_{m_\unit} \cong V^{q_\sigma q_\sigma}_{m_\psi}\cong\cc^{1|1}$.

%Again it has both even and odd components. The even part is generated two vectors:
%\begin{align}
%[V^{q_\sigma\tp q_\sigma}_{m_{\mathds{1}} \oplus m_\psi}]^0 &= \left\langle \PantsPPAA  + \frac{1}{\sqrt{2}} \PantsPPAsA \right \rangle \oplus \left\langle \PantsPPAA  - \frac{1}{\sqrt{2}} \PantsPPAsA \right \rangle \\
%&= [V^{q_\sigma\tp q_\sigma}_{m_\unit}]^0 \oplus [V^{q_\sigma\tp q_\sigma}_{m_\psi}]^0,
%\end{align}
%while the odd part is also generated by two vectors: 
%\begin{align}
%[V^{q_\sigma\tp q_\sigma}_{m_{\mathds{1}} \oplus m_\psi}]^1 &= \left\langle \PantsNNda  + \frac{1}{\sqrt{2}} \PantsNNd \right \rangle \oplus \left\langle \PantsNNda  - \frac{1}{\sqrt{2}} \PantsNNd \right \rangle \\
%&= [V^{q_\sigma\tp q_\sigma}_{m_\unit}]^1 \oplus [V^{q_\sigma\tp q_\sigma}_{m_\psi}]^1,
%\end{align}
%Summarizing, we have $q_\sigma \tp q_\sigma \cong \mathbb{C}^{1|1}m_\unit \oplus \mathbb{C}^{1|1} m_\psi$, with $V^{q_\sigma q_\sigma}_{m_\unit} \cong V^{q_\sigma q_\sigma}_{m_\psi}\cong\cc^{1|1}$.

As a final example, we will examine the fusion channel $m_\sigma^{+} \tp m_\psi$. 
Since $m_\sigma^{+}$ has nonzero charge while $m_\psi$ has no charge, anything appearing in $m_\sigma^+ \tp m_\psi$ 
must carry nonzero charge. Additionally, since both $m_\sigma^+$ and $m_\psi$ have non-vortex spin structures, 
their fusion products must possess non-vortex spin structures as well. Therefore, they must fuse to $m_\sigma^\pm$. 
Determining the fusion space $V^{m_\sigma^+ m_\psi}_{m_\sigma^\pm}$ thus amounts to identifying string-nets 
on the pair of pants which are invariant under the 
application of $m_\sigma^+$ and $m_\psi$ on the inner legs of the pants and invariant under 
the application of $m_\sigma^\pm$ on the outer leg of the pants. 

\dave{re-write of the following paragraph:
\kw{Rewrite seems mostly good, but see question below.}
First apply $m_{\sigma}^+$ and $m_\psi$ on the inner legs, 
and $m_{\sigma}^+$ on the outer leg to a generic linear combination of string nets on the pants. 
By using the linear relation,
\begin{align}
\PantsAstAAsA  = \frac{1}{\sqrt{2}} \;  \PantsAsAshAsvtA
\end{align}
one can check that the resulting vector space will be zero dimensional if the the pair of pants has even parity, and will be one dimensional if the pair of pants has odd parity, 
hence $m_\sigma^+ \tp m_\psi \cong \cc^{0|1} m_\sigma^+$.
Repeating the calculation for $m_\sigma^-$ on the outer leg results in a one dimensional vector space if the pair of pants has even parity, and zero otherwise.
\kw{It's not clear why you are repeating the calculation.}
\dave{It's definitely not necessary.
But there were two reasons. 
Above we say there are two options for the outer leg, 
so I thought we should do both. 
The other was to emphasize that we should fix a representative of the isomorphism class. 
But I think we've probably done this in a few different places.
I'm fine with removing the following three sentences. }
However, since we would like to fix a representative of the $m_\sigma^\pm$ isomorphism class to work with, 
we need to express the fusion product in terms of $m_\sigma^+$. 
Since $m^{-}_\sigma$ is oddly isomorphic to $m_\sigma^+$, we also find that $m_\sigma^{+} \tp m_\psi$ is oddly isomorphic to $m_\sigma^+$, consequently $V^{m_\sigma^+ m_\psi}_{m_\sigma^+} \cong \cc^{0|1}$.
The generator of this vector space can be obtained simply by using the explicit expressions for the $m_\sigma^+$ and $m_\psi$ idempotents. 
We find
\begin{align}
V^{m_\sigma^+ m_\psi}_{m_\sigma^+} = \left\langle \PantssvXsvdA -\frac{A^3}{\sqrt{2}}\PantssvtshsvdA + A^3\PantssvtXsvdA  - \frac{1}{\sqrt{2}} \PantssvshsvdA   \right \rangle.
\end{align}
}

To facilitate the calculation we observe that the $m_\sigma$ idempotent can be slipped down the pair of pants at the 
expense of introducing a $\beta$ line around the other leg,
\kw{I'm confused about what this means.  Does someone want to try to make it clearer?}
\dave{It's explaining a `trick' that we used relatively frequently in calculations. 
Just that dragging a $\beta$ strand over a disk labeled by the $m_\psi$ idempotent results in a minus sign.
I think it's easier to just tell the reader to plug in the two possibilities and realize one of them is zero dimensional. 
How about the re-write I propose above.
}
\begin{align}
\PantsAstAAsA  = \frac{1}{\sqrt{2}} \;  \PantsAsAshAsvtA
\end{align}
One can check that $m_\psi$ is an eigenstate of the closed sigma loop with eigenvalue $-\sqrt{2}$ and $m_1$ 
is an eigenstate with eigenvalue $+\sqrt{2}$. Hence one finds $m_\sigma^{+} \tp m_\psi  \cong m_\sigma^{-}$. 
However, since we would like to fix a representative of the $m_\sigma^\pm$ isomorphism class to work with, 
we need to express the fusion product in terms of $m_\sigma^+$. 
Since $m^{-}_\sigma$ is oddly isomorphic to $m_\sigma^+$, $m_\sigma^{+} \tp m_\psi$ is oddly isomorphic to $m_\sigma^+$, we find  $V^{m_\sigma^+ m_\psi}_{m_\sigma^+} \cong \cc^{0|1}$.
This generator of this vector space can be obtained simply by using the explicit expressions for the $m_\sigma^+$ and $m_\psi$ idempotents. We find
\begin{align}
V^{m_\sigma^+ m_\psi}_{m_\sigma^+} = \left\langle \PantssvXsvdA -\frac{A^3}{\sqrt{2}}\PantssvtshsvdA + A^3\PantssvtXsvdA  - \frac{1}{\sqrt{2}} \PantssvshsvdA   \right \rangle.
\end{align}


By following the approach outlined in these examples, it is straightforward to write down the table of fusion 
rules in the theory, which we present in Table \ref{fusiontable}. In the table, we list the fusion rule 
coefficients from \eqref{fusion_coeffs_defn}, with the bullets ($\bullet$) representing cases 
where $\Delta^{ab}_c \cong \cc^{1|1}$, and the appearance of $\cc^{0|1}$ indicating a purely odd fusion channel. 
The fusion spaces $V^{ab}_c$ can then be obtained through the use of $V^{ab}_c \cong \Delta^{ab}_c \tp \text{End}(c)$. 



			\begin{table}
 
\begin{flalign*} 
 \begin{array}{c@{ \;}  | c@{\quad } c @{\quad } c }
			\mca \tp \mca 		&m_\unit		&m_\sigma^+		&m_\psi		\\[.5ex] \hline \\ [-2ex]
			m_\unit		 	&m_\unit		&m_\sigma^+		&m_\psi		\\
			m_\sigma^+		&m_\sigma^+	&m_\unit \oplus \cc^{0|1} m_\psi &\cc^{0|1} m_\sigma^+		\\
			m_\psi		 	&m_\psi		&\cc^{0|1} m_{\sigma}^+		&m_\unit		\\
			\multicolumn{1}{c}{} \\ [1ex]
			\mca \tp \mcv 		&q_\unit			&q_\sigma						&q_\psi		\\[.5ex] \hline \\ [-2ex]
			m_\unit		 	& q_\unit		& q_\sigma					& q_\psi \\
			m_\sigma^+	 	& q_\sigma	& q_\unit \oplus  q_\psi			&  q_\sigma	\\
			m_\psi		 	& q_\psi		& q_\sigma					& q_\unit		\\
			\end{array} 	
& \quad \quad \quad 
\begin{array}{c@{ \;}  | c @{ \quad} c @{\quad } c }
			\mcv \tp \mca 		&m_\unit			&m_\sigma^+				&m_\psi		\\[.5ex] \hline \\ [-2ex]
			q_\unit		 	& q_\unit		& q_\sigma					& q_\psi \\
			q_\sigma	 		& q_\sigma	& q_\unit \oplus  q_\psi			&  q_\sigma	\\
			q_\psi		 	& q_\psi		& q_\sigma					& q_\unit		\\
			\multicolumn{1}{c}{} \\ [1ex]
			\mcv \tp \mcv 			&q_\unit				&q_\sigma 						&q_\psi		\\[.5ex] \hline \\ [-2ex]
			q_\unit		 		&\bullet m_\unit			&\bullet m_\sigma^+						&\bullet m_\psi 	\\
			q_\sigma		 		&\bullet m_\sigma^+		&\bullet (m_\unit \oplus  m_\psi )		&\bullet m_\sigma^+		\\
			q_\psi		 		&\bullet m_\psi			&\bullet m_\sigma^+ 					&\bullet m_\unit		\\
			\end{array}
 \end{flalign*}
 
 
\caption{ \label{fusiontable} The fusion rules in $\tube(C_2)$. 
	We have defined $\mca = \{ m_\unit, m_\sigma^+, m_\psi \} $ and $\mcv = \{ q_\unit, q_\sigma, q_\psi \}$ as the set of anyons and set of vortices, respectively.
	The ($a$-$b$)th entry in each table is the sum $\oplus_c \Delta_c^{ab} c$, where we have omitted any $\Delta^{ab}_c$ that is equal to $\cc$ and used $\bullet = \mathbb{C}^{1|1}$ to signify that the associated $\Delta^{ab}_c$ is isomorphic to $\cc^{1|1}$.
		Entries with $\cc^{0|1}$ indicate that the fusion channel is purely odd. 
	The fusion spaces can be obtained from this table according to $V^{ab}_c \cong \Delta^{ab}_c \tp \text{End}(c)$.
	For example, $V^{m_\psi q_\sigma}_{q_\sigma} \cong \cc \tp \cc^{1|1} = \cc^{1|1}$.
	}
\end{table}






%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Modular transformations and ground states on the torus} \label{modulartforms}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\dave{Note to self: Need to draw a picture which shows how the torus is cut and glued back 
together/explain the convention for the ``branch" cut.}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsubsection{$C_2$ string-nets on the torus} \label{c2_stringnets_torus}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%

In this section, we compute a standard basis for $C_2$ string-nets-modulo-local-relations on spin tori as well 
as the action of the mapping class groupoid and the modular $S$ and $T$ matrices.

%\kw{I think that if we think carefully about spin structures, the two S matrices are the same.}
%The modular $S$-matrix is related to, but distinct from, the matrix of mutual (braiding) statistics between particles, which 
%captures the braiding data of the quasiparticles in the theory.
%This is distinct from ordinary bosonic topological phases, where the modular $S$-matrix is identical to the matrix of 
%braiding statistics between the quasiparticles in the theory. 
%A discussion of braiding statistics is deferred until Section\ref{mutual_statistics}. 

Because the $C_2$ theory is dependent on the existence of a spin structure, 
in order to talk about ground states on a torus we must first specify the spin structure on the torus.
There are $|H^1(T^2;\zt)|=4$ different spin tori, obtained by choosing either bounding or non-bounding spin 
structures for two of the torus's three non-contractible cycles 
(with the spin structure along the third non-contractible cycle determined by those of the other two). 
To go from the annulus to the torus we identify the inner and outer circles, and label the different spin structures by 
\begin{align}
\AddDatTorus{\FubeXXXA}{X}{Y}\quad \quad \quad X,Y \in\{ B, N \}
\end{align}
where $X$ and $Y$ specify the spin structure along the azimuthal and radial cycles.
\kw{I find this graphical notation/convention kind of confusing.
It looks like you are labeling spin structures on the inner and outer boundary of the annulus.
One alternative would be a pair of perpendicular line segments (x and y axes), 
representing the meridian and longitude of the torus, each labeled by B/N.
(Or a rectangle instead of two line segments.)
Another possibility is to keep the annulus, but add a radial line segment and move the 
labeled so that it is clear that one
labels the drawn circle (boundary of annulus) and the other labels the radial loop.}
\dave{It's difficult to find one that looks good, and is also compatible with all the annuli we use. 
What about: 
}
\kw{maybe stick with the original notation, but add a figure that shows explicitly the two cycles
that X and Y are labelling (like your fig above, but also with a circular arrow or something for the B.
(maybe B and N should be changed to X and Y)}
\dave{Works for me. Done. See Figure below.}
\begin{figure}
  \centering
    \begin{align}
\nonumber
\newcommand{\AnnulusOption}{\mathord{\vcenter{\hbox{\includegraphics[scale=1]{AnnulusOption.pdf}}}}}
\AnnulusOption
\quad \quad \leftrightarrow \quad \quad 
\AddDatTorus{\FubeXXXA}{X}{Y}\quad \quad \quad X,Y \in\{ B, N \}
\end{align}
\caption{\label{TorusNotation} 
To go from the annulus to the torus we identify the inner and outer circles, and label the different spin structures by $X$ and $Y$ for the meridinal and longitudinal cycles on the torus, which correspond to the azimuthal and radial cycles on the annulus with the inner and outer circles identified.}
\end{figure}




If there was no interplay between a chosen spin structure and the string-net pictures drawn on the torus, 
and if the fermion parity of a ground state is fixed by the spin structure 
and the string-net picture drawn on the torus, we would expect $|H_1(T^2;\zt)|=4$ 
degenerate ground states 
for each choice of spin structure, since the $\beta$ lines obey $\zt$ fusion rules. 
We will see that naive guess is actually incorrect: instead, for each spin structure, 
one of the four putative states is a null vector, meaning that there is only a 
3-dimensional groundstate for each choice spin structure.

We will first use elementary arguments to find a spanning set for each of the four spin tori.
Later, using more sophisticated techniques, we will prove that these spanning sets are in fact bases.

Since $\beta$ lines obey $\zz/2$ fusion rules (see \ref{C2_data_table}), it is easy to see that any string net on a spin torus
is a linear combination of the following seven diagrams:
\be \label{seven_tubes} \Fubex{\FubeXXXA}{},\;  \Fubex{\FubesXsA}{},\;     \Fubex{\FubesdXsA}{},\; 
\Fubex{\FubeXssA}{},\; \Fubex{\FubeXsdsA}{},\; \Fubex{\FubessXA}{}, \; \Fubex{\FubessdXA}{}.
\ee
Indeed, using \eqref{Fmove} and the ability to remove topologically trivial $\beta$ loops, 
we can transform the $\beta$ loops into a standard representative of their
$\zz/2$ homology class.
The resulting loop will be decorated by some number of fermionic dots; using dot cancellation we can assume that the
loop will contain either 0 or 1 dot.
The seven diagrams listed above are the only independent diagrams that remain after applying these relations. 


However, for a given spin structure, some of the diagrams in \eqref{seven_tubes} will be zero.
To determine which of the diagrams are zero, we use the following three points:
\begin{enumerate}
	\item If one of the non-trivial cycles of the torus has an antiperiodic spin structure, then any odd diagram is zero.
	This is because we can translate the entire string net in the direction of the antiperiodic cycle.
	When we arrive back at our starting point, we have picked up a factor of $-1$ from the antiperiodicity.
	Thus odd diagrams are equal to $-1$ times themselves and are therefore zero.
	In particular, the three odd diagrams of \eqref{seven_tubes} are zero in the $BB$, $BN$ and $NB$ spin structures.
	\item If a diagram contains a $\beta$ loop without a dot (even/bosonic), and if that loop inherits the periodic spin structure,
	then the diagram is zero.
	To see this, we create two dots, slide one around the cycle, and then cancel the dots again.
	Because of the Koszul sign, we see that the diagram is equal to $-1$ times itself.
	(If the spin structure along the cycle were antiperiodic, there would be an additional sign to cancel the Koszul sign.)
	In particular, in the $NN$ spin structure all three of the even $\beta$ loops are zero.
	For the $BB$, $BN$ and $NB$ spin structures, exactly one of the three even $\beta$ loops fails this test and is zero.
	\item Finally, the empty diagram with $NN$ spin structure is zero. To show this, 
	we first create a topologically trivial circular $\beta$ loop. We then wrap it around the tube and fuse it 
	with itself to get the sum of two diagrams with parallel $\beta$ loops wrapping around the tube, one of 
	which has no fermion dots (the even channel of $\beta\tp \beta$) and one which has one dot on each $
	\beta$ loop (the odd fusion channel of $\beta\tp\beta$). 
	The diagram corresponding to the even fusion channel 
	is zero by point 2 above, while the diagram with two odd loops is zero by an argument similar to point 2: we slide one of the loops in the direction
	orthogonal to itself and pick up a Koszul sign, showing that it must be zero.
\end{enumerate}

Figure \ref{TorusBasisC2} shows the remaining non-zero diagrams for each spin structure.
It is easy to see that these diagrams are linearly independent if they are non-zero, but we have not yet proved that they are in fact non-zero.
To do this, we will employ a fancier argument relating a basis of the torus Hilbert space to minimal idempotents of the tube category.

Let $\tube^B$ denote the bounding tube category and $\tube^N$ denote the non-bounding tube category.
We can make use of the following results, which we prove in a more general context in Section \ref{torus_basis_theorem}:
The ground state spaces of the ${BB}, {NB},$ and ${BN}$ tori are purely even, with an orthogonal basis given by closed-up minimal idempotents of $\tube^B$.
Additionally, the ground state space of the $NN$ torus is isomorphic to $\cc^{p|q}$, where $p$ is the number of m-type idempotents of $\tube^N$
and $q$ is the number of q-type idempotents of $\tube^N$.
An orthogonal basis is given by (representatives of) the minimal m-type idempotents of $\tube^N$,
union $\{cl(\gamma_j)\}$,
where $\gamma_j$ runs through a set of representatives of odd endomorphisms of the minimal q-type idempotents of $\tube^N$.
We use $cl$ to denote the closure of an annular diagram on the torus.

For the $C_2$ theory, we have shown that $\tube^B$ has three m-type minimal idempotents, 
and $\tube^N$ has three q-type minimal idempotents.
Letting $\mch(T^2_{JK})$ denote the Hilbert space on the torus with $JK$ spin structure, 
it follows that $\mch(T^2_{BB}) \cong \mch(T^2_{NB}) \cong \mch(T^2_{BN}) \cong \cc^{3|0}$ and
$\mch(T^2_{NN}) \cong \cc^{0|3}$,
and so the diagrams of Figure \ref{TorusBasisC2} must indeed all be non-zero.




\begin{figure}
  \centering
    \begin{align}
\nonumber
\begin{array}{ l l l l }
\multicolumn{1}{c}{\mch(T^2_{XY})} &{\quad \quad \quad}& \multicolumn{1}{c}{\text{explicit basis}} & \\ \cline{1-1}\cline{3-3} && &\\
\mch(T^2_{BB}) \cong \mathbb{C}^{3|0} & & \AddDatTorus{\FubeXXXA}{B}{B} , \; \AddDatTorus{\FubesXsA}{B}{B}, \;  \AddDatTorus{\FubeXssA}{B}{B} &\\   
&&&\\
\mch(T^2_{BN}) \cong \mathbb{C}^{3|0} & & \AddDatTorus{\FubeXXXA}{B}{N} , \; \AddDatTorus{\FubesXsA}{B}{N}, \;  \AddDatTorus{\FubessXA}{B}{N} &\\  
&&&\\
\mch(T^2_{NB}) \cong \mathbb{C}^{3|0} & & \AddDatTorus{\FubeXXXA}{N}{B} , \; \AddDatTorus{\FubeXssA}{N}{B}, \;  \AddDatTorus{\FubessXA}{N}{B} &  \\
&&&\\
\mch(T^2_{NN}) \cong \mathbb{C}^{0|3} & & \AddDatTorus{\FubesdXsA}{N}{N} , \; \AddDatTorus{\FubeXsdsA}{N}{N}, \;  \AddDatTorus{\FubessdXA}{N}{N} &\\  
&&&\\ 
\end{array}
\end{align}
\caption{\label{TorusBasisC2} The ground states on the four different spin tori. 
Notice that the non-bounding torus (with $(N,N)$ spin structure) has only odd fermion parity ground states.}
\end{figure}



For future reference we also tabulate the change of basis between the ground-state tori in Figure \ref{TorusBasisC2} 
and the closed-up primitive idempotents.
To form string-net pictures drawn on tori from the idempotents, 
we close up the idempotents along the longitudinal direction by identifying the inner puncture 
of the annulus on which the idempotent lives with the outer puncture, 
specifying a choice of spin structure along the newly made cycle. 
We then express the result as a linear combination of the tori in Figure \ref{TorusBasisC2}.
For simplicity of notation, we will define 
\begin{align}
e=\; {\FubeXXXA} \quad h = \;{\FubesXsA}  \quad v =\; {\FubeXssA} \quad t = \; {\FubessXA}
\end{align}
and append subscripts to denote a particular spin structure. 
We will also use an overscript $\bullet$
if we are closing up an odd endomorphism rather than the idempotent itself.
For example,
\begin{align}
h_{NB}= \; \AddDatTorus{\FubesXsA}{N}{B} \quad \quad \text{and} \quad \quad \overset{\bullet}{t}_{NN} = \FubessdXA \; .
\end{align}
We can then compute the change of basis shown in Figure \ref{C2Change_of_Basis}.
\begin{figure}
  \centering
\begin{align}
\nonumber
\left( \begin{matrix}
m_\unit \\
m_\sigma^+\\
m_\psi \\
\end{matrix} \right)_{BB} 
&= \frac{1}{2}\left( \begin{matrix}
1&1/d&0\\
0&0&1\\
1&-1/d&0\\
\end{matrix} \right)
\left( \begin{matrix}
e\\
h\\
v\\
\end{matrix} \right)_{BB}
\quad \quad \quad
\left( \begin{matrix}
m_\unit \\
m_\sigma^+\\
m_\psi \\
\end{matrix} \right)_{BN} 
= \frac{1}{2}\left( \begin{matrix}
1&1/d&0\\
0&0&A^3\\
1&-1/d&0\\
\end{matrix} \right)
\left( \begin{matrix}
e\\
h\\
t\\
\end{matrix} \right)_{BN}\\
\nonumber
\left( \begin{matrix}
q_\unit \\
q_\sigma\\
q_\psi \\
\end{matrix} \right)_{NB} 
&= \frac{1}{2}\left( \begin{matrix}
0&1&A^5\\
2&0&0\\
0&1&-A^5\\
\end{matrix} \right)
\left( \begin{matrix}
e\\
v\\
t\\
\end{matrix} \right)_{NB}
\quad \quad \quad
\left( \begin{matrix}
\overset{\bullet}{q}_\unit \\
\overset{\bullet}{q}_\sigma\\
\overset{\bullet}{q}_\psi \\
\end{matrix} \right)_{NN} 
= \frac{1}{2}\left( \begin{matrix}
0&A^6&-A^{3}\\
\sqrt{2}&0&0\\
0&A^6&A^{3}\\
\end{matrix} \right)
\left( \begin{matrix}
\overset{\bullet}{h}\\
\overset{\bullet}{v}\\
\overset{\bullet}{t}\\
\end{matrix} \right)_{NN}
\end{align}
\caption{Change of basis between the quasiparticle (idempotent) basis given in Table \eqref{CTwoParticles} 
and the topological bases in Figure \eqref{TorusBasisC2} for the torus.
These are simply given by expressing the idempotents in the topological bases. 
Note that the odd torus has a sign ambiguity on each of the of the idempotents. 
We can require that $\overset{\bullet}{q}^2 = q$, but that leaves $\overset{\bullet}{q}$ ambiguous up to a $\pm$ sign. 
This ambiguity can lead to different $S$ matrices, see \eqref{NNSmatrix} and surrounding text for more details.}
\label{C2Change_of_Basis}
\end{figure}










%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsubsection{The modular $S$ and $T$ matrices}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{figure} 
\newcommand{\Space}{\; \; \; \; \; \; }
\newcommand{\Spacep}{ \; \; \; \mathop{\vphantom{\int}} \; \; \;    } 
\begin{align}
\nonumber
\xymatrix@!0 @M=1mm @R=7mm @C=30mm{
\AddDatTorus{\FubeXXXA}{B}{B}\ar @`{p+(-28.28,7.07),p+(-7.07,28.28)}^{S}  \ar@<1ex>[r]^T  & \AddDatTorus{\FubeXXXA}{B}{N} \ar@<1ex>[l]^T   \ar@<1ex>[r]^S&  \AddDatTorus{\FubeXXXA}{N}{B}  \ar@<1ex>[l]^S  \ar @`{p+(7.07,28.28),p+(28.28,7.07)}^{T } &\AddDatTorus{\FubeXXXA}{N}{N}  \ar @`{p+(7.07,28.28),p+(28.28,7.07)}^{S,T } 
}
\end{align} \nonumber
\caption{\label{spin_str_mapping_class_group}The action of the mapping class group on the four spin tori. 
The notation is such that the disk which bounds the cycle of the torus 
labeled by $B$ or $N$ has either a bounding ($B$) or non-bounding ($N$) spin structure. 
}
\end{figure}

In this section, we will compute the representation of the modular $S$ and $T$ matrices in the $C_2$ theory, which together generate the modular groupoid. 
The modular $S$-matrix acts on states on the torus by interchanging the meridional and longitudinal cycles 
of the torus.
%\footnote{An alternate picture of the modular $S$-matrix in terms of Turaev-Viro state sums 
%is as follows: we note that there are two ways of representing a given string-net configuration on a torus embedded 
%in $S^3$ in terms of Turaev-Viro state-sums: one way is to fill the exterior of the torus with a 
%Turaev-Viro state-sum with boundary conditions specified by the given string-net configuration, as discussed in the previous section. 
%The other is to fill the {\it interior} of the torus with a Turaev-Viro state-sum possessing the same boundary conditions. 
%The modular $S$-matrix performs the change of basis between these two choices.
%We will avoid using this in what follows because it is difficult to perform explicit calculations along these lines.}. 
If we draw the torus as a square with opposite sides identified, then $S$ acts by rotating the square by $\pi/2$ clockwise. 
The modular $T$ matrix represents the action of the Dehn twist on the torus, 
which corresponds to cutting the torus along a meridional cycle, 
twisting the boundary conditions at the cut by $2\pi$ relative to one another, and gluing the torus back together.
In terms the annular pictures we have been drawing of the tubes, the twist is accomplished by 
twisting the inner boundary of the annulus by $2\pi$ counterclockwise relative to the outer boundary. 

Importantly, the $S$ and $T$ modular transformations do {\it not} always preserve the spin structure of the torus they act on. 
Figure \ref{spin_str_mapping_class_group} shows how the different possible spin structures are permuted under $S$ and $T$. 
Since $T$ does not preserve the spin structures, it cannot generically have well-defined eigenstates with a definite spin structure,
meaning that it will generically not be diagonal in the idempotent (quasiparticle) basis. 
\ethan{This means that the topological spins of quasiparticles, defined as their eigenvalues under $T$, will not always be strictly speaking well-defined, 
with their well-definedness depending on their associated spin structure.}
In contrast with $T$, the action of $T^2$ preserves spin structures, and so we are still able to associate 
definite $T^2$ 
eigenvalues to the quasiparticles in the theory.
\ethan{Putting aside the issue of spin structures, the twist of an idempotent (defined as the phase acquired when performing a $2\pi$ twist on the tubes in a given idempotent) 
is in general only defined 
up to a $\pm$ sign (which has been discussed in e.g. \cite{cano2014,bruillard2017,gu2014}).}
More precisely, the twist of a given simple object in the tube category is ambiguous across the isomorphism 
class of that object. 
Indeed, we will see that the twists of the two idempotents in the $m_\sigma$ isomorphism class (namely $m_\sigma^+$ and 
$m_\sigma^-$) have twists that differ by a factor of $-1$. 
\kw{I used to think that the above is true, but now I think that for the bounding annulus, the twist eigenvalue
does not make sense, even if we fix a representative in the equivalence class.
(Or at least there is a sense in which it does not make sense.)
For the non-bounding annulus, the twist is fine.
We should think more about this.}
\dave{
I think Ethan's been advocating this point.
I keep waffling. 
In our description they aren't gauge invariant so we shouldn't expect them to be physically observable.
We could define the twists on the representatives through $T e_i = \theta_i e_iT$.
This preserves the spin structure on either side and should be well defined.
}
\kw{hmmm.  I'll think about that.}


We now proceed to examine the action of the $S$ and $T$ modular transformations on the four spin tori which compose 
the 12-dimensional space listed in Figure \ref{TorusBasisC2}.
Although the calculations are most easily performed in the topological basis in Figure \ref{TorusBasisC2}, 
it is more natural to analyze the resulting transformations in the idempotent basis given in Table \ref{CTwoParticles}. 
As mentioned earlier, the basis vectors in the idempotent basis are constructed by taking the idempotents associated with the 
quasiparticles identified in the previous section and closing them up (with different choices of spin structure) 
along the longitudinal direction. 
The change of basis between the topological and idempotent bases are written explicitly in Figure \ref{C2Change_of_Basis}. 


We'll start with the $(B,B)$ spin structure, which is preserved under the action of $S$. 
In the topological basis $(e,v,h)^T$ we find
\begin{align}
\left( \begin{matrix}
e\\
v\\
h\\
\end{matrix} \right)_{BB} 
\xrightarrow{S^{BB \rightarrow BB}} & \left( \begin{matrix}
1&0&0\\
0&0&1\\
0&1&0\\
\end{matrix} \right)
\left( \begin{matrix}
e\\
v\\
h\\
\end{matrix} \right)_{BB}.
\end{align}
To transform $S^{BB\rightarrow BB}$ into the quasiparticle basis we use Figure \ref{C2Change_of_Basis}.
After the change of basis we find the familiar matrix
\begin{align}
\left( \begin{matrix}
m_\unit\\
m_\sigma^+\\
m_\psi \\
\end{matrix} \right)_{BB} 
\xrightarrow{S^{BB \rightarrow BB}} &\frac{1}{2} \left( \begin{matrix}
1&d&1\\
d&0&-d\\
1&-d&1\\
\end{matrix} \right)
\left( \begin{matrix}
m_\unit\\
m_\sigma^+\\
m_\psi \\
\end{matrix} \right)_{BB}
\end{align}
which is identical to the $S$-matrix for the Ising TQFT. 

Now for the $(B,N)$ and $(N,B)$ spin structures.
These are interchanged by the $S$-matrix, as indicated in Figure \ref{spin_str_mapping_class_group}.
In the idempotent bases these induce transformations between the non-vortex and vortex quasi-particles.
We obtain 
\begin{align}
\left( \begin{matrix}
e\\
h\\
t\\
\end{matrix} \right)_{BN} 
\xrightarrow{S^{BN \rightarrow NB}} & \left( \begin{matrix}
1&0&0\\
0&1&0\\
0&0&A^{10}\\
\end{matrix} \right)
\left( \begin{matrix}
e\\
v\\
t\\
\end{matrix} \right)_{NB}
\quad \text{and} \quad 
\left( \begin{matrix}
e\\
v\\
t\\
\end{matrix} \right)_{NB} 
\xrightarrow{S^{NB \rightarrow BN}} & \left( \begin{matrix}
1&0&0\\
0&1&0\\
0&0&A^{6}\\
\end{matrix} \right)
\left( \begin{matrix}
e\\
h\\
t\\
\end{matrix} \right)_{BN}.
\end{align}
Notice that if we compose both transformations we get the identity. 
These can each be transformed into the idempotent bases using \eqref{C2Change_of_Basis}, 
where one finds,
\begin{align}
\left( \begin{matrix}
m_\unit\\
m_\sigma^+\\
m_\psi\\
\end{matrix} \right)_{BN} 
\xrightarrow{S^{BN \rightarrow NB}} &\frac{1}{2} \left( \begin{matrix}
1&d&1\\
-d&0&d\\ 
-1&d&-1\\
\end{matrix} \right)
\left( \begin{matrix}
\hat{q}_\unit\\
\hat{q}_\sigma^+\\
\hat{q}_\psi\\
\end{matrix} \right)_{NB}
\end{align}
and
\begin{align}
\left( \begin{matrix}
\hat{q}_\unit\\
\hat{q}_\sigma^+\\
\hat{q}_\psi\\
\end{matrix} \right)_{NB} 
\xrightarrow{S^{NB \rightarrow BN}} & \frac{1}{2}\left( \begin{matrix}
1&-d&-1\\ 
d&0&d\\
1&d&-1\\
\end{matrix} \right)
\left( \begin{matrix}
m_\unit\\
m_\sigma^+\\
m_\psi\\
\end{matrix} \right)_{BN}.
\end{align}
In order to make the matrix unitary, we have defined $\hat{q} = q/\sqrt{2}$ so that each $\hat{q}$ idempotent has unit norm.
To collect the results we've arrived at so far, we define
\begin{align}
{\bf M} = [ m_\unit \;  m_\sigma^+\;  m_\psi]^T \qquad \widehat{{\bf Q} }= [\hat{q}_\unit \; \hat{q}_\sigma \; \hat{q}_\psi ]^T
\end{align}
Then we have,
\begin{align}
\left( \begin{matrix}
{\bf M}_{BN}\\
\widehat{{\bf Q} }_{NB}\\
{\bf M}_{BB}\\
\end{matrix} \right)
\xrightarrow{\;\; S \; \; } & \left( \begin{matrix}
&S^{BN \rightarrow NB}&\\
S^{NB \rightarrow BN}&&\\
&&S^{BB \rightarrow BB}\\
\end{matrix} \right)
\left( \begin{matrix}
{\bf M}_{BN}\\
\widehat{{\bf Q} }_{NB}\\
{\bf M}_{BB}\\
\end{matrix} \right).
\end{align}

Similarly we can compute the modular $T$-matrix, the action of which twists the inner boundary of an annulus by an angle of $2\pi$ counterclockwise with respect to its outer boundary. 
This definition ensures that the $T$-matrix acts as the identity on tubes with no charge line 
(i.e. with no strings ending on their inner annular boundaries).
Within each spin structure sector the $T$-matrix is diagonal in the idempotent basis. 
\dave{Should we define a complex number via $T e = \theta eT$ somewhere?
And comment on the validity of calling it a twist.
}
We can read off the structure of the $T$-matrix with the help of Figure \ref{spin_str_mapping_class_group} to find
\begin{align}
\left( \begin{matrix}
{\bf M}_{BN}\\
\widehat{{\bf Q} }_{NB}\\
{\bf M}_{BB}\\
\end{matrix} \right)
\xrightarrow{\;\; T \; \; } & \left( \begin{matrix}
&&T^{BN \rightarrow BB}\\
&T^{NB \rightarrow NB}&\\
T^{BB \rightarrow BN}&&\\
\end{matrix} \right)
\left( \begin{matrix}
{\bf M}_{BN}\\
\widehat{{\bf Q} }_{NB}\\
{\bf M}_{BB}\\
\end{matrix} \right).
\end{align}
With 
\begin{align}
T^{BN \rightarrow BB} =  & \left( \begin{matrix}
1&&\\
&A^3&\\
&&1\\
\end{matrix} \right)
\quad 
T^{NB \rightarrow NB}=  & \left( \begin{matrix}
A^5&&\\
&1&\\
&&-A^5\\
\end{matrix} \right)
\quad 
T^{BB \rightarrow BN}=  & \left( \begin{matrix}
1&&\\
&A^3&\\
&&1\\
\end{matrix} \right)
\end{align}
One can check that the usual modular group relation $(ST)^3 = \unit$ holds as expected. 


More interesting is the $(N,N)$ torus, whose spin structure is preserved under both $S$ and $T$. 
This has been investigated before in \cite{ware2016}, and our results agree with theirs in this case. 
According to Figure \ref{TorusBasisC2}, the Hilbert space is given by $\overset{\bullet}{h}$, $\overset{\bullet}{v}$, and $\overset{\bullet}{t}$,
where as before the $\bullet$ means that the associated tubes have odd fermion parity.
In the topological basis, we obtain
\begin{align}
\left( \begin{matrix}
\overset{\bullet}{h}\\
\overset{\bullet}{v}\\
\overset{\bullet}{t}\\
\end{matrix} \right)_{NN} 
\xrightarrow{S^{NN \rightarrow NN}} & \left( \begin{matrix}
0&1&0\\
 A^4&0&0\\
0&0&A^{10}\\
\end{matrix} \right)
\left( \begin{matrix}
\overset{\bullet}{h}\\
\overset{\bullet}{v}\\
\overset{\bullet}{t}\\
\end{matrix} \right)_{NN}
\end{align}
Now we need to transform into the idempotent (quasiparticle) basis. 
With the choice of basis in Figure \ref{C2Change_of_Basis} we find
\begin{align}
\left( \begin{matrix}
\overset{\bullet}{q}_\unit\\
\overset{\bullet}{q}_\sigma\\
\overset{\bullet}{q}_\psi\\
\end{matrix} \right)_{NN} 
\xrightarrow{S^{NN \rightarrow NN}} &\frac{-A^2}{2} \left( \begin{matrix}
1& d&-1\\
d&0&d\\
-1& d&1\\
\end{matrix} \right)
\left( \begin{matrix}
\overset{\bullet}{q}_\unit\\
\overset{\bullet}{q}_\sigma\\
\overset{\bullet}{q}_\psi\\
\end{matrix} \right)_{NN}.
\label{NNSmatrix}
\end{align}
Similarly, we can compute the modular $T$-matrix, 
\begin{align}
\left( \begin{matrix}
\overset{\bullet}{q}_\unit\\
\overset{\bullet}{q}_\sigma\\
\overset{\bullet}{q}_\psi\\
\end{matrix} \right)_{NN} 
\xrightarrow{T^{NN \rightarrow NN}} &\left( \begin{matrix}
A^5& &\\
&1&\\
&&-A^5\\
\end{matrix} \right)
\left( \begin{matrix}
\overset{\bullet}{q}_\unit\\
\overset{\bullet}{q}_\sigma\\
\overset{\bullet}{q}_\psi\\
\end{matrix} \right)_{NN}
\end{align}
One can check that we have the modular relations
\begin{align}
 (S^{NN\ra NN}T^{NN\ra NN})^3 = (S^{NN \ra NN})^4= A^{8}\text{id} = -\text{id}
\end{align}
The minus sign comes from the fact that acting by $S^4$ performs a $2\pi$ rotation 
of the fermion framing, resulting in a phase of $-1$, since the $(N,N)$ torus has odd fermion parity. 
These relations easily generalize to $(ST)^3=S^4=(-1)^F\unit$, where $(-1)^F$ is the fermion 
parity operator. 
This also means that in the fermionic setting, 
the $S$-matrix is not self-dual as it is for bosonic theories.


\medskip

Collecting these results, we can now write down the complete modular $S$ and $T$ matrices in the $C_2$ theory, 
which act across all spin structures. 
We will write them down in the quasiparticle 
basis $[(m_\unit,m_\sigma^+,m_\psi)_{BB},(m_\unit,m_\sigma^+,m_\psi)_{BN},(q_\unit,q_\sigma,q_\psi)_{NB},(\overset{\bullet}{q}_\unit,\overset{\bullet}{q}_\sigma,\overset{\bullet}{q}_\psi)_{NN}]^T$, 
in which we can write
\be \label{modularS}
S = \frac{1}{2}\begin{pmatrix} 1 & d & 1 &			&&&			&&&			&& \\ 
					      d & 0 &-d &			&&&			&&&			&&\\
					      1&-d&1 & 			&&&			&&&			&&\\
						&&&				&&&			1&d&1&		&& \\
						&&&				&&&			-d&0&d&		&&\\ 
						&&&				&&&			-1&d&-1&		&&\\
						&&&				1&-d&-1&		&&&			&&\\ 
						&&&				d&0&d&		&&&			&&\\
						&&&				1&d&-1&		&&&			&&\\ 
						&&&				&&&			&&&			-A^{2} & -A^{2}d & A^{2}\\
						&&&				&&&			&&&			-A^{2}d & 0 & -A^{2}d \\ 
						&&&				&&&			&&&			A^{2} & -A^{2}d & -A^{-2} \end{pmatrix}\ee		
%\kw{I think one of the -1's should be a +1 (does not agree with above in one of the middle blocks)}
%\dave{That's a good point. 
%It also doesn't match the matrices we found above (which I just double checked and seem to be correct).
%Ethan, call me on Skype when you have a chance. 
%I found the d's should have the other sign in the row and column you changed.}
%\ethan{Everything above should now be correct}
%\dave{I agree.}
where we have only listed the non-zero entries. 
$S$ has two different direct-sum decompositions. First, essentially by construction, 
it splits into a direct sum over blocks according to spin structures 
under the $S$ modular transformation. 
Additionally, we have $S = S_{even} \oplus S_{odd}$, where $S_{odd}$ is the $S$-matrix 
acting on ground states with odd fermion parity.
This decomposition is always possible, but it will not always match a decomposition based 
on spin structures. 
That is, while $S_{odd} = S^{NN\ra NN}$ in this theory, spin structure blocks of $S^{NN\ra NN}$ 
will not have a definite fermion parity in general; see Sections \ref{so36} and \ref{halfesix} for examples. 
Also note that $S^4 = \unit_{9\times9}\oplus(-\unit_{3\times3})$ in accordance with $S = S_{even} \oplus S_{odd}$ and $S^4=(-1)^F\unit$. 

Now for the $T$-matrix. 
In the same quasiparticle basis as before, the $T$-matrix is
\be 
T = \begin{pmatrix}   			&&&				1&0&0&		&&&			&& \\ 
					        &&&				0&A^3&0&	&&&			&&\\
					        &&& 				0&0&1&		&&&			&&\\
						1&0&0&			&&&			&&&			&& \\
						0&A^3&0&		&&&			&&&			&&\\
						0&0&1&			&&&			&&&			&&\\
						&&&				&&&			A^{5}&0&0&	&&\\
						&&&				&&&			0&1&0&		&&\\
						&&&				&&&			0&0&-A^{5}&	&&\\
						&&&				&&&			&&&			A^{5}&0&0\\
						&&&				&&&			&&&			0&1&0 \\ 
						&&&				&&&			&&&			0&0&-A^{5} \end{pmatrix}\ee	
The $T$-matrix is not completely diagonalized in the idempotent basis, since it acts nontrivially on the spin structures (although it is diagonalized within each spin structure block). 
%This leads to subtleties involved with identifying the topological twists of the quasiparticles, 
%which we elaborate on in the next section. 


%%%%%%%%%%%%%%%



\begin{comment} %I guess we decided to postpone this
%%%%%%%%%%%%%%%%%%%%%%% 
\subsection{Braiding data} \label{C2_braiding}
%%%%%%%%%%%%%%%%%%%%%%%

\kw{I think that there are (interesting and useful) subtleties when talking about braiding.
We must not only keep track of a spin structure on the pair of pants, but also keep track of 
the $\End(a)\times\End(b)\times\End(c)$ action on $V^{ab}_c$.
The latter amounts to keeping track of three independent spin framings on the three boundary
components, or in other words a relative spin structure.
I don't understand all of this as well as I would like, but I think that one
implication will be that we should treat braidings in a more sophisticated way than we do below.
If that's right, then we might want to move this section to a future paper that goes into more detail
about the subtleties.
}
\dave{That works for me.
Ethan, what do you think?}

In this section we compute the braiding data of the quasiparticles in the $C_2$ theory.
This in turn allows us to compute the mutual- and self-statistics of the quasiparticles in the theory.
In conventional (bosonic) topological phases, the matrix of double-braids (mutual statistics) 
is identical to the modular $S$-matrix and the matrix of topological twists (self-statistics) is identical to the 
modular $T$-matrix, which together form a representation of the modular group.  

The presence of spin structure considerations means that this correspondence does {\it not} 
hold in fermionic theories (indeed it cannot possibly hold in the $C_2$ theory because there are 6 quasiparticle excitations but 12 total ground states across all spin structures, meaning that the braiding matrices and the modular matrices must be of different dimension). 
However, the modular $S$ and $T$ matrices are still intimately related to the braiding data of the theory, and
can in fact be completely recovered from a complete knowledge of the braiding data.


%%%%%%%%%%%%%%%%%%%%%
\subsubsection{$R$-matrices}
%%%%%%%%%%%%%%%%%%%%%
To begin, we will construct a table of the $R$ symbols in the theory. 
First, we need to set some conventions on our fusion spaces in this section, this is akin to picking a gauge for each fusion space. 
We will work on the pair of pants as described in Section \ref{C2_fusion_rules}.

We will write a generic even fusion space, which is an even vector in the fusion space $V^{ab}_c$, as 
\begin{align} \label{pants_braiding_basis}
\CTwoFusion
\end{align}
where $a,b,c$ are idempotents (see Figure \ref{CTwoParticles}) and $u,v,w \in \{ \unit, \beta \}$ are variables indicating whether or not a $\beta$ line is present. 
The idempotent label at the crosses represent a collection of pictures, one for each tube in their definition, for example, 
\begin{align}
\overset{m_\sigma^+}{\IdempEnd} =  \frac{1}{2} \left( \tcca \; +   \; A^3 \tccb \right) \quad \text{and} \quad 
\underset{m_\sigma^+}{\text{\reflectbox{\rotatebox[origin=c]{180}{$\IdempEnd$}}}} = \frac{1}{2} \left(  \tccc + A^3 \tccd \right).
\end{align}
\ethan{are these lines curling the right way? should their handedness be reversed?}
The termination of a $\beta$ line at the bottom of a line corresponds to a puncture surrounding the entire system.

We will calculate the braiding in the fusion space $V^{ab}_c$ by moving the $a$ and $b$ punctures around one 
other and re-expressing the result in terms of the basis vectors in $V^{ba}_c$. 
When braiding q-type particles, we enforce their periodic boundary conditions graphically by introducing branch 
cuts ending on each q-type puncture, with the rule that dots sliding past a branch cut pick up a phase of $-1$. 
The branch cut records the difference between the spin structure inherited from the plane of the figure (the ``blackboard") and the
spin structure we want to depict.
For concreteness, we will draw our branch cuts to always extend from the puncture vertically to the point at $\infty$.
For example, to calculate $R^{q_\psi q_{1/\psi}}_{m_{\psi/1}}$, we write
\kw{I don't understand subscript $\psi/1$.  Does it mean $\psi$-or-1?  If so, maybe it would be clearer to just pick 1 or $\psi$.}
\begin{align}
\qqmbraida \xrightarrow{\; \; R\;\; }\qqmbraidb \;=  \; \theta_{q_\psi}^* \qqmbraidc
\end{align}
where the dashed blue lines are the branch cuts, and we have taken advantage of our knowledge 
of the eigenvalue of $q_\psi$ under the twisted tube (i.e.\ the twist of $q_\psi$). 

We define odd vectors in $V^{a,b}_c$ by placing dots on the top left leg of the pants, on the 
leg marked $u$ in \eqref{pants_braiding_basis}. 
If this is impossible (e.g.\ if the top left leg is an $m_\psi$ idempotent), we put the dot on the top 
right leg of the pants, marked $v$ in \eqref{pants_braiding_basis}. 
For example, we can calculate the $R$-symbol $R^{m_\psi m_\sigma^+}_{m_\sigma^+} = -1$ by
\begin{align}
\mmmbraida \xrightarrow{\;\; R \; \;} \mmmbraidb \; = \; (-1)\mmmbraidc
\end{align}
A slightly more complicated example is the odd fusion channel in $R^{q_\psi q_{1/\psi}}_{m_{\psi/1}}$:
\begin{align}
\qqmbraidaOdd \xrightarrow{\;\; R \;\; } \qqmbraidbOdd \; = \; A^{4}\theta_{q_\psi}^* \qqmbraidcOdd
\end{align}
Note that we have assumed we can ``pivot'' branch cuts around the punctures on which they are located, 
provided that we pick up a factor of $-1$ each time the branch cut crosses a fermion. 

In accordance with the gauge choice we specified above, we have to remember to always move the dots 
back to the left side of the pants after the braid takes place, if possible. 
As an example, we can calculate the braiding of the odd fusion channel in $R^{q_\sigma q_{1/\psi}}_{m_\sigma^+}$:
\begin{align}
\qqmbraidOdda\xrightarrow{\;\; R \; \;}  \qqmbraidOddb \; =\;
\frac{1}{d}\qqmbraidOddc\;=\;
\frac{1}{d}
\qqmbraidOddd
\end{align}


Manipulations like these can be used to work out the full table of $R$-symbols, which we present in Table \ref{Rtable}. 
The $\bullet$ symbol is used to denote odd fusion channels, i.e.\ the action of 
the braiding operation on an odd vector in the fusion space $V^{ab}_c$.  



\begin{table}
\resizebox{\linewidth}{!}{
\begin{tabular}{c||c|c|c||c|c|c}
$     R^{ab}_{c \in a\otimes b} $&$m_\unit $&$m_\sigma^+$&$m_\psi$&$q_\unit$&$q_\sigma$&$q_\psi $\\
     \hline
     \hline     
$m_\unit $&$m_\unit$&$ m_\sigma^+$&$m_\psi$&    $(1+1\bullet)q_\unit$&$(1+1\bullet)q_\sigma$&$(1+1\bullet)q_\psi$ \\ 
     \hline
$m_\sigma^+ $&$m_\sigma^+$&$A^{-3}(m_\unit-A^4\bullet m_\psi) $&$ \bullet m_\sigma^+ $&$      A^{-3}(1-A^4\bullet)q_\sigma $&$ (1+A^6/d\bullet)q_\unit$&$ A^{-3}(1-A^4\bullet)q_\sigma$ \\

 $$&$$&$$&$$&$$&$(1-A^6/d\bullet)q_\psi$&$$\\
     \hline
     
$m_\psi $&$m_\psi$&$(-1\bullet) m_\sigma^+$&$m_\unit$&      $-(1+ 1\bullet)q_\psi$&$(1+1\bullet )q_\sigma$&$-(1+1\bullet)q_\unit $\\

     \hline
     \hline
     
$q_\unit $&$(1+1\bullet)q_\unit$&$-A^3(1+A^4 \bullet)q_\sigma $&$(1+1\bullet)q_\psi$&$-A^3(1+A^4 \bullet)m_\unit$&$(1+ A^{2}/d \bullet )m_\sigma^+$&$-A^3(1+A^4 \bullet)m_\psi$\\
\hline
$q_\sigma $&$(1+1\bullet)q_\sigma$&$(A^{2}-dA^4\bullet)q_\unit$&$(1+1\bullet)q_\sigma$&$(A^{-2}+ d \bullet )m_\sigma^+$&$(1-A^4\bullet)m_\unit$&$(-A^{-2}+d \bullet)m_\sigma^+$ \\

$                $&$$&$(-A^{2}-dA^4\bullet)q_\psi$&$$&$$&$(1+A^4\bullet)m_\psi$&$$ \\
\hline
$q_\psi $&$(1+1\bullet)q_\psi$&$A^3(1+A^4\bullet)q_\sigma$&$(1+1 \bullet)q_\unit$&$A^3(1+A^4\bullet)m_\psi$&$(1-A^{2}/d \bullet )m_\sigma^+$&$A^3(1+A^4 \bullet)m_\unit$
\end{tabular}
}
\caption{\label{Rtable} The R-symbols for the $C_2$ theory. 
The particle labels in each entry denote fusion channels, with the bullets 
signifying which fusion channels are odd. 
For the entry $R^{ab}_c$, $a$ denotes the row of the entry and $b$ the column. 
For example, the bottom right entry 
tells us that $R^{q_\psi q_\psi}_{m_\unit} = A^3$ when acting on the even 
vector in $V^{q_\psi q_\psi}_{m_\unit}$ and $R^{q_\psi q_\psi}_{m_\unit} = A^7$ when 
acting on the odd vector.}
\end{table}






%%%%%%%%%%%%%%%%%%%%%%%%
\subsubsection{Twists and self-statistics}
%%%%%%%%%%%%%%%%%%%%%%%%

There are three ways to compute the topological twist $\theta_a$ (self-statistics) of a quasiparticle $a$: by statistics (braiding two identical $a$ quasiparticles around one another), by twisting (applying Dehn twists on the tubes associated with $a$), and by modular transformations (by acting with the modular $T$-matrix on the ground states on the tori associated with $a$). 
We'll examine the first two methods below, and will comment on the relation between these and the third method at the end of the section. 

We'll start by computing the twists $\{\theta_a\}$ by statistics, namely by braiding two identical quasiparticles once around one another. 
This corresponds to tracing out the $R$ symbols \cite{barkeshli2014}:
\be \label{Tmattr} \theta_a = \frac{1}{d_a}\sum_b d_b \text{Tr}[R^{aa}_b],\ee
where the precise meaning of the trace is discussed in Section \ref{qdims_and_traces}.
Using Table \ref{Rtable}, we obtain
\be \theta_{m_\unit} = 1,\ \theta_{m_\psi} = 1,\ \theta_{m^\pm_\sigma} = \pm A^3\ee
for the non-vortex particles, and 
\be \theta_{q_\unit} = A^5,\ \theta_{q_\psi} = -A^5,\ \theta_{q_\sigma} = 1\ee
for the vortex particles. 

The twists can also be obtained by computing their twists, which is done by directly Dehn-twisting the tubes in question. 
This amounts to computing the eigenvalue of each quasiparticle under $t$, where $t$ is the twisted tube defined in \eqref{tube_shorthands}.
We can then use the tube algebra multiplication tables to read off the eigenvalues, and in the basis $(m_\unit,m^\pm_\sigma,m_\psi,q_\unit,q_\sigma,q_\psi)^T$ we find the matrix of self-statistics (which we will write as $\Tr\ R$ to distinguish it from the modular $T$-matrix, which is a $12\times 12$ non-diagonal matrix) to be
\be \Tr\ R = {\rm diag}[1,\pm A^3,1,A^{5},1,-A^{5}].\ee
This yields the same result as we obtained by tracing out the $R$-symbols (hence the notation), confirming that the spin-statistics relation holds in this theory.

Making an explicit choice for $A$ can help to shed some light on these results. For the choice $A = ie^{\pm i \pi/8}$ (giving $d=+\sqrt{2}$ and $A^4 = \pm i$), the $\Tr\ R$-matrix in the vortex sector (the $3\times3$ matrix of the twists of non-bounding idempotents) decomposes as the tensor product
\be \Tr\ R = T_{p\pm ip} \tp T_{\text{Ising}_{\nu =\mp1}},\ee
where $T_{p\pm ip} = e^{\pm i\pi/8}$ is the modular $T$-matrix of a $p\pm ip$ superconductor. 
This decomposition was noted in \cite{ware2016}, where the background physical fermions used to perform the condensation 
were identified with a $p\pm ip$ topological superconductor. 
This $p\pm ip$ superconductor has a chiral central charge of $c_-=1/2$, which precisely cancels 
out the chiral central charge of the Ising component in the tensor product, leaving a non-chiral theory---something
that is required since we have obtained the phase in question from a string-net lattice model. 


More generally, if we believe that the chiral central charge of these theories can be computed in the same 
way as in bosonic theories (as in \cite{cano2014}), then we must have $c_- =0$ independently 
for each spin structure sector, which is a nontrivial consistency check. We do not have $c_-=0$ in the 
non-vortex sector if we use the twists as written, but we have to keep in mind that the 
non-vortex twists possess a $\pm$ phase ambiguity. We then expect that in the 
expression for $c_-$ in the non-vortex sector, the sum over twists ``averages out'' and becomes zero, 
giving a non-chiral theory as required. 


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsubsection{Double braids and mutual statistics}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

Having obtained the $R$ symbols, we can also calculate the braiding data of the quasiparticles by calculating 
the double braids (mutual statistics) of the quasiparticles. 
As already mentioned, the matrix of double braids that contains information about the mutual statistics of quasiparticles is {\it distinct} from the modular $S$-matrix governing how the ground states on the torus transform under the $S$ modular transformation (indeed, they are not even of the same dimension!). 
To distinguish these two matrices, we will write the matrix of double braids between the 
quasiparticles in the theory as $\mcb^2$ (for the square of the braiding operator). 

\begin{figure}
\begin{center}
\includegraphics{both_braided_tubes.pdf}
\caption{\label{braided_tubes} 
(a): How the tracing out of the $R$-symbols is performed when calculating the elements $[\mcb^2]_{ab}$ of the double braid matrix. 
Here, the $a$ and $b$ label tori hosting different quasiparticles, and are contained within a larger torus marked $c$. 
The entire network of tubes is embedded with the three-sphere, where it can then be evaluated to give a number (the partition function). 
(b): The setup for calculating the matrix $[\mcb^2_\psi]_{ab}$, which encapsulates odd braiding processes during which a fermion is exchanged (represented by the two connected blue dots) between the two particles being braided. }
\end{center}
\end{figure}

There are 
several ways to calculate $\mcb^2$. 
First, we will calculate $\mcb^2$ by tracing out the square of the $R$-symbols, using the formula \cite{Bonderson2007}
\be \label{Smattr} [\mcb^2]_{ab} = \frac{1}{\mcd}\sum_{c}d_c{\rm Tr}[R^{ab}_cR^{ba}_c],\ee
which continues to hold in the fermionic setting. 
Computing the trace with the aid of Table \ref{Rtable}, we find
\be \label{statistical_S}
 \mcb^2= \frac{1}{\mcd} \begin{pmatrix} 
1&\sqrt{2}&1&2\sqrt{2}&4&2\sqrt{2} \\
 \sqrt{2}&0&-\sqrt{2}&4&0&-4 \\ 
 1&-\sqrt{2}&1&-2\sqrt{2}&4&-2\sqrt{2} \\ 
 2\sqrt{2}&4& -2\sqrt{2}&0&0&0 \\ 
 4&0&4&0&0&0 \\ 
  2\sqrt{2}&-4&- 2\sqrt{2}&0 & 0 & 0 \end{pmatrix}. \ee
  
Let us now take a closer look at $\mcb^2$. 
The block of zeros in the bottom right warrants special attention, and means that braiding any two of the q-type particles around one another yields a state orthogonal to one in which they started. 
This is physically reasonable, since braiding a q-type particle through a q-type loop changes the q-loop's fermion parity, preventing it from fusing back to the vacuum. 
\dave{Should draw picture}
Indeed, this is the same reason why the matrix element $S_{\sigma\sigma}$ vanishes in the regular Ising theory. 

A more precise understanding for why the braiding between two q-type quasiparticles vanishes comes from considering the precise meaning of the trace in \eqref{Smattr}.
As described during our discussion of the ground states on the torus, the trace of an operator that acts on a collection of tubes (like the $\mcb^2$ matrix) is computed by identifying the top and bottom of the operator by ``closing up'' the tubes it contains along the time direction (see \eqref{TrO_def}).
The braiding of two quasiparticles $a$ and $b$ is then found by computing the partition function for the picture given in Figure \ref{braided_tubes} (a). 
In the figure, the two quasiparticles we are interested in braiding are hosted on the surface of the tori marked $a$ and $b$, which are contained inside a larger torus $c$, all of which are then embedded in $S^3$. 

In order for the diagram in the Figure \ref{braided_tubes} (a) to possess a self-consistent spin structure, we must place constraints on the spin structures of the tori $a,b,$ and $c$.
Let $t_m\in\zz_2$ and $t_l\in\zz_2$ denote the boundary conditions along tube $t$'s meridional (shorter, spacelike) and longitudinal (larger, timelike) cycles respectively, with $t_m,t_l=0$ corresponding to anti-periodic boundary conditions and $t_m,t_l=1$ corresponding to periodic boundary conditions.  
Then the existence of a consistent spin structure that may be extended into the ambient $S^3$ requires that 
\be a_m+b_m=c_m,\quad b_l+c_l=a_m,\quad a_l+c_l=b_m\ee
where all relations are understood to hold mod 2. 
Furthermore, if Figure \ref{TrO_def} defining the trace of an operator is to represent the trace (and not the supertrace), the torus $c$ must possess antiperiodic boundary conditions along it's longitudinal cycle. 
In particular, fixing $c_l=0$ (anti-periodic) forces 
\be a_m = b_l,\quad a_l=b_m.\ee
Therefore, if $a_m = b_m = 1$, which is the case if both $a$ and $b$ host q-type particles, then we must have $a_l = b_l = 1$. 
This explains why $[\mcb^2]_{ab}=0$ if both $a$ and $b$ are q-type: to trace out the $R$-symbols we need the $a$ and $b$ tori in Figure \ref{braided_tubes} (a) to each have $(N,N)$ spin structures. 
However, as we saw in the previous section on the modular $S$-matrix, non-zero string-net configurations on tori with $(N,N)$ spin structures must have {\it odd} fermion parity.
In calculating the $\mcb^2$-matrix we have assumed that each torus in Figure \ref{braided_tubes} has {\it even} fermion parity, and so $[\mcb^2]_{ab}$ must vanish if both $a$ and $b$ are q-type. 

The $\mcb^2$ matrix in \eqref{statistical_S} carries almost the same amount of information as the modular $S$-matrix worked out previously: we can identify each of its four $3\times3$ blocks with a $3\times3$ block in the modular $S$-matrix \eqref{modularS}. 
However, the bottom-right block in \eqref{modularS} proportional to $A^{-2}$ is missing. Does this mean that the braiding statistics capture less information than the modular transformations? 
In fact it does not, because there is an additional braiding process between q-type particles that we need to consider, one in which the quasiparticles being braided exchange a fermion (more generally, an odd number of fermions) during braiding. 
We will write the statistical matrix governing this braiding process as $\mcb^2_\psi$, and it is computed using the setup in Figure \ref{braided_tubes} (b), where the fermion exchanged between the two quasiparticles is indicated by the blue lines. 

We can account for the fermion exchange by adding additional dots to the tubes representing the quasiparticles being braided.
Mathematically, this means that $\mcb^2_\psi$ can be computed by tracing out the $R$-symbols composed with the operator $f_1\tp f_2$, which inserts fermions ordered in the appropriate way onto the $a$ and $b$ tubes as in Figure \ref{braided_tubes} (b). 
Thus, we have
\be [\mcb^2_\psi]_{ab} = \frac{1}{\mcd_{q}}\sum_cd_c{\rm Tr}[(f_1\tp f_2)R^{ab}_cR^{ba}_c], \ee
where 
\be \mcd^2_q = \sum_{a \text{\ q-type}}\frac{d_a^2}{\dim\End(a)}\ee
is the total quantum dimension of the q-type particles in the theory (this choice ensures that $\mcb^2_\psi$ is unitary). 
For the present case of the $C_2$ theory, $\mcd_q = 2$. 

We can compute the above formula by drawing the diagrams with the fermions $f_1$ and $f_2$ in place and then immediately using local relations to annihilate them into the vacuum.
For each fusion channel $c$ this leaves us with a diagram proportional to ${\rm Tr}(R^{ab}_cR^{ba}_c)$, which can be computed in the same way as the regular $\mcb^2$-matrix. 
Proceeding in this way, we obtain 
\be \mcb^2_\psi = \frac{A^{-2}}{2}\begin{pmatrix} -1 & d & 1 \\ d & 0 & d \\ 1 & d & -1\end{pmatrix},\ee
which matches the action of the modular $S$-matrix on tori with $(N,N)$ spin structures and satisfies $(\mcb^2_\psi)^4=(-1)^F\unit_{3\times3}=-\unit_{3\times3}$. 
Thus, the {\it full} statistical braiding information---both the $\mcb^2$ and $\mcb^2_\psi$ matrices---provide the same amount of information as the modular transformations on the collection of tori with each spin structure. 

\end{comment}




%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Generalities on fermion condensation and tube categories} \label{generalities} 
%%%%%%%%%%%%%%%%%%%%%%%%%%

The techniques used in Section \ref{C2_condense_sect} work more generally.
In this section we discuss the general case and some variants thereof.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{General comments on fermion condensation}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

In this section we will explore fermion condensation in more general settings. 
In Section \ref{gntf_condense} we make some general remarks on fermion condensation in a
generic unitary braided fusion category $\mcc$. 
In Section \ref{condense_transparent_fermion} we add the stipulation that the fermion we aim 
to condense is {\it transparent}, in that it braids trivially with the other particles in the theory. 
Section \ref{lift_and_condense} examines the more general case where the parent category $\mcc$ is not braided,
but the object we want to condense lifts to a fermionic object in the Drinfeld center $\mcz(\mcc)$.
Finally, Section \ref{spin_defects_condensation} sketches a construction in which the braiding 
of the parent theory is retained after condensation, and spin structure defects are bound to 
particles that the fermion braids nontrivially with. 

First, some preliminary remarks. 
In what follows we will work with a 
%\kw{braided, right?  we use braiding immediately below} 
unitary braided fusion category $\mathcal{C}$ which contains a fermionic object $\psi$ that we aim to condense. 
We require that $\psi$ satisfy the following conditions:
\begin{itemize} 
	\item $\psi\ot\psi\cong\unit$
	\item The Frobenius-Schur indicator of $\psi$ is 1
	\item The topological twist of $\psi$ is fermionic, i.e. $\theta_\psi =-1$
	\item The braiding of $\psi$ with itself (see \eqref{statistics_inconsistency}) is equal to $-1$ times the identity
	\item The quantum dimension $d_\psi$ of $\psi$ is 1
\end{itemize}
Note that there is some redundancy in this list.
For example, 
in unitary theories we have the spin-statistics relation, and $d_\psi=1$ can be inferred from $\psi\tp\psi \cong \unit$.

%\kw{the following is not correct; should rephrase or remove}
%Also, we note that we can relax the assumption that $\psi \tp \psi \cong \unit$ slightly. 
%Instead, consider a fermion $\Psi$ such that $\Psi \tp \Psi \cong B$, 
%where $B$ is a commutative algebra object in $\mcc$. Condensing $\Psi$ can then be achieved by first 
%condensing $B$ and then condensing the image of $\Psi$ under the condensation of $B$, which 
%we will denote as $\psi\in\mcc/B$. $\psi$ then satisfies the fusion rule $\psi\tp\psi\cong\unit$ in $\mcc /B$, and so 
%can be condensed in the manner described in the following sections. 

\kw{The following could be dropped}
We remark that the above assumptions allow us to endow the object $\unit\oplus\psi$ 
with the structure of a {\it fermionic commutative algebra object} in $\mcc$.
We can more generally condense any fermionic commutative algebra object $\alpha$.
In the quotient category $\mcc/\alpha$, any simple summand of $\alpha$ becomes isomorphic to $\unit$,
or perhaps isomorphic to a direct sum of copies of $\unit$.


\dave{Another note to self: check if the `metaplectic' categories for this scenario.}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsubsection{Condensing non-transparent fermions in a braided category}  \label{gntf_condense}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


In this subsection we will assume $\mcc$ is a unitary braided fusion category (UBFC).
We will also assume that $\psi$ is non-transparent, meaning that it braids non-trivially with at least one non-trivial object in $\mcc$. 
We will examine the case where $\psi$ is transparent in a later subsection. 


We will proceed 
as in Section \ref{C2_condense_sect} and define a super pivotal category $\mcc/\psi$. 
Since $\psi$ is fermionic in spin and statistics, and since it braids non-trivially with 
at least one other non-trivial object in $\mcc$ (from its assumed non-transparency), we
must utilize both spin structures and the back wall construction in the condensation 
procedure. 

The objects of $\mcc/\psi$ are the same as the objects of $\mcc$.
The morphism space assigned to a disk with a boundary condition is the space of all back wall diagrams
modulo local relations.
(More concretely, the the even part of this morphism space is the corresponding morphism space in the parent category $\mcc$,
and the odd part of this morphism space is (up to isomorphism) the morphism space of $\mcc$ 
obtained by adding $\psi$ to the boundary condition.)
In order for these relations to make sense, the disk must be equipped with a spin structure.
This morphism space is a super vector space, with the $\zt$-grading given by the number of $\psi$ endpoints in the diagram modulo 2.
Composition of morphisms is given by gluing diagrams together.
We can take the domain of the composition map to be the unordered tensor product (see \ref{koszul_signs})
of the two morphism spaces we are combining.
When doing computations it is necessary to choose an ordering and to take Koszul signs into account.




\medskip

\begin{figure}
\begin{center}
\includegraphics{mvsqtype.pdf}
\caption{ \label{mvsqtype} (a) An m-type particle $\alpha$. The fermion $\psi$ (blue dot) is 
an odd map from $\alpha$ to $\alpha\tp \psi$, with $\alpha\not\cong\alpha\tp\psi$. (b) A q-
type particle $\alpha$ with $\alpha\cong\alpha\tp\psi$, where $\psi$ now acts as an odd 
endomorphism.}
\end{center}
\end{figure} 

It follows from our assumptions about $\psi$ that if $\alpha$ is a simple object of $\mcc$, then
$\alpha\ot\psi$ is also a simple object of $\mcc$.
There are two cases:
\begin{itemize}
	\item If $\alpha\ot\psi$ is not isomorphic to $\alpha$, then $\alpha$ and $\alpha\ot\psi$ are both m-type
	objects of $\mcc/\psi$.
	While $\alpha$ and $\alpha\ot\psi$ represent distinct equivalence classes of simple objects in $\mcc$,
	they belong to the same equivalence class in $\mcc/
	\psi$.
	More specifically, $\alpha$ and $\alpha\ot\psi$ are oddly isomorphic in $\mcc/\psi$, 
	via a digram with a single $\psi$ dot (see Figure \ref{mvsqtype} (a)).
	\item If $\alpha\ot\psi \cong \alpha$, then $\alpha$ becomes a q-type simple object in $\mcc/\psi$.
	The odd endomorphism from $\alpha$ to itself is as shown in Figure \ref{mvsqtype} (b).
\end{itemize}

We will sometimes use the notation
\be
	\sob(\mcc/\psi) = \sobm(\mcc/\psi) \du \sobq(\mcc/\psi) ,
\ee
with $\sobm(\mcc/\psi)$ a complete set of representatives for m-type simple objects, and
$\sobq(\mcc/\psi)$ a complete set of representatives for q-type simple objects.
\kw{We should drop the above paragraph if we end up not using the notation.}

\medskip

$\mcc/\psi$ is not a braided category, since the back wall used in the condensation procedure 
prevents us from braiding particles completely around one another. 
However, it does have the structure of a front-braiding by $\mcc$, since we are allowed to 
pass $\psi$ worldlines between other particle worldlines and the back wall. 
(Another way of saying this is that $\mcc/\psi$ is a (fermionic) module 2-category for the 3-category $\mcc$.
Yet another way of putting it is that $\mcc/\psi$ is a codimension-1 defect between $\mcc$ and the vacuum.)

\medskip


A particularly simple class of condensed theories obtained from condensing a non-
transparent fermion in a braided theory are provided by the $C_{2(n+1)} = A_{4n+3} / \psi$ series, 
where $A_k$ is the category whose principal graph is the Dynkin diagram of the Lie algebra $\mathfrak{sl}_{k+1}$, 
and $C_k$ is the category whose principal graph is the Dynkin 
diagram of the Lie algebra $\mathfrak{sp}_{2k}$.
The choice $n=0$ 
corresponds to the Ising example considered in Section \ref{C2_condense_sect}. 


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsubsection{Condensing transparent fermions in a braided category}
\label{condense_transparent_fermion}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

In this subsection we make the same assumptions about $\psi$ and $\mcc$ as in \ref{gntf_condense}, 
but we replace the assumption of non-transparency of $\psi$ with the 
assumption that $\psi$ is transparent in $\mcc$, meaning that it braids trivially with every other particle in $\mcc$.

Since $\psi$ is transparent, we do not need the back wall when performing the condensation.
We still need a spin structure, however (since $\theta_\psi = -1$), and we also need to keep track of 
Koszul signs (since $\psi$ has fermionic statistics).

The resulting category $\mcc/\psi$ is a fermionic braided pivotal category.
The absence of the back wall is what allows for $\mcc / \psi$ to possess a full braiding (rather than the 
``front-braiding'' forced on condensed theories where back walls are needed). 
We will construct an example of such a theory in Section \ref{so36}, where we condense a transparent fermion 
in the $SO(3)_6$ theory.

We note that q-type particles can never arise in the condensed theory if $\psi$ is transparent.
To see this, we note that if $\alpha\ot\psi = \beta$ for $\alpha$ and $\beta$ simple objects of $\mcc$, it follows that 
\be\theta_\beta = \theta_\alpha \theta_\psi = -\theta_\alpha,
\label{noq-type}\ee
where the first equality is because $\psi$ is transparent.
It follows that $\alpha \not\cong \beta$ in $\mcc$, and hence $\alpha$ descends to an m-type 
simple object in $\mcc/\psi$, since if $\alpha$ were q-type we would have $\alpha \tp \psi \cong \alpha$.



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsubsection{Condensing objects that lift to fermions in the Drinfeld Center}
\label{lift_and_condense}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\kw{I plan to rewrite this subsubsection}

In this section we drop the assumption that $\mcc$ has a braiding.
We will describe how to condense an object $y$ of $\mcc$ which lifts to a fermion in the Drinfeld center $\mcz(\mcc)$. 
%In this section we reduce our assumptions about the object we aim to condense (which we will now refer to as $y$) further. 
%We will not assume that $y\in\mcc$ (for $\mcc$ a UFC) is a fermion, only that it lifts to a fermion in the Drinfeld center 
%$\mcz(\mcc)$. 
An instance of this construction is the $\halfesix$ theory we study in detail in Section \ref{halfesix}.

To condense $y$, we first need to find a half braid on $y$. 
For a formal definition of half braid see 
%\cite{muger2003a} and 
\cite{muger2003b} (Definition 3.1 and Lemma 3.3).
A half braid on an object $y \in \mcc $ is an isomorphism from $y \tp r \rightarrow r \tp y$ for each $r \in \mcc$,
the isomorphism being the braiding of $y$ with $r$. 
We will denote these isomorphisms as $e_y(r)$, and write them diagrammatically as
\begin{align} 
e_y(r)  = \halfbraid{\ebox}{y}{r}{}{}.
\label{halfbraid}
\end{align}
One should think of the box braiding $y$ under $r$. 
We could equally well think of this as braiding $y$ over $r$, but since we will use the ``back wall condensation" procedure to condense $y$, 
it is natural to choose $y$ braiding under $r$. 

Using the semisimplicity of $\mcc$ we can write $e_y(r)$ as
\begin{align}
e_y(r)  = \halfbraid{\ebox}{y}{r}{} = \sum_{w \in V^{ry}_{yr}} \left[ e_y(r)  \right]_{w} \halfbraid{\egeneral}{y}{r}{w},
\label{halfbraid_resolution}
\end{align}

Not any isomorphism $e_y(r)$ is allowed; $e_y(r)$ must satisfy some consistency conditions.
For example, braiding with the identity object should be trivial (up to unitors):
\begin{align}
\halfbraid{\ebox}{y}{\mathds{1}}{} = \text{id}_y.
\label{identityBraid}
\end{align} 
The most important property of the braiding isomorphisms is that they commute with fusion, meaning that they can freely slide past the fusion spaces $V^{ab}_c$:
\begin{align}
\halfbraidHex{\HalfBraidHexa}{y}{a}{b}{c} = \halfbraidHex{\HalfBraidHexb}{y}{a}{b}{c}.
\label{junctionBraid}
\end{align}
Taking \eqref{halfbraid_resolution} and inserting it into \ref{identityBraid} and \ref{junctionBraid} allows one to find the $\left[ e_y(r)  \right]_{w}$ defined in \eqref{halfbraid_resolution}. 

In order to do fermion condensation we require $y$ to lift to a fermionic object, so that
\begin{align}
e_y(y) =  -\; \text{id}_y \tp \text{id}_y.
\end{align}
Once a fermion has been defined one can proceed with the techniques of Sections \ref{gntf_condense} and \ref{condense_transparent_fermion}. 
We will provide an example of such a condensation in Section \ref{halfesix}.


%%%%%%%%%%%%%%%%%%%%%%%%
\subsubsection{Condensing non-transparent fermions using spin defects instead of a back wall} \label{spin_defects_condensation}
%%%%%%%%%%%%%%%%%%%%%%%%

In this section, we briefly comment on another way to condense non-transparent fermions through a type of flux attachement, 
which doesn't make use of the back wall construction and allows the condensed theory to remain braided 
(for a braided input category). 
For related ideas, see \cite{kapustin2017,thorngren2015}. 

The construction proceeds schematically as follows.
We allow the $\psi$ worldlines to be absorbed into the vacuum at any point.
In this picture the $\psi$ lines end anywhere in 3-space, they are not restricted to terminating on a back wall. 
In order to resolve problems with the twist and self-statistics of $\psi$, 
we must couple the $\psi$ endpoints to a spin structure and introduce Koszul signs, as before.
This yields an inconsistent theory if $\psi$ is not transparent (see \eqref{transparency_inconsistency}).

However, this inconsistency is rather mild. 
A natural way to distinguish the simple objects in $\mcc$ to use the $\mathbb{Z}_2$ 
grading inherited from the full braid of objects with $\psi$. 
This can be defined by the indicator 
\begin{align}
(-1)^{\nu_x} := S_{a \psi}/S_{a0} \in \{+1, -1 \}
\label{grading}
\end{align}
It is easy to check that this grading is preserved under fusion.
Hence we can partition the simple objects in $\mcc$ as 
\begin{align} \label{braiding_indicator}
\text{sobj}\; \mathcal{C}  = I_0 \cup I_1,
\end{align}
%where $I_0$ ($I_1$) is the set of simple objects $x$ with $(-1)^{\nu_x} = 1$ ($(-1)^{\nu_x} = -1$).
where $I_k$ is the set of simple objects $x$ with $\nu_x = k$.
%This gives a $\zt$ grading of the simple objects in the theory, and so we have $I_a \tp I_b = I_{a+b\; \text{mod} \; 2}$. 
Since $I_a \tp I_b = I_{a+b\; \text{mod} \; 2}$, this is a $\zt$ grading of the simple objects. 
It can be shown that in any UBFC, $\nu_x = 1$ for all q-type objects (those for which $x\tp \psi \cong x$).
Indeed, if $x$ braided trivially with $\psi$ and $x\tp \psi \cong x$, then it would follow that
$\theta_x = \theta_x \theta_\psi = -\theta_x$, a contradiction.
Therefore, for a given object $a\in\mcc$, $\psi$ must either be transparent with respect to $a$, or be non-transparent only by a minus sign. 

We now observe that the problem in \eqref{transparency_inconsistency} would be 
surmounted if the ``box'' (the physical fermion attached to the $\psi$ endpoint) had a $-1$ 
braiding phase when taken around any anyon with which $\psi$ braids nontrivially. 
This extra $-1$ braiding phase cannot be due to the presence of any additional anyonic 
degrees of freedom, since the physical fermions braid trivially with any emergent anyon. 
However, there's actually a very natural way to do this: bind spin structure defects to the 
worldlines of anyons $x$ with which $\nu_x=1$. 
If the $x$ worldlines get bound to spin structure defects during the condensation 
process, then a box will pick up a factor of $-1$ when traveling around a $x$ line 
(when it passes through the branch cut), which cancels the $-1$ sign from the braiding of 
$x$ and $\psi$, and solves the transparency inconsistency. 
The spin structure defects have $\zt$ fusion rules, and so this procedure is consistent since 
the $\zt$ grading of objects in \eqref{braiding_indicator} is preserved under fusion. 
This allows the condensation to go through without the use of the back wall construction, 
which allows us to perform fermion condensation without sacrificing the existence of a 
braided structure. 

\kw{Are both D and E comfortable with the claims in this paragraph?}
\dave{Im moderately comfortable. 
I could never figure out how to check it.
But I dont see why it would be incorrect.
}
\ethan{Yeah, I'm okay with it. I inserted some instances of ``schematically'' in this subsection to make it clear that we aren't pretending to be precise}
This picture also gives us a schematic physical interpretation of how to invert the condensation 
procedure. 
To go the other way and un-condense $\psi$, we just decouple the $x$ lines from the spin structure defects.
This gives us a phase consisting of the MTC $\mcc$ together with a loop gas of spin structure defects.
The loop gas of spin structure defects confine free $\psi$ endpoints, forcing all $\psi$ 
worldlines to be closed and restoring the original phase. 

%\kw{Note to self: add a more mathematical viewpoint to this section.}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{The tube category of $\mcc/\psi$}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%\ethan{compress a bit---don't hold the reader's hand so much. Can be more concise. }
%\ethan{talk about diffeomorphisms of spin circles and beaurau of standards between spin circles when introducing tube stuff. Maybe write $\tube(X)$ where $X$ is a particular spin circle. Convinient to pick a standard bounding and non-bounding circle. 
%Talk about B and N tube categories and then combine them because we have a tensor product structure.}
%\dave{Note to self: check that we have a definition of minimal idempotent somewhere.
%Refer to it in Section 5.}

The quasiparticle excitations in a bosonic topological phase obtained from a category $\mcc$ 
are given by the simple objects in the Drinfeld center $\mcz(\mcc)$ \cite{levin2005}.
These excitations are also naturally described by primitive idempotents of a category called the tube category of $\mcc$ (see e.g. \cite{ocneanu2001,evans1995,Izumi2000,muger2003b,Bultinck2017,Lan2014, Hu2015}, 
also variously referred to as the tube algebra and the Q-algebra), 
which we will write as $\tube(\mcc)$.

The tube category was first introduced by Ocneanu \cite{ocneanu1994} and has since 
been dubbed `Ocneanu's tube algebra'; it is also referred to as the annular category $\text{Ann}(\mcc)$, 
or the categorified Hochschild homology of $\mcc$.
It is closely related to the Drinfeld center:
If $\mcc$ is pivotal then there is a natural isomorphism
$\text{Rep}(\text{Ann}(\mcc)) \cong \mcz(\text{Rep}(\mcc))$, and if $\mcc$ is semisimple then we can drop
the $\text{Rep}$s and obtain $\text{Ann}(\mcc) \cong \mcz(\mcc)$.
With appropriate modifications accounting for spin structure issues, a similar construction holds 
in the more general fermionic setting considered here. 


\medskip

%%KW: this paragraph doesn't really seem necessary to me
%We will now overview the basic idea behind the tube category. 
%Formally, the string-net spin-TQFT construction we have been working with lets us assign a Hilbert space $\mch$
%to an arbitrary spin surface $X$ (the space-time manifold on which our theory lives) with specified string-net boundary conditions. 
%Two surfaces $X$ and $Y$ can be glued together along their boundary components, provided that 
%the boundary conditions and choices of spin structure on these boundary components agree with one another. 
%The manifolds we will consider will always have boundaries that are disjoint unions of circles, and so to 
%study how different manifolds can be glued together, it suffices to specialize to the choice $X = A$, 
%where $A$ is a spin annulus with $\p A = S^1 \du S^1$. 

%The tube category $\tube(\mcc)$ for a string-net TQFT derived from the category $\mcc$ is defined as follows. 
We will now define two categories $\tube^B(\mcc),\tube^N(\mcc)$ for a string-net TQFT derived from the category $\mcc$. 
The objects of the two spin tube categories $\tube^B(\mcc)$ and $\tube^N(\mcc)$ are defined as isomorphism classes of string-net boundary conditions on spin circles with bounding 
and non-bounding spin structures, respectively. 
Later, we will show that every simple object 
in $a\in\tube^B(\mcc)$ must be m-type (although the converse is not true). 
For each spin tube category, we will fix a representative spin circle with which to define its
objects. 
Other possible choices of spin circles are related to the chosen representative
by spin diffeomorphisms, and the exact specification of the particular representative will 
be unimportant in our analysis. 
%Because specifying the boundary conditions on a spin annulus involve specifying a choice of spin structure, 
%each object in $\tube(\mcc)$ carries a $\zt$ spin structure label according to whether it is associated with the bounding or 
%non-bounding spin structure. 
%This means are two types of objects in the tube category: objects with bounding spin structure
%and ``vortices'', which are objects with non-bounding spin structure.
%Both tube categories may contain both m-type and q-type objects, with q-type 
%objects distinguished by their non-trivial endomorphism algebras as before. 

%The converse is not true, however---in what follows we will see examples of theories with m-type vortices. 

Spin annuli decorated with different string-net configurations constitute the morphisms of
the two spin tube categories. Again, we will fix a particular representative spin annulus for each spin structure to use
when defining morphisms, with other choices being related by spin diffeomorphisms. 
We can use local relations in $\mcc$
%on the tubes to reduce any string-net configuration to a $\cc$-linear combination of string-net configurations 
%that take the form of a string-net with one marked point at each of the tube's boundary components
%and one string wrapping around the tube's diameter. 
%This allows us 
to present these morphisms concisely as  
\begin{align}
{\rm mor}(\tube^X({\cal C}))\; =\; \mathbb{C} \left[\AnnularTubexp{\AnnularTubeNoIndex}{a}{b}{c}{d}{\mu}{\nu}{X}{} \right] 
\end{align}
where $a,b,c,d$ are simple objects in $\cal{C}$ and $X\in\{B,N\}$ denotes the spin structure of the annulus. 
The multiplicity indices $\mu$, and $\nu$ are 
collective indices that denote the vector in the fusion space $V^{db}_a$ and $V^{c \bar{d}}_b$, 
as well as the ordering of the tensor product ($V^{d b}_a \tp V^{c d^*}_b$ or $V^{c d^*}_b\tp V^{d b}_a$) which forms the Hilbert 
space of the tube.% (keeping track of this ordering is important because of the Koszul signs incurred 
%when interchanging two odd vectors in a tensor product). 

Since morphisms preserve the spin structures of the spin circles they act on, 
we are prompted to construct the {\it full} tube category $\tube(\mcc)$ by forming the direct sum
\be \label{tube_spin_decomp} \tube(\mcc) \cong \tube^B(\mcc) \oplus \tube^N(\mcc).\ee
In what follows we will mostly think of $\tube(\mcc)$ as the fundamental category of interest. 
This is because in what follows we will be led to consider a $\tp$ structure on $\tube(\mcc)$, which mixes the two spin components (we defer a discussion of this to 
Section \ref{fusion_rules}). 

Composition of morphisms in $\tube(\mcc)$ is defined by stacking tubes together.
%The stacking operation plays the role of multiplication 
%in $\tube(\mcc)$ when $\tube(\mcc)$ is viewed as an algebra. 
Graphically,
\begin{align}
\AnnularTubex{\AnnularTubeNoIndex}{a}{b}{\eta}{X}{} \circ
\AnnularTubex{\AnnularTubeNoIndex}{c}{d}{\psi}{Y}{} \;
=\; \delta_{X,Y} \delta_{b,c}\AnnulusTubeTubex{\AnnulusTubeTube}{a}{d}{\psi}{\eta}{X}
\end{align}
The $\delta$ functions ensure that if the string labels of the two tubes don't agree on the 
boundary on which they are being glued (i.e. if $b\neq c$), or if the spin structures of the 
two tubes disagree, the two tubes compose (or multiply) to zero. 

%In addition to composing morphisms, we can define a tensor product $\tp$ on $\tube(\mcc)$ 
%(from a physical perspective, $\tp$ implements quasiparticle fusion). 
%The definition of $\tp$ is best phrased in terms of vector spaces on the pair of pants, and we defer a 
%discussion of this construction until . 

To actually determine the objects in $\tube(\mcc)$, 
it is helpful to think about the simple objects in $\tube(\mcc)$ in terms of vector spaces which are preserved 
under the action of the morphisms in $\tube(\mcc)$\footnote{That vector spaces on circular punctures 
reproduce $\mcz(\mcc)$ makes sense from a formal perspective, as the category $\mcz(\mcc)$ is what a 
(fully-extended) TQFT assigns to an $S^1$.}. 
If we view $\tube(\mcc)$ as an algebra, then these invariant vector spaces correspond precisely to the 
simple modules $\{M_a\}$ of $\tube(\mcc)$.
This allows us to equivalently classify 
%Since every simple module $M_a$ of an algebra algebra can be dually represented by a primitive idempotent 
%$\Pi_a : \tube(\mcc) \ra M_a$ that projects onto the vector space $M_a$, we can classify 
the
simple objects in $\tube(\mcc)$ by the primitive idempotents (projectors whose images are simple modules) $\Pi_a : \tube(\mcc) \ra M_a$ of the tube category.%, each of which project onto a different simple module $M_a$ of $\tube(\mcc)$.

Before moving on, we briefly remark on the physical interpretation of the tube category. 
The setting for examining a collection of $n$ excitations in a given topological phase is a 
manifold decorated with string-nets that possesses $n$ circular punctures (boundary components), with an excitation localized at the location of each puncture.
The type of excitation at a given puncture determines the boundary conditions of the string-net TQFT at that puncture, 
and thus the simple objects in $\tube(\mcc)$ are identified with the distinct types of quasiparticle excitations that the theory supports. 
%Thus, enumerating the objects of $\tube(\mcc)$ amounts to constructing the quasiparticle excitation spectrum of the theory in question. 
A potentially helpful physical picture is to think of the morphisms in the tube category as performing ``scale transformations'' 
on quasiparticles \cite{lan2014}. 
These ``scale transformations'' consist of gluing in string-net-decorated spin annuli (i.e. acting with morphisms in the tube category) to the 
punctures associated with each quasiparticle. 
Since the topological quasiparticle excitations must be invariant under these scale transformations, 
enumerating the quasiparticle excitations in the theory is equivalent to writing down the simple 
modules of the tube category. 

Of course, the notion of an excitation is strictly speaking not well-defined until we construct a Hamiltonian for the theory.
We will do this in Section \ref{Super_pivotal_Hamiltonian}), but until then we will continue to abuse the word ``excitation''
to refer to an object of the tube category. 
We emphasize that the tube category is a perfectly well-defined mathematical object within 
the formal setting of string-net spin-TQFTs, and the discussion of the tube category 
which follows can be understood without using terms like ``excitation'' and ``Hamiltonian''. 



%%%%%%%%%%%%%%%%%%%%
\subsubsection{Computing traces in the tube category and quantum dimensions} \label{qdims_and_traces}
%%%%%%%%%%%%%%%%%%%%

\kw{new start for this subsection. might want to add details; this is an outline/sketch.}

Recall that a trace on a linear category $C$ is a linear function from endomorphisms to $\cc$, satisfying
\dave{Koszul signs?}
\be
	\tr(fg) = \tr(gf) ,
\ee
for all $f \in \mor(x\to y)$ and $g\in \mor(y\to x)$.
All of the categories we consider have a $*$-structure (a.k.a. reflection structure), which is an order 2 antilinear antiautomorphism
from $\mor(x\to y)$ to $\mor(y\to x)$ (for all objects $x$ and $y$).
A trace is equivalent to a collection of sesquilinear inner products on $\mor(x\to y)$ satisfying
\dave{Koszul signs?}
\be
	\langle fg, h \rangle = \langle f, h g^* \rangle \;\;\; and \;\;\; \langle fg, h \rangle = \langle g,f^*  h  \rangle 
\ee
for all $f\in\mor(x\to y)$, $g\in\mor(y\to z)$ and $h\in\mor(x\to z)$.
\kw{Maybe should use bar instead of star to be consistent with other parts of the paper?}
The trace and inner products are related by
\be
	\tr(f) = \langle f, \id_x \rangle   \;\;\; and \;\;\;   \langle g,h \rangle = \tr(gh^*)
\ee
for $f\in\mor(x\to x)$ and  $g,h\in\mor(x\to y)$.
A trace is called nondegenerate if the corresponding inner product is nondegenerate in the usual sense (on each morphism space individually).

\medskip

We now recall two facts about TQFTs.
The first is that we can define a nondegenerate pairing on the predual Hilbert
space $A(Y; a_1,\ldots,a_k)$ (where $Y$ is a spin surface and $a_i$ are boundary labels) via
\be
	\langle u, v\rangle = Z(Y\times I) (u\cup \bar v) ,
\ee
where the bar denotes the ``reflection" map from $A(Y; a_1,\ldots,a_k)$ to $A(-Y; a_1,\ldots,a_k)$\dave{stars on $a_i$'s in $A(-Y,....)$?}.
Here we are using the ``pinched boundary" condition for $Y\times I$, so that $\bd (Y\times I) = Y\cup -Y)$.
In other words, we glue together the string nets $u$ and $\bar v$ to get a string net on $\bd (Y\times I)$, and then we evaluate
the path integral of $Y\times I$ with the $u\cup \bar v$ string net as a boundary condition.

The second fact concerns the path integral of 3-manifolds of the form $Y\times S^1_B$ or $Y\times S^1_N$.
Let $c$ be a string net on $(\bd Y)\times S^1$ (with either spin structure on $S^1$.
$(\bd Y)\times S^1$ is a disjoint union of tori, and we can cut these tori open into a disjoint union of annuli.
Let $c'$ denote the cut open string nets on the annuli.
Note that $c'$ is not uniquely determined by $c$; $c'$ depends on where we cut.
The string net $c'$ determines a linear map
\be
	g(c') : A(Y; a_i) \to A(Y; a_i) ,
\ee
given by gluing the $c'$ annuli on to the boundary of a string net on $Y$.
The gluing rules for the path integral imply that
\be
	Z(Y\times S^1_B)(c) = \tr(g(c'))
\ee
and
\be
	Z(Y\times S^1_N)(c) = \str(g(c')) .
\ee
Note that any choice of cutting curves and $c'$ will yield the same answer on the RHS above.
\kw{Need to make sure we have defined super trace $\str$.}

\medskip

We now apply the above to the case where $Y$ is an annulus to obtain a nondegenerate trace on the tube category.

\kw{Take it from here, Dave.}

\kwsep

In what follows we will need to compute the trace of a generic operator (or in other words, an endomorphism) $\mco$ in the tube category. 
\kw{I think we should say endomorphism rather than operator, and use lower case notation for this operator.}
We will do the computations following the procedure outlined in \cite{Walker2006}; for more details see \cite{ghosh2016,das2014}.
\dave{I think at one point I thought those two references might be useful, but not so sure anymore.}
\kw{If you think the other two refs are useful and relevant, include them; otherwise not.}

To compute the trace of a endomorphsism in $\mcc$ (which can be thought of
as string nets on a disk), we identify the incoming and outgoing
boundaries of the disk to get a string net on $S^2$.
We then use the standard evaluation for $S^2$ string nets to get a number.
For an endomorphism $\mco$ in $\tube(\mcc)$, we follow the same procedure by identifying the incoming and outgoing
boundaries of the annulus, yielding a string net on the torus.
There is no standard evaluation for string nets on the torus (it is not 1-dimensional vector space in general),
but TQFT considerations pick out a preferred map from torus string nets to $\cc$, as we describe below.


\kw{I will rewrite below}

\kw{Note to self: be sure to introduce inner product (more general than trace)}

\kw{should probably make some observations needed for proof of lemma in MTC/psi section}

\dave{Do the two agree at the level of the tube category?
(i.e., I thought $\langle X, Y \rangle  = \langle \unit ,X^*Y\rangle = \text{tr} X^*Y$.
I used this fact later in \ref{image_aJ} but can also do the same calculation without it.)}

Recall that the path integral on a manifold $X$ is a linear function
\be Z(X) : V(\p X) \ra \cc,\ee
where $V(\p X)$ is the set of all string-net configurations on $\p X$ modulo local relations.
The trace of an operator supported on a manifold $Y$ is equal to the partition function on a manifold $X$ 
such that $\p X = Y$ evaluated on the string-net configuration specified by that operator. 
For our application to the tube category, we thus have 
\be {\rm Tr}\ \mco = Z(S^1 \times D^2)(\mco),\ee
where $S^1\times D^2$ is the solid torus. 

To compute this partition function, we make use of a cutting trick. 
We use the relation 
\be {\rm Tr}_Y\ (Z(X_{cut})) = Z(X_{glue}).\ee
In the above formula, $X_{cut}$ is a manifold which becomes $X_{glue}$ after gluing $X_{cut}$ by pasting in 
$Y$ along the boundary components of $X_{cut}$, and the ${\rm Tr}_Y$ instructs us to sum over all such $Y$.
This is illustrated in Figure \ref{cutting_trick}. The leftmost figure is a solid torus, on which an operator $\mco$ is supported. 
We then cut the torus as shown in the second step, and glue it together again as shown in the last step. 
We see that at the end of these steps, we have rotated the string-net configuration of the operator $\mco$ by $\pi/2$.
Therefore, we find
\begin{align}
\text{Tr} \; \mco &= {\rm Tr}\ (R_{\pi/2}(\mco)),
\end{align}
where $R_{\pi/2}(\mco)$ is the operator $\mco$ after having its string-net configurations have been rotated counterclockwise by $\pi/2$.
Schematically, this can be written as
\begin{align}
\text{Tr}\ \AnnulusGeneric = \text{Tr}\;  \left( \RotatedTube : \Disc \ra \Disc \right)
\end{align}
Despite the abstract nature of this discussion, the calculation of traces is easy in practice: to compute 
the trace of a tube, we rotate the string-net configuration on the tube by $\pi/2$ counterclockwise, 
identify the top and bottom of the tube, and simplify the resulting diagram. The trace is then found by 
taking the coefficient of the final diagram. 
\begin{figure}
\begin{center}
\begin{align}
\xymatrix @!0 @M=1mm @R=7mm @C=30mm {
\AnnulusGeneric \ar[r]^{\text{cut}}& \AnnulusCut \ar[r]^{\text{id}} & \AnnulusFlat \ar[r]^{\text{glue}}& \RotatedTube}
\end{align}
\caption{ \label{cutting_trick} Defining the trace of the tube by taking the inner product with the identity tube.
The first step is to cut open the annulus along the azimuthal cycle. 
then glue the inner and outer intervals together to get a rotated tube, shown at the far right.
We then view this rotated tube as a linear map from $D^2$ to $D^2$, and the trace of this map is the trace of the tube.
}
\end{center}
\end{figure}

Now that we know how to take traces and map string-nets on the torus to $\cc$, we are equipped with a way 
of taking inner products between morphisms in the tube category. To form the inner product $\langle u,v\rangle$, 
we take the annuli corresponding to $u$ and $v$, identify their boundaries together to form a torus, 
and use our tracing procedure to map this string-net torus to a complex number, which we identify with $\langle u,v\rangle$. 

The quantum dimension $d_x$ of an excitation $x$ in $\tube(\mcc)$ is defined by the trace of the associated idempotent $\Pi_x$: 
\begin{align}
d_x \equiv \text{Tr} (\Pi_x).
\end{align}
For example, in the $C_2$ theory, we can use this approach to obtain $d_{m_{\unit / \psi}} = 1/2, d_{m_\sigma^+} = q_{\unit/\psi} = d/2, q_\sigma = 1$. 
Normalizing so that $d_{m_\unit} = 1$, we obtain the quantum dimensions listed in Table \ref{C2Data}. 

We will also need to know how to calculate the total quantum dimension $\mcd_\mcc = \dim(\mcc)$.
In bosonic theories we have $\mcd_\mcc^2 = \sum_{x\in \mcc} d_x^2$, where the sum runs over all simple objects $a\in\mcc$. 
This formula is generalized in the fermionic setting, because of the nontrivial endomorphism algebras that simple objects can possess.  
The correct formula is
\be \label{total_qdim_defn} \mcd_{\mcc/\psi}^2 = \sum_{x\in \mcc/\psi} \frac{d_x^2}{\dim \End(x)}.\ee
This ensures that $\dim(\mcc)$ is related to $\dim(\mcc / \psi)$ by 
\be \label{DC_and_DCpsi} \mcd_{\mcc / \psi} = \frac{\mcd_\mcc}{\mcd_{\rm sVec}} = \frac{1}{\sqrt{2}} \mcd_\mcc,\ee
where we have viewed the category of supervector spaces, sVec, as consisting of two objects 
${\rm sVec} = \{\unit,\psi\}$ with $d_\unit=d_\psi=1$, so that $\mcd_{\rm sVec} = \sqrt{2}$. 
This result was also obtained in \cite{wan2016}. 

To prove \eqref{DC_and_DCpsi}, we write 
\be
\mcd_\mcc^2 = \text{Tr} \left(\bigoplus_{x\in \mcc/\psi} d_x x\right) = \text{Tr} \left( \bigoplus_{x \in M} d_x (\mathds{1} \oplus \psi) \tp x \right ) + \text{Tr} \left(\bigoplus_{x  \in Q} {d_x} x \right),\ee
where $Q$ is the set of all q-type objects in $\mcc$ (those that are invariant under fusion with $\psi$), 
and $M$ is a collection of representatives of the orbits of m-type objects under fusion with $\psi$, so that 
the collection of all m-type simple objects is $M\cup M\tp \psi$.   
Since $x\tp \psi \cong x$ if $x\in Q$, we can write
\begin{align}
\mcd_\mcc^2 & = \text{Tr} \left( \bigoplus_{x \in M} d_x (\mathds{1} \oplus \psi) \tp x \right ) + 
\text{Tr}  \left(\bigoplus_{x  \in Q}\frac{d_x}{2}(\unit \oplus \psi) x \right) \\ & =\text{Tr}(\unit \oplus \psi) 
\cdot \text{Tr} \left( \bigoplus_{x \in \mcc/\psi} \frac{d_x}{\dim\End(x)} x \right) = \mcd^2_{\rm sVec} 
\mcd_{\mcc/\psi}^2 = 2 \mcd_{\mcc/\psi}^2,
\end{align}
proving \eqref{DC_and_DCpsi}. 
This result can also be motivated by making use of the theory of modular extensions, see for example \cite{lan2016}. 
For the $C_2$ theory, this works out as 
\be \mcd_{C_2} = \sqrt{2} = \mcd_{\rm Ising} / \sqrt{2},\ee
and is easily checked to hold for the other examples in the $A_n / \psi$ series.  

It is a result of Muger \cite{muger2003a,2003b} that for any unitary fusion category $\mcc$, 
the dimension of the center is related to $\mcd_\mcc$ by 
\be \mcd_{\tube(\mcc)} =\mcd^2_\mcc.\ee
We can then use \eqref{DC_and_DCpsi} to obtain 
\be \mcd_{\tube(\mcc)} = 2\mcd^2_{\mcc/\psi}.\ee
Using \eqref{DC_and_DCpsi} again and using $\mcc \times (\mcc/\psi) \cong \tube(\mcc/\psi)$ (a result 
that we prove in Section \ref{double_fermionic_quotient}), we have 
\be \mcd_{\tube(\mcc/\psi)} = \sqrt{2}\mcd^2_{\mcc/\psi}.\ee
For example, in the $C_2$ theory this is verified by $\mcd_{\tube(C_2)} = \sqrt{8} = \sqrt{2} (\sqrt{2})^2 = \sqrt{2} \mcd^2_{C_2}.$

\subsubsection{\dave{May salvage some material from this, but otherwise may be removed.}}


%First, any string net configuration of the parent theory descends to a string net configuration of the condensed theory.
In particular, we have two functors
\be
	\varphi_B : \tube(\mcc) \rightarrow \tube^B(\mcc/\psi)
\ee
and
\be
	\varphi_N : \tube(\mcc) \rightarrow \tube^N(\mcc/\psi) .
\ee
%giving us a functor $\tube(\mcc) \rightarrow \tube(\mcc/\psi)$.
%Conversely, we can always take an even morphism in $\mcc/\psi$ and lift it to $\mcc$, giving 
%us a way from lifting tubes in $\tube(\mcc/\psi)$ to those in $\tube(\mcc)$.
%These two facts allow us to find the minimal idempotents of the quotient theory, 
%using the minimal idempotents of the parent theory.



%\dave{I haven't checked the above, will come back to it.}
%\kw{Looks OK to me.}

The proof of the theorem splits into two parts. 
We first compute the images of the minimal idempotents in $\tube(\mcc/\psi)$ under condensation
and show that these images provide us with a complete set of minimal idempotents in the condensed theory.
Next we define a tensor functor from $\mcc \times \overline{\mcc/\psi} $ to $\tube(\mcc/\psi)$ and
show that it is an isomorphism of tensor categories.
%thus showing that $\tube(\mcc/\psi) \cong \mcc \times \overline{\mcc/\psi}$ as tensor categories.

Recall that the endomorphisms of the trivial object in $\tube(\mcc)$ form a commutative algebra
isomorphic to the fusion ring of $\mcc$, and that the $\omega$ loops are the minimal idempotents of this algebra.
We define two non-minimal idempotents in this algebra,
\begin{align}  \label{aJloop}
	a_B = \frac{1}{2}(\text{cl}(\unit) + \text{cl}(\psi)), \;\;\;\;   a_N = \frac{1}{2}(\text{cl}(\unit) - \text{cl}(\psi)),
\end{align}
where as before $\text{cl}(x)$ denotes a closed up $x$ strand embedded in a solid torus.
These two idempotents are orthogonal (i.e.\ $a_I\cdot a_J = \delta_{IJ}a_I$), and $a_B + a_N = \id$.

Placing $a_J$ behind a tube diagram yields a functor $\hat{a}_J : \tube(\mcc) \to \tube(\mcc)$
\begin{align}  \label{aJ_projector}
	\hat{a}_J \left( \TubeBasisa \right) = \TubeProject .
\end{align}
We have a decomposition of $\tube(\mcc)$ into two summands, $\hat{a}_B(\tube(\mcc))$ and $\hat{a}_N(\tube(\mcc))$.
%Thus we have a decomposition of $\tube(\mcc)$ into two summands, $\tube(\mcc)\bullet a_B$ and $\tube(\mcc)\bullet a_N$.
%In pictures, tensoring with $a_J$ looks like
%\begin{align}  \label{aJ_projector}
%	\TubeBasisa \bullet a_J = \TubeProject.
%\end{align}
We also have
\be
	\varphi_I(a_J) = \delta_{IJ} \id ,
\ee
which implies that $\varphi_B\circ\hat a_N$ and $\varphi_N\circ\hat a_B$ are both the zero functor.
On the other hand, we have:
%$\varphi_B\circ\hat a_B$ and $\varphi_N\circ\hat a_N$ are both faithful:
%It follows that the summand $\tube(\mcc)\bullet a_B$ maps to zero when included in $\tube^N(\mcc/\psi)$,
%and the summand $\tube(\mcc)\bullet a_N$ maps to zero when included in $\tube^B(\mcc/\psi)$.
%With a little more work, we can show that $\tube(\mcc)\bullet a_J$ maps faithfully (injectively) into
%$\tube^J(\mcc/\psi)$ under the functor $\varphi_J$.
%
%\kw{not satisfied with above; will rewrite soon}

\begin{comment} %%%%%%%%%%%%%%%%

The image of the idempotents in $\tube(\mcc)$ under condensation can be found with the help of 
two projectors $a_B,a_N$ which sum to the identity, and are defined to act on morphisms in $\tube(\mcc/\psi)$. 
They are defined as
\begin{align}
a_B = \frac{1}{2}(\text{cl}(\unit) + \text{cl}(\psi)), \;\;\;\;   a_N = \frac{1}{2}(\text{cl}(\unit) - \text{cl}(\psi)),
\label{aJloop}
\end{align}
where as before, $\text{cl}(x)$ denotes a closed up $x$ strand embedded in a solid torus.
Importantly, they satisfy $a_J \tp a_W = \delta_{JW} a_J$ and $a_B + a_N = \text{cl}(\unit)$\footnote{
By ${\rm cl}(a)\tp{\rm cl}(b)$, we mean ${\rm cl}(a\tp b)$.}.
Also, from the definition of the $\omega$ loop we note that $\omega\tp a_J = \delta_{J,B}\omega$. 
Notice that an $a_J$ loop encircling a tube with spin structure $J$ is the identity, while an $a_J$ loop 
on a tube with spin structure $W \neq J$ projects the tube to zero.
That is, 
\begin{align}
\SpinStructureProjector = \delta_{JW}\; \EmptyTubeW \in \tube^W(\mcc/\psi),
\end{align}
where $W$ on the interior of the gray disc denotes the spin structure for the disc it bounds.

The projectors can also be defined to act on morphisms in $\tube(\mcc)$. In this setting we will denote 
them as $\hat{a}_B$ and $\hat{a}_N$. 
On general morphisms in $\tube(\mcc)$, they act as 
\begin{align}
\hat{a}_J \cdot \TubeBasisa = \TubeProject.
\label{aJ_projector}
\end{align}


The $\hat{a}_J$ projectors allow us to determine which idempotents in $\tube(\mcc)$ survive the projection 
to $\tube(\mcc/\psi)$:
a non-zero tube in $\tube(\mcc)$ in the image of $\hat{a}_J$ remains non-zero under condensation as a tube in $\tube^J(\mcc/\psi)$. 
We make this precise in the following lemma:

\end{comment} %%%%%%%%%%%%%%%%


\begin{lemma}  \label{image_aJ}
The functors $\varphi_B\circ\hat a_B$ and $\varphi_N\circ\hat a_N$ are both faithful (i.e.\ injective on morphism spaces).
\end{lemma}

%\begin{lemma}
%\label{image_aJ}
%Let $\mcc$ be a modular tensor category and $\psi$ a fermion in $\mcz(\mcc)$ as defined in \ref{lift_and_condense}.
%Let $\hat{a}_J$ be as defined in \eqref{aJ_projector}.
%Then there exists a functor 
%\[\begin{tikzcd}        
%   I: \hat{a}_J \cdot \tube(\mcc) \rightarrow \tube^J(\mcc/\psi)
%\end{tikzcd}\]
%which is faithful, meaning that morphisms in $\hat{a}_J\cdot\tube(\mcc)$ are mapped injectively to morphisms in $\tube^J(\mcc/\psi)$. 
%\ethan{may still need to be rephrased}
%In particular, a tube of $\tube(\mcc)$ that is not mapped to zero by $\hat{a}_J$ is nonzero in the image of $I$. 
%\end{lemma}

\kw{I'm skipping the proof of the lemma; will come back later}

\begin{proof}
The proof follows from a simple observation.
Let $t \in \tube(\mcc)$ be in the image of $\hat{a}_J$ so that, 
\begin{align}
\left \langle\; \Tubeidr,\Tuberr \; \right \rangle_{\tube(\mcc)} &=\left \langle\; \Tubeidr,\TuberraJ \; \right \rangle_{\tube(\mcc)}  \\
&= \frac{1}{2} \left \langle  \TuberrTraceCe + (-1)^{s(J)} \TuberrTraceCo  \right \rangle_{\mcc}
\end{align}
The first step follows from $t$ being in the image of the projector $\hat{a}_J$, 
while the second step follows from the definition of the inner product in the tube category 
(written as $\langle,\rangle_{\tube(\mcc)}$, which is discussed in Section \ref{qdims_and_traces}). 
The angle brackets with subscript $\mcc$ in the second line means that we evaluate the picture on 
the two-sphere using local relations in $\mcc$.
As before, we have defined $s(J)= 0$ if $J$ is bounding and $s(J)=1$ otherwise.

Since any net configuration in $\mcc$ evaluated on $S^2$ agrees with the evaluation in $\mcc/\psi$ we have,
\begin{align}
\frac{1}{2} \left \langle  \TuberrTraceCe + (-1)^{s(J)} \TuberrTraceCo  \right \rangle_{\mcc} &=\frac{1}{2} \left \langle  \TuberrTraceCe + (-1)^{s(J)} \TuberrTraceCo  \right \rangle_{\mcc/\psi} \\
&= \frac{1}{2} \left \langle\; \Tubeidr,\Tuberr \; \right \rangle_{\tube^J(\mcc/\psi)},
\end{align}
where we have again used the definition of the trace. 
Hence, if $X,Y \in \tube(\mcc)$ are in the image of $\hat{a}_J$, then $\langle X, Y \rangle = \langle \unit, X^* Y\rangle$. 
Using that $\tube(\mcc)$ is semi-simple, and that the $t \in \tube(\mcc)$ above span all 
morphisms of $\tube(\mcc)$, we can always find an isomorphism such that $t \cong X^*Y$.
\ethan{I'm confused by the last two sentences and why we need them}
\dave{If a tube $X$ is non-zero in $\tube(\mcc)$, then $\langle X, X\rangle$ is non-zero (I'm assuming the 
inner product is non-degenerate for both $\tube(\mcc)$ and $\tube(\mcc/\psi)$. 
Not all tubes in $\tube(\mcc)$ look like $t$ above, so we need to say that they are all isomorphic 
to one that looks like $t$. 
I think that in order for that to be true $\tube(\mcc)$ should be semi-simple, 
but this I'm not certain of.
}
From the previous equation we have that $\langle X, Y \rangle_{\tube(\mcc)} = \frac{1}{2} \langle X, Y \rangle_{\tube^J(\mcc/\psi)}$.
Since the the inner product is non-degenerate \ethan{did we prove this?}
\dave{No, not yet.
I assumed in the next re-write of the inner product section we would either mention it's non-degenerate with a reference, or prove it.
Otherwise we could re-word the above.}, the inclusion of $\hat{a}_J\cdot\tube(\mcc)$ into $\tube^J(\mcc/\psi)$ is injective on morphisms.
\end{proof}



Let's now apply the $\hat a_J$ functors to the idempotents in the parent theory $\tube(\mcc)$. 
%Define the image of $e_{xy}$ under condensation to be $f^J_{xy}$. 
Define
\be
	f^J_{xy} = \varphi_J(e_{xy}) .
\ee
Using that $\omega \cdot a_J = \delta_{JB} \omega$, we can replace the $\omega$ appearing in $e_{xy}$ with $a_B \cdot \omega$. 
We can next pass the $a_B$ through the $y$ strand sitting between the $\omega$ loop and the back wall. 
Doing so permutes $a_B$ and $a_N$ if $y$ has nontrivial braiding with $\psi$.
Otherwise $a_B$ remains unchanged (if $y$ braids trivially with $\psi$). 
Diagrammatically, 
\begin{align}
e_{xy} =  \TubeIdempotentTwoStrand= \exyomegaa = \begin{cases}
\exyomegac& \text{if}\; \nu_y = 0 \\
\\
\exyomegab& \text{if}\; \nu_y =1
\end{cases},
\end{align}
\kw{We can also see the above more directly, since we are free to insert $a_J$ in an annular diagram with spin structure $J$.}
where the indicator $\nu_y$ is defined as before by $\nu_y=0$ if $y$ braids trivially with $\psi$, and $\nu_y=1$ otherwise. 
This means that each $e_{xy}$ has an image in $\tube(\mcc/\psi)$ given by
\begin{align}
e_{xy} \xrightarrow{\text{condense $\psi$}}f_{xy}^{J(y)} \quad \quad \text{with $J(y) = B$ if $\nu_y = 0$ and $J(y) = N$ otherwise}
\label{image_of_exy}
\end{align}
\kw{Is previous statement redundant?}
In the following we will sometimes write just $J$ instead of $J(y)$. 
Since the $e_{xy}$ are complete, orthogonal and non-zero then by using the Lemma \ref{image_aJ}
we also have that the $f^J_{xy}$ are complete, orthogonal and non-zero\footnote{they are complete since all the non-zero even 
tubes in the condensed theory lift to non-zero tubes in the parent theory, meaning that we are not ``missing'' any 
idempotents after projecting the idempotents in the parent theory to the condensed theory.}.
Note that the inclusion of the image of $\hat{a}_J$ in $\tube^J(\mcc/\psi)$ is not surjective: 
indeed, tubes that have $\psi$ lines terminating on the interior of the tube do not appear in $\tube(\mcc)$.
For example a tube with a q-type strand could always have a $\psi$ line extending from it and terminating on the back wall.
Hence, we also need to show that the resulting idempotents are minimal.


%%%%%%%%%%%%%%%%%
\subsubsection{The sum-of-squares formula}
%%%%%%%%%%%%%%%%%

In this section, we briefly present a fermionic version of the sum-of-squares formula, which is useful for relating the dimension
of the tube category to the dimensions of its simple modules (quasiparticles). 
In many cases, this allows us to obtain a large amount of information about the quasiparticle 
content of the theory without actually finding the explicit representations of the primitive 
idempotents of the tube category.

If $\{M_a\}$ is a list of the simple modules of the tube category 
(recall that these are in one-to-one correspondence with quasiparticles, otherwise known as isomorphism class of minimal idempotents of the tube category), then 
the sum-of-squares formula is
\be \label{sumofsqs} \dim \tube = \sum_{a | \End(a) \cong \cc} (\dim M_a)^2 + 2\sum_{a|\End(a) \cong \cl_1} (\dim M_a)^2,\ee
where the factor of 2 in front of the second sum comes from the fact that if $a$ is q-type, 
the even and odd parts of $M_a$ have equal dimensions (as they are oddly isomorphic). 
The left hand side of the above formula is simply the number of non-zero linearly independent tubes in $\tube$. 
If there are no q-type particles in $\tube$ then there are no terms in the second sum on the right hand side, 
and we reproduce the bosonic sum-of-squares formula (see e.g. \cite{Lan2014}). 

As an example, we can consider the $C_2$ theory. 
There are three q-type simple modules (all in the $\tube^N$ sector) and three m-types. 
All of the simple modules are one-dimensional with the exception of $m_\sigma$, 
which is the two-dimensional isomorphism class of $m_\sigma^+$ and $m_\sigma^-$. 
Since there are 12 linearly independent tubes in $\tube(C_2)$ (see \eqref{atubes} and \eqref{ptubes}), 
the sum-of-squares formula reads
\be 12 = 1^2+2^2+1^2+2(1^2+1^2+1^2).\ee



%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Ground states on the torus} \label{ground_states_on_torus}
%%%%%%%%%%%%%%%%%%%%%%%%%

In what follows, we will let $T_{XY}$ with $X,Y\in\{B,N\}$ denote the torus with spin structure $XY$
(with spin structure $X$ along the meridional cycle and $Y$ along the longitudinal cycle),
and $\mch(T_{XY})$ the Hilbert space of ground-state string-net configurations on $T_{XY}$.  
As before, we will also let $\tube^B$ denote the bounding tube category and $\tube^N$ denote the non-bounding tube category. 

We have the following theorem, valid for any super pivotal category, which allows us to determine 
the ground states on a torus from the tube category:

\begin{theorem} \label{torus_basis_theorem}
Let $X$ equal $B$ or $N$.
The Hilbert space $\mch(T_{XB})$ is purely even, with an orthogonal basis given by closed-up idempotents $\{cl(e_i)\}$,
where $e_i$ runs through a set of representatives of the minimal idempotents of $\tube^X$.
The Hilbert space of $T_{XN}$ is isomorphic to $\cc^{p|q}$, where $p$ is the number of m-type idempotents of $\tube^X$
and $q$ is the number of q-type idempotents of $\tube^X$.
An orthogonal basis is given by $\{cl(e_i)\}$, where $e_i$ runs through a set of 
representatives of the minimal m-type idempotents of $\tube^X$,
union $\{cl(\gamma_j)\}$,
where $\gamma_j$ runs through a set of representatives of odd endomorphisms of the minimal q-type idempotents of $\tube^X$.
\end{theorem}

The proof of the above claim consists of a sequence of fairly simple observations:
\begin{enumerate}

\item Let $c$ be an object of $\tube^X$ and let $f\in\End(c)$.
Recall that $f$ is a linear combination of string nets on the annulus (with spin structure $X$), with boundary conditions
$c$ on both boundary components of the annulus.
We can therefore glue up $f$ to obtain a new string net $cl(f)$ (the closure of $f$) on either $T_{XB}$ or $T_{XN}$.
This map is clearly linear, so we have a linear map $cl_c : \End(c) \to \mch(T_{XY})$, where $Y$ is either $B$ or $N$.
(For future reference, we will call the image of the boundary of the annulus in the torus $K$.)

\item Taking (finite) sums over different boundary conditions, we have a linear map
\be
	cl : \bigoplus_c \End(c) \to \mch(T_{XY}) ,
\ee
where $c$ ranges over all possible boundary conditions.
(Note that even though $c$ ranges over an uncountable set, the direct sum consists only of finite linear combinations; 
there are no convergence issues.)

\item The map $cl$ is surjective.
This is because any string net on the torus is, after a small isotopy, 
transverse to the gluing locus $K$.
But $cl$ is very far from being injective, so our next task is to characterize the kernel of $cl$.

\item One way of constructing elements in the kernel of $cl$ is as follows.
Let $c$ and $d$ be two objects of $\tube^X$.
Let $g: c\to d$ and $h: d\to c$.
Then $gh \in \End(c)$ and $hg \in \End(d)$.
We have
\be
	cl(gh) = (-1)^{|g| |h|} s(Y)^{|h|} cl(hg) ,
\ee
where $s(B) = -1$ (antiperiodic) and $s(N) = 1$ (periodic).
This follows from the fact that the two string nets $cl(gh)$ and $cl(hg)$ are isotopic
via a ``shift" isotopy which pushes $h$ past the gluing locus $K$.
The factor of $(-1)^{|g| |h|}$ is the usual Koszul sign.
The factor of $s(Y)^{|h|}$ comes from sliding $h$ past the spin structure branch cut at $K$; see Figure~\ref{KernalCl}.
It follows that elements of the form
\be \label{cl_ker}
	gh - (-1)^{|g| |h|} s(Y)^{|h|} hg \in \bigoplus_x \End(x)
\ee
are in the kernel of $cl$.
\begin{figure}
\begin{center}
\includegraphics{KernalCl.pdf}
\caption{ A graphical illustration of how to interchange morphisms in the tube category. 
The labels $1$ and $2$ denote the order in which the morphisms $g$ and $h$ appear in 
tensor products. The factor of $s(Y)$ comes from transporting $h$ around the torus, and the factor of 
$(-1)^{|g||h|}$ comes from the super-commutativity of the tensor product. 
}
\label{KernalCl} 
\end{center}
\end{figure}

\item In fact, elements of the form \eqref{cl_ker} generate all of the kernel of $cl$.
In the bosonic case, this is a standard fact (see \cite{Walker2006}).
The proof for the fermionic case is exactly the same, except that we have to keep track of
Koszul signs and signs coming from the spin structure.
The key idea of the proof is that any isotopy of the torus can be decomposed into (a) isotopies which
are fixed near $K$, and therefore can be lifted to isotopies of the annulus, and (b) a ``shift" isotopy
as described above.
In summary,
\be \label{torus_thm}
	\mch(T_{XY}) \cong \left( \bigoplus_x \End(x) \right) / \left\langle gh - (-1)^{|g| |h|} s(Y)^{|h|} hg \right\rangle .
\ee

\item In the semisimple case, the expression \eqref{torus_thm} can be greatly simplified.
Let $\{e_i\}$ be a complete set of minimal idempotents for $\tube^X$.
Any endomorphism $f$ can be written as a sum of endomorphisms of the form $f' e_i f''$.
Using \eqref{cl_ker}, we see that the subspace (of the big direct sum)
\be
	\bigoplus_i \End(e_i)
\ee
maps surjectively to $\mch(T_{XY})$.
Furthermore, because the minimal idempotents are orthogonal (in the sense that $e_i f e_j$ is zero for any $f$ unless $i=j$),
the only relations we have to consider are of the form
\be \label{t2_idem_rels}
	gh - (-1)^{|g| |h|} s(Y)^{|h|} hg
\ee
where both $g$ and $h$ are endomorphisms of $e_i$.
The theorem now follows.
\end{enumerate}

If $e_i$ is m-type, then \eqref{t2_idem_rels} is always zero and we get a summand of $\cc^{1|0}$ in $\mch(T_{XY})$.
If $e_i$ is q-type and $Y$ is $B$, then any odd endomorphism is of the form $\eqref{t2_idem_rels}$
and we get a summand of $\cc^{1|0}$.
If $e_i$ is q-type and $Y$ is $N$, then any even endomorphism is of the form $\eqref{t2_idem_rels}$
and we get a summand of $\cc^{0|1}$.

A useful corollary of Theorem \ref{torus_basis_theorem} is that all the idempotents of 
$\tube^B$ must be m-type.
Since $T_{BN}$ is spin diffeomorphic to $T_{NB}$, we can compute the Hilbert space for 
these spin surfaces in two different ways, one using
idempotents of $\tube^B$ and the other using idempotents of $\tube^N$.
By the first part of the theorem, the Hilbert space of $T_{NB}$ is purely even.
By the second part of theorem, the dimension of the odd part of the Hilbert space of $T_{BN}$
is given by the number of q-type idempotents of $\tube^B$.
Since the two Hilbert spaces are isomorphic, there can be no q-type idempotents in $\tube^B$.

A similar argument shows that the total number of (equivalence classes of) minimal idempotents of $\tube^B$
must equal that of $\tube^N$.



%%%%%%%%%%%%%%%%%%%
\subsection{Fusion rules} \label{fusion_rules}
%%%%%%%%%%%%%%%%%%%

\kw{
I think we are currently using (at least) 
three different notations for the two different vector spaces we might want to associate
to a surface: $A$, $V$ and $\mch$.
We should try to make this more consistent.
In most of my papers and talks, I use $A$ for string nets mod relations, 
and $Z$ for the dual space of $A$.
Strictly speaking, $Z$ is the Hilbert space; $A$ could be called the pre-dual Hilbert space.
In the finite/semisimple case, $A$ and $Z$ are isomorphic, so one does not need to make a big deal about the distinction.
In any case, I think we should try to be more consistent with the notation.
I admit that I am probably responsible for most of the notational inconsistency.}
\ethan{Agreed. In that case, can I replace $V(Y)$ with $A(Y)$ in the discussion of the fusion rules?}

In this subsection, we will define the fusion (tensor product) of representations of the tube category.

We begin with some general observations.
Let $Y$ be a spin surface with $k$ boundary components, labeled by $S_1,\ldots,S_k$.
Let $T_i$ denote the tube category corresponding to the circle $S_i$.
Each $T_i$ is (non-canonically) isomorphic to either $\tube^B$ or $\tube^N$.
(In order to make the isomorphisms canonical, we must choose a spin framing in each
boundary component.)
%\footnote{Here we mean the 
%restriction of the full tube category $\tube \cong \tube^B \oplus \tube^N$ to the sector with 
%spin structure given by the spin structure on $S_i$. 
%That is, $T_i = \tube^B$ ($=\tube^N$) if $S_i$ is bounding (non-bounding).}.
Given objects $c_i$ of $T_i$, for $1\le i \le k$, we have a super vector space $V(Y; c_1,\ldots,c_k)$ consisting on string nets
on $Y$, modulo local relations, with boundary conditions $c_i$ at $S_i$.

We can then glue morphisms of $T_i$ (tubes) onto $S_i$ to obtain a new string net with (possibly) different boundary condition.
A concise way to describe this algebraic structure is to say that the collection of super vector spaces $\{V(Y; c_1,\ldots,c_k)\}$
(for all possible values of $c_1,\ldots,c_k$)
affords a representation of the category $T_1\times\cdots\times T_k$.
We will denote this representation by $V(Y)$.

To define the fusion rules of excitations, we can take $Y$ to be the 
pair of pants (a.k.a three-punctured sphere), which we will denote as $P$. 

There are four spin structures on the pair of pants. 
In one of them, all three boundary components have a bounding spin structure, while in 
the remaining three, two out of the three boundary components have a non-bounding spin structure.
We will choose a standard representative for each of these spin pairs of pants, 
so that each boundary component is equipped with a spin diffeomorphism to a 
standard copy of $S^1_B$ or $S^1_N$.

Let $T_a$, $T_b$ and $T_c$ denote the three associated copies of the tube category on $P$.
Given representations $\rho_a$ and $\rho_b$ of $T_a$ and $T_b$, we can define a new representation of $T_c$,
denoted $\rho_a\tp\rho_b$, via
\be  \label{tctpdef}
	\rho_a\tp\rho_b = (\rho_a \boxtimes \rho_b) \tp_{T_a\times T_b} V(P) .
\ee
Here $\rho_a \boxtimes \rho_b$ denotes the ``outer" tensor product (so that $\rho_a \boxtimes \rho_b$ is a representation of $T_a\times T_b$), 
and $V(P)$ is the 
trimodule defined above, built out of
vector spaces of string-net configurations (modulo local relations) on $P$ with all possible boundary conditions. 
Informally, $\rho_a\tp \rho_b$ is found by taking a superposition of tubes carrying $\rho_a$ and $\rho_b$ 
(which is the outer product $\rho_a\boxtimes\rho_b$) and gluing them onto a pair of pants (given by $V(P)$). 
The algebraic implementation of gluing is the tensor product $\tp_{T_a\times T_b}$. 

If $\rho$ is the representation (i.e.\ module) determined by an idempotent $e$ (as described at the start of \ref{C2_fusion_rules}),
then the above association of $\rho$ to a boundary component is equivalent to imposing $e$ as a boundary condition
in a annular neighborhood of that boundary component.

Note that the B/N grading of the tube category (and its modules) is respected by the above tensor product:
\begin{align}
B \tp B = B \quad \quad B \tp N = N \quad \quad N \tp N = B .
\end{align}
\ethan{Maybe we can be slightly less schematic, e.g. $\tube^B \tp \tube^B \cong \tube^B$ or something}


\begin{comment}
\kw{We define $V^{ab}_c$ elsewhere, so probably no need to to it again here.}

\kw{This paragraph needs work.
Should probably use idempotents instead of representations.
I will do more editing later.}
For fixed representations $\rho_a,\rho_b,\rho_c$ of $T_a,T_b,T_c$ on the three boundary components of $P$,
we will define the fusion space $V^{ab}_{c}$ to be the vector space of string-nets on $P$ modulo local relations.
\kw{Need to mention boundary conditions (idempotents) for $P$.}
$V^{ab}_{c}$ is thus given by the collection of maps from the two boundaries of $P$ with $\rho_a,\rho_b$ 
boundary conditions to the boundary of $P$ with $\rho_c$ boundary conditions, and so we can also write $V^{ab}_{c}$ as
\begin{align}
\label{morpants}
V^{ab}_{c} \cong \text{mor}( \underset{a}{\TubeBCx{Q}} \tp \underset{b}{\TubeBCx{R}}  \rightarrow \underset{\;\; \;\; \quad c \in a\tp b}{\TubeBCx{Q+R}} ), 
\end{align}
where $Q, R \in \{ B,N \}$ denote the spin structures of the two punctures being fused. 
This means that $V^{ab}_c$ is the vector space of string-nets modulo local relations on the following pair of pants:
\be \mathord{\vcenter{\hbox{\includegraphics[scale=1]{fusion_space_pants.pdf}}}}.\ee

Finally, we comment on the expression $Q+R$ for the spin structure of $T_c$. 
Since contractible loops are assigned anti-periodic boundary conditions, $B$ acts as $0$ and $N$ 
acts as $1$ when calculating $Q+R$ (where addition is carried out in $\zt$), and 
so the addition rule is 
\begin{align}
B+B = B \quad \quad B+N = N \quad \quad N+N  = B.
\end{align}

\end{comment}


\begin{comment}

 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{The double braid in terms of the topological twists}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\dave{Also punt this subsection to future work that includes braiding?}



In this brief section, we comment on an alternate way of calculating the matrix $\mcb^2$ of double braids (mutual statistics). 
Instead of tracing out the $R$ matrices as we did in our analysis of the $C_2$ theory, we can appeal to a formula relating the $\mcb^2$ matrix to the topological twists. 
In bosonic theories, we have the relation
\be 
[{\mcb^2_{bos}}]_{ab} = \frac{1}{\mcd} \sum_c d_c N^{ab}_c \frac{\theta_c}{\theta_a\theta_b}.
\label{stwist_bosonic} 
\ee
This relation does {\it not} hold in the superfusion case, and needs to be modified. 
The derivation of the correct version of \eqref{stwist_bosonic} relies on the fact that
\be \label{stwist_fermionic} \theta_c = (-1)^{|v|(s(c)+1)} \theta_a\theta_b [R^{ab}_c]_{vv} [R^{ba}_c]_{vv},\ee
where $v\in V^{ab}_c$ is any vector in the fusion space $V^{ab}_c$ and $|v| \in \{0,1\}$ is 
the parity of $v$, and where the sum runs over the minimal idempotents of $\tube(\mcc)$.  
Additionally, we have defined the function $s$ by $s(c) = 0$ if $c\in\tube^B(\mcc)$ and $s(c)=1$ if $c\in\tube^N(\mcc)$. 

To derive \eqref{stwist_fermionic}, we use the following manipulations:
\be\label{stwist_proof} \includegraphics{stwist_proof.pdf}, \ee
where $a$ and $b$ are such that $N^{ab}_c\neq0$, $v$ is any vector in the fusion space $V^{ab}_c$, 
and for clarity we have used the orange lines to represent collections of tubes hosting the quasiparticles $a,b,c$. 
These steps relate something proportional to $\theta_c$ (the leftmost diagram) to something 
proportional to $\theta_a\theta_b [R^{ab}_c]_{vv}[R^{ba}_c]_{vv}$. 
In the bosonic case this relation is an exact equality, but this is not true in the fermionic setting. 
Firstly, we see that the first step in \eqref{stwist_proof} involves passing the vertex $v$ under a $c$ tube. 
When the braiding process is embedded in $S^3$, the branch cuts associated with vortex-type 
quasiparticles become branch sheets, which we will define to always be pointing out of the page. 
This means that passing an odd vector in $V^{ab}_c$ over a vortex-type quasiparticle gives a phase factor of $-1$.
 Additionally, we notice that vectors in $V^{ab}_c$ are transported in a loop during steps 1 and 2, 
 which contributes a sign of $-1$ if the vector $v$ is odd. 
 These two effects are responsible for the factor of $(-1)^{|v|(s(c)+1)}$ in \eqref{stwist_fermionic}, 
 meaning that the correct expression for $\mcb^2$ in the fermionic setting is 
\be [\mcb^2]_{ab} = \frac{1}{\mcd} \sum_c \sum_{v \in V^{ab}_c} d_c (-1)^{|v| (s(c)+1)}   \frac{\theta_c}{\theta_a\theta_b}.\ee 

\end{comment}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Dimension formula}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

In this subsection we give a Verlinde-type formula for the super dimension of the Hilbert space of a surface $Y$.


\subsubsection{The formula}   \label{dimformula_ss}

Let $Y$ be a spin surface with boundary components $U_1, \ldots, U_k$.
Each $U_i$ inherits either a bounding (a.k.a.\ antiperiodic or non-vortex) or nonbounding 
(a.k.a.\ periodic or vortex) spin structure.

Let $a_1,\ldots, a_k$ be a set of labels for $\bd Y$.
Each $a_i$ is a minimal idempotent in the tube category $\tube^{U_i}(\mcc)$
(which is isomorphic to either $\tube^B(\mcc)$ or $\tube^N(\mcc)$); 
either a non-vortex anyon or a vortex anyon
(according to the spin structure on $U_i$).
%%KW I changed notation
%\dave{Maybe we should say $\tube^B(\mcc)$ or $\tube^N(\mcc)$ just to be clear.
%It may be confusing for the reader since we usually put categories into $\tube$ and not $S^1$'s. 
%}
The predual Hilbert space of string-net configurations on $Y$ with boundary conditions 
determined by the $a_i$ is $A(Y; a_1,\ldots, a_k) \cong \cc^{p|q}$ for some integers $p,q$.
Our goal is to compute $p$ and $q$.

\medskip

Let $S_{ab}$ denote the normalized, unitary $S$-matrix.
The indices $a$ and $b$ are closed-up idempotents on a spin torus.
They are specified by giving an idempotent (either bounding or nonbounding) together with
the way the annulus was glued 
%%KW: "longitudinal" is confusing because the S matrix involves cutting along two orthogonal cycles
%along the longitudinal direction 
to obtain the torus (again either bounding or nonbounding,
independent of the bounding/nonbounding status of the idempotent).
The idempotent $a$ is glued up in a (non)bounding way if $b$ is a (non)bounding idempotent, 
and vice versa.\footnote{
%%KW I don't we need to mention embeddings on $S^3$; diffeomorphisms of T^2 should suffice
%\ethan{In brief, this constraint can be seen from writing $S_{ab}$ as the partition function of two 
%linked tori embedded in $S^3$, with the tori corresponding to the closed-up idempotents $a$ and $b$.
%Requiring that the linked tori embed into $S^3$ (so that there are no free spin structure defect 
%endpoints) enforces that the spin structure along the longitudinal cycle of one torus match the spin 
%structure along the meridional cycle of the other.}
This is because spin structure on the cutting circle of one torus must
match the spin structure of the circle perpendicular to the cutting circle of the other torus.
%%KW not completely happy with above
}
%%KW: broken reference; deleting for now
%(see the discussion around Figure \ref{braided_tubes}).
If the idempotent is q-type, it is rescaled by $1/\sqrt 2$ to obtain a unit vector in $A(T^2)$, 
the vector space of string-net configurations modulo local relations on the torus.
(Note that there is still some ambiguity for entries in the $S$-matrix corresponding
to odd vectors in $T^2_{NN}$, but the formulas below will not use these $S$-matrix entries.)

Let $S'_{ab}$ be $S_{ab}$ if $a$ is m-type and $\sqrt 2 \cdot S_{ab}$ if $a$ is q-type.
Note that $S'_{ab}$ is asymmetric in $a$ and $b$;
we're undoing the normalization for $a$ but not for $b$.
The idempotents we will be summing over fall into three classes:
$B_m$ (bounding and m-type), $N_m$ (non-bounding and m-type), and $N_q$ (non-bounding and q-type).
Recall 
%(from the discussion after \eqref{tube_spin_decomp}) 
(from the discussion at the end of \ref{ground_states_on_torus}) 
that bounding idempotents are always m-type; in other words the fourth class $B_q$ is empty.


\medskip

We can now state the dimension formula:
We have
\be
	p + q = \sum_{x\in B_m} {S_{1x}}^{\chi(Y)} {\textstyle \prod_i} S'_{a_i x} 
	\label{PplusQ}
\ee
where $\chi(Y)$ is the Euler characteristic of $Y$.
If any of the $a_i$ are q-type, then we know that $p=q$ and we are done, since in that case 
$\cc^{p|q}$ has an odd isomorphism coming from the action of an odd element of $\End(a_i)$.

Now assume that none of the $a_i$ are q-type.
In this case we have
\be
	p - q = \sum_{x\in N_m} {S_{1x}}^{\chi(Y)} {\textstyle \prod_i} S'_{a_i x}
			\;\;+\;\; (-1)^{\Arf(Y)} \sum_{x\in N_q} {S_{1x}}^{\chi(Y)} {\textstyle \prod_i} S'_{a_i x} .
			\label{PminusQ}
\ee
Where $\Arf(Y)$ is the Arf invariant of $Y$.
If $Y$ is closed, then $\Arf(Y) = 0$ if $Y$ has a bounding spin structure and 
$\Arf(Y) = 1$ if $Y$ has a nonbounding spin structure.
For a torus, the $BB$, $BN$ and $NB$ spin structures are bounding and the $NN$ spin structure is nonbounding.
$\Arf(Y)$ for a higher genus spin surface can be determined by writing $Y$ as a connected sum of spin tori,
and using the fact that $\Arf(Y)$ is additive under connected sums.

If $Y$ has non-empty boundary and each boundary component has a bounding spin structure, 
we define $\Arf(Y)$ to be the Arf invariant of the closed 
surface obtained by capping each boundary component off with a disk.

If $Y$ has a non-bounding boundary component, say $U_1$, then by assumption
the label $a_1$ is m-type.
It follows that $S'_{a_1 x} = 0$ if $x$ is q-type, so there is no need to define $\Arf(Y)$ in this case.
This is because the torus basis vector corresponding to $x$ is odd (odd endomorphism of $x$
glued up periodically), while the basis vector corresponding to $a_1$ is even (the idempotent $a_1$
glued up periodically), and $S$ is an even operator.
This can be observed, for example, the $NN$ block of the $S$-matrix
for the $\halfesix/\psi$ theory, \eqref{hE6_S_NN}.

Note that the formula for $p+q$ above does not depend on the Arf invariant of $Y$, while the formula for $p-q$ does.
Thus the total dimension of the Hilbert space is not sensitive to the spin structure
of $Y$, but the even and odd Hilbert space dimensions do depend on the spin structure.



\subsubsection{Sketch of proof}

In this subsection we sketch the proof of the above dimension formula.

\newcommand{\ztt}{Z}
\newcommand{\zob}{Z_{S^1_B}}
\newcommand{\zon}{Z_{S^1_N}}


Let $\ztt$ denote the $2{+}1$-dimensional TQFT associated to the super pivotal category $\mcc$.
Let $Y$ be a closed spin surface with Hilbert space $\ztt(Y)$, and let $p|q = \dim(\ztt(Y))$.
Then we have
\be  \label{df1}
	p+q = \tr(\id: \ztt(Y) \to \ztt(Y)) = \ztt(Y\times S^1_B)
\ee
and
\be  \label{df2}
	p-q = \tr((-1)^F: \ztt(Y) \to \ztt(Y)) = \ztt(Y\times S^1_N) .
\ee
%yay! confirms our earlier suspicions about supertraces 
More generally, if $Y$ has nonempty boundary and the boundary components are labeled by $a_1,\ldots,a_k$ 
(minimal idempotents of the tube category), then
\begin{align}  \label{df3}
	p+q & = \tr(\id: \ztt(Y; a_1,\ldots,a_k) \to \ztt(Y; a_1,\ldots,a_k)) \\
		& = \ztt(Y\times S^1_B)(cl_B(a_1)\du\cdots\du cl_B(a_k))
\end{align}
and
\begin{align}  \label{df4}
	p-q & = \tr((-1)^F:  \ztt(Y; a_1,\ldots,a_k) \to \ztt(Y; a_1,\ldots,a_k)) \\
		& = \ztt(Y\times S^1_N)(cl_N(a_1)\du\cdots\du cl_N(a_k)) .
\end{align}
Here $cl_X(a_i)$ denotes the element of $\ztt(T^2_{UX})$ obtained by closing up the idempotent $a_i$,
and $U$ is the spin structure ($B$ or $N$) on the $i$-th boundary component.
Note that if $a_i$ is q-type, then $cl_N(a_i) \in \ztt(T^2_{NN})$ is zero.
But in this case we also know that $p-q = 0$, since the odd endomorphism of $a_i$ maps the even part of 
$\ztt(Y; a_1,\ldots,a_k)$ bijectively to the odd part.

\medskip

Recall that we can define reduced $1{+}1$-dimensional TQFTs $\zob$ and $\zon$ via
\be
	\zob(M) = \ztt(M\times S^1_B) \quad\quad \zon(M) = \ztt(M\times S^1_N) ,
\ee
where $M$ is a manifold of dimension 0, 1 or 2.
Combining the above we have, for closed spin surfaces $Y$,
\be  \label{df5}
	p+q = \zob(Y)
\ee
and
\be  \label{df6}
	p-q = \zon(Y) ,
\ee
and there are similar formulas when $Y$ has boundary.

\medskip

We can now outline the remainder of the proof of the dimension formula.
We have just seen that the super dimension $p|q$ can be calculated entirely in terms of the reduced 
$1{+}1$-dimensional TQFTs $\zob$ and $\zon$.
Because 1 is a small number, we can completely classify $1{+}1$-dimensional spin TQFTs and give an explicit
expression for the path integral in terms of basic structure constants of the $1{+}1$-dimensional TQFT.
Then all that remains to be done is express the structure constants of the $1{+}1$-dimensional TQFTs in terms
of the structure constants of the original $2{+}1$-dimensional TQFT $\ztt$.
It turns out that the only structure constants we will need are the list of minimal idempotents of the tube category, 
their types (m or q), and the $S$-matrix.

\medskip

Spin $1{+}1$-dimensional TQFTs are determined by two pieces of data:
the cylinder category of a point, which is a linear super category $C$,
and a non-degenerate trace on $C$.
The trace is the path integral of the disk $D^2$; if $f$ is an endomorphism of $C$, then
\be
	\tr(f) = Z_{C,\tr}(D^2)(cl(f)) ,
\ee
where, as usual, $cl(f)$ denotes the closure of $f$, an element of the (pre-dual) Hilbert space associated to $S^1_B = \bd D^2$.
The non-degenerate trace implies that $C$ is semisimple.
Up to Morita equivalence, there are only two indecomposable semisimple super categories, the 
trivial algebra $\cc$ and the complex Clifford algebra $\cl_1$.

We first consider the case $C = \cc$.
Let $e$ be the unique minimal idempotent of $\cc$ (i.e.\ $e = 1\in \cc$).
Let $\lambda = \tr(e)$.
Let $Y$ be a spin surface with $k$ boundary components, and let
$cl(e)\du\cdots\du cl(e)$ denote the boundary condition given by placing $cl(e)$ on each boundary component of $Y$.
The the path integral for the TQFT determined by $(\cc, \lambda)$ is
\be  \label{zc_ans}
	Z_{\cc,\lambda}(Y)(cl(e)\du\cdots\du cl(e)) = \lambda^{\chi(Y)} ,
\ee
where $\chi(Y)$ denotes the Euler characteristic of $Y$.

Next we consider the case $C = \cl_1$.
Again let $e$ be the unique minimal idempotent of $\cl_1$.
Let $\lambda = \tr(e)$.
Let $Y$ be a spin surface with $k$ boundary components.
We will assume that each boundary component of $Y$ has the bounding spin structure, since that is the only case
we will need for the dimension formula.
Let
\be
	\hat e = \frac{1}{\sqrt 2} \, e
\ee
be the normalized idempotent.
(The norm of $cl(\hat e)$ in $A(S^1_B)$ is 1.)
The the path integral for the TQFT determined by $(\cl_1, \lambda)$ is
\be \label{zcl1_ans}
	Z_{\cl_1,\lambda}(Y)(cl(\hat e)\du\cdots\du cl(\hat e)) = (-1)^{\Arf(Y)} \left(\frac{\lambda}{\sqrt 2}\right)^{\chi(Y)} ,
\ee
where $\chi(Y)$ denotes the Euler characteristic of $Y$,
and $\Arf(Y)$ is the Arf invariant of $Y$ with its boundary components capped off by disks.

A general $1{+}1$-dimensional spin TQFT is a direct sum of instances of the two theories described above.

\medskip

All that remains to be done is to write the reduced theories $\zob$ and $\zon$ as a direct sum of the $(\cc, \lambda)$ and
$(\cl_1, \lambda)$ theories described above.

The first task is to obtain a list of the idempotents (and their type, m or q) of the minimal
idempotents of $\zob$ and $\zon$.
This is easily done: the category which $\zob$ assigns to a point is $\tube^B$, and the 
category which $\zon$ assigns to a point is $\tube^N$.
The m-type idempotents correspond to $(\cc,\lambda)$ theories, and the q-type idempotents
correspond to $(\cl_1,\lambda)$ theories.

The second task is to determine, for each idempotent $a$ in $\tube^B$ and $\tube^N$,
the number $\lambda$ above (path integral of the disk evaluated on a closed-up idempotent).
This is exactly the $S$-matrix entry $S_{1a}$ if $a$ is m-type.
If $a$ is q-type, then (since we have normalized the $S$-matrix) $S_{1a}$ is equal to $\lambda/\sqrt 2$, but this
is the value we need for \eqref{zcl1_ans}.

The third and final task is to convert the $cl(a_i)$ boundary conditions from the beginning of \ref{dimformula_ss}
to the $cl(e)$ and $cl(\hat e)$ boundary conditions appearing in \eqref{zc_ans} and \eqref{zcl1_ans}.
Both of these boundary conditions are (after undoing the dimensional reduction along $S^1_B$ or $S^1_N$) vectors
in $A(T^2)$, and both boundary conditions are closed-up idempotents (possibly normalized with a factor of $1/\sqrt 2$).
But the $cl(a_i)$ boundary condition cuts the torus along a longitude, while the $cl(e)$ and $cl(\hat e)$ boundary conditions
cut the torus along a meridian.
So we need to apply the $S$-matrix (actually $S'$, because $\hat e$ is normalized while $a_i$ is not) to change basis:
\be  \label{df_cob}
	cl(a_i) = \sum_x S'_{a_ix} cl(\hat x),
\ee
where for convenience we have defined $\hat x = x$ if $x$ is m-type.

Combining \eqref{df5}, \eqref{df6}, \eqref{zc_ans}, \eqref{zcl1_ans} and \eqref{df_cob}
yields the dimension formula.





\subsubsection{Sample calculations}

\begin{figure}\begin{center}  \tabulinesep = 1mm
\begin{tabu}{|X[$l]|X[$c]|X[$c]|X[$c]|}
	\hline
	& C_2 & SO(3)_6/\psi & \halfesix/\psi \\ \hline
	g=1, \Arf = 0 & 3 \;|\; 0 & 4 \;|\; 0 & 3 \;|\; 0  \\ 
	g=1, \Arf = 1 & 0 \;|\; 3 & 2 \;|\; 2 & 1 \;|\; 2  \\ \hline
	g=2, \Arf = 0 & 10 \;|\; 0 & 40 \;|\; 24 & 19 \;|\; 8  \\
	g=2, \Arf = 1 & 0 \;|\; 10 & 32 \;|\; 32 & 11 \;|\; 16  \\ \hline
	g=3, \Arf = 0 & 36 \;|\; 0 & 1184 \;|\; 1120 & 281 \;|\; 232  \\
	g=3, \Arf = 1 & 0 \;|\; 36 & 1152 \;|\; 1152 & 241 \;|\; 272  \\ \hline
	g=4, \Arf = 0 & 136 \;|\; 0 & 51328 \;|\; 51072 & 5755 \;|\; 5504  \\
	g=4, \Arf = 1 & 0 \;|\; 136 & 51200 \;|\; 51200 & 5531 \;|\; 5728  \\ \hline
	g=5, \Arf = 0 & 528 \;|\; 0 & 2368000 \;|\; 2366976 & 126449 \;|\; 125056  \\ 
	g=5, \Arf = 1 & 0 \;|\; 528 & 2367488 \;|\; 2367488 & 125137 \;|\; 126368  \\ \hline
\end{tabu}
\caption{Hilbert space dimensions for closed surfaces in various theories.} \label{dim_formula_fig1}
\end{center}\end{figure}


There are three specific $S$ matrices calculated in this paper, for the TQFTs based on the $C_2$, $SO(3)_6/\psi$, and $\halfesix/\psi$ theories.
%%KW change made, though I don't see why one version is less confusing than the other
%\dave{I didn't want the reader to think we wrote down S-matrices for e.g., $C_2$, but for the TQFT %turaev viro theory made out of $C_2$. }
%\dave{To avoid confusion we could say:
% `There are three specific $S$ matrices calculated in this paper, for the TQFTs based on the $C_2$, $SO(3)_6/\psi$, and $\halfesix/\psi$ theories.'}
Note that all three of these theories have just one non-trivial simple object.
Plugging the $S$-matrix entries into the above dimension formula, we find, for closed surfaces of genus $g$ and specified Arf invariant,
the results in Figure \ref{dim_formula_fig1}.
\kw{Maybe better to make eqn rather than figure??}


\kw{Remark that this is a good way to detect errors in S? (most errors lead to non-integer dims)}


\kw{Should also do some examples for surfaces with boundary.
e.g.\ odd fusion channels in C2, odd self-duality in E6/2/p, genus two surface with two labeled boundary components}

\kw{Is it worthwhile to write out the sums for some of the calculations?}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{More on fermion condensation in modular tensor categories and the tube category} \label{more_on_tubes}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%\dave{Should give a table of the conventions we use for an MTC somewhere
%e.g., normalizations on vertices, F-symbols, R-symobls and $\bar{\mcc}$.
%Maybe we don't need this.}

In this section we investigate $\tube(\mcc/\psi)$ when $\mcc$ is a modular tensor category.
%In this section we investigate the construction of the fermionic tube category in more detail, 
%and demonstrate how the tube category of a fermionic phase $\tube(\mcc / \psi)$ is related to 
%the data of the parent phase $\mcc$. 
%Throughout this section, we will specify to the case where the parent (bosonic) theory $\mcc$
%is a modular tensor category (MTC).
If $\mcc$ is a MTC, it is a well known theorem that $\tube(\mcc) \cong \mcc \times \overline{\mcc}$ as braided tensor categories
(see for example Theorem 7.10 of \cite{muger2003b}). 
In the this section we will prove an analogue of this theorem for the super pivotal categories resulting from fermion condensation on MTCs.
Specifically, if $\mcc$ is a MTC we prove that 
\be \label{tube_theorem_teaser}
	\tube(\mcc/\psi) \cong \mcc \times \overline{\mcc/\psi}
\ee 
as tensor categories.
(Neither side of this equivalence is braided in the usual sense.)
%so an equivalence of tensor categories is the best we can hope for.
%\footnote{However, 
%both sides are vortex-braided in the sense of subsection \ref{xxxxx}, and the isomorphism we construct
%is compatible with the vortex-braided on both sides.
%But in this paper we will content ourselves with proving the only the tensor equivalence.
%\kw{Dave, is this claim about vortex-braiding true?
%If we are not sure it is true then we should delete this footnote.}
%%\dave{I think there is a consistent braiding we can define on both sides.
%%I will try to see if there is something concrete to say.}
%\dave{Given the subtleties, maybe it's best not to speculate.
%We can do it in the follow up paper.
%Although I'm confused by the following:
%$E_6 = A_{11}/\mca$, where $\mca = 1 \oplus 7$.
%I was pretty sure that we showed $\tube(E_6) \cong \tube(A_{11}/\mca) \cong A_{11} \times A_{11}/\mca$ 
%as tensor categories.
%I was under the impression that $E_6$ cannot be braided, which makes the following result of \cite{kawahigashi2001} (cor 4.9) confusing:  $\tube(E_6) \cong A_{11} \times A_3$. 
%I could have mis-interpreted. 
%Would like to go back.}}

The analogous result when $\psi$ is a boson is a special case of Corollary 4.8 of \cite{kawahigashi2001}
%\kw{B\"ockenhauer-Eveans-Kawahigashi, Cor. 4.8, Publ RIMS, Kyoto Univ. 37 (2001) 1-35}
(see also the 1998 announcement by Ocneaunu referred to therein).

To begin, we remind the reader of this known result for $\tube(\mcc)$.
We then turn our attention to super pivotal categories of the form $\tube(\mcc/\psi)$ and make the necessary modifications.

%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{$\omega$ loops}
%%%%%%%%%%%%%%%%%%%%%%%%%%

An essential tool in what follows will be the the $\omega$ loop \cite{Lins1994}.
We take $\mcc$ to be a MTC and $\sob(\mcc)$ 
%\kw{I know I used this notation, but I think we should come up with something better.
%Maybe define a macro and use it consistently throughout the paper.}
%\dave{Lets just make it a command, that way we can change it more easily later.
%I chose $\sob(\mcc)$ = list of representatives of simple objects and 
%$\sobi(\mcc)$ = list of simple objects (i.e., representative + isomorphism class)}
%\kw{I don't understand the difference between $\sob$ and $\sobi$}
%\dave{$\sob(\mcc)$ is a set of representatives of the isomorphism classes of simple objects (e.g., $\sob(\tube(C_2)) = m_\unit, m_\sigma^+, m_\psi,\cdots$), while $\sobi(\mcc)$ is a set of all simple objects (e.g., $\sobi(\tube(C_2)) = m_\unit, m_\sigma^+,m_\sigma^-, m_\psi,\cdots$)}
%\ethan{I think that we can just use sObj or something, without the subscript. We do this in other parts 
%of the paper, and in a few of them mention that technically, by sObj we mean a fixed set of our 
%favorite representative simple objects}
%\dave{I think at one point in the following subsections we use both, 
%since we want to include all diagrams of the parent theory into the condensed one.}
be the set of the simple objects of $\mcc$. 
The $\omega$ loop is defined by
\begin{align}
	\omega  = \frac{1}{\mathcal{D}^2}\sum_{x\in \sob(\mcc)} d_x \cdot \text{cl}(x) ,
\label{omega_loop}
\end{align}
where $\text{cl}(x)$ denotes a closed loop labeled by $x$, i.e.\ the closure of $x$ inside a solid torus.

One way to think of the $\omega$ loop is as follows.
In any premodular category,
string nets in the solid torus (with the empty boundary condition) form a semisimple commutative algebra
(isomorphic to the fusion ring of the premodular category).
Therefore this vector space has a basis given by the minimal idempotents of the algebra structure.
%Since the $S$-matrix in any modular theory is invertible by definition,
The $S$-matrix gives a bijection between these idempotents and $\sob(\mcc)$.
The $\omega$ loop is the minimal idempotent in the solid torus corresponding to the trivial object of $\mcc$.

Diagrammatically, we will denote the $\omega$ loop embedded in an ambient 3-manifold by
\begin{align}
\OmegaLoopx{\omega} = \frac{1}{\mcd^2}\sum_{x\in \sob(\mcc)} d_x\; \LoopArrowx{x} ,
\end{align}
where the gray disk in the center 
indicates that this relation holds in the solid torus.
%represents a cycle that the $\omega$ loop wraps around. 
If the gray region is empty (i.e.\ if the solid torus is standardly embedded in the 3-ball), 
then the $\omega$ loop can be shrunk and evaluated using the rules of MTC (since in that case cl$(x)$ is equal to $d_x$ times the empty diagram), 
and since $1 = \sum_x d_x^2/\mcd^2$, the $\omega$ loop simply acts as the identity. 
We summarize all the properties of the $\omega$ loop which we will make use of in Table~\ref{omega_loop_properties}.

For a modular theory, we can easily use part (a) of Table \ref{omega_loop_properties} to see that
\begin{align}
\OmegaLoopDefectx{\omega\;\;}{\omega\;\;} \quad \; =  \frac{1}{\mcd^2} \; \DiscGray.
\label{Omega_in_SLoop}
\end{align}
Note that this is true independent of what is inside the gray disc.
In the next section, we will see that this allows us to rewrite elements in the tube algebra in a particularly nice basis.
\begin{table}
\begin{center}{
\begin{flalign*} & \begin{array}{c @{\quad \quad  \quad  } c @{\quad \quad \quad } c }
			\text{(a)}	&	\text{(b)} &   \text{(c)}
		\\[1.0ex]
			\underset{x}{ \LoopOverId}{\scriptstyle{\omega}} = \delta_{x,\unit} \underset{x}{\Ida}
			&\scriptstyle{x}\;\IdxOmegaLoopa \;= \;\IdxOmegaLoopb\;\scriptstyle{x} 
			&	\HandleSlidea = \HandleSlideb
		\end{array} & \end{flalign*}
		}\end{center}
		\caption{
		All unlabeled lines in the above figures are $\omega$ loops as defined in \eqref{omega_loop}.
For a modular theory, the $\omega$ loop projects onto the vacuum as shown in part (a) (agreeing with the interpretation of $\omega$ as the minimal idempotent in the solid torus corresponding to the trivial object of $\mcc$).
Part (b) shows that arbitrary string-net lines can be deformed across any $\omega$ loop. 
Part(c) shows the same move as in part (b) but with an $\omega$ loop, 
rather than a single simple object $x$.  }
		\label{omega_loop_properties}
		\end{table}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Minimal idempotents of $\tube(\mcc)$, when $\mcc$ is a modular tensor category}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

The starting point for our proof of \eqref{tube_theorem_teaser} will be
a convenient set of minimal idempotents of $\tube(\mcc)$ \cite{ocneanu1994}. 
%To aid in our proof of the relation \eqref{tube_theorem_teaser}, it will behoove us to 
%work with a convenient presentation of the minimal idempotents of $\tube(\mcc)$ \cite{ocneanu1994}. 
We will give two constructions for complete sets of minimal idempotents of $\tube(\mcc)$:
one set is more conventional (and appeared first historically), while the second 
is more suited to the proof of \eqref{tube_theorem_teaser}.
%will allow us to prove \eqref{tube_theorem_teaser} more easily.

The first construction of a set of minimal idempotents utilizes annuli that possess only one marked point at each boundary.
A basis for the morphism space from $a$ to $b$ in 
the annular category $\tube(\mcc)$ is given by
\begin{align}
\text{mor}(\underset{a}{\TubeBCx{}} \rightarrow \underset{b}{\TubeBCx{}})=
\; \cc\left[ \TubeElementx{t}{a}{b} \right]\quad \quad \text{with} \quad \quad t \in \bigoplus_r V^{rb r^*}_a,
\end{align}
with $r$ in each summand labeling the string wrapping around the annulus. 
With the help of \eqref{Omega_in_SLoop} we can change to a much more convenient basis via
\begin{align}
\TubeBasisa \times \mcd^2 =  
\TubeBasisb   =
\TubeBasisc  = \sum_{\substack{x,y \in \sob(\mcc) \\
\mu =1,\cdots, N^{xy}_a \\
\nu =1,\cdots, N_{xy}^b}
}C_{t; xy\mu\nu} \times 
\TubeBasisd
\label{idempotent_complete}
\end{align}
where we have written the annulus as a rectangle with the left and right (blank) edges identified and
the indices $\mu$ and $\nu$ run over complete orthogonal bases of $V^{xy}_a$ and $V_{xy}^b$, respectively.
The constants $C_{t,xy\mu \nu}$ can be determined by fusing the $\omega$ loop into the strand labeled $b$ in the second to last diagram, 
and then using a series of $F$ and $R$ moves to reduce the diagram to the form of the final diagram on the right. 
Since $\mcc$ is assumed to be modular and all transformations shown 
above are invertible, we have shown that the morphism spaces can be alternatively presented as 
\begin{align}
\text{mor}(\underset{a}{\TubeBCx{}} \rightarrow \underset{b}{\TubeBCx{}})\cong \cc\left[ \TubeBasisd \right]. 
\label{AnnCatMTC}
\end{align}
Equivalently, we have shown that
\begin{align}
\text{mor}(\underset{a}{\TubeBCx{}} \rightarrow \underset{b}{\TubeBCx{}})\cong \bigoplus_{xy} V^{b}_{xy} \tp V^{xy}_a .
\label{morabMTC}
\end{align}
This basis for the morphism space of $\tube(\mcc)$ is rather special, and we will see that the diagonal elements (those with $a=b$) are proportional to the minimal idempotents.

Letting $\mu_i$, $i= 1, \cdots,N_{xy}^a$ be a basis of $V^{xy}_a$ and similarly letting $\nu_i$ be a basis for $V^{a}_{xy}$, we take the normalization convention 
\begin{align} \label{bubble_normalization} 
\VxyaoVxya = \delta_{ij} \frac{d_x d_y}{d_a} \idaprime.
\end{align}
It then follows that
\begin{align}
\Vxyxy\;  =\delta_{ij}\;  \idxy\; + \; \cdots, 
\end{align}
where the $+\dots$ represents diagrams that have a nontrivial string connecting the $x$ and $y$ strings (if admissible diagrams of such a form exist).
From the properties of the $\omega$ loop, we thus have 
\begin{align}
\Vxyxyomega \;=\delta_{ij}\; \idxy.
\label{vertex_normalization}
\end{align}
Our normalization is thus chosen so that there is no numerical prefactor in front of the right hand side 
of the above equality. 

With these conventions, we define a basis of morphisms by
\begin{align} \label{f_morphism_defn}
f_a^b(x,y,j,i)\; = \; \TubeBasisdprime,
\end{align}
where $\nu_j$ is a basis of $V_{xy}^b$ and $\mu_i$ a basis of $V^{xy}_a$, which are normalized according to \eqref{bubble_normalization}.
It follows that the $f_a^b$ morphisms compose as 
\begin{align}
f_a^b(x,y,j,i) \cdot f_b^c(x',y',j',i') = \delta_{xx'}\delta_{yy'} \delta_{ij'} f_a^c(x,y,j,i').
\label{matrix_units}
\end{align}
%\kw{with the  cdot notation for morphism composition, we write things in ``arrow" order (reverse of function order);
%need to make sure this is consistent throughout the paper.}
%\dave{
%I have been consistently doing the opposite:
%I was using $\cdot$ to mean stack the left tube on top of the right, 
%or in the case of the annulus, 
%stack the left inside of the right.
%I think all multiplication tables have been written this way (although some still have the $\times$ notation.
%Should we redefine the meaning of $\cdot$,
%make up a new notation for stacking, 
%or change tables?
%}
Therefore, the $f_a^b(x,y,j,i)$ is a basis of matrix units for $\tube(\mcc)$. 
Said another way,
$\tube(\mcc)$ 
(strictly speaking, the subcategory of $\tube(\mcc)$ spanned by objects with only a single marked point)
splits as a direct sum of full matrix categories\footnote{
Recall that a full matrix category is one in which each object is a finite-dimensional vector space,
and the morphisms between two objects are all linear maps.
A full matrix category with only one object is a full matrix algebra.
Full matrix categories are Morita trivial; all minimal idempotents within a full matrix category are equivalent to each other.
} 
labeled by pairs of simple objects in $\sob(\mcc) \times \sob(\mcc)$:
\begin{align}
\tube(\mcc) \cong \bigoplus_{xy} \text{Mat}(x,y),
\label{tube_matrix_algebra}
\end{align}
with the vector space associated to the object $a$ of $\tube(\mcc)$ at the $(x,y)$ summand being $V^a_{xy}$,
and 
\be
	\mor(a\to b) \cong \bigoplus_{x,y} \hom(V^a_{xy} \to V^b_{xy}) .
\ee
%where the matrix algebra is given by $\text{Mat}(x,y)\cong \bigoplus_{a,b} V^{b}_{xy} \boxtimes V^{xy}_a$ 
%(as before, $\boxtimes$ is the outer tensor product)\footnote{The multiplication in $\text{Mat}(x,y)$ is given 
%by $(\lambda^a_{xy} \boxtimes \lambda_b^{xy} )\cdot( \rho^b_{xy} \boxtimes \rho^{xy}_c) = 
%(\lambda^a_{xy}\boxtimes \rho^{xy}_c) \text{tr}\frac{\lambda^{xy}_b \circ \rho^b_{xy}}{d_x d_y}$, 
%where $\lambda_{xy}^a \in V_{xy}^a$ etc., and the trace is given by closing $x\tp y$ on the plane and evaluating the diagram.}.
%The $f_a^b(x,y,j,i)$ provide a basis for this simple matrix algebra \eqref{tube_matrix_algebra}.
It follows from \eqref{matrix_units} that the ``diagonal'' morphisms 
\begin{align} 
e(a,x,y,j) = f_a^a(x,y,j,j)
\label{idempotent_one_strand}
\end{align}
are each a minimal idempotent. 
The idempotents $e(a,x,y,i)$ and $e(b,x',y',j)$ are equivalent\footnote{Two idempotents 
$e$ and $e'$ are equivalent if $e = uv$ and $e' = vu$ for some $u$ and $v$.}
if and only if $x \cong x'$ and $y \cong y'$, with the isomorphism given by 
$e(a,x,y,i) = f_a^b(x,y,i,j) \cdot f_b^a(x,y,j,i)$ and $e(b,x,y,j) = f_b^a(x,y,j,i) \cdot f_a^b(x,y,i,j)$.
This presentation of the minimal idempotents also appeared in \cite{ocneanu1994}.



%\kw{Did Ocneanu draw diagrams like this for idempotents?  I thought this was something Dave made up.}
%\dave{It turns out he did -- in his talks, and then others wrote papers about them like the one I cited above (it's actually quite difficult to obtain that paper).
%I first found that formula in Mugers paper \cite{muger2003b} (I think section 6 or 7 -- when he's talking about the quantum double of an MTC).
%The one I made up was similar -- I was advertising as a ``modularity detector" last Fall. 
%I recently found out that a similar idempotent to that one had appeared in the literature before, see \cite{Fuchs2002} p.452 eq. 5.34.
%}




It will be useful to have another complete set of minimal idempotents for $\tube(\mcc)$ at our disposal. 
These are the minimal idempotents that live in the annular category with two marked points on each of the circles bounding the annulus (rather than one marked point on each circle).
The idempotents are given by
\begin{align}
e_{xy} = \TubeIdempotentTwoStrand.
\label{Bosonic_twostrand_idempotent}
\end{align}

To show that the $e_{xy}$ are a complete set of minimal idempotents, 
we first show that $e_{xy} \tube(\mcc) e_{x'y'}$
is zero unless $x=x'$ and $y=y'$, in which case it is 1-dimensional.
(This implies that the $e_{xy}$ are minimal and pairwise orthogonal.)
%we check their multiplication law: using the $\omega$ loop properties defined in Table \ref{omega_loop_properties}
%we see that $e_{xy} \cdot e_{x'y'} = \delta_{xx'} \delta_{yy'} e_{xy}$, and hence the $e_{xy}$ are orthogonal idempotents. 
%To show that the idempotents are minimal, we need to check that $e_{xy} \tube(\mcc) e_{xy}$ is one dimensional.
%\dave{I thought we were going to try and not say 'project' }
%(i.e. that the $e_{xy}$ project onto one-dimensional subspaces of $\tube(\mcc)$). 
Using the spine lemma,\footnote{
This is a well-known and easy-to-prove folk result which says that arbitrary string nets are 
equivalent to linear combinations of labeled spines.
We don't know a reference for this result. 
}
a basis for $e_{xy} \tube(\mcc) e_{x'y'}$ is spanned by
\begin{align}
\minimalBosonic \; = \; \minimalBosonicRHS.
\end{align}
%\kw{I think it would be clearer if the $p$ loop hung down and looked more like a tadpole
%(i.e.\ slide it over the lower omega, not the upper)}
%\dave{Yes, definitely.
%Much easier to draw as well.}
The RHS is derived from the LHS by first sliding the $p$ loop over the lower $\omega$ loop, then sliding the lower $\omega$ loop
over the upper $\omega$ loop.
The ``no tadpole" axiom implies that the diagram is zero unless $r\cong\unit$,
and (a) of Table \ref{omega_loop_properties} implies that $c$ (and hence also $c'$) must be $\unit$ in any non-zero diagram.
This proves the claim.

%First we note that $r \cong \unit$ if the diagram is to be nonzero due to the ``no tadpole'' theorem, and hence the line labeled by $p$ can be removed at the expense of multiplying the diagram by $d_p$. 
%The fact that $r \cong \unit$ means that $c \cong c'$, and by 
%using property (c) and then (a) of Table \ref{omega_loop_properties} we can slide 
%one of the $\omega$ loops around $c$ and conclude that $c \cong c' \cong \unit$. 
%Hence we are left with a single nonzero diagram, and we find that $e_{xy} \tube(\mcc) e_{xy}$ is indeed one dimensional.
%Before showing that the idempotents are complete, we first show that they are equivalent to the set of idempotents $e(a,x,y,j)$ defined above.

Completeness of the idempotents follows from the resolution of the identity 
\begin{align}
\mcd^2 \TubeCompletea =  \TubeCompleteb = \frac{1}{\mcd^2}\sum_{x,y,i} \sqrt{\frac{d_xd_y}{d_a}} \;  \TubeCompletecprime .
\end{align}
%where we have used the normalization $\nu_i \circ \mu_j = \delta_{ij} \sqrt{\frac{d_x d_y}{d_a}} \text{id}_a$.\footnote{
%This formula assumes the theory to be unitary; 
%if this weren't the case then a non-zero phase factor could enter in the coefficients of the summand.
%\kw{I'm confused -- isn't there already a non-zero phase factor in the summand?}
%}


It is easy to show directly that the idempotents $e_{xy}$ and $e(a,x,y,j)$ are equivalent.
Let
\begin{align}
	g(b,x,y,j) =\; \gxyaj \quad \quad \text{and} \quad \quad h(a,x,y,i) = \; \hxyai .
\end{align}
Then we have
\be
	e_{xy} = g(a,x,y,j) \cdot h(a,x,y,j)
\ee
and
\be
	e(a,x,y,j) = h(a,x,y,j) \cdot g(a,x,y,j) .
\ee


The idempotents above can be used to show that $\tube(\mcc) \cong \mcc \times \overline{\mcc}$.
In the following subsection we will state and prove an analogous theorem for $\tube(\mcc/\psi)$.



%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Double of the fermionic quotient}
\label{double_fermionic_quotient}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%

In this subsection we prove that $\tube(\mcc/\psi) \cong \mcc \times \overline{\mcc/\psi}$ as tensor categories
when $\psi$ is a fermion satisfying conditions of \ref{gntf_condense} and $\mcc$ is a modular tensor category.

To gain insights on the relation between $\tube(\mcc/\psi)$ and $\mcc$, 
we find the minimal idempotents of the condensed theory; 
useful quantities in their own right.
Toward this, we point out that any string net configuration of the parent theory descends to a string net configuration of the condensed theory.
Conversely, we can always take an even morphism in $\mcc/\psi$ and lift it to $\mcc$, 
giving us a way of lifting tubes in $\tube(\mcc/\psi)$ to those in $\tube(\mcc)$.
These two facts allow us to find the minimal idempotents of the quotient theory, 
using the minimal idempotents of the parent theory.
The details of the functor $\tube(\mcc) \rightarrow \tube(\mcc/\psi)$ are important:
for example, the image of some of the idempotents may simply be zero, 
while the images of other distinct idempotents of $\tube(\mcc)$ may fall in the same isomorphism class in $\tube(\mcc/\psi)$. 
These details, as well as minimality and completeness of the idempotents, will have to be addressed carefully.
Once doing so, we arrive at the following theorem:

\begin{theorem}  \label{minimal_idempotents_modular_C/psi}
Let ${\mcc}$ be a modular tensor category and let $\psi$ be a fermion in ${\mcc}$ as in \ref{gntf_condense}.
Let $\mcc/\psi$ be the super pivotal category resulting from the fermionic quotient.
Let $\tube(\mcc/\psi) = \tube^B(\mcc/\psi) \cup \tube^N(\mcc/\psi)$
be the annular category of $\mcc/\psi$. 
Then as tensor categories,
\begin{align}
\tube(\mcc/\psi) \cong \mcc \times \overline{\mcc/\psi}.
\end{align}
In particular, $\sob(\tube(\mcc/\psi)) \cong \sob({\mcc}) \times \sob(\overline{\mcc/\psi})$. 
Let $a \in \sob(\mcc/\psi)$ and $\tilde{a} \in \sob({\mcc})$ be a lift of $a$.
If $\tilde a$ is transparent with respect to $\psi$, then $(x, a)$ is in the bounding sector $\tube^B(\mcc/\psi)$ of $\tube(\mcc/\psi)$
(for any $x\in\sob(\mcc)$).
If $\tilde a$ is not transparent with respect to $\psi$, then $(x, a)$ is in the non-bounding sector $\tube^N(\mcc/\psi)$.
% while
%$(x, a)$ is in the non-bounding sector otherwise.
\end{theorem}

The above result can also be written in terms of the tube category of the parent theory $\tube(\mcc)$. 
We first write 
$\mcc \times \bar\mcc/\psi \cong (\mcc/\unit)\times(\bar\mcc/\psi) \cong (\mcc\times\bar\mcc)/(\unit\times\psi)$.
Using the isomorphism $\tube(\mcc) \cong \mcc \times \bar\mcc$, we can embed 
$\psi \in \sob(\mcc)$ into $\tube(\mcc)$ by $\psi \mapsto \tilde\psi$, where $\tilde\psi \cong \unit \times \psi$. This means that as tensor categories, 
\be \tube(\mcc/\psi) \cong \tube(\mcc) / \tilde\psi,\ee
showing that fermion condensation commutes with constructing the tube category.


We prove the theorem by finding an invertible tensor functor $E:\mcc \times \overline{\mcc/\psi} \rightarrow \tube(\mcc/\psi)$.
It is given by
\begin{align}
\xymatrix @!0 @M=2mm @R=15mm @C=48mm{
 &E: \; \; \mcc \times \overline{\mcc/\psi} \ar[r]            & \tube(\mcc/\psi) & \\
		  &\quad \quad  \;\; \left(\;  \EFunctora
\;,\;\EFunctorb \; \right)\;  \ar@{|->}[r] &\EFunctorc_{J(y)}&
		  }
		  \label{FunctorCxCtoTubeC}
\end{align}
Where $J(y) = B$ if $\nu_y = 0$ and $J(y) = N$ if $\nu_y=1$.
This is clearly a functor, it preserves the identity and morphisms in an obvious way. 
To show that $E$ is a an invertible tensor functor we need to show two things: 
\begin{enumerate} 
\item if $\{e_i \}$ and $\{f_j \}$ are a complete set of minimal idempotents for $\mcc $ and $ \overline{\mcc / \psi }$ respectively, then so are $\{ E(e_i, f_j) \}$ for $\tube(\mcc/\psi)$
\item  $E$ is a tensor functor %so that $V^{e_i e_j}_{e_k} \tp V^{f_s f_t}_{f_w} \cong V^{E(e_i,f_s) E(e_j,f_t)}_{E(e_k,f_w)}$
\end{enumerate} 

We first establish that  $\{ E(e_i, f_j) \}$ are a complete set of minimal idempotents for $\tube(\mcc/\psi)$.
This is done in three parts, first we show completeness, followed by minimality, and lastly that the idempotents are non-zero. 
A complete basis of morphisms for $\tube(\mcc/\psi)$ is given by
\begin{align}
 \mcd^2 \times \TubeBasisaF_J, 
 \end{align}
where the normalization $\mcd^2$ has been introduced for convenience. 
The label $\alpha$ is either $\unit$
if the tube has even fermion parity and $ t \in \bigoplus_x V^{x b x^*}_{a} $, 
or $\psi$ denoting an odd parity tube with $t \in \bigoplus_x V^{x b x^*}_{a \tp \psi} $.
Since $t$ is an even morphism in $\tube(\mcc/\psi)$, 
we can lift it to $\tube(\mcc)$ and hence from \eqref{idempotent_complete} we have,
 \begin{align}
\mcd^2 \times \TubeBasisaF_J
 =  
\sum_{\substack{x,y \in \sob(\mcc) \\
\nu \in V^b_{xy} \\
\mu \in V^{xy}_{a \tp \alpha}}}
C_{t; xy\mu\nu} \times 
\TubeBasisdF_J
\end{align}
for some coefficients $C_{t; xy \mu \nu}$.
In the above equation, either $y$ is a lift from $\mcc/\psi$, 
or $y\tp \psi$ is a lift from $\mcc/\psi$ (equivalently, when we include $y$ into $\mcc/\psi$ it may be oddly isomorphic to its representative).
It follows that we can write the pair $(x,y) \in \mcc \times \overline{\mcc}$ in the above equation as a pair $(x,y) \in \mcc \times \overline{\mcc/\psi}$ 
with possibly introducing two odd isomorphisms at the trivalent junctions.
Therefore, any morphism $t \in \tube(\mcc/\psi)$ can be written as,
\begin{align} 
t = \sum_{k} x_k \cdot E(e_{i_k},f_{j_k} ) \cdot y_{k}
\end{align}
hence, the $\{ E(e_i, f_j) \}$ are complete. 

We now establish that the the set of idempotents $\{ E(e_i, f_j) \} $ are non-zero.
We do this using the trace defined Section \ref{qdims_and_traces}.
We have,
\begin{align}
\tr \left ( E(x,y) \right) &= \tr \left( \TubeIdempotentTwoStrand_{J} \right) \\
&= \frac{1}{\mcd^2} \sum_{r \in \mcc/\psi} \left( 1+s(J)(-1)^{\nu_y} \right) \frac{ d_r}{\dim \End(r)}  \tr \left( \IdempotentBasis_J \right)\\
&  =\frac{1}{\mcd^2} (1+s(J)(-1)^{\nu_y} )d_x d_y 
 %&=\frac{1}{\mcd^2}(1+ (-1)^{s(J)}(-1)^{\nu_y})d_x d_y 
\end{align}
To get to the second line we used that $\omega_{\mcc} =(\text{cl}(\unit) +\text{cl}(\psi))\omega_{\mcc/\psi}$, 
and that $\text{cl}(\psi)$ can be removed at the compensation of the phase $(-1)^{(s(J) + \nu_y)}$.
The last line follows from the trace,
\begin{align}
\tr \left( \IdempotentBasis_J \right) &=  \tr_{\text{Matrix}}   \left\{ \TubeIdempotentBasistrace : \DiskLarge \ra \DiskLarge \right \}= \delta_{r \unit} d_x d_y. 
 \end{align} 
Hence $\tr \left ( E(e_i,f_j) \right)$ is non-zero so long as $s(J) = (-1)^{\nu_{f_j}}$, 
which is true by assumption, recall \eqref{FunctorCxCtoTubeC}.

Now we show that the $\{ E(e_i, f_j) \}$ are minimal. 
We do this by showing that $E(x,y) \cdot \tube(\mcc/\psi) \cdot E(x',y')$ is either one dimensional, in which case $E(x,y)$ is an m-type idempotent, 
or $\cc^{1|1} $ dimensional in which case $E(x,y)$ a q-type idempotent.
\dave{Should we explain why this means that $E(e_i,f_j)$ is minimal?}
% is a simple algebra, i.e. 
%that it contains no nontrivial subalgebras. 
%\dave{I'm confused since we show that it can be isomorphic to $\cc^{0|1}$.
%How do we modify this to a correct statement?
%Before we had said `minimal if $f_{xy}^J \tube(\mcc/\psi) f_{xy}^J$ is one-dimensional', but I didn't like this either since $\cc^{1|1}$ is two dimensional.
%}
%\ethan{note to self: if you fix representatives in each class, you always get a simple algebra}
By the spine lemma, 
a generic element of $E(x,y) \cdot \tube(\mcc/\psi) \cdot E(x',y')$ can be written as
\begin{align}
\fTubefOdd = \ftubefOddRHS, \quad \quad \delta \in V^{x}_{xc}, \; \rho \in V^{y\tp \alpha}_{c' y}, \; \sigma \in V^{cc'}_r, \; \kappa \in V^{pr}_p
\label{MinimalProof}
\end{align}
where we have suppressed the spin structure index (the spin structure is determined by $y$; 
recall \eqref{FunctorCxCtoTubeC}), 
with all vector spaces appearing being written in terms of the 
parent theory, $\mcc$, 
and $\alpha$ is either $\unit$ or $\psi$ denoting whether the tube is 
even or odd in $\tube^J(\mcc/\psi)$.
The no tadpole theorem guarenties that $r \cong \unit$ and consequently that $c \cong c'$, 
and that the loop traversing the annulus parallel to $\omega$ labeled $p$ can be removed at 
the expense of multiplying by its quantum dimension $d_p$.
Lastly, we can use property (c) of Table \ref{omega_loop_properties} to slide the lower $\omega$ 
loop around the line connecting $x$ and $y$ labeled by $c$ (which is isomorphic to $c'$ by the above).
Using property (a) of \ref{omega_loop_properties} we see that both $c \cong c' \cong \unit$.
If $\alpha \cong \psi$ then we require $y \tp \psi \cong y'$.
Using this, along with the orthogonality of the idempotents we have,
\begin{align}
\label{minimal_table}
E(x,y) \cdot \tube(\mcc/\psi) \cdot E(x',y') \cong
\begin{cases}
\cc^{1|0}& \text{if}\; x \cong x' \; \text{and}\; y \cong y' \\
\cc^{0|1}& \text{if}\; x \cong x' \; \text{and}\; y \cong \psi \tp y'  \\
\cc^{1|1}& \text{if}\; x\cong x' \; \text{and}\; y \cong y',\; y \cong y \tp \psi \\
0 & \text{otherwise}
\end{cases}
\end{align}
Hence, the $E(x,y)$ are minimal. 
This also confirms that $E(x,y)$ and $E(x,y \tp \psi)$ are oddly isomorphic, and
if $y \cong y\tp \psi$ then $E(x,y)$ has an odd endomorphism.

The tensor structure on $\tube(\mcc/\psi)$ is initially defined on $\text{Rep}(\tube(\mcc/\psi))$ and 
then transferred to $\tube(\mcc/\psi)$ using semisimplicity ($\tube(\mcc) \cong \text{Rep}(\tube(\mcc))$). 
Consequently, we only need to show that $E$ is a tensor functor on $\text{Rep}(\tube(\mcc/\psi))$.
To establish this, we show that
\begin{align} \label{fusion_isomorphism}
V^{E(a,x),E(b,y)}_{E(c,z)} \cong V^{ab}_c(\mcc) \tp V^{xy}_z(\mcc/\psi),
\end{align}
where $V(\mcc)$ denotes the fusion space for $\mcc$ and $V(\mcc/\psi)$ denotes the fusion space for $\mcc/\psi$.
This isomorphism is established by the following figure:
\dave{Should I add a figure like we did for the other ones?}
\begin{align}
\FusionIsomorphism
\end{align}
with $\alpha = \unit$ for the even fusion space and $\alpha = \psi$ for the odd fusion space.
By the spine lemma, the internal lines, labeled $r,s,t,u,v,p,q$ (multiplicity indices suppressed) span the entire space of 
net configurations for $V(P)$ with marked points, $(a,x)$, $(b,y)$, 
and $(c,z)$ living at the boundary circles (as before, $P$ is the pair of pants). 
Near each boundary circle we have applied the corresponding minimal idempotent to each boundary condition. 
Using the exact same arguments following \eqref{MinimalProof} we can simplify the diagram 
using the relations of Table ~\ref{omega_loop_properties}. One finds that $r \cong s \cong t \cong u \cong v \cong \unit$, 
and the left over $p$ and $q$ loops can be removed by multiplying the picture with their quantum dimensions. 
The left over picture is isomorphic to $V^{ab}_c(\mcc) \tp V^{xy}_z(\mcc/\psi)$.

Since $E$ acts as a tensor functor on the elementary fusion spaces as in \eqref{fusion_isomorphism}, 
it acts as a tensor functor on arbitrary morphism spaces, 
establishing that $E$ is a tensor functor on $\text{Rep}(\tube(\mcc/\psi))$, 
and by semisimplicity also on $\tube(\mcc/\psi)$.

\dave{Is that sufficient to complete the proof? 
Do we need to say anything else? 
e.g., what the natural transformations are.}


%\dave{Old guess at natural transformation.}
%\begin{align}
%U_{X,Y}: \; E(X) \tp E(Y) \ra E(X \tp Y)
%\end{align}
%\begin{align}
%\Ufghk
%\end{align}

%\dave{
%Here is the hypothesis for what $\tube(\mcc/\psi)$ is when $\mcc$ is pre-modular due to a transparent fermion. 
%Let $\mcb$ be a minimal modular extension of $\mcc$, so that $\mcc \subset \mcb$ and $\text{dim}(\mcb) = 2 \text{dim}( \mcc) $. 
%Then as tensor categories 
%$$
%\tube(\mcc) \cong (\mcc/\psi \times \mcc/\psi) \cup ( \mcb'/\psi \times \mcb'/\psi )
%$$
%where $\mcb'$, is the set of particles that aren't transparent with respect to $\psi$.
%I will try to verify this at some point.
%}


\subsection{Modular transformations}
The explicit representation of the minimal idempotents allows us to compute the 
modular transformations for the condensed theory. 

%We again assume that $\mcc$ is a MTC. 
We first examine the $S$ transformation on bounding spin tori. 
%We first examine the $S$ transformation on a torus with a spin structure such that at least 
%one of the two cycles bears a bounding spin structure. 
Recall that if the spin structure along the azimuthal direction is bounding, then the label $b$ below
must be transparent with respect to $\psi$, and if the azimuthal spin structure is non-bounding, then $b$ is non-transparent
with respect to $\psi$.
%Recall that the spin structure along the azimuthal direction is fixed by whether or not the label 
%$b$ below is transparent with respect to $\psi$. 
Since we will work with bounding spin tori, and always transform to the standard basis of idempotents, 
the spin structure can be inferred from context,
and so we will suppress the labels in some of the diagrams. 

The $S$ transformation acts to interchange the longitudinal and meridional cycles of the torus, and so it acts as
\begin{align}
S:\;\; \DCSmatrixa\; \mapsto \; \DCSmatrixb \;=\; \STorusBasisa
\label{s_transformation}
\end{align}
%\kw{Why the wiggle in the omega loop?  I think it would be better without it.}
%\dave{Sounds good. 
%Lemma 5.8 of \cite{muger2003b} was the reasoning. }
%In the last equality, we have introduced $\tilde{\omega} =\frac{1}{\mcd^2}\sum_x \kappa_x \text{cl}(x)$, 
%which satisfies $\omega \tp \tilde{\omega} = \tilde{\omega}$ and $\kappa_x$ is the Frobenius-Schur indicator.
%\kw{Why is this necessary?  I don't get it.}
(In the first two pictures we have drawn 
the torus as an annulus with inner and outer boundaries identified, while in the last picture we have re-written 
the torus on the plane as a square with the top and bottom as well as left and right edges identified.)

We now need to perform a series of manipulations that returns the right hand side of \eqref{s_transformation} 
to a linear combination of pictures that are written in the standard basis (the same as the left 
hand side of \eqref{s_transformation} with the spin structures interchanged).
We first investigate the part of the diagram with the $a$ string and the $\omega$ loop:
\begin{align}
\frac{1}{\mcd^2} \; \Scalcaa 
\;=\; \Scalcab 
\;=\; \Scalcac
\;=\; \Scalcad
\;=\; \sum_{x\in \sob(\mcc)} \frac{1}{\mcd^2} \SMatrix{a}{x} \; \Scalcae
\label{Scalc_above}
\end{align}
We can now do the same for the $b$ loop,
%\begin{align}
%\frac{1}{\mcd^2}\; \Scalcba 
%\; = \; \Scalcbb
%\; = \; \Scalcbc
%\; = \; \Scalcbd
%\; = \; \sum_{y \in \sob(\mcc/\psi)} \frac{1}{\mcd^2} \SMatrixx{b^{*}}{y} \;  \Scalcbe
%\end{align}
\begin{align}
\frac{1}{\mcd^2}\; \Scalcba 
\; = \; \Scalcbb
\; = \; \Scalcbc
\; = \; \Scalcbd
\; = \; \sum_{y \in \sob(\mcc)} \frac{1}{\mcd^2} \SMatrixx{b^{*}}{y} \;  \Scalcbe
\end{align}
where we have used that the $\omega$ loop is a projector onto the vacuum. 
In the last summation we need to replace $\sum_{y \in \sob(\mcc)}$ with $\sum_{y \in \sob(\mcc/\psi)}$.
%As with \eqref{...} this is accomplished by simultaneously letting $\text{cl}(y) \ra \text{cl}((y + y\tp\psi)/2^{n_x}$
As with \eqref{...}, this is accomplished by,
\begin{align}
\label{interim_S_calc}
 \sum_{y \in \sob(\mcc)} \frac{1}{\mcd^2} \SMatrixx{b^{*}}{y} \;  \Scalcbe 
\; =\; \sum_{y \in \sob(\mcc/\psi)} \frac{1}{\mcd^2} \frac{1}{2^{n_y}}\left(  \SMatrixx{b^{*}}{y} \;  +s(J)\SMatrixxx{b^{*}}{y \tp \psi} \;  \quad  \right) \Scalcbe
\end{align}
where the $s(J)$ is found by using that $\text{cl}_J(\psi \tp y) = s(J) \text{cl}_J (y)$.
The factor of $2^{-n_x}$ is introduced so that we don't overcount the q-type simple objects from $\sob(\mcc)$.
Using that $S_{b^* (y\tp \psi)} = (-1)^{\nu_b} S_{b^* y}$, and that $(-1)^{\nu_b} s(J) = 1$,  
the right hand side of \eqref{interim_S_calc} is simplified to,
\begin{align}
=\; \sum_{y \in \sob(\mcc/\psi)} \frac{2}{2^{n_y}} \frac{1}{\mcd^2} \SMatrixx{b^{*}}{y} \;  \Scalcbe 
\end{align}
Putting all calculations together, and removing leftover $\omega$ loops (which provide an 
additional factor of $\mcd^{-2}$) we find that the matrix elements of the (un-normalized) $S$-matrix can be written as
\begin{align}
\label{Smatrix_final_step}
\DCSmatrixb =  \sum_{\substack{x \in \sob(\mcc) \\ y \in \sob(\mcc/\psi) }} \frac{2}{2^{n_y}}S_{ax} S_{b^*y}  \; \DCSmatrixh.
\end{align}
In the above formula, the $S_{ax}$ and $S_{b^*y}$ are matrix elements of the $S$-matrix in the original 
input theory $\mcc$ (which we assumed to be an MTC).
Note that $\nu_b$ must be $0$ if $J$ is bounding, $1$ if $J$ is non-bounding, similarly for $\nu_y$.
Also note that we have assumed a fixed set of representatives of simple objects for $\mcc/\psi$, and $\mcc$. 
we assume that the $y$ appearing in $S_{b^*y}$ is a trivial lift of the $y$ written in the closed up idempotent 
(recall that the first is a simple object of $\mcc$, while the latter is a simple object of $\mcc/\psi$).
One can change the representative of the isomorphism class of $y \in \mcc/\psi$ with the odd isomorphism taking $y \ra \tilde{y} = \psi \tp y$. 
Under this odd-isomorphism the right hand side of \eqref{Smatrix_final_step} picks up a factor of $s(J)(-1)^{\nu_b}$, 
which is always equal to $1$ (otherwise the input closed up idempotent is equal to zero).

We can find the normalized $S$-matrix by dividing the q-type idempotents by $\sqrt{2}$.
In the discussion following \eqref{minimal_table} we point out that $E(a,b)$ is q-type if $b$ is q-type.
Hence we can normalize our idempotents by defining $\widehat{E}(a,b) = E(a,b)/(\sqrt{2})^{n_b}$.
This results in a unitary $S$-matrix given by, 
\dave{I will plug this into a computer and verify that it's unitary.}
%\dave{This was old notation}
%\begin{align}
%\text{cl}_W(f^{J}_{ab}) \xrightarrow{S^{JW \ra WJ}}  \sum_{\substack{x \in \sob(\mcc) \\ y \in \sob(\mcc/\psi) }} S_{ax}  S_{by}^*   \text{cl}_J(f^{W}_{xy})
%\end{align}
%\begin{align}
%\text{cl}_W(E(a,b)) \xrightarrow{S^{JW \ra WJ}}  \sum_{\substack{x \in \sob(\mcc) \\ y \in \sob(\mcc/\psi) }} S_{ax}  S_{by}^*   \text{cl}_J(E(x,y))
%\end{align}
\begin{align}
\text{cl}_W(\widehat{E}(a,b)) \xrightarrow{S^{JW \ra WJ}}  \sum_{\substack{x \in \sob(\mcc) \\ y \in \sob(\mcc/\psi) }} \frac{2}{(\sqrt{2})^{n_b+n_y}}S_{ax}  S_{b^*y}   \text{cl}_J(\widehat{E}(x,y))
\end{align}
Where $\text{cl}_W(\widehat{E}(a,b))$ means we close the idempotent $\widehat{E}(a,b)$ with spin structure $J(b)$ 
onto the torus with spin structure $W$ around the newly closed cycle. 
Note, as discussed above, unless $J = J(b)$ and $W=W(y)$, the resulting vector is zero.
%\ethan{right?}. 
%\dave{Yeap.}

\dave{Ack. Sorry guys, made a transcription error from my notes.
The last sum in the second part of the equation should be over $\sob(\mcc)$ not $\sob(\mcc/\psi)$. 
Hopefully this clears things up, and addresses each of the points below.}

\kw{what about $\sqrt 2$ normalization for q-type?}

\kw{Need to also comment on how $S_{by}^*$ depends on choice of lift (or representative) of $y$}

\kw{Should we explain the $*$ in $S_{by}^*$?}
\dave{Changed it to $S_{b^*y}$. That's probably more clear anyway since that's what's written in the previous equation.}


The matrix elements of the $S$-matrix on the torus with non-bounding spin structure (periodic 
boundary conditions around both cycles) can be calculated in an analogous way.
The first half of the calculation remains the same as in \eqref{Scalc_above}.
The second half of the calculation changes only if $b$ is q-type, in which case the idempotent 
$E(a,b)$ is q-type, and has to be closed up on the torus with an odd endomorphism. 
Since we close the idempotent with an odd endomorphism, 
the resulting vector always has a sign ambiguity as discussed in the caption of Figure \ref{C2Change_of_Basis}.
In such a case we have,
\footnote{We have used $(S^z)_{xy} = \frac{1}{\mcd} \Szmatrix$}:
%\dave{Need to double check this, may have a mistake in the last step.}
%\ethan{why no $1/\mcd^2$ from the $\omega$ instead of $1/\mcd$ and why only the sum over stuff in $Q$?}
%\dave{Check the notes I sent and let me know if that clears it up, also if you agree with the calculation.}
%\begin{align}
%\frac{1}{\mcd^2} \;  \Scalcbadot \; = \; \Scalcbddot \; =\;  \frac{1}{\mcd} \sum_{y\in Q} \kappa_y [ S^{\psi} ]_{by}^*\Scalcbedot
%\end{align}
%\dave{Mention the sign ambiguity?}
%\kw{Probably yes}
\begin{align}
\frac{1}{\mcd^2} \; \Scalcbadotprime  \; = \;  \Scalcbddotprime \; =\;  \frac{1}{\mcd} \sum_{y\in Q}  [ S^{\psi} ]_{yb} \; \Scalcbedot
\end{align}
Thus, we have calculated the $S$-matrix of the condensed theory in 
terms of the modular data of the input theory.  


%%%%%%%%%%%%%%%%%%%%%%%
\begin{comment}
\subsection{Minimal idempotents of $\tube(\mcc)$, when $\mcc$ is a super modular tensor category}
\dave{Agreed, lets punt this for now.}

\ethan{This was the part with the difficulty with transparent fermions and multiplicity stuff, 
right? Were we going to postpone this section until after v1? I think that might be smart}
\dave{Work in progress.}

\dave{I think it's easiest to assume a super-modular category and a minimal modular extension. 
Then $S_C = \tilde{s} \tp s_{sVec}$ with $\text{det} \tilde{s} \neq 0$. 
I think we could do something slightly more general but would require some work 
(i.e., understanding some known results, and checking the following intuition).
The idea is to use Lemma 3.3 of \cite{bruillard2017} (Arxiv version) and start with any pre-modular category $\mcb$.
Its Muger center is the representation category of $(G,z)$ for some $G$, 
and $z$ a central element of $G$ of order less than or equal to $2$.
We then ``de-equivariantize" $\mcb$ to find $\mcb_G$, which is a G-graded modular or 
super-modular tensor category (is this equivalent to a modular extension of $\mcb$?).
The intuition is that if $\mcb_G$ is modular, then $\tube(\mcb)\cong \cup_{g \in G} \mca_g\times \mca_{g^{-1}}$, 
where $\mca_g$ is the set of simple objects of $\mcb_G$ carrying label $g$ and the functor is given by the 1-stand idempotents.
If $\mcb_G$ is super-modular, then let $G_0$ be an index $2$ subgroup and $G_1 = G / G_0$. 
Then $\tube(\mcb) \cong (\cup_{g \in G_0} \mca_g \times \mca_{g^{-1}})  \cup (\cup_{g \in G_1} \mcv_g \times \mcv_{g^{-1}})$.
}

Here we extend the theorem~\ref{minimal_idempotents_modular_C/psi} to the case of super modular categories.
We use definition 3.1 of~\cite{bruillard2017},
A braided fusion category $\mcp$ is super modular if the Muger center $\mcz_2(\mcp) \cong \text{sVec}$.
Equivalently, the set of transparent sub-objects has one non-trivial object which is a fermion as defined in \ref{gntf_condense}.
Then we have the following theorem,
\begin{theorem}
Let ${\mcp}$ be a super modular tensor category and let $\psi$ be a fermion in ${\mcp}$ as in \ref{gntf_condense}.
Let $\mcc$ be a minimal modular extension of $\mcp$\dave{refer to somewhere.}.
Let $\mcc/\psi$ be the super pivotal category resulting from the fermionic quotient of the extension.
Let $\mca/\psi \subset \mcc/\psi$ be the set of simple objects that are transparent with respect to $\psi$, 
and $\mcv/\psi  \subset \mcc/\psi$ the set which are not transparent with respect to $\psi$.
Let
$
\tube(\mcp/\psi) = \tube^B(\mcp/\psi) \cup \tube^N(\mcp/\psi)
$
be the annular category of $\mcp/\psi$. 
Then as tensor categories,
\begin{align}
\tube(\mcp/\psi) \cong (\mca/\psi \times \overline{\mca/\psi}) \cup( \mcv/\psi \times \overline{\mcv/\psi}).
\end{align}
In particular, $\sob(\tube(\mcc/\psi)) \cong \sob({\mca/\psi}) \times \sob(\overline{\mca/\psi}) \cup  \sob({\mcv/\psi}) \times \sob(\overline{\mcv/\psi}) $. 
Let $a, \tilde{a} \in \sob(\mca/\psi)$, then $(a,\tilde{a})$ is in the 
bounding sector and if $a, \tilde{a} \in \mcv/\psi$ then $(a, \tilde{a})$ is in the non-bounding sector.
\label{minimal_idempotents_super_modular/psi}
\end{theorem}

Let $\mcc$ be a minimal modular extension of $\mcp$ as defined in \dave{Find appropriate references.}.
The objects of $\mcc$ are $\zt$ graded by how they braid with $\psi$. 
Denote $\mca = \mcp$ the objects of $\mcc$ which braid trivially with $\psi$, 
and $\mcv$ the objects of $\mcc$ that braid non-trivially with $\psi$.
Define the the $\omega$-loop of $\mca$ to be $\omega = \frac{1}{\mcd^2} \sum_{x \in \mca} d_x \text{cl}(x)$, with $\mcd^2 = \sum_{a \in \mca} d_a^2$. 

\dave{Stopping here for now.  
Need to re-evaluate how to write down these idempotents when $x,y \in \mcv$ are q-type. 
In this scenario, the $f_a^a(x,y,j,j)$ are not necessarily idempotent.
There is extra data coming from how a $\psi$ line is pulled past the fusion vertices $\mu_i$ and $\mu_j$. }

Consider the following set of morphisms for $\tube(\mcp/\psi)$,
\begin{align}
{f}_a^b(x,y,j,i) = \TubeBasisdprime_{J}, \quad \quad \text{with} \quad \quad \nu_x = \nu_y = J.
\end{align}
With $x,y \in \mca/\psi$ or $x,y \in \mcv/\psi$
and we used $\nu = 0(1)$ to denote $J= \text{bounding(non-bounding)}$ spin structures, 
and $\nu_j$, $\mu_i$ are normalized so that $\nu_j \circ \mu_i = \delta_{ij}\lambda^{F_{xy}^b F_a^{xy}} \frac{d_x d_y}{d_a} \text{id}_a$.
Where $F_{xy}^b$ and $F_a^{xy}$ are $0$, or $1$ denote the parity of the fusion vertices $\nu_j$ and $\mu_i$.
By fusing all strands into the annulus, we notice that ${f}_a^b(x,y,j,i)$ is not just a morphism of $\mcc/\psi$ but one of $\tube(\mcp/\psi)$ as well.

\begin{itemize}
\item If $x,y \in \mca$, then we have a complete set of matrix units for $\tube_B(\mcp/\psi)$. 
Proof is same as before. 
\item if $x,y \in \mcv$, and atleast one of them is not q-type, then we have a complete set of matrix units, proof is the same as before. 
Some of them are oddly isomorphic. 
\item if $x,y \in \mcv$ are both q-type, then the minimal idempotents we used before are no longer minimal, or orthogonal. 
Will work this out soon.
\end{itemize}

The $q$-type simple objects which may appear in $\mcc/\psi$ lead to linear relations on the $f_a^b(x,y,j,i)$ viewed as morphisms of $\tube(\mcp/\psi)$. 
In order to not over count these idempotents, we need to quotient by these linear relations.
If either $x$ or $y$ is a q-type simple object, then $\lambda f_a^b(x,y,j,i) = f_a^b(x,y,\tilde{j},\tilde{i})$,
where $\tilde{j}$ is found from $\nu_j$ by acting with an odd endomorphism from below, 
and $\tilde{i}$ is found from $\mu_i$ by acting with an odd endomorphism from above.
\dave{Will add pictures if we go this route.}


\dave{do this after proof.}
It was shown in \cite{bruillard2017}\dave{need to check this} that if there is one modular extension of $\mcp$, then there are 16 of them. 
Roughly speaking, the 16 different extensions are given by stacking with the Ising TQFT, 
and condensing the fermion coming from Ising paired with the fermion already present in the extension. 
A non-trivial check of the proof, is that the minimal idempotents are independant of the particular extension....


need to show:
\begin{itemize}
\item we have a minimal orthogonal and complete set of idempotents of $\tube(\mcp/\psi)$.
\item we have a tensor functor from $\mca/\psi \times \mca/\psi \cup \mcv / \psi \times \mcv /\psi \ra \tube(\mcc/\psi)$
\end{itemize}


\end{comment}
%%%%%%%%%%%%%%%%%%%%%%%%



\section{Fermion condensation in $SO(3)_6$} \label{so36}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%\dave{In progress. I have the general formulas for minimal idempotents, S and T in any MTC/psi. 
%As well as any UBCF that is only non-modular by a transparent fermion, like in $SO(3)_6$.
%Should we include those?}
%\dave{Note to self: check what's going on in \cite{bonderson2017}.}
Here we provide more examples of fermion condensation in two theories which are closely related to each other:
$SU(2)_6$ and $SO(3)_6$. 
Each theory contains a fermion $\psi$, which we will condense. 
The main difference between these two theories is that in $SO(3)_6$ the fermion $\psi$ is transparent 
(i.e.\ it braids trivially with every other particle in the theory), while in $SU(2)_6$ it is not. 
This means that when condensing $\psi$ in $SO(3)_6$, we do not need to use the ``back wall'' construction employed earlier,
and the quotient theory will be braided. 
However, the transparency of $\psi$ also means that the $S$-matrix in the $SO(3)_6$ theory is degenerate, 
and hence the theory is not modular. 
In this case the lack of modularity is fairly benign, 
$SO(3)_6$ is a subcategory of the modular tensor category $SU(2)_6$,
a category of this type is sometimes referred to as non-split super modular\cite{bruillard2017,bruillard2017b}.
\dave{Need to check that, or remove citation.}
\kw{maybe we should drop ref to ``non-split super modular"}
This will allow us to infer the minimal idempotents of $SO(3)_6/\psi$ from the minimal idempotents of $SU(2)_6/\psi$.
%\dave{I think the two sentences are unnecessary. Feel free to undo.}
%After finding the idempotents in $SO(3)_6$ and $SU(2)_6$ we will then perform fermion condensation to find the minimal idempotents of $SU(2)_6/\psi$ and $SO(3)_6/\psi$. 
%Therefore, our strategy is the reverse of the one taken in our discussion of the $C_2$ theory: 
%there we condensed and then found the idempotents, while here we will first find the idempotents in the uncondensed theory, 
%and then perform the condensation.
From the minimal idempotents one can also compute the mapping class group action, which we will work out for the $SO(3)_6/\psi$ example.
First we will establish some notation for UBFC's with fermions.




%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Fusion theory of $SU(2)_6/\psi$ and $SO(3)_6/\psi$}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

We will now briefly review $SU(2)_6$ and its connection with $SO(3)_6$.
Since these are well known theories we only list out some of their key properties and point the 
reader to some references for more details \cite{kirillow1989} and also \cite{Bonderson2007}.
There are seven objects in $SU(2)_6$, labeled by $0,1,2,\cdots, 6$.
The principle graph for the theory is shown in the upper left of Fig.~\ref{SUSOsix}. 
The $0$ particle is the trivial object, $6$ is a fermion, and we have $6 \tp x = (6-x)$. 
Hence the particle $3$ is invariant under fusion with $6$, and so under condensation of the $6$ 
particle $3$ becomes a q-type simple object in $SU(2)_6/\psi$.
The collection of all q-type particles is simply $\sobq =\{3\}$. 
Since one m-type particle is always related to another by fusion with $\psi$ and 
there are six m-type particles, there are only three distinct equivalence classes of m-type
particles under fusion with $\psi$. 
We can take $\sobm = \{0,1,2\}$.
%Therefore the collection of all m-type particles is
%$M\cup (M\tp \psi)$, where one possible choice for $M$ (and the one
%we will adopt in what follows) is $M=\{0,1,2\}$ (so that $M\tp \psi = \{4,5,6\}$). 
%\kw{Previously $M$ and $Q$ were explained in another section,
%but maybe now we need to say that $M$ is a complete set of representatives of the m-type particles etc.}

We give the principle graph for $SU(2)_6/\psi$ in Fig.~\ref{SUSOsix} in the upper right, where $q_3$ is the q-type image of $3$ under condensation.
\begin{figure} 
\centering
\includegraphics{SU26SO36Dynkin.pdf}
\caption{\label{SUSOsix} The upper left diagram is the principle graph of $SU(2)_6$, and the 
lower left diagram is the principle graph for $SO(3)_6$. 
On the right we give the principle graphs of the condensed theories $SU(2)_6/\psi$ (top right) and 
$SO(3)_6/\psi$ (bottom right), both with the identification $\psi=6$. 
The naming convention of the condensed theories has been inherited from the parent theories, 
along with an $m$ or $q$ denoting whether the particle is m-type or q-type.
Black links denote even fusion channels, and the red link connecting $m_2$ to itself 
denotes an odd fusion channel in accordance with the rule $m_2\tp m_2 \cong m_0 \oplus \cc^{1|1}m_2$. 
}
\end{figure}
The particles $0,2,4,$ and $6$ form a closed sub-category of $SU(2)_6$. 
The principle graph of this theory is shown in the bottom left of Fig.~\ref{SUSOsix}. 
%The principle graph of this theory is found by removing the particles $1,3,5$ in the principle graph of $SU(2)_6$, shown in the bottom left of Fig.~\ref{SUSOsix}. 
This is the subcategory known as $SO(3)_6$, it is a braided theory, with braiding and fusion inherited from $SU(2)_6$, however, it is not modular.
The $6$ particle braids trivially within this sub-category, and is therefore transparent, which breaks the modularity.

We now perform fermion condensation in $SU(2)_6$ and $SO(3)_6$ to obtain two super pivotal categories $SU(2)_6/\psi$ and $SO(3)_6/\psi$. 
Since $\psi$ is not transparent in $SU(2)_6$, we must perform the back-wall condensation process described earlier. 
However, since $\psi$ {\it is} transparent in $SO(3)_6$, condensation of $\psi$ is possible without employing a back-wall (although a spin structure is still needed). 
The principle graphs of the condensed theories are shown on the right of Fig.~\ref{SUSOsix}.
The simple objects of the two theories are given as follows:
\begin{align}
\xymatrix @!0 @M=1mm @C=10mm {
SU(2)_6/\psi:&&m_0 & m_1 & m_2 & q_3 \\
SO(3)_6/ \psi:&&m_0 && m_2& 
}
\end{align}
The particles have a natural grading given by (\ref{grading}) with the even set given by $I_0 = \{ m_0, m_2 \}$ and the odd set given by $I_1 = \{m_1, q_3\}$, with $I_a \tp I_b = I_{a+b \;  \text{mod} \; 2}$.
The closed sub-fusion algebra given by $I_0$ contains all of the objects in $SO(3)_6/\psi$, 
which occurs since $\psi$ is transparent in $SO(3)_6$. 
Note that there are no q-type objects in $SO(3)_6/\psi$. 

The non-trivial fusion rules of $SU(2)_6/\psi$ are given by
%\dave{Should put these in our standard form.}
%\dave{Put into our standard form, should double check though.}
%\dave{We should make this a table and not an equation, I'll do that soon.}
\begin{table} 
\begin{align}
\xymatrix{
\text{
{\tabulinesep=1.2mm
\begin{tabu}{ c | c c  c c |c  c   }
$I_0 \tp I_0$&$m_0$ &$m_2$&$\quad\quad$&
$I_0 \tp I_1$&$m_1 $& $q_3$\\  
\cline{1-3}\cline{5-7}$m_0$&$m_0$ & $m_2$ &&
$m_0$& $m_1 $& $q_3$\\   
$m_2$ & $m_2$ & $m_0 \oplus \mathbb{C}^{1|1}m_2$&&
$m_2$ &$ m_0\oplus q_3 $ & $\mathbb{C}^{1|1} m_1 \oplus q_3$\\
\multicolumn{1}{r}{}&& &&\multicolumn{1}{r}{}&&\\
$I_1 \tp I_0$&$m_0 $& $m_2$ &&
$I_1 \tp I_1$ &$m_1 $& $q_3$\\  
\cline{1-3}\cline{5-7} $m_1$& $m_1 $& $m_0\oplus q_3$ &&
$m_1$ &$m_0 \oplus m_2$&$ \mathbb{C}^{1|1} m_2$ \\
$q_3$ &$ q_3  $ & $\mathbb{C}^{1|1} m_1 \oplus q_3$ &&
$q_3$ &$\mathbb{C}^{1|1} m_2 $&$ \mathbb{C}^{1|1}m_0 \oplus \mathbb{C}^{1|1}m_2$\\
\end{tabu}
}}
}
\end{align}
\caption{Fusion rules for $SU(2)_6/\psi$
\label{SU2six_psi_fusion}}
\end{table}

There are two peculiarities that these examples highlight nicely. 
First, we observe that $m_2$ is an m-type particle, despite the fact that $\mathbb{C}^{1|1}m_2$ 
appears in the tensor product of $m_2$ with itself.
Since $m_2\in SO(3)_6/\psi$, $SO(3)_6/\psi$ provides us with an example of a theory which has 
no q-type objects, but which is still intrinsically ``fermionic'', in the sense that its fusion spaces contain odd elements. 

Second, we note that the q-type particle $q_3$ appears in the tensor product of two m-type 
particles, namely $m_2 \tp m_1$. 
Therefore, it is perfectly consistent to have two m-type particles fuse to a q-type particle, meaning 
that the fusion rules do not respect the $\zt$ 
decomposition of objects according to their type, 
unlike the finite-group-based models in Refs \cite{bhardwaj2016,kapustin2017} where the type of objects is determined 
by a homomorphism $\sigma : \mcc \ra \zt$. 
%\ethan{$\mcc$ is always a finite group for these guys}
%see e.g. page 36
%\kw{Did Kapustin really assume this??  If so, presumably he was confusing the $\tp$ of simple super-algebras with the $\tp$ of anyons; same notation,
%but very different things}
%\ethan{Yes, he assumes that q-type guys are determined by a homomorphism $\pi : G \ra \zt$ (he only considers $G$-graded Ising-type theories) which I think is actually a natural guess from a physical point of view. Should quadruple check, though. Relevant stuff to look for is the Ising pull-backs in the big paper and the $\pi_1$ in the paper with just Gaiotto.}
%\dave{Lets double check this before removing the comments.}
\dave{Ethan, did you the quadruple check of this fact?
I haven't read the relevant parts of those papers yet.}
\ethan{I've checked it a few times, yeah. Look at page 36 of the fermionic state-sum Kapustin-Gaiotto-Bsomeone paper, I think. We can remove the reference though, if it seems too confrontational} 
Interestingly, $q_3$ appears in $m_2 \tp m_1$ with coefficient $\mathbb{C}^{1|0}$, despite the fact that $V^{m_2 m_1}_{q_3} \cong \mathbb{C}^{1|1}$.

The $F$-symbols of the condensed theories can be deduced from those of the parent theories, so we will not list them here.
We now compute the minimal idempotents of the tube algebra in the condensed theories.




%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Primitive idempotents of $SU(2)_6/\psi$}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\dave{Dropped some redundant things that were already in Section \ref{more_on_tubes}
feel free to un-drop them.}

The primitive idempotents of the tube category of $SU(2)_6/\psi$ can be computed directly 
from the primitive idempotents of the parent theory $SU(2)_6$ by ``condensing" the fermions off of the elements in $\tube(SU(2)_6)$, as discussed in \ref{more_on_tubes}. 
%The primitive idempotents of the tube category of $SU(2)_6/\psi$ can be computed directly 
%from the primitive idempotents of the parent theory $SU(2)_6$ by ``condensing" the fermions off of the elements in $\tube(SU(2)_6)$. 
%This procedure always produces minimal idempotents in $\tube(SU(2)_6/\psi)$, 
%although the process is rarely straightforward: condensing $\psi$ in $\tube(SU(2)_6)$ 
%may send some of the idempotents to zero, enlarge the isomorphism classes or identify some idempotents with others, etc.
%For brevity's sake, we will only present the results of the calculations in what follows. 
For the example at hand, we will find it convenient to adopt a specific presentation of the idempotents which is essentially the same as the one described earlier in \eqref{idempotent_one_strand}. 
For any MTC, we can write the idempotents in $\mcc/\psi$ as 
%\ethan{minor quibble: in this figure and in some in the next two subsections, some lines are drawn in orange---any stylistic reason why?}
%\dave{I had no reason. I can change it to black.}
\dave{Will change twist when we decide how we are going to talk about them, both here and below.}
\begin{align}
\xymatrix{
f_{ab}^c 
=\sqrt{\frac{d_a d_b}{d_c}} \underset{\quad \quad c \; \in \; a \tp b}{\IdempBraid{a}{b}{}{\omega_x}{J}}
&
\text{
{\tabulinesep=1.2mm
\begin{tabu}{ r c }
consistency constraint: & $ (-1)^{s(J) + \nu_b}=1$ \\ 
topological twist:& $\frac{\theta_a}{\theta_b} (-1)^{(s(J)+1)p_{ab}^c + x(\nu_a + \nu_b)}$ \\
isomorphism class: & $c \in a \tp b$
\end{tabu}
}}
}
\end{align} 
where as before $s(J) = 0$ ($s(J)=1)$ if $J=B$ ($J=N$) and $x=0$ denotes the presence of an $\omega_0$ loop in the annulus on the left while $x=1$ corresponds to the presence of an $\omega_\psi$ loop in the annulus, where $\omega_x$ is defined by 
\begin{align}
 \omega_x = \frac{1}{\mathcal{D}_{\mcc/\psi}^2} \sum_{r\in \sob(\mcc/\psi)} \frac{d_r }{ \dim\End(r)} (-1)^{x \nu_r}   \text{cl}(r),
\end{align}
\dave{dropped the factor of $2$ above to be consistent with the following.}
where $\mcd_{\mcc/\psi}^2 = \sum_{x \in \mcc/\psi} d_x^2 / \dim \End(x)$ is the total quantum dimension of the condensed theory in the sense of \eqref{total_qdim_defn}. 
The particular representative of the isomorphism class is given by choosing $c \in a\tp b$, and a vector from $V^{ab}_c(\mcc/\psi)$.
Finally, we have defined $p_{ab}^c$ in the twist of the idempotent by $p_{ab}^c=0$ ($p^c_{ab}=1$) if the chosen basis vector in the fusion space $V^{ab}_c(\mcc/\psi)$ is even (odd).
In what follows, we will write $f^c_{ab}$ as $M^c_{ab}$ if the idempotent is m-type (i.e. not invariant under fusion with $\psi$)
and $f^c_{ab}$ as $Q^c_{ab}$ if the idempotent is q-type (i.e. has an odd endomorphism / is invariant under fusion with $\psi$).
Note that by our previous discussion in Section \ref{more_on_tubes}, if $b$ is a q-type object then the idempotent $f^c_{ab}$ must be associated with a non-bounding spin structure.


In the case of $SU(2)_6$ we find 14 m-type idempotents for the bounding spin structure, 
and $7$ m-type as well as $7$ q-type idempotents for the non-bounding spin structure. 
\dave{Need to check this again carefully and do sum of squares..}
\dave{Should we remove the twist stuff?}
\begin{align}
&\text{
\begin{tabu}{ c | c }
type& twist \\ \hline
$M_{00}^0$ &$1$ \\
$M_{10}^0$ &$e^{3 i \pi /16}$ \\
$M_{20}^0$ &$i$ \\
\end{tabu}
}
\quad \quad
\text{
\begin{tabu}{ c | c }
type& twist  \\ \hline
$M_{00}^\psi$ &$1$ \\
$M_{10}^\psi$ &$-e^{3 i \pi/16}$ \\
$M_{20}^\psi$ &$i$ \\
\end{tabu}
}
\quad \quad
\text{
\begin{tabu}{ c | c }
type& twist $\times \; (-1)^{p_{ab}^c} $ \\ \hline
$M_{30}^0$ &$ e^{15i \pi /16}$ \\
$M_{32}^0$ &$-ie^{15i \pi /16}$ \\
\end{tabu}
}
\\
&\text{
\begin{tabu}{ c | c }
type& twist $\times \; (-1)^{p_{ab}^c} $ \\ \hline
$M_{02}^0$ &$-i $ \\
$M_{12}^0$ &$-i e^{3 i \pi/16}$ \\
$M_{22}^0$ &$1$ \\
\end{tabu}
}
\quad \quad
\text{
\begin{tabu}{ c | c }
type&twist $\times \; (-1)^{p_{ab}^c} $ \\ \hline
$M_{02}^\psi$ &$-i$ \\
$M_{12}^\psi$ &$ie^{3 i \pi /16}$ \\
$M_{22}^\psi$ &$1$ \\
\end{tabu}
}
\end{align}
while in the non-bounding spin structure sector we find
\begin{align}
&\text{
\begin{tabu}{ c | c }
type& twist \\ \hline
$M_{01}^0$ &$-e^{-3i\pi/16}$ \\
$M_{11}^0$ &$1$ \\
$M_{21}^0$ &$-i e^{-3i \pi /16}$ \\
\end{tabu}
}
\quad \quad
\text{
\begin{tabu}{ c | c }
type& twist \\ \hline
$M_{01}^\psi$ &$-e^{-3 i \pi /16}$ \\
$M_{11}^\psi$ &$1$ \\
$M_{21}^\psi$ &$-i e^{-3 i \pi /16}$ \\
\end{tabu}
}
\quad \quad
\text{
\begin{tabu}{ c | c }
type& twist \\ \hline
$M_{31}^0$ &$e^{3 i \pi /4}$ \\
$Q_{33}^0$ &$1$ \\
\end{tabu}
}
\\
&\text{
\begin{tabu}{ c | c }
type& twist \\ \hline
$Q_{03}^0$ &$-e^{-15 i \pi /16}$ \\
$Q_{13}^0$ &$e^{- 3 i \pi /4}$ \\
$Q_{23}^0$ &$-i e^{-15 i \pi /16}$ \\
\end{tabu}
}
\quad \quad
\text{
\begin{tabu}{ c | c }
type& twist \\ \hline
$Q_{03}^\psi$ &$-e^{-15 i \pi /16}$ \\
$Q_{13}^\psi$ &$e^{- 3 i \pi /4}$ \\
$Q_{23}^\psi$ &$- i e^{- 15i \pi /16}$ \\
\end{tabu}
}
\end{align}
We now turn our attention to the $SO(3)_6$ theory. 

\kw{Stopping here for now.}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Primitive idempotents of $SO(3)_6/\psi$}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

Finding the idempotents in the $SO(3)_6/\psi$ theory is more difficult, since the parent theory  $SO(3)_6$ isn't modular.
\dave{drop next sentence?}
However, the sole cause of its non-modularity is the transparent fermion $\psi$, and it can be made modular by performing a ``modular extension'' and introducing defects which braid non-trivially with $\psi$, see \cite{bruillard2017} for more details.
Since $SO(3)_6$ is obtained from $SU(2)_6$ by discarding the elements in $SU(2)_6$ that braid nontrivially with $\psi$, $SU(2)_6$ is a modular extension of $SO(3)_6$ (in fact, it is the minimal modular extension). 
This fact will allow us to compute the idempotents in the $SO(3)_6/\psi$ theory using our knowledge of the $SU(2)_6$ theory. 

As before, each isomorphism class of idempotents can be written as:
\begin{align}
\xymatrix{
\sqrt{\frac{d_a d_b}{d_c}} \underset{\quad \quad c \; \in \; a \tp b}{\IdempBraid{a}{b}{}{\omega_0}{J}}
&
a,b \in \sob(SU(2)_6/\psi) \quad \text{such that} \quad a \tp b \in \sob(SO(3)_6/\psi) 
}
\label{SO3idempotent}
\end{align}
where $J$ denotes the spin structure of the annulus, 
and we are using the normalization conventions of\cite{Bonderson2007}. 
If we take $a,b \in \sob(SO(3)_6/\psi)$ (rather than in $\sob(SU(2)_6/\psi)$, then we will miss several idempotents. 
The key observation is that we can take pairs of simple objects $(a,b)$ from $SU(2)_6/\psi$ whose fusion product is always in $SO(3)_6/\psi$.
Hence the idempotents of $\tube(SO(3)_6/\psi)$ are just a restriction of the idempotents of $\tube(SU(2)_6/\psi)$. 
One can show that the procedure creates orthogonal idempotents by direct calculation. 
Additionally, the tube resulting from fusing the strands in (\ref{SO3idempotent}) into the annulus only contains linear combinations of tubes in the annular category of $SO(3)_6/\psi$.

We now write down the primitive idempotents of $SO(3)_6/\psi$ and their topological spins. 
In the bounding sector $J = B$, we have $4$ m-type idempotents, given by
\begin{align}
\xymatrix{
\underset{\quad \quad c \; \in \; a \tp b}{\IdempBraid{a}{b}{}{\omega_0}{B}}
&
\text{
{{\tabulinesep=1.2mm
\begin{tabu}{ c c | c }
type& spin & isomorphism class \\ \hline
$M_{00}$ &$1$&$m_0$ \\
$M_{02}$ &$ -i $&$m_2 $\\
$M_{20}$ & $i$&$m_2$\\
$M_{22}$ &$ (-1)^{p^{ab}_c} $& $m_0 \oplus  \mathbb{C}^{1|1} m_2$\\
\end{tabu}
}}}
} 
\end{align}
where the column on the right displays the possible representatives of the isomorphism class, 
whose coefficient denotes the possible parities of the fusion vertex on the idempotent. 
For example, the idempotent $M_{22}$ has three possible representatives:
one of them has boundary condition $m_0$, and the other two have boundary condition $m_2$. 
The two fusion vertices of the idempotent with boundary condition $m_2$ can be either even or odd parity, which is denoted by the coefficient $\cc^{1|1}$.
Similarly, in the non-bounding sector we have 
%\dave{Comment on $Q_{13},Q_{31}$. There is only 1 idempotent.} \ethan{what does this mean?}
%\dave{There are two possible ways $1$ and $3$ can fuse to $m_2$, either evenly or oddly. 
%Above these led to two different idempotents, below they do not. 
%I added a paragraph on it, check it out and see if it clears things up.
%}
%\ethan{awesome!}
\begin{align}
\xymatrix{
\underset{\quad \quad c \; \in \; a \tp b}{\IdempBraid{a}{b}{}{\omega_0}{N}}
&
\text{
{{\tabulinesep=1.2mm
\begin{tabu}{ c c | c }
type& spin & isomorphism class \\ \hline
$M_{11}$ &$1$&$m_0 \oplus m_2$ \\
$Q_{13}$ &$ e^{-3 i \pi/4} $&$ m_2 $\\
$Q_{31}$ & $e^{3 i \pi /4} $&$ m_2$\\
$M_{33}$ &$ 1 $& $ m_0 \oplus m_2$\\
\end{tabu}
}}}
}
\end{align}
%\dave{Old table}.
%\begin{align}
%\xymatrix{
%\underset{\quad \quad c \; \in \; a \tp b}{\IdempBraid{a}{b}{}{\Omega_0}{N}}
%&
%\text{
%{{\tabulinesep=1.2mm
%\begin{tabu}{ c c | c }
%type& spin & isomorphism class \\ \hline
%$M_{11}$ &$1$&$\mathbb{C}^{1|0}m_0 \oplus \mathbb{C}^{1|0}m_2$ \\
%$Q_{13}$ &$ e^{-3 i \pi/4} $&$ \mathbb{C}^{1|1} m_2 $\\
%$Q_{31}$ & $e^{3 i \pi /4} $&$ \mathbb{C}^{1|1} m_2$\\
%$M_{33}$ &$ 1 $& $ \mathbb{C}^{1|0} m_0 \oplus  \mathbb{C}^{1|0} m_2$\\
%\end{tabu}
%}}}
%}
%\end{align}
%\dave{I need to convince myself of that last line again. Naively it could be $\mathbb{C}^{1|1} m_2$. But I think the oddly isomorphic idempotent is actually just the same idempotent.}
Here we've made use of the above observation that only $a \tp b$ need be in $SO(3)_6/\psi$, hence these idempotents have objects labeled by $1$ and $3$.
Notice that for $Q_{13}$, $Q_{31}$, and $M_{33}$ the coefficient in front of $m_2$ is $\cc^{1|0}$, and not $\cc^{1|1}$ as the fusion rules would indicate, see Table \ref{SU2six_psi_fusion}. 
This is because $q_3$ is a q-type object in $SU(2)_6/\psi$, 
and so it can freely ``absorb'' fermions (odd endomorphisms), which allows us to always ensure that the vertices appearing in the idempotent have even parity. 
One can show that $M_{33}$ is not q-type: to do so we note that if it were, then there would be an odd endomorphism with trivial boundary conditions (since $m_0$ is a representative in its isomorphism class). 
But this isn't possible, since we would have an odd tube in $\tube(SO(3)_6/\psi)$ with trivial boundary conditions.
This is only possible if $SO(3)_6/\psi$ has a particle with an odd endomorphism, 
but as noted in \eqref{noq-type} this is not possible since $\psi$ is transparent in this theory.
One can explicitly construct an odd endomorphism for $Q_{13}$ by putting a fermion on $3$ and fusing all strands into the annulus;
similarly for $Q_{31}$. 
%\ethan{nice!}
but as noted in \eqref{noq-type} transparency of $\psi$ exceludes this possibility.
%this is not possible since $\psi$ is transparent in this theory.
One can explicitly construct an odd endomorphism for $Q_{13}$ by putting a fermion on $3$ and fusing all strands into the annulus. 
Similarly for $Q_{31}$. 




%%%%%%%%%%%%%%%%%%%%%
\subsection{Modular transformations}
%%%%%%%%%%%%%%%%%%%%%

The modular transformations can be computed by direct calculation. 
\dave{What are we going to say about spins?}
We already have the topological spins (which are read off from the string-net labels of the idempotents), and the modular $T$ transformation can be obtained directly from the spins.
The modular $S$-transformation requires a little more work, and so we discuss this in a little more detail.

When gluing the idempotents along the boundary of the annulus we have to take linear combinations of idempotents in the same isomorphism class so that the glued up idempotent is invariant under local relations. 
Using the basis above, one finds
\begin{align}
\TorusBraidBasis{a}{b\;}{}{\omega_0}{X}{Y}
\end{align}
where $a$ and $b$ label the idempotent as before, and $X$, $Y$, denote the two spin structures. 
We warn the reader, that when $X$ is non-bounding, 
$a, b\in \{ m_1, q_3 \}$, which lies outside of $SO(3)_6/\psi$.
However, when the diagram is fused into the torus we find a torus string net labeled with objects only in $SO(3)_6/\psi$, as required.
%\ethan{what's the $\Omega$ loop defined as? Why not $\omega$ (or $\omega_0$?}
%\dave{$\omega_0$}


In this graphical convention, the modular $S$-transformation acts as
\begin{align}
{ \TorusBraidBasis{a}{b\;}{}{\omega_0}{X}{Y}} \stackrel{S}{\longrightarrow} \sum_{r,w} S^{{XY \rightarrow YX}}_{(a,b),(r,w)} \;
{\TorusBraidBasis{r}{w}{}{\omega_0}{Y}{X} }.
\end{align}
The matrix elements can be computed explicitly using the $S$-matrix of $SU(2)_6$. 
\begin{comment}
\dave{This calculation is quite tedious.
It's almost quicker to just do it by brute force. 
I would say we remove the figure, and just tell the reader that the S-matrix can be found from direct calculation.
If we want to add more details about the calculation to version 2, we can do that.
}
In Fig.~\ref{SMatrixBFC} we have sketched one method to compute these matrix elements.
 \begin{figure}
  \includegraphics[scale=0.5]{SmatrixCalculationSketch.pdf}
 \caption{A caption describing the figure. \ethan{needs to be tex-ified eventually}
 \dave{Will do so soon.}
 \dave{I started doing this calculation and remembered that the above is just a cartoon, the contents of which has been covered in the modular transformations part of Section 5.
 The actual calculation is a little more involved. 
 I think we should remove the Figure above, 
 and then either make the appropriate one, 
 or just bully the reader a bit and say `with some omega loop gymnastics one can find...'. 
}
\ethan{I like the last option, especially if we use the word `gymnastics'}
}
 \label{SMatrixBFC}
 \end{figure}
For the tori with one of the three spin structures possessing a bounding cycle (e.g.\ either $BB$, $BN$, or $NB$), we find 
\begin{align}
S^{{XY \rightarrow YX}}_{(a,b),(r,w)} = \frac{1}{(\sqrt{2})^{(n_a + n_b+n_r+n_w)}} \sin{\left( \frac{\pi(a+1)(r+1) }{8} \right)} \sin{\left(\frac{\pi(b+1)(w+1)}{8} \right)}
\end{align}
where $n_x = 0$ if $x = 0,1,2$ and $n_x = 1$ if $x = 3$ is an indicator distinguishing objects by their type (q or m).
The extra factors of $\sqrt{2}$ come from the fact that two of the idempotents in the non-bounding sector 
are q-type, and as such have endomorphism algebras of nontrivial dimension that affect how the $S$-
matrix is normalized.
\end{comment}
Explicitly, the $S$-matrix acts on each of three spin tori with at least one bounding cycle as 
\begin{align}
\left( \begin{matrix}
M_{00}\\
M_{02}\\
M_{20}\\
M_{22}\\
\end{matrix} \right)_{BB}
\xrightarrow{S^{BB \rightarrow BB}}
\frac{1}{2 \sqrt{2}} \left( \begin{matrix}
\frac{1}{d}&1&1&d \\
1& -\frac{1}{d} & d &-1 \\
1& d& -\frac{1}{d} & -1 \\
d & -1& -1& \frac{1}{d}\\
\end{matrix} \right)
\left( \begin{matrix}
M_{00}\\
M_{02}\\
M_{20}\\
M_{22}\\
\end{matrix} \right)_{BB}
\end{align}

\begin{align}
\left( \begin{matrix}
M_{11}\\
Q_{13}\\
Q_{31}\\
M_{33}\\
\end{matrix} \right)_{NB}
\xrightarrow{S^{NB \rightarrow BN}}
\frac{1}{2} \left( \begin{matrix}
1&1&1&1\\
1&-1&1&-1\\
1&1&-1&-1\\
1&-1&-1&1\\
\end{matrix} \right)
\left( \begin{matrix}
M_{00}\\
M_{02}\\
M_{20}\\
M_{22}\\
\end{matrix} \right)_{BN}
\end{align}

\begin{align}
\left( \begin{matrix}
M_{00}\\
M_{02}\\
M_{20}\\
M_{22}\\
\end{matrix} \right)_{BN}
\xrightarrow{S^{BN \rightarrow NB}}
\frac{1}{2} \left( \begin{matrix}
1&1&1&1\\
1&-1&1&-1\\
1&1&-1&-1\\
1&-1&-1&1\\
\end{matrix} \right)
\left( \begin{matrix}
M_{11}\\
Q_{13}\\
Q_{31}\\
M_{33}\\
\end{matrix} \right)_{NB}
\end{align}
As mentioned earlier, the Dehn twists follow directly from the spins computed above.
Again for the tori with spin structures containing at least one bounding cycle, we find
\begin{align}
\left( \begin{matrix}
M_{00}\\
M_{02}\\
M_{20}\\
M_{22}\\
\end{matrix} \right)_{BB}
\xrightarrow{T^{BB \rightarrow BN}}
\left( \begin{matrix}
1&&&\\
&-i&&\\
&&i&\\
&&&1\\
\end{matrix} \right)
\left( \begin{matrix}
M_{00}\\
M_{02}\\
M_{20}\\
M_{22}\\
\end{matrix} \right)_{BN}
\end{align}

\begin{align}
\left( \begin{matrix}
M_{11}\\
Q_{13}\\
Q_{31}\\
M_{33}\\
\end{matrix} \right)_{NB}
\xrightarrow{T^{NB \rightarrow NB}}
 \left( \begin{matrix}
 1&&&\\
&e^{-3 i \pi /4}&&\\
&&e^{3 i \pi /4}&\\
&&&1\\
\end{matrix} \right)
\left( \begin{matrix}
M_{11}\\
Q_{13}\\
Q_{31}\\
M_{33}\\
\end{matrix} \right)_{NB}
\end{align}

\begin{align}
\left( \begin{matrix}
M_{00}\\
M_{02}\\
M_{20}\\
M_{22}\\
\end{matrix} \right)_{BN}
\xrightarrow{T^{BN \rightarrow BB}}
\left( \begin{matrix}
1&&&\\
&-i&&\\
&&i&\\
&&&1\\
\end{matrix} \right)
\left( \begin{matrix}
M_{11}\\
Q_{13}\\
Q_{31}\\
M_{33}\\
\end{matrix} \right)_{BB}
\end{align}
One can verify that $(TS)^3 = \text{id}$, which holds since all three of the spin tori discussed above have 
 even fermion parity (recall that the more general identity is $(ST)^3 = (-1)^F$). 

The modular $S$ transformations on the torus with $NN$ spin structure are a little more tedious to calculate. 
%The m-type idempotents are always associated with spin tori whose ground states are fermion parity even, while the q-type idempotents are associated with ones with odd parity. 
A complete basis %for the ground-state
of net configurations on the $NN$ spin torus is given by
\begin{align}
\underbrace{
\xymatrix{
\TorusBraidBasisd{\scale{.6}{1}}{\scale{.6}{1}\;}{}{\Omega_0}{N}{N}{\TorusBasisMTCNoLabel} \quad 
 \TorusBraidBasisd{\scale{.6}{3} }{\scale{.6}{3} \;}{}{\Omega_0}{N}{N}{\TorusBasisMTCdd}
 \\}
 }_{\text{even}}
 \quad \quad 
\underbrace{
\xymatrix{ \TorusBraidBasisd{\scale{.6}{1}}{\scale{.6}{3}\;}{}{\Omega_0}{N}{N}{\TorusBasisMTCdr} \quad
 \TorusBraidBasisd{\scale{.6}{3} }{\scale{.6}{1} \;}{}{\Omega_0}{N}{N}{\TorusBasisMTCdl}
 \\}
 }_{\text{odd}}
\end{align}
%For this spin structure we find four states, which can be identified with two m-type and two q-type idempotents. 
On the non-bounding torus, m-type idempotents always close up into even parity states, 
while q-type idempotents close up into odd parity states.
The first two vectors have even parity and correspond to the closed up idempotents $M_{11}$ and $M_{33}$, while the second two have odd parity and correspond to the closed up idempotents $Q_{13}$ and $Q_{31}$.
After some calculation one finds that the $S$ and $T$ modular matrices act as 
\begin{align}
\xymatrix{
{\left( \begin{matrix}
M_{11}\\
M_{33}\\
\end{matrix} \right)_{NN}
\xrightarrow{S^{NN \rightarrow NN}}
 \left( \begin{matrix}
1&0\\
0&1\\
\end{matrix} \right)
\left( \begin{matrix}
M_{11}\\
M_{33}\\
\end{matrix} \right)_{NN}}
&
{
\left( \begin{matrix}
\stackrel{\bullet}{Q}_{13}\\
\stackrel{\bullet}{Q}_{31}\\
\end{matrix} \right)_{NN}
\xrightarrow{S^{NN \rightarrow NN}}
e^{- i \pi /4}\left( \begin{matrix}
1&0\\
0&i\\
\end{matrix} \right)
\left( \begin{matrix}
\stackrel{\bullet}{Q}_{13}\\
\stackrel{\bullet}{Q}_{31}\\
\end{matrix} \right)_{NN} 
}
\\
{
\left( \begin{matrix}
M_{11}\\
M_{33}\\
\end{matrix} \right)_{NN}
\xrightarrow{T^{NN \rightarrow NN}}
 \left( \begin{matrix}
1&0\\
0&1\\
\end{matrix} \right)
\left( \begin{matrix}
M_{11}\\
M_{33}\\
\end{matrix} \right)_{NN}
} & 
{
\left( \begin{matrix}
\stackrel{\bullet}{Q}_{13}\\
\stackrel{\bullet}{Q}_{31}\\
\end{matrix} \right)_{NN}
\xrightarrow{T^{NN \rightarrow NN}}
\left( \begin{matrix}
e^{-3i \pi /4}&0\\
0&e^{3 i \pi /4}\\
\end{matrix} \right)
\left( \begin{matrix}
\stackrel{\bullet}{Q}_{13}\\
\stackrel{\bullet}{Q}_{31}\\
\end{matrix} \right)_{NN}
}
} 
\end{align}
As required, the odd part of the $S$-matrix satisfies $S^4 = -\text{id}$ and $(TS)^3 = -\text{id}$, while the even part satisfies the usual $S^4 = \text{id}$ and $(TS)^3 = \text{id}$. 
This provides us with an example of a theory in which the femion parity of the spin torus 
%a ground state 
is not uniquely determined from the ambient spin structure. 



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Fermion condensation in $\halfesix$} \label{halfesix}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

In this section we perform fermion condensation in the category $\halfesix$.
This provides an example of a super pivotal category with fusion multiplicity.
After condensation we will obtain a theory with one non-trivial q-type particle, 
which we will denote by $\rho$. 
$\rho$ obeys the fusion rule
\begin{align}
\rho \tp \rho = \mathbb{C}^{1|1} \mathds{1} \oplus \mathbb{C}^{1|1} \rho,
\end{align}
%\dave{I think the word `enriched' has some connotation.}
%which is a sort of ``fermion-enriched'' version of the Fibonacci fusion rule
which is similar to the Fibonacci fusion rule but with q-type objects\footnote{A simpler generalization of the Fibonacci theory to the super pivotal case, with one non-trivial q-type particle and fusion space $V^{\tilde{\tau} \tilde{\tau}}_{\tilde {\tau}}\cong \mathbb{C}^{1|1}$, does not exist. Indeed, suppose $\text{End}(\tau) = \mathbb{C} \ell_1$ and $V^{\tau \tau \tau} \cong \mathbb{C}^{1|1}$.
$\gamma \in \text{End}(\tau)$ denote the odd endomorphism in $V^{\tau\tau\tau}$.
Then we can write down three anti-commuting operators $\gamma \tp \gamma \tp 1$, $\gamma \tp 1 \tp \gamma$ and $1\tp \gamma \tp \gamma$ which are each even and as such preserve the grading on $V^{\tau\tau\tau}$. 
However, the even and odd subspaces of $V^{\tau\tau\tau}$ are one dimensional, and so these operators cannot be represented.
Hence a theory with a single q-type particle with Fibonacci-like fusion rules must have nontrivial fusion multiplicity.
In the $\halfesix$ theory we have $V^{\tau\tau\tau} \cong \cc^{2|2}$, which is big enough to represent all three of the above operators.}.
The nontrivial fusion spaces are $V^{\rho\rho}_\rho \cong \cc^{2|2}$ and $V^{\rho\unit}_\rho \cong \cc^{1|1}$, with the first telling us that the theory has nontrivial fusion multiplicity. 


This theory is richer than the examples we have considered previously, and serves as a good 
case-study for the features that appear in phases described by more general super pivotal 
categories. 
These more general features include:
\begin{itemize}
\item The center has a quasiparticle excitation which has a non-bounding spin structure but which is m-type (this also occurs in the $SO(3)_6/\psi$ theory discussed previously).
\item The ground state degeneracy on the three spin tori with a bounding cycle (with spin structures $BB$, $BN$, and $NB$) is $\mathbb{C}^{3|0}$, and the ground state degeneracy on the non-bounding torus (with $NN$ spin structure) is $\mathbb{C}^{1|2}$.
In particular, the fermion parity of a ground state on the torus is not uniquely determined by the torus' spin structure (this also occurs in the $SO(3)_6/\psi$ theory discussed previously). 
 \item As a fusion category, there is a fusion rule that takes two q-type particles to another q-type particle. 
Therefore, the fusion rules do not always respect the $\zt$ grading of objects into q-type and m-type\footnote{However, q-type fusion products cannot appear in the fusion of two q-type particles in the tube
category of a fermionic theory, since two idempotents in the tube category with non-bounding spin 
structure must fuse to an idempotent with bounding spin structure (the fusion rules are $\zt$-graded by spin structure), which can never be q-type.}. 
\end{itemize}

Performing the condensation requires one additional step that did not appear in the previous examples. 
This is because the category $\halfesix$ is not braided, and so doesn't have a fermion to condense.
However, as described in section \ref{lift_and_condense}, all we need to perform fermion condensation 
is a particle that lifts to a fermion in the Drinfeld center. 
This is the case for $\halfesix$.

In what follows, we will first introduce the fusion theory of $\halfesix$ and its properties that are pertinent to the rest of the section.
We will then compute the half braid for the emergent fermion, and condense it in the same way we did in the previous examples.
Following this, we will compute the idempotents in the condensed theory, 
as well as the modular $S$ and $T$ matrices. 



%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Fusion theory of $\halfesix$}
\label{halfesixFusionTheory}
%%%%%%%%%%%%%%%%%%%%%%%%

The $E_6$ fusion category is the fusion category whose principle graph is given by the $\text{E}_6$ Dynkin diagram, shown to the left in Fig. \ref{EsixDynkin}.
The $E_6$ fusion category has two sub-categories: one subcategory has the fusion rules of the Ising theory, while the other is known as $\halfesix$ \cite{Hong2008} and has more complicated fusion rules. 
\begin{figure}
\begin{align}
\vcenter{\xymatrix @!0 @M=4mm @C=40mm{
&\EsixDynkin  \ar[rr]<-3ex>^-{ \text{   condense $y$  }} &   &\EsixCondensePsi&  
	}} \nonumber
\end{align}
\caption{
On the left we have the $E_6$ Dynkin diagram. 
The $E_6$ fusion theory has two closed fusion subcategories whose simple objects are $\left \{ \mathds{1},\; \sigma,\; y \right\}$ and $\left \{ \mathds{1}, x,y \right \}$. 
The first satisfies the Ising fusion rules while the second satisfies those of $\halfesix$ given in (\ref{halfEsixFusionRules}).
In this section we describe how to quotient by $y$ in the sub-category $\halfesix$.
$y$ is fermionic in the center of $\halfesix$, so this is tantamount to performing fermion condensation.
The figure on the right denotes the principal graph of the theory after quotienting by $y$.
Restricting to the quotient of the $\halfesix$ fusion subcategory reduces the particle content to just 
$\{\unit,\rho\}$.  }
\label{EsixDynkin}
\end{figure}


The fusion category $\halfesix$ has three particles, $\mathds{1}$, $x$, and $y$. 
The non-trivial fusion rules are
\begin{align}
y \tp y \cong \mathds{1} \quad \quad y \tp x \cong x \tp y \cong x \quad \quad x\tp x \cong \mathds{1}\oplus 2x \oplus y,
\label{halfEsixFusionRules}
\end{align}
and the quantum dimensions are given by
\begin{align}
d_{\mathds{1}} = 1 \quad \quad d_x = 1 + \sqrt{3} \quad \quad d_y = 1.
\end{align}
Note that one of the fusion spaces ($V_x^{xx}$) has dimension greater than 1.
Note also that $x$ 
is invariant under fusion with $y$, and that $y$ has quantum dimension $1$. 
If the theory were braided, and $y$ were fermionic, then condensing $y$ would lead to a super pivotal fusion theory with only two objects, $\mathds{1}$ and $\rho$, the image of $x$ under condensation of $y$. 
This theory however is not braided, and so we will have to do more work to quotient by $y$, as discussed in the next subsection \ref{condensey} (see also the discussion in Section \ref{lift_and_condense}).

It is useful to layout some of the basic data of $\halfesix$ which will be useful to us in the following sections. 
Specifically we will give all information required to manipulate the $y$ line, which will be useful knowledge to have on hand when we condense $y$. 

From looking at (\ref{halfEsixFusionRules}) we notice that all particles are self dual, and therefore we must specify their Frobenius-Schur indicators. 
In this case both Frobenius-Schur indicators are equal to $1$, meaning that 
\begin{align}
\Kappay= \Idy
\qquad \qquad \qquad
\Kappax =\Idx
\end{align}
These can be found from the associators $\kappa_x = d_x \left[ F^{xxx}_x \right]_{\mathds{1}\mathds{1}}$, and similarly for $y$. 
We list all the $F$-symbols (as found in \cite{okazaki2013,Wakui2002}) in App.~\ref{E6Fsymbols}.
Using the $F$-symbols in App.~\ref{E6Fsymbols} we can check that, in this gauge, $y$ has nice pivotal properties:
\begin{align}
\begin{matrix}
&{\xxypivotadual  = \xxypivotbdual  =  \Vxxydual} \\
&\\
&{\xxypivota =  \xxypivotb = \Vxxy } \\
\end{matrix}
&\;\;
\begin{matrix}
&{\yxxpivotadual = \yxxpivotbdual = \Vyxxdual }\\
&\\
&{\yxxpivota = \yxxpivotb=  \Vyxx }\\
\end{matrix}
&\;\;
\begin{matrix}
&{\xyxpivotadual = \xyxpivotbdual = \Vxyxdual } \\
&\\
&{\xyxpivota =  \xyxpivotb =  \Vxyx}\\
\end{matrix}
\end{align}
The fact that these diagrams are trivially pivotal is a reflection of the gauge choice used for the splitting spaces.

Next, we look at what happens when we slide a $y$ line past a $V^{xx}_x$ fusion space.
Since $\text{dim} V^{xx}_x = 2$ the fusion space requires a multiplicity index labeling the independent vectors spanning this vector space. 
We denote them $v_1$ and $v_2$, and diagrammatically label them with an index at the fusion vertex:
\begin{align}
V^{xx}_x \cong \mathbb{C} \left[\;\; \Vxxxa \;\;  \right  ] \qquad \qquad a = 1, 2.
\end{align}
The next three relations show what happens when $y$ shifts past the fusion space $V^{xx}_x$:
\begin{align}
\Vxyxxa = \sigma^x_{ab} \; \Vxyxxb
\quad \quad 
\Vyxxxa = \sigma^z_{ab} \;\; \Vyxxxb
\quad \quad 
\Vxxyxa =  \sigma^y_{ab} \;\Vxxyxb,
\label{yslide}
\end{align}
where the $\sigma^w$, $w = x,y,z$ are the standard Pauli matrices\footnote{Explicitly $\sigma^x = \left( \begin{matrix} 0 &1\\ 1&0 \end{matrix} \right) \quad  \sigma^y = \left( \begin{matrix} 0 &-i\\ i&0 \end{matrix} \right)  \quad \sigma^z = \left( \begin{matrix} 1 &0\\ 0&-1 \end{matrix} \right)$}. 
When we condense $y$, these sliding moves will correspond to even endomorphisms of the fusion space in the condensed theory.

Lastly, we have
\begin{align}
&\Vxxxva \; = \; \left( W_{\mathds{1}} \right)_{ab} \Vxxxvb \quad \quad 
W_{\mathds{1}} = \frac{e^{-7 i \pi /12}}{\sqrt{2}}\left( \begin{matrix} 1 &-i \\ 1 & i \end{matrix} \right) \\
\nonumber \\
&  \Vxxxya \; = \;  \left( W_{y} \right )_{ab} \; \Vxxxyb  \quad \quad   W_y = \frac{e^{-7 i \pi /12}}{\sqrt{2}}\left( \begin{matrix} 1 &-i \\ -1 & -i \end{matrix} \right)
\end{align}
These will be of use to us when we specify the pivotal properties of $\halfesix$ after condensing $y$; see Section \ref{ESixPivotal} for more details.
The only data left to specify is the associators for the $V^{xxx}_x$ fusion space, which we list in Appendix~\ref{E6Fsymbols}.



%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Fermion condensation in $\halfesix$}
\label{condensey}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%\dave{Some references that may be fitting: \cite{majid1991}, and apparently \cite{joyal1991}. Also is this called a relative center? Notes on Modular Categories by Muger, or chapter 6 of \cite{heunen2013}.}
In this subsection we will describe the procedure for condensing the $y$ particle in $\halfesix$. 
As mentioned earlier, $\halfesix$ is not braided, and so when we say condense $y$, we actually mean that we lift $y$ to the Drinfeld center (where it is an emergent fermion), and condense the lift of $y$. 
Since the center of $\halfesix$ has been computed in several places \cite{Hong2008,Izumi2001, kawahigashi2001} we will not provide all details. 

The lift of $y$ to $\mcz(\halfesix)$ can be found by taking \eqref{halfbraid_resolution} subject to the constraints \eqref{identityBraid} and \eqref{junctionBraid}.
Using the fusion theory of $\halfesix$ defined above in Section~\ref{halfesixFusionTheory} one readily finds the unique solution,
\begin{align}
\halfbraid{\ebox}{y}{\unit +x+y}{} = \halfbraid{\eone}{y}{\mathds{1}}{} - \; i   \halfbraid{\ex}{y}{x}{x} -   \halfbraid{\ey}{y}{y}{\mathds{1}}.
\label{yhalfbraid}
\end{align}
The all important negative sign on the last term makes the statistics and twist
of $y$ fermionic. 

We are now in a position to condense $y$.
Since $x$ is invariant under fusion with $y$ after condensation it becomes a q-type simple object, which we will denote by $\rho$:
\begin{align}
x \xrightarrow{\;\; \text{condense $y$\;\;}} \rho \quad \quad \quad \text{End}(\rho) \cong \mathbb{C} \ell_1
\end{align}
$\rho$ is the only non-trivial object in the condensed theory. 
Furthermore, since $x$ has fusion multiplicity in the parent theory, $\rho$ has fusion multiplicity in the condensed theory.
This is captured by the fusion space
\begin{align}
V^{\rho \rho}_\rho \cong \mathbb{C}^{2|2}.
\end{align}
The nontrivial fusion rule of the condensed theory is
\begin{align}
\rho \tp \rho = \mathbb{C}^{1|1}\cdot \mathds{1} \oplus \mathbb{C}^{1|1} \cdot \rho.
\end{align}
The fusion rule coefficients $\Delta^{\rho\rho}_\rho = \Delta^{\rho\rho}_\unit \cong \cc^{1|1}$ appearing in the above formula are constrained by the relation $V^{ab}_c \cong \Delta^{ab}_c \tp \End(c)$ and the knowledge of the fusion spaces $V^{\rho\rho}_\rho \cong \cc^{2|2}, V^{\rho \unit}_\rho \cong \cc^{1|1}$\footnote{We could have also taken $\Delta^{\rho \rho}_\rho \cong \cc^{2|0}$ or $ \cc^{0|2}$
\dave{Reminder to revisit this in case we find more constraints that rule these out.}
\dave{Still unsure what to say about this.}}. 

%\dave{I think we should consider dropping this heuristic.}
%\ethan{Agreed.}
%Heuristically, one can think of the $\rho$ lines as carrying a p-wave superconductor.
%In this scenario the junction of three of these has four different ways to fuse together, two even and two odd. 
%However, unlike a p-wave superconductor the junction does not leave behind a vortex. 





%%%%%%%%%%%%%%%%%%%%
\subsubsection{Pivotal structure}
\label{ESixPivotal}
%%%%%%%%%%%%%%%%%%%%

Since $\text{End}(\rho) \cong \cl_1$, $\End(\rho)$ possesses a natural odd isomorphism which we will denote as $f$. 
We will denote the even basis vectors of $V^{\rho \rho}_\rho$ as $v_1$ and $v_2$, so that the odd basis vectors are $f {v_1}$ and $f {v_{2}}$, where the $f v_i$ are obtained by acting with $f$ on the bottom leg of the fusion space.
Diagrammatically we can denote this vector space by
\begin{align}
V^{\rho \rho }_\rho \; \cong \; \mathbb{C} \left[ \VSeven , \quad \VSa \right] \quad \quad \quad a = 1, 2,
\end{align}
where $f$ is represented graphically by the blue dot. 
We can then use our knowledge of local relations in the parent $\halfesix$ theory and the lift of $y$ to derive the following relations in the condensed theory:
\begin{align} 
\VSa = \sigma^z_{ab} \VSb \qquad \VSa = \sigma^y_{ab} \VSc \qquad \VSd = -i \sigma^x_{ab} \VSc,
\label{esixdotslide}
\end{align}
where the $\sigma^{w}$ are the standard Pauli matrices. 
We can also obtain the following pivoting moves:
 \begin{align}
 \PivotEsixEven  = 
X_{ab}\Vrhorhorho \quad \quad X = \frac{e^{7 i \pi/12}}{\sqrt{2}}\left( \begin{matrix}
 1& 1\\ 
 i &- i
 \end{matrix} \right)  \\
 \PivotEsixOdd =
Y_{ab} \Vrhorhorhoodd \quad \quad Y =  \frac{e^{7 i \pi/12}}{\sqrt{2}}\left( \begin{matrix} 
 i& -i\\ 
 -1 & -1
 \end{matrix} \right) 
 \end{align}
 Note that we have $X^3=\unit,Y^3=-\unit$, which is consistent with the fact that $X$ acts on even vectors 
 while $Y$ acts on odd ones (so that $Y^3$ rotates an odd vector by $2\pi$, which produces a minus sign). 
 

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% 
\subsection{The tube category, local relations, and the torus}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsubsection{Local relations on the annulus}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
Let us now investigate local relations on the tubes. 
We will make use of the notation 
%\ethan{edited this because $|X|$ suggests a relation to fermion parity which isn't there and since we used $s(X)$ at one point earlier in the paper. Can do a find+replace to revert if you don't dig it}
%\dave{Works for me.}
\begin{align}
s(X) =\left\{
                \begin{array}{ll}
                  0 \quad \text{if } X =B \quad \text{Bounding} \\
                  1 \quad \text{if } X = N \quad \text{Non-bounding}
                \end{array}
              \right.
\end{align}
We then have 
\begin{align}
& \AddDat{\hTube}{X}{} \; =  (-1)^{s(X)}  \AddDat{\hTube}{X}{} \quad \quad \quad \AddDat{\hTube}{X}{\dotb} \; =  -(-1)^{s(X)}  \AddDat{\hTube}{X}{\dotb} 
\label{hlocalrelation}
\end{align}
which is found from taking two fermions out of the vacuum and sliding them around the annulus.
Similarly we have,
\begin{align}
\AddDat{\TaddownTube{\mu }}{X}{}\;= (-1)^{s(X)} \sigma^{x}_{\mu \nu} \AddDat{\TaddownTube{\nu}}{X}{} \quad \quad \quad
\AddDat{\TadupTube{\mu}}{X}{}\;= (-1)^{s(X)} \sigma^y_{\mu \nu} \AddDat{\TadupTube{\nu}}{X}{}
\end{align}

\begin{table}
\begin{tabu}{ r  c c c c c c }
&$e$&$h$&$v$&$t$&$X_{11}$&$X_{12}$ \\
\cline{2-7} 
&      &      &      &     &              &\\[-2ex]
$\text{Bounding}$ &$\AddDat{\eTube}{B}{} $&$\AddDat{\hTube}{B}{} $&$ \AddDat{\vTube}{B}{} $&$ \AddDat{\tTube}{B}{}  $&$ \AddDat{\XTube{1}{1}}{B}{} $&$ \AddDat{\XTube{1}{2}}{B}{}$\\
\\
$\text{Non-bounding}$ &$\AddDat{\eTube}{N}{}  $& &$ \AddDat{\vTube}{N}{}$&$ \AddDat{\tTube}{N}{} $& $\AddDat{\XTube{1}{1}}{N}{}$ &$ \AddDat{\XTube{1}{2}}{N}{} $ \\
\end{tabu}
\caption{\label{AnnulusBasis} The table above is the basis of tubes we use on the annulus for a bounding spin structure ($B$) and non-bounding spin structure ($N$). 
%We also list which tubes are oddly isomorphic by labeling an arrow between them with $\Pi$, and which tubes have odd endomorphisms by labeling them with $\Pi_e$. 
The labels above each tube are short-hand for that tube, $e$-- empty, $h$-- horizontal, $v$-- vertical, $t$-- twist, $X$-- crossed.
The tubes $X_{11}$ and $X_{12}$ are oddly isomorphic.
}
\end{table}

\begin{comment}
\begin{figure}
\begin{align}
\xymatrix @!0 @M=1mm @C=20mm{
&e&h&v&t&X_{11}&X_{12} \\
&&&&&& \\
&&&&&\;  \ar@{<->} @/^1pc/[r]^{\Pi} &\; \\
\text{Bounding}\quad &\AddDat{\eTube}{B}{} &\AddDat{\hTube}{B}{} & \AddDat{\vTube}{B}{}\ar @`{p+(-15,20),p+(15,20)}^{\Pi_e} & \AddDat{\tTube}{B}{}  \ar @`{p+(-15,20),p+(15,20)}^{\Pi} & \AddDat{\XTube{1}{1}}{B}{} & \AddDat{\XTube{1}{2}}{B}{}\\
\\
\text{Non-bounding}\quad &\AddDat{\eTube}{N}{}  \ar @`{p+(-15,-20),p+(15,-20)}_{\Pi_e } & & \AddDat{\vTube}{N}{} \ar @`{p+(-15,-20),p+(15,-20)}_{\Pi_e } & \AddDat{\tTube}{N}{} \ar @`{p+(-15,-20),p+(15,-20)}_{\Pi_e } & \AddDat{\XTube{1}{1}}{N}{} & \AddDat{\XTube{1}{2}}{N}{}\\
&&&&&\;  \ar@{<->} @/_1pc/[r]_{\Pi} &\; \\
}
\nonumber
\end{align}
\caption{The table above table is the basis of tubes we use on the annulus for a bounding spin structure ($B$) and non-bounding spin structure ($N$). 
We also list which tubes are oddly isomorphic by labeling an arrow between them with $\Pi$, and which tubes have odd endomorphisms by labeling them with $\Pi_e$. 
The labels above each tube are short-hand for that tube, $e$-- empty, $h$-- horizontal, $v$-- vertical, $t$-- twist, $X$-- crossed.
\dave{I think we should remove the $\Pi$'s and just comment in the caption that $X_{11} \cong X_{12}$ oddly.}}
\end{figure}
\end{comment}

\begin{align}
& \AddDat{\XTube{\mu}{\nu}}{X}{} \;\;  =(-1)^{s(X)} (\sigma^x \tp \sigma^y )_{\mu \nu; \kappa \tau}\AddDat{\XTube{\kappa}{\tau}}{X}{} 
\label{XlocalRelationAnnulus}
\end{align}
We also have the odd isomorphism
\begin{align}
\AddDat{\XTube{\mu}{\nu}}{X}{\dotc} \;= (\sigma^y \tp \sigma^z)_{\mu \nu; \kappa \tau} \; \AddDat{\XTube{\kappa}{\tau}}{X}{\dota}
\end{align}
Recapitulating, we can use these results to obtain a minimal basis for the vector space of string-nets on the annulus, which is given in Figure \ref{AnnulusBasis}.



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsubsection{Local relations on the torus} \label{TorusLocalRelations}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
On the torus we have four spin structures, and extra local relations coming from the additional cycle. 
%On the torus we have four spin structures, and extra local relations coming from the additional cycle. 
%We label the spin structures by with either a $B$ for bounding, and $N$ for non-bounding. 
%The notation we use to denote the spin structure is \begin{align}
%\SmallTorus{\AnnulusBare}{X}{Y} \quad \quad \quad X,Y = N, B, 
%\end{align}
%where the inner label $X$ denotes the spin structure around the longitudinal cycle (the one around the circular boundaries of the annulus in the plane of the page), 
%and where the outer label $Y$ denotes the spin structure around the meridional cycle (the one that wraps out of the plane of the page). 
%Usually we will have pictures on the torus, and will move the label for the spin structure on the meridional cycle outside of the torus:
%\begin{align}
%\SmallTorus{\AnnulusBare}{X}{Y} \; \longrightarrow \; \AddDatTorus{\eTube}{X}{Y}{}.
%\end{align}
We will first investigate the local relations on the three tori which have spin structure $(X,Y) = (B,B),(N,B),(B,N)$.
Then we will consider the $(N,N)$ torus separately.
We use the same notation as in Section~\ref{modulartforms}. 

Depending on the spin structure, some of the annular tubes become zero after identifying the boundaries to form tori.
Since there is always one cycle with bounding spin structure, an odd tube is identified with zero for the same reason as discussed in \ref{c2_stringnets_torus}.
For example, due to (\ref{hlocalrelation}), we have
\begin{align}
 0 = \;\AddDatTorus{\hTube}{N}{B} \;=\; \AddDatTorus{\vTube}{B}{N}\; = \; \AddDatTorus{\tTube}{B}{B}
\end{align}

We also get another local relation from \eqref{XlocalRelationAnnulus} after closing up the annulus to a torus, namely
\begin{align}
\AddDatTorus{\XTube{a}{b}}{X}{Y}{} \; = M_{ab;\alpha \beta} \AddDatTorus{\XTube{\alpha}{\beta}}{X}{Y}{} \qquad M = (-1)^{s(X)} \sigma^x \tp \sigma^y, \; \; (-1)^{s(Y)} \sigma^y \tp \sigma^z 
\end{align}
The two relations above can be multiplied to find a third:
\begin{align}
\AddDatTorus{\XTube{1}{1}}{X}{Y}{} \; = (-1)^{s(X)+s(Y)+1} \AddDatTorus{\XTube{1}{2}}{X}{Y}{}  \; = i (-1)^{s(Y)+1} \AddDatTorus{\XTube{2}{1}}{X}{Y}{} \; = i (-1)^{s(X)+1} \AddDatTorus{\XTube{2}{2}}{X}{Y}{} 
\label{XLocalRelation}
\end{align}
We take the state with $(a,b) = (1,1)$ as the representative of this set of linearly dependent vectors. 

There is one additional useful linear relation to be found. 
This relation 
comes form nucleating a $\rho$ loop and extending it around the torus before fusing it back into the canonical basis:
\begin{align}
d_\rho \AddDatTorus{\eTube}{X}{Y} \; = \;
\AddDatTorus{\TorusLocalRelationa}{X}{Y} \;=\;
\AddDatTorus{\TorusLocalRelationb}{X}{Y} \;=\; 
\AddDatTorus{\TorusLocalRelationc}{X}{Y} \;=\; 
\sum_\lambda \; m_\lambda \AddDatTorus{\TorusNoLabelsx{\lambda}}{X}{Y},
\label{rhoLoopRelation}
\end{align}
where $m_\lambda$ are coefficients that depend on the $F$-symbols.
The string of equalities gives an additional local relation, in particular, it allows us solve for the tubes in (\ref{XLocalRelation}) above in terms of the other non-zero tubes.
Explicitly in the three sectors $(B,B), (B,N)$, and $(N,B)$ we have,
\begin{align}
& \AddDatTorus{\XTube{1}{1}}{B}{B} \;= e^{-i \pi /12} \frac{d+1}{\sqrt{d}} \left( \;\AddDatTorus{\eTube}{B}{B}\; -  \frac{1}{d} \left(\AddDatTorus{\hTube}{B}{B}   +  \AddDatTorus{\vTube}{B}{B}  \right) \right)\\
&\\
 & \AddDatTorus{\XTube{1}{1}}{B}{N} \; = e^{-5i \pi /12} \frac{d+1}{\sqrt{d}} \left( \AddDatTorus{\eTube}{B}{N} -  \frac{1}{d} \left( \AddDatTorus{\hTube}{B}{N}   + \AddDatTorus{\tTube}{B}{N} \right) \right)\\
 &\\
& \AddDatTorus{\XTube{1}{1}}{N}{B}  \;= e^{3 i \pi /4} \frac{d+1}{\sqrt{d}} \left( \AddDatTorus{\eTube}{N}{B}-  \frac{1}{d} \left( \AddDatTorus{\vTube}{N}{B} + \AddDatTorus{\tTube}{N}{B} \right) \right)
\end{align}

We now move onto the torus where the spin structure is non-bounding along both cycles.
We first notice that
\begin{align}
 0 = \;\AddDatTorus{\hTube}{N}{N} \;=\; \AddDatTorus{\vTube}{N}{N}\; = \; \AddDatTorus{\tTube}{N}{N}
\end{align}
which can be seen by nucleating two fermions out of the vacuum along each $\rho$ line and dragging one of them along the entire $\rho$ line before fusing them back to the vacuum.
Furthermore, the same calculation as \eqref{rhoLoopRelation} implies that the the empty tube is identified with zero, 
\begin{align}
\AddDatTorus{\eTube}{N}{N} \; = 0
\end{align}
The only non-zero tube with even parity is given by
\begin{align}
\AddDatTorus{\XTube{1}{1}}{N}{N}
\end{align}
and those which are proportional to it are given by \eqref{XLocalRelation}. 
%\dave{Do we have a nice way to see that this tube is non-zero other than there is no local relation that makes it proportional to the other even tubes?}
%\kw{I always find proving things are non-zero a pain in the ass.
%Maybe I'll ask Scott if he knows of better ways.
%One general prescription (which is frequently easy/practical) is to use the inner product
%coming from the TQFT.
%(That's what I did in the MTC/psi notes.)}
%\dave{Ah yes. That's pretty easy to do in this case. 
%(found the even trace to be $d_\rho$ and the odd trace to be $0$)}

As one may expect from the Ising example, there are odd tubes which are non-zero.
Indeed we can find four of them,
\begin{align}
\AddDatTorusDot{\hTube}{N}{N}{\dotb}\quad \AddDatTorusDot{\vTube}{N}{N}{\dotb} \quad \AddDatTorusDot{\tTube}{N}{N}{\dotc} \quad \AddDatTorusDot{\XTube{1}{1}}{N}{N}{\dotc}.
\end{align}
%As before one can find linear relations between the fourth tube above and the ones with different multiplicity indices.
However, these four tubes are not linearly independent. 
There are two distinct linear relations that can be found between them by multiplying the tadpole like diagrams in two different ways,
\begin{align}
\AddDatTorusDot{\TaddownTube{\mu}}{N}{N}{} \cdot \AddDatTorusDot{\TadupTube{\nu}}{N}{N}{\dotc} \;=\;
\AddDatTorusDot{\TadupTube{\nu}}{N}{N}{\dotc} \cdot  \AddDatTorusDot{\TaddownTube{\mu}}{N}{N}{} .
\end{align}
Despite the indices $\mu$ and $\nu$ varying over four distinct values, this yields only two linearly independent relations on the torus. 
They are given by,
\begin{align}
\frac{de^{ -i \pi / 4 }}{\sqrt{2}}  \AddDatTorusDot{\hTube}{N}{N}{\dotb}\; =\;
 \AddDatTorusDot{\vTube}{N}{N}{\dotb}  \; + \; 
 \AddDatTorusDot{\tTube}{N}{N}{\dotc} \; - \frac{2 e^{i \pi /4}}{\sqrt{d}}  
 \AddDatTorusDot{\XTube{1}{1}}{N}{N}{\dotc}
\end{align}
and\footnote{One can check that the second relation follows from the first by performing an $S$ transformation}
\begin{align}
\frac{d e^{i \pi/4}}{\sqrt{2}}  \AddDatTorusDot{\vTube}{N}{N}{\dotb}\; = \;
\AddDatTorusDot{\hTube}{N}{N}{\dotb}\; + i 
 \AddDatTorusDot{\tTube}{N}{N}{\dotc}\; + \frac{2 e^{11i \pi /12}}{\sqrt{d}} 
 \AddDatTorusDot{\XTube{1}{1}}{N}{N}{\dotc}
\end{align}
We can now solve for any two of the above four states.
We choose,
\begin{align}
 \AddDatTorusDot{\tTube}{N}{N}{\dotc}  \;&=\; \AddDatTorusDot{\hTube}{N}{N}{\dotb} \; -i\;  \AddDatTorusDot{\vTube}{N}{N}{\dotb}  \\
 &\\
 \AddDatTorusDot{\XTube{1}{1}}{N}{N}{\dotc} \;&=\;\sqrt{\frac{d}{2}}\left( e^{i \pi /3}\;  \AddDatTorusDot{\hTube}{N}{N}{\dotb} \; -i \; \AddDatTorusDot{\vTube}{N}{N}{\dotb} \;\right) 
\end{align}

In summary, the Hilbert spaces on each of the different spin tori are 
\begin{align}
\begin{split}
\mch^{T^2}_{(B,B)}  &\cong \mathbb{C}^{3|0} = \mathbb{C}\left[ \AddDatTorus{\eTube}{B}{B}{},\AddDatTorus{\hTube}{B}{B}{},\AddDatTorus{\vTube}{B}{B}{}\right]\\
&\\
\mch^{T^2}_{(B,N)}  &\cong \mathbb{C}^{3|0}  = \mathbb{C}\left[\AddDatTorus{\eTube}{B}{N}{}, \AddDatTorus{\hTube}{B}{N}{}, \AddDatTorus{\tTube}{B}{N}{} \right]\\
&\\
\mch^{T^2}_{(N,B)}  &\cong \mathbb{C}^{3|0}=   \mathbb{C}\left[\AddDatTorus{\eTube}{N}{B}{}, \AddDatTorus{\vTube}{N}{B}{}, \AddDatTorus{\tTube}{N}{B}{} \right] \\
&\\
\mch^{T^2}_{(N,N)}  &\cong \mathbb{C}^{1|2} = \mathbb{C} \left[ \AddDatTorusDot{\hTube}{N}{N}{\dotb}\;,\AddDatTorusDot{\tTube}{N}{N}{\dotc}\;,  \AddDatTorusDot{\XTube{1}{1}}{N}{N}{} \right]
\end{split}
\label{TorusBasis}
\end{align}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
 \subsection{The tube category of $\halfesix / y$}
 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%

 In this subsection we compute the excitations of $\halfesix / y$ using the tube category. 
The tube category is somewhat exotic, and highlights many of the non-trivial features which arise when studying fermionic theories. 

\dave{Should we remove the $\halfesix$ idempotents? 
I think they are correct, but I wasn't as careful when computing them.}
In appendix \ref{IdempotentsHalfESix}, we compute the tube category of the parent (un-condensed) $\halfesix$ theory. 
Our plan of attack in this section will be to first find the tube category of $\halfesix$ and then perform 
fermion condensation, rather than first performing fermion condensation and then constructing the tube category. 
 

In order for this strategy to work, we need to construct a map from idempotents of the parent theory to idempotents of the condensed theory.
This mapping is performed by simply condensing fermions off the tubes in $\tube(\halfesix)$ to get tubes in $\tube(\halfesix / y)$. 
Special care must be taken with respect to spin structure issues, since removing $y$ lines may force a pair of fermions to traverse a cycle of the tube. 
We will see that there are six excitations in the condensed theory: three excitations with bounding spin structure, and three with non-bounding spin structure. 
We index them as $\mca = \{ M_1, M_2, M_3\}$ and $\mcv = \{ Q_1, Q_2, M_6 \}$, where $\mca$ is the set of non-vortex anyons and $\mcv$ is the set of vortex defects. 
As the notation suggests, there are two q-type excitations and one m-type excitation (namely $M_6$) in $\mcv$, while all of the excitations in $\mca$ are (necessarily) m-type. 


\dave{Re-worded a bit. 
I'm not opposed to removing this bit. 
It may be useful to anyone who follows up on the work, 
but it is also prone to error.
For example in identifying with \cite{Hong2008} I couldn't figure out which particle corresponds to $X_2$ and which to $X_3$.
We could add a remark about that.
}

In the notation of \cite{Hong2008}, we find the following maps from idempotents in $\tube(\halfesix)$ to those in in $\tube(\halfesix / y)$:
\begin{align}
\xymatrix @!0 @M=1mm @C=10mm{
& &M_1 && M_2 && &&& M_3 &&  \\
 \\
 \quad&\mathds{1} \ar[ruu] \quad & Y \ar[uu] & W\ar[dd] & U\ar[uu] & V \ar[uul] & X_1 \ar[dd] & X_{2}\ar[ddr] &X_{3} \ar[dd] & X_4\ar[uu] & X_5\ar[uul] &  \\
\\
&&&Q_1& &&Q_2 &&M_6& &&  \\
},
\end{align}
where the center line lists the idempotents in $\tube(\halfesix)$ and the upper and lower objects are the objects in $\tube(\halfesix / y)$.
The identifications are made by taking a minimal idempotent in $\tube(\halfesix)$ and using the inclusion to $\tube(\halfesix/y)$, 
as discussed in Section \ref{double_fermionic_quotient}.

\begin{comment}
There are two nontrivial maps from tubes in $\tube(\halfesix)$ to those in $\tube(\halfesix / y)$ that we will make use of. 
One is the gluing of odd punctures, which we denote by $\Sigma$, while 
the other is the odd isomorphism which acts to pull a $y$ dot through a tube, which we denote by $\Pi$. 
In the notation of \cite{Hong2008}, we find the following maps from idempotents in $\tube(\halfesix)$ to those in in $\tube(\halfesix / y)$:
\dave{Do we want to keep this? 
When I wrote it this section was more at the notes stage, 
and I thought it would be helpful for something but never used it.}
\begin{align}
\xymatrix @!0 @M=1mm @C=10mm{
& &M_1 && M_2 && &&& M_3 &&  \\
 \\
 \quad&\mathds{1} \ar[ruu] \quad & Y \ar[uu]_{\Sigma} & W\ar[dd] \ar@/^1pc/[dd]^{\Sigma} & U\ar[uu] & V \ar[uul]_\Pi \ar@/_1.3pc/[uul]_\Sigma & X_1 \ar[dd] & X_{2,3}\ar[ddr] &X_{3,2} \ar[dd]^\Pi& X_4\ar[uu] & X_5\ar[uul]_\Pi &  \\
\\
&&&Q_1& &&Q_2 &&M_6& &&  \\
},
\end{align}
where the center line lists the idempotents in $\tube(\halfesix)$ and the upper and lower objects are the objects in $\tube(\halfesix / y)$.
\end{comment} 

\begin{table}
{{\tabulinesep=1.2mm
\begin{tabu}{ c c | c c }
type &spin & $\AddDat{\eTube}{B}{}$ & $\AddDat{\hTube}{B}{}$ \\ \hline
$\text{M}_{1}$ &$1$ & $\frac{1}{d \sqrt{3}}$ & $\frac{1}{2 \sqrt{3}}$\\ \hline
$\text{M}_{2}$&$1$ & $ \frac{d}{2 \sqrt{3}}$ & $\frac{-1}{2 \sqrt{3}}$ 
\end{tabu}
}}
\caption{
\label{MIdempotentsprime}
Quasiparticles of $\halfesix$ with bounding spin structure and trivial boundary condition.
The particle is a linear combination of the tubes shown at the top of the table multipled by the coefficients in the row.}
\end{table}

\begin{table}
{\tabulinesep=1.2mm
\begin{tabu}{ c c | c c c c }
type &spin &  $\AddDat{\vTube}{B}{} $ & $\AddDat{\tTube}{B}{} $ & $\AddDat{\XTube{1}{1}}{B}{} $ & $\AddDat{\XTube{1}{2}}{B}{} $ \\ \hline
$\text{M}_{2}$&$1$ & $\frac{1}{2 \sqrt{3}}$  & $\frac{1}{2 \sqrt{3}}$  & $\frac{e^{i \pi /4}}{2 \sqrt{d}}$ & $\frac{- e^{-i \pi/4} }{2 \sqrt{3d}}$ \\
$\Pi(\text{M}_2)$&$-1$  & $\frac{1}{2 \sqrt{3}}$  & $\frac{-1}{2 \sqrt{3}}$  &  $\frac{ e^{-i \pi/4} }{2 \sqrt{3d}}$& $\frac{-e^{i \pi /4}}{2 \sqrt{d}}$ \\ \hline
$\text{M}_3$&$e^{i \pi /3}$  & $\frac{1}{2 + d}$ & $\frac{e^{- i \pi /3}}{2+d}$ & $\frac{- e^{i \pi /12}}{\sqrt{3d}}$ &  \\
$\Pi(\text{M}_3)$&$-e^{i \pi /3}$  & $\frac{1}{2 + d}$ & $\frac{-e^{- i \pi /3}}{2+d} $&  & $\frac{e^{i \pi /12}}{\sqrt{3d}}$  \\ 
\end{tabu}
}
\caption{\label{MIdempotents} Quasiparticles of $\halfesix$ with bounding spin structures, and boudary condition $\rho$.
%All are m-type, with the horizontal lines separating the three quasiparticles. 
%Two of the three quasiparticles are two dimensional, formed out of two smaller simple modules. $\Pi$ is an odd isomorphism. 
The tube with a single $\rho$ line is a direct sum of four simple objects, 
two of which we name $M_2$ and $M_3$.
The other two are oddly isomorpich to $M_2$ and $M_3$ which we denote $\Pi(M_2)$ and $\Pi(M_3)$.
%\kw{It doesn't really make sense to talk about the ``dimension" of an object/quasiparticle.
%I would say that the non-simple object ``strand" is a direct sum of four simple objects, two of which we name
%$M_2$ and $M_3$.
%The other two subobjects are isomorphic (but oddly) to $M_2$ and $M_3$.
%There are various other ways one could say this.
%Let's discuss further on skype.}
%\dave{That sounds good to me.}
%\dave{I will do some table formatting in the near future. Note: old notation for odd isomorphism is $X(.)$}
}
\end{table}

\begin{comment}
\begin{table}
{{\tabulinesep=1.2mm
\begin{tabu}{ c c | c c }
type &spin & $\AddDat{\eTube}{B}{}$ & $\AddDat{\hTube}{B}{}$ \\ \hline
$\text{M}_{1}$ &$1$ & $\frac{1}{d \sqrt{3}}$ & $\frac{1}{2 \sqrt{3}}$\\ \hline
$\text{M}_{2}$&$1$ & $ \frac{d}{2 \sqrt{3}}$ & $\frac{-1}{2 \sqrt{3}}$ 
\end{tabu}
}
$\qquad$ {\tabulinesep=1.2mm
\begin{tabu}{ c c | c c c c }
type &spin &  $\AddDat{\vTube}{B}{} $ & $\AddDat{\tTube}{B}{} $ & $\AddDat{\XTube{1}{1}}{B}{} $ & $\AddDat{\XTube{1}{2}}{B}{} $ \\ \hline
$\text{M}_{2}$&$1$ & $\frac{1}{2 \sqrt{3}}$  & $\frac{1}{2 \sqrt{3}}$  & $\frac{e^{i \pi /4}}{2 \sqrt{d}}$ & $\frac{- e^{-i \pi/4} }{2 \sqrt{3d}}$ \\
$\Pi(\text{M}_2)$&$-1$  & $\frac{1}{2 \sqrt{3}}$  & $\frac{-1}{2 \sqrt{3}}$  &  $\frac{ e^{-i \pi/4} }{2 \sqrt{3d}}$& $\frac{-e^{i \pi /4}}{2 \sqrt{d}}$ \\ \hline
$\text{M}_3$&$e^{i \pi /3}$  & $\frac{1}{2 + d}$ & $\frac{e^{- i \pi /3}}{2+d}$ & $\frac{- e^{i \pi /12}}{\sqrt{3d}}$ &  \\
$\Pi(\text{M}_3)$&$-e^{i \pi /3}$  & $\frac{1}{2 + d}$ & $\frac{-e^{- i \pi /3}}{2+d} $&  & $\frac{e^{i \pi /12}}{\sqrt{3d}}$  \\ 
\end{tabu}
}
\caption{\label{MIdempotents} Quasiparticles of $\halfesix$ with bounding spin structures. 
All are m-type, with the horizontal lines separating the three quasiparticles. 
%Two of the three quasiparticles are two dimensional, formed out of two smaller simple modules. $\Pi$ is an odd isomorphism. 
The tube with a single $\rho$ line is a direct sum of four simple objects, 
two of which we name $M_2$ and $M_3$.
The other two are oddly isomorpich to $M_2$ and $M_3$ which we denote $\Pi(M_2)$ and $\Pi(M_3)$.
%\kw{It doesn't really make sense to talk about the ``dimension" of an object/quasiparticle.
%I would say that the non-simple object ``strand" is a direct sum of four simple objects, two of which we name
%$M_2$ and $M_3$.
%The other two subobjects are isomorphic (but oddly) to $M_2$ and $M_3$.
%There are various other ways one could say this.
%Let's discuss further on skype.}
%\dave{That sounds good to me.}
%\dave{I will do some table formatting in the near future. Note: old notation for odd isomorphism is $X(.)$}
}
}
\end{table}
\end{comment}

\begin{table}
{{\tabulinesep=1.2mm
\begin{tabu}{ c c | c }
type& spin & $\AddDat{\eTube}{N}{}$ \\ \hline
$\text{Q}_{1}$ &$1$&1
\end{tabu}
}
$\qquad$
{\tabulinesep=1.2mm
\begin{tabu}{c  c | c c c c }
type& spin & $\AddDat{\vTube}{N}{}$ & $\AddDat{\tTube}{N}{}$  & $\AddDat{\XTube{1}{1}}{N}{}$ & $\AddDat{\XTube{1}{2}}{N}{}$ \\ \hline
$\text{Q}_1$&$1$ & $ \frac{1}{d}$&$ \frac{1}{d} $& $\frac{- e^{i \pi/4}}{d\sqrt{d}}$ & $\frac{- e^{i \pi/4}}{d\sqrt{d}}$ \\ \hline
$\text{Q}_2$&$-i$ &$ \frac{1}{2+d} $& $\frac{i}{2+d}$ & $\frac{i \gamma}{\sqrt{2+d}}$ & $\frac{i \gamma}{\sqrt{2+d}}$ \\ \hline 
$\text{M}_6$&$e^{5i \pi/6}$&$ \frac{1}{2+d} $&$ \frac{e^{-5i\pi/6}}{2+d} $ & $\frac{- \alpha e^{5 i \pi/6}}{\sqrt{2+d}}$ & $\frac{\beta e^{5 i \pi /6}}{\sqrt{2+d}}$ \\ 
$\Pi(\text{M}_6)$&$e^{5i \pi/6}$&$ \frac{1}{2+d} $&$ \frac{e^{-5i\pi/6}}{2+d} $ &  $\frac{\beta e^{5 i \pi /6}}{\sqrt{2+d}}$  &$\frac{- \alpha e^{5 i \pi/6}}{\sqrt{2+d}}$ 
\end{tabu}
 }
\caption{  \label{QIdempotents} Quasiparticles of $\frac{1}{2} E6$ with vortex (periodic) spin structures. Two are q-type, and one is m-type. The m-type particle is two-dimensional, consisting of of two smaller simple modules.  $\Pi$ is an odd isomorphism, and 
$\alpha = \frac{1}{2} \left( 1+ 1/\sqrt{2d+1} \right)$, and $\beta = \frac{1}{2} \left( 1- 1/\sqrt{2d+1} \right)$. \dave{Note: old notation for odd isomorphism is $X(.)$}}}
\end{table}

\begin{table}
\begin{flalign*} & \begin{array}{r@{ \quad \quad \quad}  c @{\quad \quad} c @{\quad \quad} c @{\quad \quad \quad \quad } c  @{\quad \quad} c @{\quad \quad} c  }
			\text{particle}				&M_1		&M_2		&M_3	&Q_1	&Q_2	&M_6 \\[.5ex] \hline \\ [-2ex]
			\text{quantum dimension}		&1			&1+d		&d		&2+d	&d		&d\\ [.5ex]
			\text{topological spin}		&1			&1		&e^{- i \pi/3}	&1	&i	&e^{-5 i \pi /6} \\
						\end{array} & \end{flalign*}
	\caption{The $\halfesix$ quantum dimensions and topological spins. 
	 The total quantum dimension is given by $\mcd = d\sqrt{6}$.}
	\label{halfesixFusionRules}
\end{table}


The fusion rules in the condensed theory can be calculated using \eqref{PplusQ} and \eqref{PminusQ}. 
We list the fusion rules in Table \ref{halfesixFusionRules}. 


			\begin{table}
\begin{flalign*} & \begin{array}{c@{ \quad}  | @{\quad \quad} l @{\quad \quad} l @{\quad \quad} l}
			\mca \tp \mca 		&M_1		&M_2		&M_3		\\[.5ex] \hline \\ [-2ex]
			M_1		 		&M_1		&M_2		&M_3		\\
			M_2		 		&M_2		&M_1\oplus \cc^{1|1}M_2	\oplus \cc^{1|1}M_3	&\cc^{1|1}  M_2 \oplus \cc^{0|1}M_3		\\
			M_3		 		&M_3		&\cc^{1|1} M_2 \oplus \cc^{0|1}M_3		&M_1 \oplus \cc^{0|1}M_2 \oplus M_3		\\
			\end{array} & \end{flalign*}
	
\begin{flalign*} & \begin{array}{c@{ \quad}  | @{\quad \quad} l @{\quad \quad} l @{\quad \quad} l}
			\mcv \tp \mca 		&M_1		&M_2									&M_3		\\[.5ex] \hline \\ [-2ex]
			Q_1				&Q_1		&\cc^{1|1}Q_1 \oplus Q_2 \oplus \cc^{1|1}M_6		&Q_1 \oplus Q_2 \oplus \cc^{1|1}M_6		\\
			Q_2				&Q_2		&Q_1 \oplus \cc^{1|1} M_6					&Q_1 \oplus  Q_2		\\
			M_6		 		&M_6		&Q_1 \oplus Q_2 \oplus \cc^{0|1}M_6			&Q_1 \oplus \cc^{0|1} M_6		\\
			\end{array} & \end{flalign*}		

\begin{flalign*} & \begin{array}{c@{ \quad}  | @{\quad \quad} l @{\quad \quad} l @{\quad \quad} l}
			\mcv \tp \mcv 		&Q_1		&Q_2		&M_6		\\[.5ex] \hline \\ [-2ex]
			Q_1		 		&\cc^{1|1}M_1\oplus \cc^{2|2} M_2 \oplus \cc^{1|1}M_3		&\cc^{1|1}M_2 \oplus \cc^{1|1}M_3		&\cc^{1|1}M_2 \oplus \cc^{1|1}M_3		\\
			Q_2		 		&\cc^{1|1}M_2 \oplus \cc^{1|1}M_3		&\cc^{1|1}M_1 \oplus M_3		&\cc^{1|1}M_2		\\
			M_6		 		&\cc^{1|1}M_2 \oplus \cc^{1|1}M_3 		&\cc^{1|1}M_2 		&\text{\textcolor{red}{$\cc^{0|1}$}}M_1 \oplus M_2 \oplus M_3		\\
			\end{array} & \end{flalign*}
	\caption{$\halfesix$ fusion rules. We define $\mca = \{ M_1, M_2, M_3\}$ and $\mcv = \{ Q_1, Q_2, M_6 \}$ as the set of non-vortex and vortex quasiparticles, respectively. 
	The $\cc^{p|q}$ denote the vector space associated with $\Delta^{ab}_c$ which is related to the fusion space through $V^{ab}_c =\Delta^{ab}_c \tp \text{End}(c)$.
	Notice that $M_6$ is self-dual and can only fuse oddly to the vacuum (the relevant fusion channel is marked in red), and hence it has an imaginary Frobenius-Schur indicator.
	\dave{I need to double check these.}
	\dave{I think they are now correct.
	But it may not be a bad idea to double-double check the $M_6$ fusion rules.}} 
	\label{halfesixFusionRules}
\end{table}

It is useful to also keep track of the isomorphisms between the different representatives 
of an isomorphism class.
In the present case, we have,
\begin{align}
M_2 = \frac{e^{i \pi /4}}{2} \sqrt{\frac{d}{3}} \AddDatTorusDot{\TaddownTube{1}}{B}{}{}  \cdot  \AddDatTorusDot{\TadupTube{1}}{B}{}{}  \; = \frac{e^{- i \pi /4}}{2} \sqrt{\frac{d}{3}} \AddDatTorusDot{\TaddownTube{1}}{B}{}{\dota} \cdot \AddDatTorusDot{\TadupTube{1}}{B}{}{\dotc} 
\end{align}
which can be used to track the isomorphisms across the three representatives of $M_2$.
$M_3$ is oddly isomorphic to $\Pi(M_3)$ with the odd isomorphism 
given by sliding a fermion through the tube, and 
similarly for $M_6$.
Lastly we have,
\begin{align}
Q_1 = \frac{e^{i \pi/4}}{\sqrt{d}} \AddDatTorusDot{\TaddownTube{1}}{N}{}{}  \cdot  \AddDatTorusDot{\TadupTube{1}}{N}{}{} 
\end{align}

\subsection{Action of Mapping class group on Torus }



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsubsection{Topological and idempotent bases}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
There are two natural bases on the torus. 
One is the topological basis, corresponding to (\ref{TorusBasis}), the other is the idempotent basis (or quasiparticle basis) given in tables \ref{MIdempotents} and \ref{QIdempotents}.
We will compute the modular transformations in the topological basis first, and then change over to the idempotent basis.

We define the shorthand notation for the tubes as
\begin{align}
\begin{split}
e =\; \AddDatTorus{\eTube}{}{}{}\quad &h =\; \AddDatTorus{\hTube}{}{}{} \quad v=\; \AddDatTorus{\vTube}{}{}{} \quad  t=\; \AddDatTorus{\tTube}{}{}{} \quad X = \; \AddDatTorus{\XTube{1}{1}}{}{}{}\\
& \stackrel{\bullet}{h}\; =\; \AddDatTorusDot{\hTube}{}{}{\dotb} \quad \stackrel{\bullet}{v}\;=\; \AddDatTorusDot{\vTube}{}{}{\dotb} 
\end{split}
\label{TorusStates}
\end{align}
We will then denote the spin structure by a subscript, for example,
\begin{align}
h_{BN} =\; \AddDatTorus{\hTube}{B}{N}{}
\end{align}




Every state on the torus can be expanded in terms of the above states, as long as we are also careful to use the local relations provided in Section \ref{TorusLocalRelations}.
Hence one can directly compute the change of basis by taking the particles in tables \ref{MIdempotentsprime}, \ref{MIdempotents},  and \ref{QIdempotents} and projecting them onto the torus, and then modding out by the local relations described in Section \ref{TorusLocalRelations}.
The change of basis matrices in the spin sectors with at least one bounding cycle are 
\begin{align}
\label{VAA}
\left( \begin{matrix}
\text{M}_1\\
\text{M}_2\\
\text{M}_3\\
\end{matrix} \right)_{BB} 
&= \left( \begin{matrix}
\frac{1}{d\sqrt{3}} & 0 & \frac{1}{2 \sqrt{3}} \\
\frac{d}{2 \sqrt{3}} & 0 & - \frac{1}{2 \sqrt{3}} \\
- \frac{d}{2 \sqrt{3}} & \frac{1}{2} & \frac{1}{2 \sqrt{3}}
\end{matrix} \right)
\left( \begin{matrix}
e\\
v\\
h\\
\end{matrix} \right)_{BB}\\
\label{VAP}  
\left( \begin{matrix}
\text{M}_1\\
\text{M}_2\\
\text{M}_3\\
\end{matrix} \right)_{BN}
&= \left( \begin{matrix}
\frac{1}{d\sqrt{3}} & 0 & \frac{1}{2 \sqrt{3}} \\
\frac{d}{2 \sqrt{3}} & 0 & - \frac{1}{2 \sqrt{3}} \\
\frac{d e^{2 \pi i/3}}{2 \sqrt{3}} & \frac{e^{- i \pi /3}}{2} & \frac{e^{- i \pi /3}}{2 \sqrt{3}}\\
\end{matrix} \right)
\left( \begin{matrix}
e\\
t\\
h\\
\end{matrix} \right)_{BN} \\
\label{VPA} 
\left( \begin{matrix}
\text{Q}_1\\
\text{Q}_2\\
\text{M}_6\\
\end{matrix} \right)_{NB}
&= \left( \begin{matrix}
1 & 0 & 0 \\
\sqrt{\frac{1+d}{3}} e^{-3i \pi /4} & \frac{e^{i \pi /6}}{\sqrt{3}} & \frac{e^{i \pi /3}}{\sqrt{3}} \\
\frac{e^{7 i \pi /12}}{\sqrt{6}} & \frac{e^{- i \pi / 6}}{2 \sqrt{3}} & \frac{e^{-2 i \pi /3}}{2 \sqrt{3}}\\
\end{matrix} \right)
\left( \begin{matrix}
e\\
v\\
t\\
\end{matrix} \right)_{NB} \\
\end{align}

For the non-bounding $NN$ spin structure the q-type idempotents need to be closed up into a torus with an odd isomorphism
% will be odd (in particular, any q-type idempotent glued around a non-bounding spin structure is odd).
%\dave{Need to come back to this.}
We define $\left[ \stackrel{\bullet}{Q}_{i}\right]^2  = Q_i$. 
This has a $\pm$ ambiguity, we denote the $\pm$ signs by $\sigma_i$. 
We can also change to the idempotent basis with,
\begin{align}
\label{VPP}
\left( \begin{matrix}
\stackrel{\bullet}{Q}_{1}\\
\stackrel{\bullet}{Q}_{2}\\
\text{M}_6 \\ 
\end{matrix} \right) \; =\;
\left( \begin{matrix}
\sigma_1 e^{- i \pi /4} &0&0\\
0&\sigma_2 e^{- i \pi /4} &0\\
0&0&1 \\
\end{matrix} \right)
\left( \begin{matrix}
\frac{e^{- i \pi /4}}{\sqrt{2}} & 0&0 \\
- \frac{e^{- i \pi /4}}{\sqrt{2}} & 1 & 0 \\
0 & 0& - \frac{e^{5 i \pi /6}}{\sqrt{2 + d}}\\
\end{matrix} \right)
\left( \begin{matrix}
\stackrel{\bullet}{h} \\
\stackrel{\bullet}{v} \\
X \\
\end{matrix} \right)
\end{align}

The q-type idempotents have norm square of $2$ (due to their two-dimensional endomorphism algebras), 
opposed to the m-type idempotents that have norm square of $1$. 
To ensure that the modular matrices are unitary, we adjust for this by defining $\widehat{Q} = Q/\sqrt{2}$. 
When written in terms of the $\widehat{Q}$, the modular matrices are unitary. 


%%%%%%%%%%%%%%%%%%%%%%
\subsubsection{$S$ transformation}
%%%%%%%%%%%%%%%%%%%%%%

The $S$ transformation exchanges the longitudinal and meridional cycles of the torus.
Since we are drawing the tori as annuli with their boundaries identified, the $S$ transformation looks like
\begin{align}
\xymatrix @!0 @M=1mm  @C=20mm{
S^{XY \rightarrow \widetilde{X}\widetilde{Y}}:& \mch^{T^2}_{(X,Y)} \ar[rr] && \mch^{T^2}_{(\widetilde{X},\widetilde{Y})} & \\
&&&&\\
& \AnnularTubex{\AnnularTubeNoIndex}{}{}{\psi}{X}{Y}\ar@{|->}[rr] &&\SAnnulusx{\psi}{\widetilde{X}}{\widetilde{Y}}\; & 
 }
 \label{STopologicalBasis}
\end{align}
with the transformed spin structure $(\widetilde{X},\widetilde{Y})$ being found with the aid of Figure  \ref{spin_str_mapping_class_group}. 
In terms of the matrix elements of $S$, we have
\begin{align}
\SAnnulusx{\psi}{\widetilde{X}}{\widetilde{Y}} \;= \sum_{\lambda \in A(T^2,\widetilde{X}\widetilde{Y})}  S^{XY \rightarrow \widetilde{X}\widetilde{Y}}_{\psi \lambda} \AnnularTubex{\AnnularTubeNoIndex}{}{}{\lambda}{\widetilde{X}}{\widetilde{Y}} \\
\end{align}
Where we have taken $\psi,\lambda  \in \bigoplus_{ab} V^{aba^*}_b$ modulo local relations.

We can now work out the $S$-matrix for each spin structure in the topological basis, and then change over to the idempotent basis. 
The calculation is the same in each case, we find the linear map on the in to the topological basis based on (\ref{STopologicalBasis}), and then change back to the particle basis using (\ref{VPA}--\ref{VPP}).

For the $(B,B)$ spin structure one simply finds that $v$ and $h$ are interchanged so that,
\begin{align}
\left( \begin{matrix}
e\\
v\\
h\\
\end{matrix} \right)_{BB}
\xrightarrow{S^{BB \rightarrow BB}}
\left(\begin{matrix}
1& 0& 0 \\
0& 0&1  \\
0&1 &0 \\ 
\end{matrix} \right)
\left( \begin{matrix}
e\\
v\\
h\\
\end{matrix} \right)_{BB}
\end{align}
We can now write down the $S$-matrix in the idempotent basis using the change of basis in (\ref{VAA})
\begin{align}
\left( \begin{matrix}
\text{M}_1\\
\text{M}_2\\
\text{M}_3\\
\end{matrix} \right)_{BB} \xrightarrow{S^{BB \rightarrow BB}} 
\frac{1}{\sqrt{3}}\left( \begin{matrix}
\frac{1}{d} & \frac{d}{2} & 1\\ 
\frac{d}{2} & \frac{1}{d} & -1\\
1 & -1 & 1\\
\end{matrix} \right)
\left( \begin{matrix}
\text{M}_1\\
\text{M}_2\\
\text{M}_3\\
\end{matrix} \right)_{BB}
\end{align}

Next we compute the $S$-matrix elements that transition between the $(B,N)$ and $(N,B)$ tori.
We first find the action of S on the $(B,N)$ torus:
\begin{align}
\left( \begin{matrix}
e\\
h\\
v\\
\end{matrix} \right)_{BN} 
 \xrightarrow{S^{BN\rightarrow NB}}
\left( \begin{matrix}
1&0&0\\
0&1&0\\
d e^{-i \pi/6} & e^{5 i \pi/6}  & e^{2 \pi i /3}\\
\end{matrix} \right)
\left( \begin{matrix}
e\\
v\\
t\\
\end{matrix} \right)_{NB}
\end{align}
which can be written in the idempotent basis as
\begin{align}\left( \begin{matrix}
\text{M}_1\\
\text{M}_2\\
\text{M}_3\\
\end{matrix} \right)_{BN}
\xrightarrow{S^{BN \rightarrow NB}}
\left( \begin{matrix}
\frac{1}{2} & \frac{1}{2 \sqrt{3}} &  \frac{1}{\sqrt{3}} \\
\frac{1}{2} & - \frac{1}{2\sqrt{3}} & -\frac{1}{\sqrt{3}} \\
0& \frac{1}{\sqrt{3}} & -\frac{1}{\sqrt{3}} \\
\end{matrix} \right)
\left( \begin{matrix}
\text{Q}_1\\
\text{Q}_2\\
\text{M}_6\\
\end{matrix} \right)_{NB}.
\end{align}
Similarly we can work out the $S$-matrix in the topological basis for the $(N,B)$ torus,
\begin{align}
\left( \begin{matrix}
e \\ 
v\\ 
t\\ 
\end{matrix} \right)_{NB}
  \xrightarrow{S^{NB \rightarrow BN}}
\left( \begin{matrix}
1&0&0\\
0&1&0\\
de^{i \pi/6} & e^{-5 i \pi /6} & e^{-2 i \pi /3}
\end{matrix} \right)
\left( \begin{matrix}
e \\
h\\ 
t\\ 
\end{matrix} \right)_{BN} 
\end{align}
And again we can write this in the idempotent basis:
\begin{align}
\left( \begin{matrix}
\text{Q}_1\\
\text{Q}_2\\
\text{M}_6\\
\end{matrix} \right)_{NB}
\xrightarrow{S^{NB \rightarrow BN}}
\left( \begin{matrix}
1& 1& 0 \\
\frac{1}{\sqrt{3}} & - \frac{1}{\sqrt{3}} & \frac{2}{\sqrt{3}} \\
\frac{1}{\sqrt{3}} & - \frac{1}{\sqrt{3}} & - \frac{1}{\sqrt{3}} \\
\end{matrix} \right)
\left( \begin{matrix}
\text{M}_1\\
\text{M}_2\\
\text{M}_3\\
\end{matrix} \right)_{BN}
\end{align}
Notice that the $S$-matrix is invertible, but not unitary. 
This is because we didn't normalize our idempotents appropriately. 
As mentioned earlier, we write the normalized $Q$ idempotents with a hat, $\widehat{Q}_i = Q_i /\sqrt{2}$.
Once doing so we find the appropriately normalized $S$-matrix is given by
\begin{align}\left( \begin{matrix}
\text{M}_1\\
\text{M}_2\\
\text{M}_3\\
\end{matrix} \right)_{BN}
\xrightarrow{S^{BN \rightarrow NB}}
\left( \begin{matrix}
\frac{1}{\sqrt{2}} & \frac{1}{\sqrt{6}} &  \frac{1}{\sqrt{3}} \\
\frac{1}{\sqrt{2}} & - \frac{1}{\sqrt{6}} & -\frac{1}{\sqrt{3}} \\
0& \sqrt{\frac{2}{3}} & -\frac{1}{\sqrt{3}} \\
\end{matrix} \right)
\left( \begin{matrix}
\widehat{\text{Q}}_1\\
\widehat{\text{Q}}_2\\
\text{M}_6\\
\end{matrix} \right)_{NB}
\end{align}
\begin{align}
\left( \begin{matrix}
\widehat{\text{Q}}_1\\
\widehat{\text{Q}}_2\\
\text{M}_6\\
\end{matrix} \right)_{NB}
\xrightarrow{S^{NB \rightarrow BN}}
\left( \begin{matrix}
\frac{1}{\sqrt{2}}& \frac{1}{\sqrt{2}}& 0 \\
\frac{1}{\sqrt{6}} & - \frac{1}{\sqrt{6}} & \sqrt{\frac{2}{3}} \\
\frac{1}{\sqrt{3}} & - \frac{1}{\sqrt{3}} & - \frac{1}{\sqrt{3}} \\
\end{matrix} \right)
\left( \begin{matrix}
\text{M}_1\\
\text{M}_2\\
\text{M}_3\\
\end{matrix} \right)_{BN}
\end{align}
Notice that the matrix is symmetric, and unitary.

Lastly, we can work out the $S$-matrix on the non-bounding torus.
\begin{align}
\left( \begin{matrix}
\stackrel{\bullet}{h} \\
\stackrel{\bullet}{v} \\
X \\
\end{matrix} \right)_{NN}
\xrightarrow{S^{NN\rightarrow NN}} 
\left( \begin{matrix}
0&i  &0 \\ 
1&0 &0 \\
0&0& -i \\
\end{matrix} \right)
\left( \begin{matrix}
\stackrel{\bullet}{h} \\
\stackrel{\bullet}{v} \\
X \\\end{matrix} \right)_{NN}
\end{align}
In the idempotent basis, this is
\begin{align}   \label{hE6_S_NN}
\left( \begin{matrix}
\stackrel{\bullet}{Q}_{1}\\
\stackrel{\bullet}{Q}_{2}\\
\text{M}_6 \\ 
\end{matrix} \right)_{NN}
 \xrightarrow{S^{NN \rightarrow NN}}
\frac{e^{i \pi /4}}{\sqrt{2}}\left( \begin{matrix} 
1&\Sigma &0 \\
\Sigma &-1&0\\
0&0& -\sqrt{2} e^{i \pi /4}\\
\end{matrix} \right)
\left( \begin{matrix}
\stackrel{\bullet}{Q}_{1}\\
\stackrel{\bullet}{Q}_{2}\\
\text{M}_6 \\ 
\end{matrix} \right)_{NN}
\quad \quad \text{where $\Sigma = \sigma_1 \sigma_2$.}
\end{align}
Note that $S^{NN\ra NN}$ splits as $S^{NN\ra NN}_q \oplus S^{NN\ra NN}_m$ into blocks which operate 
on q-type and m-type particles, as it must: the $S$-transformations for the non-bounding torus cannot change the type of a given 
quasiparticle. 

In summary, we have \eqref{hE6_S_NN} together with 
\begin{align}
\left(\begin{matrix}
\left( \begin{matrix}
\text{M}_1\\
\text{M}_2\\
\text{M}_3\\
\end{matrix} \right)_{BN} \\
\\
\left( \begin{matrix}
\widehat{\text{Q}}_1\\
\widehat{\text{Q}}_2\\
\text{M}_6\\
\end{matrix} \right)_{NB}\\
\\
\left( \begin{matrix}
\text{M}_1\\
\text{M}_2\\
\text{M}_3\\
\end{matrix} \right)_{BB} \\
\end{matrix} \right)
\xrightarrow{S} \left( \begin{matrix}
&&&			\frac{1}{\sqrt{2}} & \frac{1}{\sqrt{6}} &  \frac{1}{\sqrt{3}} &			&&\\
&&&			\frac{1}{\sqrt{2}} & - \frac{1}{\sqrt{6}} & -\frac{1}{\sqrt{3}}& 			&&\\
&&&			0& \sqrt{\frac{2}{3}} & -\frac{1}{\sqrt{3}}& 			&&\\
\frac{1}{\sqrt{2}}& \frac{1}{\sqrt{2}}& 0&			&&& 			&&\\
\frac{1}{\sqrt{6}} & - \frac{1}{\sqrt{6}} & \sqrt{\frac{2}{3}}&			&&& 			&&\\
\frac{1}{\sqrt{3}} & - \frac{1}{\sqrt{3}} & - \frac{1}{\sqrt{3}}&			&&& 			&&\\
&&&			&&&			\frac{1}{d\sqrt{3}} & \frac{d}{2\sqrt{3}} & \frac{1}{\sqrt{3}}\\
&&&			&&& 			\frac{d}{2\sqrt{3}} & \frac{1}{d\sqrt{3}} & -\frac{1}{\sqrt{3}}\\
&&&			&&& 			\frac{1}{\sqrt{3}} & -\frac{1}{\sqrt{3}} & \frac{1}{\sqrt{3}}\\
\end{matrix} \right)
\left(\begin{matrix}
\left( \begin{matrix}
\text{M}_1\\
\text{M}_2\\
\text{M}_3\\
\end{matrix} \right)_{BN} \\
\\
\left( \begin{matrix}
\widehat{\text{Q}}_1\\
\widehat{\text{Q}}_2\\
\text{M}_6\\
\end{matrix} \right)_{NB}\\
\\
\left( \begin{matrix}
\text{M}_1\\
\text{M}_2\\
\text{M}_3\\
\end{matrix} \right)_{BB} \\
\end{matrix} \right)
\end{align}


%%%%%%%%%%%%%%%%%%%%%%%
\subsubsection{$T$-transformation}
%%%%%%%%%%%%%%%%%%%%%%%

The Dehn twist ($T$-transformation) corresponds to cutting the torus open along one cycle, applying a full $2\pi$ rotation and then gluing the torus back together along that cycle.
\begin{align}
\xymatrix @!0 @M=1mm  @C=20mm{
T^{XY \rightarrow \widetilde{X}\widetilde{Y}}:& \mch^{T^2}_{(X,Y)} \ar[rr] && \mch^{T^2}_{(\widetilde{X},\widetilde{Y})} & \\
&&&&\\
& \AnnularTubex{\AnnularTubeNoIndex}{}{}{\psi}{X}{Y}\ar@{|->}[rr] &&\TAnnulusx{\psi}{\widetilde{X}}{\widetilde{Y}}\; & 
 }
 \label{TTopologicalBasis}
\end{align}
with the spin structure transforming according to Figure \ref{spin_str_mapping_class_group}. 
In terms of the matrix elements of $T$, 
\begin{align}
\TAnnulusx{\psi}{\widetilde{X}}{\widetilde{Y}} \;= \sum_{\lambda \in \mch^{T^2}_{(\widetilde{X},\widetilde{Y})}}  T^{XY \rightarrow \widetilde{X}\widetilde{Y}}_{\psi \lambda} \AnnularTubex{\AnnularTubeNoIndex}{}{}{\lambda}{\widetilde{X}}{\widetilde{Y}} \\
\end{align}

%\dave{Depending how we decide on twists, we should make the appropriate modifications here.}
%The application of a Dehn twist acts like the multiplication of a tube in the tube algebra, along with gluing the boundaries together.
Aside from spin structure considerations, all idempotents are eigenstates of the Dehn twist,
with $T$ acting diagonally within each spin-structure block. 

\begin{comment}
\ethan{This is redundant since we have a summary matrix, which is more readable, directly after this}
\begin{align}
\left( \begin{matrix}
\widehat{\text{Q}}_1\\
\widehat{\text{Q}}_2\\
\text{M}_6\\
\end{matrix} \right)_{NB} \xrightarrow{T^{NB \rightarrow NB}}
\left( \begin{matrix}
1 & 0 & 0\\
0 & -i & 0 \\
0 & 0& e^{5i \pi /6} \\
\end{matrix} \right)
\left( \begin{matrix}
\widehat{\text{Q}}_1\\
\widehat{\text{Q}}_2\\
\text{M}_6\\
\end{matrix} \right)_{NB}
\end{align}

\begin{align}
\left( \begin{matrix}
\text{M}_1\\
\text{M}_2\\
\text{M}_3\\
\end{matrix} \right)_{BB} 
\xrightarrow{T_{BB \rightarrow BN}} 
\left(\begin{matrix} 
1 & 0 &0 \\
0 & 1 & 0 \\
0 & 0 & e^{i \pi /3} \\
\end{matrix} \right)
\left( \begin{matrix}
\text{M}_1\\
\text{M}_2\\
\text{M}_3\\
\end{matrix} \right)_{BN}
\end{align}

\begin{align}
\left( \begin{matrix}
\text{M}_1\\
\text{M}_2\\
\text{M}_3\\
\end{matrix} \right)_{BN} 
\xrightarrow{T_{BN \rightarrow BB}} 
\left(\begin{matrix} 
1 & 0 &0 \\
0 & 1 & 0 \\
0 & 0 & e^{i \pi /3} \\
\end{matrix} \right)
\left( \begin{matrix}
\text{M}_1\\
\text{M}_2\\
\text{M}_3\\
\end{matrix} \right)_{BB}
\end{align}
\end{comment}

To find the eigenvalues, we compute the Dehn twist in the topological basis and then change back to the 
the idempotent basis as usual. 
We find
\begin{align}
\left( \begin{matrix}
\stackrel{\bullet}{Q}_{1}\\
\stackrel{\bullet}{Q}_{2}\\
\text{M}_6 \\ 
\end{matrix} \right)_{NN} \xrightarrow{T^{NN\rightarrow NN}}
\left( \begin{matrix} 
1 & 0&0 \\
0 & -i & 0 \\
0 & 0& e^{5 i \pi /6}\\
\end{matrix} \right) 
\left( \begin{matrix}
\stackrel{\bullet}{Q}_{1}\\
\stackrel{\bullet}{Q}_{2}\\
\text{M}_6 \\ 
\end{matrix} \right)_{NN}
\end{align}
for the $NN$ torus, and 
\begin{align}
\left(\begin{matrix}
\left( \begin{matrix}
\text{M}_1\\
\text{M}_2\\
\text{M}_3\\
\end{matrix} \right)_{BN} \\
\\
\left( \begin{matrix}
\widehat{\text{Q}}_1\\
\widehat{\text{Q}}_2\\
\text{M}_6\\
\end{matrix} \right)_{NB}\\
\\
\left( \begin{matrix}
\text{M}_1\\
\text{M}_2\\
\text{M}_3\\
\end{matrix} \right)_{BB} \\
\end{matrix} \right)
\xrightarrow{T} \left( \begin{matrix}
&&&			&&&			1&0&0	\\
&&&			&&&			0&1&0	\\
&&&			&&&			0&0&e^{i \pi/3}	\\
&&&			1&0&0&			&&	\\
&&&			0&-i&0&			&&	\\
&&&			0&0&e^{5 i \pi /6}&			&&	\\
1&0&0&			&&&			&&	\\
0&1&0&			&&&			&&	\\
0&0&e^{i \pi /3}&			&&&			&&	\\		
\end{matrix} \right)
\left(\begin{matrix}
\left( \begin{matrix}
\text{M}_1\\
\text{M}_2\\
\text{M}_3\\
\end{matrix} \right)_{BN} \\
\\
\left( \begin{matrix}
\widehat{\text{Q}}_1\\
\widehat{\text{Q}}_2\\
\text{M}_6\\
\end{matrix} \right)_{NB}\\
\\
\left( \begin{matrix}
\text{M}_1\\
\text{M}_2\\
\text{M}_3\\
\end{matrix} \right)_{BB} \\
\end{matrix} \right)
\end{align}
for the spin tori with at least one bounding cycle.
One can check that the modular matrices defined above satisfy $S^2 =\text{id}$ and $(ST)^3 = \text{id}$. 


%\dave{ 
%Can ask: is it poassible 1d anyon spin chain built from this category host more exotic excitations than Majorana zero modes? 
%The folk lore (which stands on more rigoruous grounds, I'm just not familiar with the literature) is that this is impossible unless it ocurrs at the boundary of a 2+1d system.
%The fact that we have to use a half braid to define the condensation suggests that this kind of spin chain could only live at the boundary of some other 2+1D phase.
%}



%\kwsep


%\dave{Also I think I have a good idea how to compute the center of $SU(2)_{2+4k}$ now. 
%We could add an appendix with some of the details, e.g., 6j symbols and particles/fusion rules of the parent theory, condensed theory and formula for the idempotents (there is a nice way to do this in terms of the idempotents of the parent theory), could also try to work out a formula for the S and T matrices of the center.}







%%%%%%%%%%%%%%%%%%%%%%
\section{Super pivotal categories}  \label{def_sect}
%%%%%%%%%%%%%%%%%%%%%%

In this section we give a more formal (though not completely formal) definition of super pivotal categories.
Since the usual bosonic case is well covered in the literature, we will concentrate on
the differences between the bosonic case and the fermionic/super case.
We will also fix some notation and conventions used elsewhere in the paper.


There are various ways of axiomatizing string nets, including Kuperberg spiders \cite{kup_spider}, 
planar algebras \cite{jones_pa},
disk-like 2-categories \cite{blob_paper}, and pivotal tensor categories \cite{kitaev2006}
\dave{Should we cite \cite{Barrett1999}.}.

The first three are better suited to our applications, but the last one is likely the most familiar to a majority or our readers,
so we will describe a fermionic/super version of pivotal tensor categories.

Recall from 
\cite{kitaev2006}
\kw{Should probably find an earlier citation}
\dave{How about \cite{Barrett1999}}
\kw{That's an improvement, but I suspect we can do better.  I'll ask around.}
that the data of a pivotal category includes:
\begin{itemize}
\item A set of objects $\mcc^1$.
\item A set of morphisms $\mcc^2$.
\item A binary operation $\otimes$ (horizontal composition) on objects and morphisms.
\item A binary operation $\circ$ on morphisms.
\item A pivotal structure $*$ defined on both objects and morphisms.
\end{itemize}


The definition of a super pivotal category differs from the usual bosonic case in the following ways:

\begin{enumerate}
	\item The space of morphisms between two objects has the structure of 
	a super vector space.
	Morphisms also satisfy the {\em super interchange law} \cite{usher2016}:
	\begin{align}
	(f_1\tp f_2) \circ (g_1\tp g_2) = (-1)^{|f_2| |g_1|} (f_1\circ g_1)\tp (f_2\circ g_2)
	\end{align}
	where $|f|$ is the parity of the morphism $f$. 
	\item There are two distinct types of simple object, ``m-type" and ``q-type".
	m-type simple objects have the same properties as objects in conventional (bosonic) fusion categories, and have trivial endomorphism algebras $\cc$.  
	q-type simple objects have endomorphism algebras isomorphic to $\cl_1$, 
	and so their endomorphism algebras contain odd elements in addition to scalars. (See Section \ref{def_sob_ss}.)
	\item In order to keep track of Koszul signs arising from exchanging fermions, 
	we must keep track of a sign-ordering of individual fusion spaces (See \ref{koszul_signs}).
	\item Fusion spaces $V^{abc}$, $V^{ab}_c$, $V_{abcd}$, etc.\ are not merely supervector spaces; they come equipped with an action of the
	endomorphism algebras of the objects being fused. 
	For example, $V^{abc}$ possess an action of $\End(a)\tp \End(b)\tp \End(c)$.
	(See \ref{fusion_spaces}.)
	\item When combining basic 3-valent fusion spaces $V^{ab}_c$ to form fusion spaces of higher valence, we must take
	tensor products over the endomorphism algebras of the simple objects which connect two fusion spaces. 
	For example, we form the fusion space $V^{ab}_{cd}$ as $V^{ab}_{cd} \cong \bigoplus_e V^{ab}_e \tp_{\End(e)} V^e_{cd}$.
	If $c$ is m-type, this is just the usual tensor product over $\cc$, as in the bosonic case.
	But if $c$ is q-type, then we must take a non-trivial tensor product over $\cl_1$.
	(See \ref{modified_tensor_product}.)
	\item The square of the pivotal anti-automorphism is 
	the fermion parity $(-1)^F$, rather than the identity functor (see \ref{pivotal_structure}). 
	If $*$ is the pivotal anti-automorphism, then 
	\be f^{**} = (-1)^{|f|}f.\ee
	In order to keep track of minus signs that result from rotating fermions by $2\pi$, we must keep track of a spin-framing at each fusion space. 
	\item The coherence equations for the basic data of the theory (e.g.\ the pentagon relations) are modified to incorporate  
	 Koszul signs resulting from reordering various fusion spaces. 
	 They are also modified to incorporate the tensor products over endomorphism algebras mentioned above. (see \ref{Fsymbols})
	\item In order to define an inner product, we need to equip the manifold on which our string-nets are 
	defined with a $pin_\pm$ structure, which is discussed in Appendix \ref{fermion_line_bundle}.
\end{enumerate}

\kw{We should include some figs, either here or later in this section when we go into more detail.}
\dave{Agreed. Lets do it later in the section as we go over each point.}

\kw{Should remark (either here or earlier in this section) that the earliest definition was given in the blob paper.}




%%%%%%%%%%%%%%%
\subsection{Simple objects}  \label{def_sob_ss}
%%%%%%%%%%%%%%%

We will assume that our category $\mcc$ is {\it idempotent complete} -- 
every idempotent is the identity morphism of an associated object.
We also assume that $\mcc$ is {\it additive} -- we can take direct sums of objects.

An object $a$ of $\mcc$ is called {\it simple} if any homogeneous non-zero endomorphism of $a$ is an isomorphism.
Equivalently, $a$ is simple if it has no quotient objects.
(We also stipulate that the zero object is not a simple object.)

In the usual bosonic, non-super case, the only possible endomorphism algebra for a simple object
is the trivial algebra $\cc$ (scalars).
In the fermionic/super case, there is a second possibility: the complex Clifford algebra $\cl_1$, 
which is the only nontrivial $\zt$-graded division algebra other than $\cc$.
$\cl_1$ is generated over $\cc$ by the identity (which is even) and an odd element $f$ such that $f^2 = \lambda \cdot \id$
(or $f^2 = \lambda$ for short) for some non-zero complex number $\lambda$. 
Note that by rescaling the odd generator $f$ we can make $\lambda$ in the definition of $\cl_1$ any nonzero complex number. 

It follows that simple objects in a super pivotal category fall into two classes, according to whether their endomorphism algebras are $\cc$ or $\cl_1$. 
These are the m-type and q-type objects discussed earlier. 
A simple object is {m-type} if its endomorphism algebra
is $\cc$, and {q-type} if its endomorphism algebra is $\cl_1$:
\begin{align}
\vcenter{\xymatrix @!0 @M=1mm @C=25mm{
& \text{End}(x) = \mathbb{C} \ar@{<->}[rr] &   &\text{$x$ is a simple m-type object}&  \\
&\text{End}(x) = \mathbb{C} \ell_1 \ar@{<->}[rr]  &  &\text{$x$ is a simple q-type object}&
	}}
\end{align}
This terminology comes from the notation of \cite{jozefiak1988}, which classifies simple super algebras over $\cc$ as either
$M(p,q) = \End(\cc^{p|q})$ or $Q(n)$ (see appendix \ref{superstuff}).
Note that we are using ``simple" here in two different (and well-established) senses: 
any $M(p,q)$ or $Q(n)$ is a simple super algebra
(because it has no non-trivial ideals), but the endomorphism algebra of a simple object must be either
$M(1,0) \cong M(0,1) \cong \cc$ or $Q(1) \cong \cl_1$,
because all of the larger $M(p,q)$ or $Q(n)$ contain non-invertible elements.

The existence of q-type particles is responsible for much of the novel physics present after performing fermion condensation. 
q-type objects were also discussed in \cite{usher2016,gaiotto2016}, where they were referred to as ``Majorana objects''. 
%\kw{did all of those sources call them ``Majorana objects"?  I thought only Usher did.}
%\ethan{yeah---I think Usher borrowed it from Kapustin and Gaiotto. ``Majorana'' object is pretty natural from the physics point of view}
\dave{I'm actually very curious about this Majorana object name. 
Gaiotto and Kapustin seem to be the first reference to mention it, 
and they refer to Gu/Wang/Wen (and subsequently others who used the same terminology also refer to Gu/Wang/Wen). 
But if you look at Gu/Wang/Wen they don't mention Majorana object at any point, 
in any of the versions. 
I found this both amusing and confusing.
}
\ethan{me too! I initially cited GWW as well, but couldn't find it in their paper. Maybe Kapustin/Gaiotto talked to Wen and company at some point before publishing---I'm not sure. Anyway, I kept the citations to just the two}
\dave{Should we send an email and ask someone?}


%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Fusion spaces} \label{fusion_spaces}
%%%%%%%%%%%%%%%%%%%%%%%%%%%

Arbitrary morphism spaces in a super pivotal category can be built out of basic fusion spaces
$V^{ab}_c = \mor(c\to a\tp b)$,
where $a$, $b$ and $c$ are simple objects (equivalently, minimal idempotents).
This is a super vector space of dimension
$N^{ab}_c = \dim V^{ab}_c = p|q$, where $p$ is the dimension of the even part
of $V^{ab}_c$ and $q$ is the dimension of the odd part of $V^{ab}_c$.

Alternatively, we can treat $a$, $b$ and $c$ more symmetrically and define
$V^{abc} = \mor(\unit\to a\tp b\tp c)$, a super vector space of dimension $N^{abc}$.
In most of this paper we use $V^{ab}_c$, but in Sections \ref{Super_pivotal_Hamiltonian} and \ref{state_sums} we find it more convenient
to use $V^{abc}$.
Elements of the morphism spaces $V^{abc}$ and $V^{ab}_c$ are depicted by
\begin{align}
\PitchFork{a}{b}{c}{\mu} \quad \quad \quad \text{and} \quad \quad \quad \Nonpitchfork{a}{b}{c}{\mu}.
\end{align}
We call the fusion space $V^{abc}$ ``pitchforks" because of their graphical depiction.
Of course we have $V^{ab}_c \cong V^{abc^*}$ (see \ref{pivotal_ss} below).
%\kw{probably should add figs for $V^{ab}_c$ and $V^{abc}$}
%\dave{Done.}

More generally, we define $V^{ab}_{cd} = \mor(c\tp d\to a\tp b)$, $V^{ab}_{cde} = \mor(c\tp d\tp e\to a\tp b)$,
$V_{abcd} = \mor(a\tp b\tp c\tp d\to \unit)$, etc.
In general, we do not require that the objects $a$, $b$ etc. be simple.

\medskip

It is very important to note that $V^{ab}_c$ is not merely a super vector space -- it also comes equipped with an action
of (i.e.\ module structure for) the endomorphism algebras of $a$, $b$ and $c$, and hence admits an action of $\End(a)\tp \End(b)\tp \End(c)$. 
It is impossible to construct the full super pivotal category without knowing this module structure (see XXX below), 
so the module
structure is part of the input data.
Note that the module structure implies that $N^{ab}_c = n|n$ if any of $a$, $b$ or $c$ is q-type.
This is because any representation of $\cl_1$ has equal even and odd dimensions.
Acting with the odd (and invertible) element of $\cl_1$ gives an isomorphism between the even and odd parts of $V^{ab}_c$, and hence they must have the same dimension.

Requiring that the Hilbert space at a given vertex admit a 
representation of $\End(a)\tp \End(b)\tp \End(c)$ places constraints on the types 
of fermionic theories one can write down. 
For example, we can use this to show that a ``q-type Fibonacci'' theory 
which contains a single q-type particle $\tau$ with the fusion space $V^{\tau\tau}_{\tau}\cong \cc^{1|1}$, cannot exist. 
Indeed, if $V^{\tau\tau}_{\tau}$ is nontrivial and $\tau$ is q-type, 
then we must be able to find a representation of $\End(\tau)^{\tp 3} = \cl_1^{\tp 3} \cong \cl_3$ on $V^{\tau\tau}_{\tau}$.
This is impossible if $V^{\tau\tau}_{\tau}\cong \cc^{1|1}$, since $\cc^{1|1}$ is not large enough to represent $\cl_3$. 
This means that theories which contain a q-type particle $\tau$ with $V^{\tau\tau}_{\tau}\neq0$ must contain nontrivial 
fusion multiplicities, which provide us with fusion spaces that are large enough to admit a representation of $\cl_3$.
Indeed such a q-type particle exists in the $\halfesix$ theory considered earlier (see Section \ref{halfesix}), 
which possesses nontrivial fusion multiplicities that allow the relevant fusion spaces in the theory to be large enough to represent $\cl_3$. 

\medskip

If at least one of $a,b,c$ is q-type, we can simplify the description of $V^{ab}_c$ slightly, 
which we have done when working out the examples considered earlier.
Suppose $c$ is q-type, and that $\{|\psi_i\rangle\} \in [V^{ab}_c]^0, i =1,\dots, r$ are the even basis vectors in $V^{ab}_c$. 
Then we can define a complete set of odd basis vectors $\{ |\eta_i\rangle \}$ for $[V^{ab}_c]^1$ by $|\eta_i\rangle = f|\psi_i\rangle$, where $f$ is the odd element of $\End(c) \cong \cc^{1|1}$.
%%KW: I don't think this is true for non-simple c      (or any odd element in $\End(c)$ if $c$ is not simple).
When we write $|\eta_i\rangle$ graphically, we will write it as $f |\psi \rangle$, which allows us to  ``shift the oddness out of the vertex onto the edge'' by transferring the fermion residing on the fusion space to the q-type particle $c$. 
Graphically, this means that we are allowed to ``displace'' dots from trivalent vertices onto q-type worldlines:
%\be \mathord{\vcenter{\hbox{\includegraphics[scale=1]{dot_displacement.pdf}}}}, \ee
\begin{align} \label{dot_displacement} 
\NonPitchforkDot{a}{b}{c}{\eta_i} \;\; = \;\; \NonPitchforkDotDisplaced{a}{b}{c}{\psi_i}
\end{align}
%\kw{should add arrows (edge orientations) to this and similar figs}
%\dave{I'll add arrows to figs as I go through.}
where the picture on the left is $|\eta_i\rangle$ and the one on the right is $f|\psi_i\rangle$, and $c$ is assumed to be q-type. 
Although this is not a deep fact, it proves to be helpful when doing graphical manipulations, 
and operators implementing transformations like \eqref{dot_displacement} will be crucial for writing down the lattice 
Hamiltonian which realizes the
super pivotal version% fermionic generalization 
of the Levin-Wen Hamiltonian. 

Lastly, we will define a non-degenerate bilinear pairing between vectors in the vector space assigned to a disk with $n$ marked points. 
We will focus on fusion spaces of the form $V^{x_1\dots x_n}$, but the construction
for different types of fusion spaces is analogous. 
The pairing is defined by 
\begin{align} \label{reflection_pairing_defn}
\mcb:\;  &V^{x_1 x_2 \cdots x_n} \tp V^{x_n^* \cdots x_2^* x_1^*} \ra \cc \\
&\Bilineara \tp \Bilinearb \mapsto \Bilinearc
\end{align} 
\dave{Maybe more natural to have $\mcb:\; V^* \tp V \ra \cc$ like in quantum mechanics $\bra{x} \tp \ket{y} \mapsto <x,y>$}
where $\mu_i \in V^{x_1 x_2 \cdots x_n}$ and $\nu_j \in V^{x_n^* \cdots x_2^* x_1^*}$. 
We are working with the convention that the Koszul ordering of the tensor product increases 
in a left-to-right fashion---we will elaborate on this convention in Sec \ref{koszul_signs}. 
This bilinear pairing is just the evaluation map, and is $\cc$-linear in both its arguments. 
It is non-degenerate, meaning that the matrix $\mcb_{ij} = \mcb(\mu_i \tp \nu_j)$ is invertible. 
Hence we can define a set of vectors $\mu_j^* = \sum_i \nu_i (\mcb^{-1} )_{ij} $ so that
$\mcb( \mu_i \tp \mu_j^*)\propto\delta_{ij}$ for $\mu_i \in V^{abc}$ and $\mu_j^* \in V^{c^*b^*a^*}$. 
For most of the paper, we will choose the normalization convention
\begin{align}  \label{b_pairing_defn}
\mcb( \mu_i \tp \mu_j^*)  = \sqrt{d_a d_b d_c} \delta_{ij}.
\end{align} 

The pairing satisfies $\mcb(\mu_{i,1} \tp \nu_{j,2}) =  (-1)^{|\mu_i| |\nu_j|} \mcb(\nu_{j,1} \tp \mu_{i,2})$. 

%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Pivotal structure}  \label{pivotal_ss}   \label{pivotal_structure} 
%%%%%%%%%%%%%%%%%%%%%%%%%%

The pivotal structure assigns to each object $a$ a dual object $a^*$.
It also provides linear isomorphisms
\be
	P_L : \mor(a \to b\tp c) \to \mor(b^*\tp a \to c)
\ee
and
\be
	P_R : \mor(a\tp b \to c) \to \mor(a \to c\tp b^*)
\ee
for any objects $a$, $b$ and $c$.
These isomorphisms are required to be functorial with respect to $a$ and $c$.
\kw{TO DO: what do we say about $b$?}

For objects $a$, we require that $a^{**} = a$ on the nose (strict pivotal).
For morphisms $f : a\to b$, we define $f^* : b^* \to a^*$ by $f^* = P_L(P_R(f))$, diagrammatically by,
\begin{align}
\fstar \; = \; \fPLPR
\end{align}
%\kw{should add fig for this}
%\dave{done.}
(We have implicitly added and then removed some tensor units (trivial objects) here appearing 
in fusion spaces like $V^{aa^*}_\unit$.)
%\dave{Why have we removed tensor units? 
%I thought $V^{b^*b}$ and $V{aa^*}$ were defined without units.}
%\kw{The pivots are defined on $V^{ab}_c$, not $V^a_a$.}
We think of $f^*$ as a $+\pi$ rotation of the morphism $f$.
We have
\be
	(f\circ g)^* = (-1)^{|f||g|} g^* \circ f^* .
\ee
\dave{I added $\circ$ to the above to emphasize composition.}
In other words, $*$ is a contravariant functor if one takes Koszul signs into account.

For (strict) pivotal bosonic categories, one requires that $**$ is the identity functor, but
in the fermionic case one requires that $**$ is the spin-flip functor $(-1)^F$.
More specifically, we require
\be
\label{spin_flip_functor}
	f^{**} = (-1)^{|f|} f ,
\ee
since $f^{**}$ is a $2\pi$ rotation of $f$.

The part of the pivotal structure most used in calculations is the $+2\pi/3$ rotation on the 
basic trivalent fusion spaces.
We define the ``pivot" $P^{ab}_c : V^{ab}_c \to V^{bc^*}_{a^*}$
as $P_R\circ P_L$.
In terms of diagrams and matrices, this looks like
\begin{align}
P^{ab}_c \left( \;  \PivotYa \; \right) = \PivotYb
\end{align} 
%\dave{Should we use $P(...)$ or $P\circ ....$?}
%\ethan{I think the former}
The Frobenius-Schur indicator $\kappa_a$ is a special case of the pivot, defined 
by $\kappa_a = [P^{\unit a^*}_{a^*}]_{00}$. 
%\dave{If were being careful, 
%doesnt that expression depend on vertex normalization $V^{\unit a^*}_{a^*}$?
%Maybe it should be the inner product $\langle \text{id}_a, \text{id}_{a^*} \rangle$ or $\mcb(v_a\tp v_{a^*}) = \kappa_a d_a$ or just define it through $F$-move (which is essentially what the above does).}

%\kw{insert eqn similar to existing one in older pivotal subsection}.
%\dave{done.}
We can similarly define $P^{abc} : V^{abc}\to V^{bca}$. 
In terms of diagrams, 
\begin{align}
\label{Pitchfork_pivot}
P^{abc} \left(  \Pitchforkabc \right ) \;=\;  \Pitchforkabcrot.
\end{align}
%\dave{Changed form  $P^{abc} : V^{abc}\to V^{bca^*}$ to above.}
%\kw{insert similar eqn/fig; this is the pivot we will use for hamiltonian and tensor network}
%\dave{done}
We will usually write simply $P$, since the $a$, $b$ and $c$ are typically clear from context.

Since $P^3$ acts as a $2\pi$ rotation, we have $P^3 = (-1)^F$. Diagrammatically, when acting on $V^{abc}$ this is written 
\begin{align}
P^3 \left(  \Pitchforkabc \right )\; = \; \PivotThreeTimes \; = \;(-1)^F \Pitchforkabc.
\end{align}
%\be\mathord{\vcenter{\hbox{\includegraphics[scale=1]{pivot_cubed.pdf}}}}\ee
%where $\mu \in V^{ab}_c$. 

\medskip
\kw{do we need anything else here?}



%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Fusion rules and fusion spaces} \label{fusion_rules_and_fusion_spaces}
%%%%%%%%%%%%%%%%%%%%%%%%%%


In this section we elaborate on the differences arising in fermionic theories between fusion spaces and the supervector spaces appearing in the fusion rules. 

We assume that our categories are additively complete, which means that it makes sense to
multiply objects by supervector spaces. 
This is simply a categorified version of multiplying vectors (objects) by scalars (vector spaces).
For any collection of supervector spaces $\{W_a\}$ indexed by 
a finite set of objects in our category, 
we can therefore add to our category new objects of the form
\be \bigoplus_a W_a \cdot a.\ee
Morphisms between these more general objects are calculated as  
\be  \label{amordef}
	\mor(\bigoplus_a W_a\cdot a \to \bigoplus_b W'_b\cdot b) = \bigoplus_{a,b} \Hom(W_a \to W'_b)\otimes_\cc \mor(a\to b) .
\ee

Because our category is semisimple, there exists a finite collection $\mcx$ of mutually non-isomorphic simple objects $x$ such
that any object $a$ is isomorphic to one of the form
\be \label{asumx}
	a \cong \bigoplus_{x\in \mcx} W_x\cdot x .
\ee
If we want the isomorphism to be canonical, we can take $W_x = \mor(x\to a)$ if $x$ is m-type, or $W_x$ to be the even morphisms in $\mor(x\to a)$
if $x$ is q-type.

Combining \eqref{asumx} and \eqref{amordef}, we can compute endomorphisms of objects by
\be
	\End(a) \cong \bigoplus_x \End(W_x) \otimes_\cc \End(x).
\ee

We are now ready to discuss fusion rules. 
For any $a$ and $b$, define the vector spaces $\Delta^{ab}_c$ by
\be
	a \otimes b \cong \bigoplus_c \Delta^{ab}_c \cdot c ,
\ee
where the direct sum runs over all simple objects $c$ in $\mcx$. 
The $\Delta^{ab}_c$ are the fusion rule coefficients. 

The fusion spaces $V^{ab}_c$ are defined as the vector space of morphisms from $c$ to $a\tp b$:
\be \label{defn_of_V_by_Delta}
	V^{ab}_c \equiv \mor(c \to a\tp b),
\ee
where $a,b,c$ are simple objects. 
Decomposing the tensor product and using the simplicity of $c$, we see that 
\be V^{ab}_c \cong \Delta^{ab}_c \tp \rm{mor}(c \ra c) \cong \Delta^{ab}_c \otimes \End(c).\ee
Thus, the fusion spaces can be larger than the vector spaces appearing in the fusion rules 
(in contrast to bosonic theories, where the fusion spaces and fusion rule coefficients are always equal).
As examples, in the $C_2$ theory studied earlier, we have 
\be \Delta^{q_\sigma q_\sigma}_{m_\psi} \cong \cc^{1|1},\quad\Delta^{q_\sigma m_\unit}_{q_\sigma} \cong \cc,\ee
while 
\be V^{q_\sigma q_\sigma}_{m_\psi} \cong V^{q_\sigma m_\unit}_{q_\sigma} \cong \cc^{1|1}.\ee

$V^{ab}_x$ is cyclically symmetric (up to isomorphism) in $a,b,x$ (if $a$ and $b$ are simple).
Explicitly, this is because 
\be \mor(c \ra a\tp b) \cong \mor(\unit \ra a\tp b \tp c^*) \cong \mor(a^* \ra b\tp c^*),\ee 
which allows us to cyclicly permute the indices of $V$, so long as we take the duals of any objects that move from subscripts to superscripts, and vice versa. 
For example, we have $V^{ab}_c \cong V^{bc^*}_{a^*} \cong V^{c^*a}_{b^*}$. 

On the other hand, $\Delta^{ab}_c$ is {\it not} symmetric in $a,b,c$, as the $C_2$ theory example shows. 
Additionally, while $V^{ab}_c$ has an action of $\End(a)\otimes\End(b)\otimes\End(c)$ (as mentioned earlier), $\Delta^{ab}_c$
only has an action of $\End(a)\otimes\End(b)$.

This definition of $V^{ab}_c$ gives us another way to show that $V^{ab}_c$ will always be a supervector space of the form $\cc^{n|n}$ for some integer $n$ if any of $a,b,c$ is q-type. 
Indeed, suppose $c$ were q-type, and $\Delta^{ab}_c \cong \cc^{r|s}$. 
Then $V^{ab}_c \cong \cc^{r|s} \tp \cc^{1|1} \cong \cc^{r+s|r+s}$. 
The result then follows by the symmetry of $V^{ab}_c$. 




%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Koszul sign rule and unordered tensor products} \label{koszul_signs}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

We will treat Koszul signs as in Section 1.2 of \cite{deligne1999}.
%\kw{Section 1.2 of Chapter 1 of Volume 1 of the IAS "Quantum Fields and Strings" books.}
This approach doesn't really do away with Koszul signs.
Rather, it pushes them to the background, where they don't need to be mentioned as frequently.
For explicit calculations, they must again be brought to the foreground.

Let $I$ be a finite (and unordered) index set.
For each $i\in I$, let $W_i$ be a super vector space.
We define the unordered tensor product,
\be
	\bigotimes_i W_i ,
\ee
as follows.
For each bijection $f: \{1, \ldots,m\} \to I$ (i.e.\ for each ordering of $I$),
we have the ordered tensor product
\be
	T_f = W_{f(1)}\otimes\cdots\otimes W_{f(m)} ,
\ee
generated by elements
\be
	w_{f(1)}\otimes\cdots\otimes w_{f(m)}.
\ee
For any two orderings $f$ and $g$, there is a Koszul isomorphism
\be
	K_{fg} : T_f \to T_g ,
\ee
characterized by
\begin{multline}
	K_{fg} : w_{f(1)}\otimes\cdots\otimes w_{f(k)} \otimes w_{f(k+1)} \otimes \cdots \otimes w_{f(m)} \mapsto \\
				(-1)^{|w_{f(k)}||w_{f(k+1)}|} w_{f(1)}\otimes\cdots\otimes w_{f(k+1)} \otimes w_{f(k)} \otimes \cdots \otimes w_{f(m)}
\end{multline}
when $g$ differs from $f$ by a simple transposition at $k$, and
\be
	K_{gh} \circ K_{fg} = K_{fh} .
\ee
An element of the unordered tensor product is then defined as an assignment to each ordering $f$ of an element $t_f\in T_f$
such that
\be
	K_{fg}(t_f) = t_g
\ee
for all orderings $f$ and $g$.
In other words, an element of the unordered tensor product is a collection of elements in all 
possible ordered tensor products which are related by the usual Koszul sign rules.

Note that to specify an element of the unordered tensor product, it suffices to give an element $t_f$ of one
particular ordered tensor product $T_f$.
All of the other $t_g$ are uniquely determined by $t_f$.

When writing equations involving particular ordered tensor products of fusion spaces, we will adopt the 
convention that the Koszul ordering is left-to-right on the page, unless explicitly 
indicated otherwise. If we want to indicate an ordering which departs from this left-to-right convention, 
we will indicate the ordering explicitly with numerical subscripts, 
e.g. $V^{ab}_{c,1} \tp V^{cd}_{e,2}$. \kw{(I think overscripts would be better than subscripts.)
\ethan{By overscripts do you mean $e.g.$ $V^{ab,1}_c$ or something else? I went with subscripts since that's what we have in later sections and earlier in this section.}}
When drawing diagrams with a particular ordering in mind, we always indicate the ordering explicitly by numbers near each fusion space (i.e.\ near
each vertex in the string net).
Another possible convention would be to use the ordering corresponding to (say) bottom-to-top on the page,
but this creates opportunities for error when changing diagrams by isotopies,
and is not really workable for diagrams drawn on higher genus surfaces.

A map between unordered tensor products
\be
	\bigotimes_i W_i \; \to \; \bigotimes_j V_j
\ee
is defined to be a collection of maps between
all possible pairs of ordered tensor products.
We will call such a collection an ``unordered map".
These maps are required to commute with the Koszul isomorphisms on either side.
To specify such a map, it suffices to give a single map between one particular pair of ordered tensor products.
All other maps in the collection are uniquely determined by this choice and the commutativity requirement.
This map will be called an ``ordered representative" of the unordered map.
See \ref{coherence_ss} for a further discussion of the distinction between unordered maps and
their ordered representatives.





%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Modified tensor product} \label{modified_tensor_product}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
Let $\mcx$ be a complete collection of simple objects (minimal idempotents), one from each equivalence class.
(In this subsection, as in most of the paper, we are assuming that our category is semisimple with finitely many equivalence
classes of simple objects.)
For arbitrary objects $x$ and $y$, we have
\be \label{sobdecomp}
	\mor(x\to y) \: \cong \: \bigoplus_{a\in\mcx} \mor(x\to a) \tp_{\End(a)} \mor(a\to y) .
\ee
Recall that the relative tensor product $\tp_{\End(a)}$ on the RHS above is defined as the usual tensor product over scalars, modulo elements
of the form $\alpha f \tp \beta - \alpha\tp f\beta$ with $f\in \End(a)$.
Clearly such elements are in the kernel of the composition map $\mor(x\to a) \tp \mor(a\to y) \to \mor(x\to y)$.
Our semisimplicity assumption implies that the composition map (summing over all $a\in \mcx$) is surjective and that such
elements generate all of the kernel.

Diagrammatically, the relative tensor product is responsible for allowing fermionic dots to move across edges labeled by q-type simple objects.
Loosely, treating $\End(a)$ as the tensor unit when $a$ is q-type prevents us from over-counting diagrams that 
differ only by the position of a fermionic dot on the $a$ worldline. 

It follows (though not quite directly) from \eqref{sobdecomp} that we have isomorphisms
\be \label{pfi1}
	V^{abc}_d \cong \bigoplus_{x\in \mcx} V^{ab}_x \tp_{\End(x)} V^{xc}_d
\ee
and also
\be \label{pfi2}
	V^{abc}_d \cong \bigoplus_{y\in \mcx} V^{ay}_d \tp_{\End(y)} V^{bc}_y .
\ee
\kw{should probably add the familiar figs for these}
\dave{Do you mean the following figures, where the tensor over endomorphisms is implicit, or did you have something else in mind.}
Diagrammatically these read,
\begin{align}
%\Fusionspacea \cong 
\bigoplus_{x}  \Fusionspaceb \cong  \bigoplus_{y}  \Fusionspacec
\end{align} 
where the unlabeled trivalent vertex labels the fusion spaces $V^{ab}_x$, $V^{xc}_d$, $V^{ay}_d$, and $V^{bc}_y$, 
and the tensor product over endomorphisms is implicit in the diagram.
\dave{We should add the appropriate figure at the first point we talk about this tensor product. 
Maybe the beginning of this subsection.}
Similarly, 
\be
	V^{abcd} \cong \bigoplus_{x\in \mcx} V^{ab}_x \tp_{\End(x)} V^{xcd} ,
\ee
and using the isomorphism $P_R: V^{ab}_x \to V^{abx^*}$ this becomes
\be  \label{pfpfi1}
	V^{abcd} \cong \bigoplus_{x\in \mcx} V^{abx^*} \tp_{\End(x)} V^{xcd} .
\ee
%\kw{need figs
%\dave{Is the figure you want something like $\text{id}_{x^*} \tp_{\text{end}(x)} \text{id}_x = \text{id}_x \tp_{\cc} \text{id}_x / (\gamma^* \circ  x^* \tp x \sim x^* \tp \gamma \circ x )$}}
(We are implicitly using the $*$ functor to convert an $\End(x)$ action into an $\End(x^*)$ action.)
Alternatively,
%\be  \label{pfpfi2}
%	V^{abcd} \cong \bigoplus_{x\in \mcx} V^{bc}_x \tp_{\End(x)} V^{axd} \cong \bigoplus_{x\in \mcx} V^{bcx^*} \tp_{\End(x)} V^{xcd} .
%\ee
\dave{Changed so that they only differ by a pivot like the above.}
\be  \label{pfpfi2}
	V^{abcd} \cong \bigoplus_{x\in \mcx} V^{bc}_x \tp_{\End(x)} V^{axd} \cong \bigoplus_{x\in \mcx} V^{bcx^*} \tp_{\End(x)} V^{axd} .
\ee
Diagrammatically we have,
\dave{Note to self: make figures match up.}
\begin{align}
\bigoplus_x \TensorProducta \; \cong\;  \bigoplus_x\TensorProductb \; \cong \; \bigoplus_x \TensorProductc \; \cong \; \bigoplus_x \TensorProductd
\end{align}
where the unlabeled trivalent junctions represent the fusion space of the three oriented lines which terminate there.

\bigskip


\kw{What else needs to be said here?}




%%%%%%%%%%%%%%%%%%
\subsection{F-symbols} \label{Fsymbols}
%%%%%%%%%%%%%%%%%%

It follows from \ref{pfi1} and \ref{pfi2} that there is an isomorphism
\be  \label{fdef21}
	F^{abc}_d : \bigoplus_{x\in \mcx} V^{ab}_x \tp_{\End(x)} V^{xc}_d \;\to\; \bigoplus_{y\in \mcx} V^{ay}_d \tp_{\End(y)} V^{bc}_y .
\ee
For the pitchfork version, we instead use \ref{pfpfi1} and \ref{pfpfi2} to obtain
\be  \label{fdef30}
	F^{abcd} : \bigoplus_{x\in \mcx} V^{abx^*} \tp_{\End(x)} V^{xcd}   \;\to\;   \bigoplus_{x\in \mcx} V^{bcx^*} \tp_{\End(x)} V^{axd} .
\ee
%\kw{figs?  or just rely on the figs from the previous subsection?}
%\ethan{I think the following is needed to discuss coherence relation stuff}
The tensor products appearing in the above isomorphisms are unordered tensor products. 
For numerical applications, particular ordered representatives of the tensor products need to be chosen. 
For the $F^{abc}_d$ isomorphism, we will choose the convention that it acts on tensor products of fusion spaces whose ordering increases as one goes up the diagram, 
and that it maps into fusion spaces with the same ordering. That is, with explicit Koszul-ordering we have 
\be \label{Fmove_ordering_conventions}
	F^{abc}_d : \bigoplus_{x\in \mcx} V^{ab}_{x,2} \tp_{\End(x)} V^{xc}_{d,1} \;\to\; \bigoplus_{y\in \mcx} V^{ay}_{d,1} \tp_{\End(y)} V^{bc}_{y,2}.
\ee
\ethan{this is what we use in the hexagon isomorphism, and is also what Gu-Wen do}
Graphically, and written as a matrix equation, we thus have
%\be \label{graphical_Fmove} \mathord{\vcenter{\hbox{\includegraphics[scale=1.1]{Fsymbol_defn.pdf}}}},\ee
%Made it look like other F-symbols (dave)
\begin{align}
 \label{graphical_Fmove} 
\FusionSpaceLeftOrdered =\sum_y \sum_{\sigma \rho}\left( F^{abc}_d \right)_{(x; \mu \nu)(y;\sigma \rho)}   \FusionSpaceRightOrdered
\end{align}
where the greek indices label particular fusion space basis vectors, with $\mu\in V^{ab}_x,\nu\in V^{xc}_d,\alpha\in V^{bc}_y,$ and $\beta\in V^{ay}_d$.
We also stick with the left-to-right ordering convention for the $F^{abcd}$ move:
\dave{Changed order and and $x \ra x^*$.}
\be  
	F^{abcd} : \bigoplus_{x\in \mcx} V^{abx}_1 \tp_{\End(x)} V^{x^*cd}_2   \;\to\;   \bigoplus_{x\in \mcx} V^{axd}_1 \tp_{\End(x)} V^{x^*bc}_2 .
\ee
Which written as a matrix equation is,
\begin{align}
\PitchforkFLeft = \sum_{y} \sum_{\rho \sigma} \left( F^{abcd} \right)_{(x; \mu \nu)(y; \rho \sigma)} \PitchforkFRight
\end{align}


%%%%%%%%%%%%%%%%%%
\subsection{Coherence relations} \label{coherence_ss}
%%%%%%%%%%%%%%%%%%

We will not list all coherence relations here.
Instead we will give a few examples, in order to highlight how the bosonic case
must be changed to take account of Koszul signs.
\kw{and other stuff}

\medskip

We will start with the well-known pentagon equation, in the version that uses the basic fusion spaces $V^{ab}_c$.
If we work in terms of {\it unordered maps}, with \eqref{fdef21} interpreted as an unordered map between direct sums of
unordered tensor products, then the fermionic pentagon equation looks just like the bosonic case, namely
that the following diagram commutes:
\begin{align}
\newcommand{\A}{\bigoplus_{p,q}V^{xy}_{p}\tp_p V^{pz}_{q}  \tp_q V^{qw}_{u}}
\newcommand{\AB}{\ar[rrrru]^{F^{pzw}_u} \ar[rrd]^{F^{xyz}_q}}
\newcommand{\B}{\bigoplus_{p,t} V^{xy}_{p} \tp_p V^{pt}_{u} \tp_t V^{zw}_{t}}
\newcommand{\BC}{\ar[rrrrd]^{F^{xyt}_u}}
\newcommand{\D}{\bigoplus_{r,q}V^{xr}_{q}\tp_r V^{yz}_{r}  \tp_q V^{qw}_{u}}
\newcommand{\DE}{\ar[rrrr]^{F^{xrw}_u} }
\newcommand{\E}{\bigoplus_{s,r}V^{xs}_{u}\tp_s V^{yz}_{r}  \tp_r V^{rw}_{s}}
\newcommand{\EF}{\ar[rru]^{F^{yzw}_s}} 
\newcommand{\F}{\bigoplus_{t,s} V^{xs}_{u} \tp_s V^{yt}_{s} \tp_t V^{zw}_{t}}
\vcenter{\xymatrix @!0 @M=5mm @R=28mm @C=16mm{
&&&&\B\BC&&&&\\
\A\AB&&&&&&&&\F\\
&&\D\DE&&&&\E\EF&&
	}} 
		\label{bosonPentagon}
\end{align}
%\dave{Formatting.}
\begin{comment} 
\begin{align}
\newcommand{\A}{\bigoplus_{p,q}V^{xy}_{p}\tp_p V^{pz}_{q}  \tp_q V^{qw}_{u}}
\newcommand{\AB}{\ar[rrru]^{F^{pzw}_u} \ar[rrd]^{F^{xyz}_q}}
\newcommand{\B}{\bigoplus_{p,t} V^{xy}_{p} \tp_p V^{pt}_{u} \tp_t V^{zw}_{t}}
\newcommand{\BC}{\ar[rrrrd]^{F^{xyt}_u}}
\newcommand{\D}{\bigoplus_{r,q}V^{xr}_{q}\tp_r V^{yz}_{r}  \tp_q V^{qw}_{u}}
\newcommand{\DE}{\ar[rrr]^{F^{xrw}_u} }
\newcommand{\E}{\bigoplus_{s,r}V^{xs}_{u}\tp_s V^{yz}_{r}  \tp_r V^{rw}_{s}}
\newcommand{\EF}{\ar[rru]^{F^{yzw}_s}} 
\newcommand{\F}{\bigoplus_{t,s} V^{xs}_{u} \tp_s V^{yt}_{s} \tp_t V^{zw}_{t}}
\vcenter{\xymatrix @!0 @M=2mm @R=22mm @C=19mm{
&&&\B\BC&&&&\\
\A\AB&&&&&&&\F\\
&&\D\DE&&&\E\EF&&
	}} 
	\label{bosonPentagon}
\end{align}
\end{comment}
where all the sums are over a representative set of simple objects and we have used the notation $\tp_x \equiv \tp_{\text{End}(x)}$.
Technically the modified tensor products $\tp_x$ also appear in the conventional bosonic pentagon equation, although in that 
case we can set $\tp_x = \tp_\cc$ without loss of generality. 

However, if we peer under the hood and look at {\it ordered representatives} (as we need to do if, for example,
we were checking the pentagon equation on a computer), then we
see that a Koszul sign appears, and the commutative diagram becomes hexagonal:
\begin{align}
\newcommand{\A}{\bigoplus_{p,q}V^{xy}_{p,3}\tp_p V^{pz}_{q,2}  \tp_q V^{qw}_{u,1}}
\newcommand{\AB}{\ar[rru]^{F^{pzw}_u} \ar[rrd]^{F^{xyz}_q}}
\newcommand{\B}{\bigoplus_{p,t} V^{xy}_{p,3} \tp_p V^{pt}_{u,1} \tp_t V^{zw}_{t,2}}
\newcommand{\BC}{\ar[rrr]^{F^{xyt}_u}}
\newcommand{\C}{\bigoplus_{t,s} V^{xs}_{u,1} \tp_s V^{yt}_{s,3} \tp_t V^{zw}_{t,2}}
\newcommand{\CF}{\ar[rrd]^{P_{23}}}
\newcommand{\D}{\bigoplus_{r,q}V^{xr}_{q,2}\tp_r V^{yz}_{r,3}  \tp_q V^{qw}_{u,1}}
\newcommand{\DE}{\ar[rrr]^{F^{xrw}_u} }
\newcommand{\E}{\bigoplus_{s,r}V^{xs}_{u,1}\tp_s V^{yz}_{r,3}  \tp_r V^{rw}_{s,2}}
\newcommand{\EF}{\ar[rru]^{F^{yzw}_s}} 
\newcommand{\F}{\bigoplus_{t,s} V^{xs}_{u,1} \tp_s V^{yt}_{s,2} \tp_t V^{zw}_{t,3}}
\vcenter{\xymatrix @!0 @M=2mm @R=22mm @C=19mm{
&&\B \BC &&&\C \CF &&\\
\A \AB &&&&&&&\F \\
&&\D \DE&&&\E \EF&&
	}} 
	\label{endoPentagon}
\end{align}
The Koszul ordering of each tensor product in the diagram is obtained with the help of the conventions in 
\eqref{Fmove_ordering_conventions}. 
In terms of the matrix elements of the $F$-symbols, this reads 
\be  \begin{aligned} \sum_{r\in {\rm sObj}(\mcc)}\sum_{\sigma\in V^{xr}_q}\sum_{\omega \in V^{yz}_r}\sum_{\eta\in V^{rw}_s}& [F^{xyz}_q]_{(p;\mu\nu)(r;\omega\sigma)}[F^{xrw}_u]_{(q;\sigma\lambda)(s;\eta\gamma)}[F^{yzw}_s]_{(r;\beta\eta)(t;\alpha\delta)} \\ & = \sum_{\beta \in V^{pt}_u}(-1)^{|\delta||\alpha|}[F^{pzw}_u]_{(p;\nu\lambda)(t;\alpha\beta)}[F^{xyt}_u]_{(P;\mu\beta)(s;\delta\gamma)}, \end{aligned} \ee
where $\mu\in V^{xy}_p,\nu\in V^{pz}_q,\lambda\in V^{qw}_u,\gamma\in V^{xs}_u,\delta\in V^{yt}_s,$ and $\alpha\in V^{zw}_t$. 
The Koszul sign $P_{23}$ appearing in \eqref{endoPentagon} appears in the above formula as $(-1)^{|\delta||\alpha|}$. 

\ethan{Feel free to delete if desired}
Other coherence relations are modified to take into account Koszul 
signs.
For example, requiring consistency between $F$-moves and the pivot means that the following 
diagram must commute:
\begin{align}
\newcommand{\A}{\bigoplus_x V^{ab}_{x,2} \tp_x V^{xc}_{d,1}}
\newcommand{\B}{\bigoplus_y V^{ay}_{d,1} \tp_y V^{bc}_{y,2} }
\newcommand{\C}{\bigoplus_y V^{dd^*} \tp_{d^*} V^{d^* a}_{y,1} \tp_y V^{yb}_{c^*,2}  \tp_{c^*} V_{c^*c}  }
\newcommand{\D}{\bigoplus_x V^{dd^*} \tp_{d^*} V^{d^*x}_{c^*,2} \tp_x V^{ab}_{x,1}  \tp_{c^*} V_{c^*c} }
\newcommand{\E}{\bigoplus_x V^{ab}_{x,1} \tp_x V^{xc}_{d,2}}
\vcenter{\xymatrix @!0 @M=4mm @R=25mm @C=30mm{
&\A \ar[ld]^{F^{abc}_d}\ar[rr]^{P_{12}} &&\E&\\
\B \ar[rd]^{P^{ay}_{d,1} \tp P^{bc}_{y,2} \circ (\kappa_d  \kappa_y \kappa_c)^{-1}}&&&&\D \ar[ul]^{\kappa_d \kappa_c \circ (P^{d^*x}_{c^*,2})^{-1}} \\
&&\C &\ar[ru]^{F^{d^*ab}_{c^*}}&
	}} 
	\label{pivotconsistent}
\end{align} 

\kw{TO DO: say a little bit (but only a little bit) about other coherence relations}
\dave{Should we add the coherence relation for pivoting?}
\ethan{I think the above ``other relations are modified, for example...''}1



%%%%%%%%%%%%%%%%%%
\subsection{Reflection structure} \label{reflection_ss}
%%%%%%%%%%%%%%%%%%

\kw{TO DO: discuss reflection structures, pin, etc.
probably just give basic defs}
\ethan{Are we wanting to talk about inner products and stuff? I think we can largely just refer to stuff in the line bundle appendix}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Modified tensor product (old version)}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\kw{I think this section can be shortened; I think some of the material already appears far above.}

There is an important subtlety involved when we tensor together fusion spaces which involve q-type particles, which stems from the non-triviality of the fusion space $V^{x\unit}_x$ if $x$ is q-type.
To see where this comes from, suppose $x$ is a q-type particle, and consider the resolution of the identity 
\begin{align} \label{resid}
\Hom(x,x) \cong \bigoplus_y \Hom(x,y) \tp_\cc \Hom(y,x),
\end{align}
where $x$ is any object and the sum runs over simple objects $y$. 
The above relation is actually {\it incorrect} when q-type particles are involved. 
Indeed, if $x$ is simple then \eqref{resid} reads $\Hom(x,x) = \Hom(x,x) \tp_\cc \Hom(x,x).$ 
If $x$ is q-type then $\End(x) = \cl_1$ implies $\cl_1 \cong \cl_1\tp_\cc \cl_1 \cong \cl_2$, which is a contradiction. 
Furthermore, if $x$ is q-type then by iterating we see that the supervector space associated with a vertical $x$ worldline is $\End(x)^{\tp_{\cc} n} \cong \cl_n$ for arbitrarily large $n$, the dimension of which can be made arbitrarily large by increasing $n$. 
Alternatively, we can also observe that the product $V_{\unit,1}^{xx} \tp_\cc V^\unit_{xx,2} \tp_\cc \dots \tp_\cc V_{\unit,n-1}^{xx} \tp_\cc V^\unit_{xx,n}$ is both isotopy-equivalent to $V^{x\unit}_x \cong \cl_1$ and isomorphic to $\cl_n$, which is also a contradiction. 
These results mean that in the present formulation, the sizes of the Hilbert spaces assigned to fusion diagrams are not even well-defined! 

In order to fix these inconsistencies, we need to mod out by ``internal'' degrees of freedom carried by q-type particles when taking tensor products. 
These internal degrees of freedom are encapsulated in the fusion spaces $V^{x\unit}_x, V^{\unit x}_x,$ and $V^{xx}_\unit$, each of which is $\cl_1$ if $x$ is q-type.
Graphically, modding out by these internal degrees of freedom is equivalent to modding out by local relations involving fermions and q-type particles.  
These relations are given by locally sliding fermions along a q-type edge from one fusion vertex to another.
A tensor product between fusion spaces taken over a q-type particle must be quotiented by ``sliding isomorphisms'' like this. 

To perform the modding out procedure described above, we examine the 
equivalence relation 
\begin{align} \label{equivreln}
(V^{ab}_{x,1} f_3) \tp_{\mathbb{C}}V^{xc}_{d,2} \sim V^{ab}_{x,1} \tp_{\mathbb{C}} (f_3 V^{xc}_{d,2})
\end{align}
where $f_3$ is an odd endomorphism of $x$ (as before, the numerical subscripts keep track of the Koszul ordering).
This equivalence relation establishes an equivalence between states that differ by the placement of {\it odd} elements between factors in a tensor product involving q-type particles. 
Since $\cl_1 = \langle1,f\rangle$ and $\End(x) = \cl_1$ if $x$ is q-type, this can be accomplished by using $\End(x)$ as the tensor unit, {\it instead} of $\cc$. 
This means that in order to achieve a self-consistent fermionic theory, we need to replace the tensor product of two fusion spaces linked by the simple object $x$ with a tensor product over $\End(x)$. 
 Explicitly, to construct a fermionic theory, we must make the following replacements:
\be \ba
 &V^{ab}_{x,2} \tp_{\mathbb{C}} V^{xc}_{d,1}\quad  \text{is replaced by} \quad V^{ab}_{x,2} \tp_{\text{End}(x)} V^{xc}_{d,1},\ \  {\rm and} \\ 
  &V^{ax}_{d,1} \tp_{\mathbb{C}} V^{bc}_{x,2}\quad  \text{is replaced by} \quad V^{ax}_{d,1} \tp_{\End(x)} V^{bc}_{x,2},
\ea 
\ee
where $\tp_{\End(x)}$ means that $\End(x)$ is taken to be the tensor unit. Explicitly, 
\begin{align}
V^{ab}_{x,1} \tp_{\text{End}(x)} V^{xc}_{d,2} = V^{ab}_{x,1} \tp_{\mathbb{C}}V^{xc}_{d,2}/ \sim,
\label{qtensor}
\end{align}
where $\sim$ is the equivalence relation \eqref{equivreln}. 
Analogous relations hold for fusion spaces connected in different ways. 

Using the modified tensor product allows us to easily write down the correct version of \eqref{resid}, which is 
\begin{align}
\Hom(x,x) \cong \bigoplus_y \Hom(x,y) \tp_{\End(y)} \Hom(y,x).
\end{align}
In particular, if $x$ is a simple q-type object, then we (correctly) have \be
\cl_1 \cong \Hom(x,x) \cong \Hom(x,x)\tp_{\End(x)} \Hom(x,x) \cong \cl_1\tp_{\cl_1}\cl_1 \cong \cl_1.\ee  

To take the modified tensor product $\End(x)$ when doing calculations or solving consistency equations numerically, we find it easiest to directly impose the condition that physical vectors in the space $V^{ab}_x \tp_{\mathbb{C}} V^{xc}_d$ be left invariant under the action of $\text{End}(x)$. 
There are two types of fusion diagrams we need to consider, depending how the fusion vertices that they are formed from are connected. This leads to two isomorphisms of fusion diagrams:
\begin{align}
&\vcenter{\xymatrix @!0 @M=1mm @C=42mm{
 &L_f: \; \;V^{ab}_{x,2} \tp_{\mathbb{C}} V^{xc}_{d,1} \ar[r]            & V^{ab}_{x,2} \tp_{\mathbb{C}} V^{xc}_{d,1}  \\
		  &\;\;\;\;\;\;\; \ket{\psi}\tp_\mathbb{C} \ket{\eta}  \ar@{|->}[r] & (f\ket{\psi}) \tp_{\mathbb{C}} (f^{-1} \ket{\eta})  
		  }} \quad \quad f \in \text{End}(x)\\
		  \\		  
&		  \vcenter{\xymatrix @!0 @M=1mm @C=42mm{
		  &R_f: \; \;V^{ay}_{d,1} \tp_{\mathbb{C}} V^{bc}_{y,2} \ar[r]            & V^{ay}_{d,1} \tp_{\mathbb{C}} V^{bc}_{y,2} \\
		  &\;\;\;\;\;\;\; \ket{\psi}\tp_\mathbb{C} \ket{\eta}  \ar@{|->}[r] & (f\ket{\psi}) \tp_{\mathbb{C}} (f^{-1} \ket{\eta})
	}}	\quad \quad f \in \text{End}(y)
	\label{DotSlide}
	\end{align}
We note that both $L_f$ and $R_f$ are always {\it even} maps, regardless of the parity of $f$. 

Tensoring over endomorphisms in a fusion space is equivalent to requiring the fusion space to be invariant under the action of $L_f$ and $R_f$. 
Said another way, any vectors related by application of $L_f$ or $R_f$ are considered equivalent, which makes it natural to think of $L_f$ and $R_f$ as gauge transformations, since they encode redundancy in physical vector spaces.

It is often useful to do calculations 
by working with explicit choices of representatives of vectors in each isomorphism class, imposing the requirement that any diagrammatic manipulation commutes with all endomorphisms generated by $L_f$ and $R_f$. 
After doing calculations, we can project back onto the physical subspace by modding out by the equivalence relation \eqref{equivreln}. 
This can be done provided that $L_f$ and $R_f$ commute on any fusion diagram. For example, for a fusion diagram built from three fusion vertices, we require that
\begin{align}
L_{f, 32}L_{g,21} V^{ab}_{x,3} \tp_{\mathbb{C}} V^{xc}_{y,2} \tp_{\mathbb{C}} V^{yd}_{w,1} = L_{g,21} L_{f, 32} V^{ab}_{x,3} \tp_{\mathbb{C}} V^{xc}_{y,2} \tp_{\mathbb{C}} V^{yd}_{w,1} 
\end{align}
for all $f \in \text{End}(x)$ and $g \in \text{End}(y)$. 
From now, when we write $\tp$ we will always mean $\tp_\cc$, unless specified otherwise.




As alluded to earlier, quotienting by the local relations like \eqref{equivreln} is reminiscent of the 
condensation of electron pairs in superconductors: these relations say that pairs of fermions can be freely 
added or removed from the condensate, and that fermions lines terminating on q-type objects (which are 
the Majorana spin structure defects in this analogy) are able to move around freely. 
Indeed, a fermionic phase of matter will generate such terms at second order in perturbation theory when 
proximity coupled to a superconductor.
Thus, heuristically, we can think of q-type particles as the result of proximity induced superconductivity on 
a fusion category with only m-type particles.


%%%%%%%%%%%%%%%%%%
\subsection{F-symbols (old version)}
%%%%%%%%%%%%%%%%%%

The $F$-symbols are defined as basis transformations between different fusion spaces. 
There are two additional considerations when defining the $F$-symbols in the fermionic setting: they must account for the normal-ordering of the fusion spaces that are transformed during the $F$-move, and they must incorporate the modified tensor product introduced in Section \ref{modified_tensor_product}. 

There is some arbitrariness involved in our definition of the $F$-moves. They must be linear 
transformations between two different fusion graphs with four outgoing anyon worldlines, although the 
details of the structure of the graphs they provide a relation between (e.g.\ how many of their outgoing legs 
point up or down) is arbitrary, with the different choices being related by pivotal matrices $P^{ab}_c$ which 
will be defined in the following section. 
Additionally, we must choose how they act on the relative sign-ordering of the fusion spaces involved in 
the $F$-move. We will choose the following convention (standard in the physics literature), in which the $F$-symbols are basis 
transformations between two fusion spaces of the form $V^{ab}_c$.
We will also choose a convention in which the vertical Koszul
of the fusion spaces in any diagram is preserved under $F$-moves: 
\begin{align} \label{Fdef}
F^{abc}_d: \; \; \bigoplus_x V^{ab}_{x,2} \tp_{\text{End}(x)} V^{xc}_{d,1} \rightarrow \bigoplus_y V^{ay}_{d,1} \tp_{\text{End}(y)} V^{bc}_{y,2}
\end{align}
Graphically, this is written in terms of the matrix elements of $F$ as
\be \label{graphical_Fmove} \mathord{\vcenter{\hbox{\includegraphics[scale=1.1]{Fsymbol_defn.pdf}}}},\ee
where the greek indices label particular fusion space basis vectors, with $\mu\in V^{ab}_x,\nu\in V^{xc}_d,\alpha\in V^{bc}_y,$ and $\beta\in V^{ay}_d$.
When we take tensor products of fusion spaces, the fusion spaces appear in the tensor product in the 
same left-to-right order that they appear in the fusion diagram, while the Koszul ordering of the fusion 
spaces to increase as we go ``up'' the diagram. 
This means that the $F$-move permutes the normal ordering of the fusion spaces appearing in the fusion 
diagram, which we will see leads to Koszul-sign modifications of the pentagon relation. 

We stress that the multiplicity indices $\mu,\nu,$ etc. appearing in \eqref{graphical_Fmove} account 
for both regular degeneracies in fusion spaces (as is present in bosonic theories), as well as for 
the parity of the fusion spaces. This means that in fermionic theories, the $\mu$ indices will generically 
run over both even and odd vectors. For example, if one of $a,b,c$ is q-type, then $V^{ab}_c$ is acted 
on naturally by $\cl_1$, and so is of the form $V^{ab}_c\cong \cc^{n|n}$, meaning that a sum over $\mu\in V^{ab}_c$
contains $2n$ different summands.  

To implement the modified tensor products $\tp_{\End(x)}$ and $\tp_{\End(y)}$ in \eqref{Fdef}, we impose 
the condition that the F-symbols commute with the gauge transformations $L,R$ that implement the 
modified tensor product. 
Imposing this condition means that the following diagram must commute:
\begin{align}
	\vcenter{\xymatrix @!0 @M=1mm @R=30mm @C=42mm{
		 \bigoplus_x V^{ab}_{x,2} \otimes V^{xc}_{d,1} \ar[d]^{L_{f}}\ar[r]^{F^{abc}_d}& \bigoplus_y V^{ay}_{d,1} \otimes V^{bc}_{y,2} \ar[d]^{R_{g}} \\
		\bigoplus_x V^{ab}_{x,2} \otimes V^{xc}_{d,1}  \ar[r]^{F^{abc}_d}  & \bigoplus_y V^{ay}_{d,1} \otimes V^{bc}_{y,2}	
	}} 
	{ \quad\quad \forall f \in \oplus_x \text{End}(x), \; \; g \in \oplus_y \text{End}(y)}
	\label{Fcommute}
\end{align}
In matrix form, this is simply $F^{abc}_d  L_f=   R_g F^{abc}_d$.

The pentagon relation in the superfusion case is defined as an equivalence between the same two diagrammatic manipulations as in the bosonic case, and is the statement that the following diagram commutes:
\begin{align}
\newcommand{\A}{\bigoplus_{p,q}V^{xy}_{p,3}\tp_p V^{pz}_{q,2}  \tp_q V^{qw}_{u,1}}
\newcommand{\AB}{\ar[rru]^{F^{pzw}_u} \ar[rrd]^{F^{xyz}_q}}
\newcommand{\B}{\bigoplus_{p,t} V^{xy}_{p,3} \tp_p V^{pt}_{u,1} \tp_t V^{zw}_{t,2}}
\newcommand{\BC}{\ar[rrr]^{F^{xyt}_u}}
\newcommand{\C}{\bigoplus_{t,s} V^{xs}_{u,1} \tp_s V^{yt}_{s,3} \tp_t V^{zw}_{t,2}}
\newcommand{\CF}{\ar[rrd]^{P_{23}}}
\newcommand{\D}{\bigoplus_{r,q}V^{xr}_{q,2}\tp_r V^{yz}_{r,3}  \tp_q V^{qw}_{u,1}}
\newcommand{\DE}{\ar[rrr]^{F^{xrw}_u} }
\newcommand{\E}{\bigoplus_{s,r}V^{xs}_{u,1}\tp_s V^{yz}_{r,3}  \tp_r V^{rw}_{s,2}}
\newcommand{\EF}{\ar[rru]^{F^{yzw}_s}} 
\newcommand{\F}{\bigoplus_{t,s} V^{xs}_{u,1} \tp_s V^{yt}_{s,2} \tp_t V^{zw}_{t,3}}
\vcenter{\xymatrix @!0 @M=2mm @R=22mm @C=19mm{
&&\B \BC &&&\C \CF &&\\
\A \AB &&&&&&&\F \\
&&\D \DE&&&\E \EF&&
	}} 
	\label{endoPentagon}
\end{align}
where we have used the notation $\tp_x \equiv \tp_{\text{End}(x)}$. Note that this is actually a hexagon, 
not a pentagon: the extra arrow is the one marked $P_{23}$, which is the Koszul sign originating from 
switching the Koszul ordering of the $V^{yt}_s$ and $V^{zw}_t$ fusion spaces. 

The use of the modified tensor products $\tp_x$ is how (\ref{endoPentagon}) differs from the ``super-
pentagon" equation which has already appeared in the literature \cite{Gu2015, gaiotto2016, usher2016} 
and which is only applicable to theories that possess no q-type objects 
(note that if our theory has no q-type objects we can set $\tp_x = \tp_\cc$ for all $x$, and so 
\eqref{endoPentagon} reduces to the super-pentagon equation in the case with no q-type particles).
In practice, it is often easiest to first solve the pentagon equation in the ``extended space'' by replacing all 
$\tp_x$ tensor products with $\tp_\cc$ (yielding the super pentagon equation), and then requiring the 
resulting $F$-symbols to satisfy the constraint (\ref{Fcommute}), which is tantamount to implementing the 
modified tensor products.

As a matrix equation, the pentagon relation \eqref{endoPentagon} reads 
\be  \begin{aligned} \sum_{r\in {\rm sObj}(\mcc)}\sum_{\sigma\in V^{xr}_q}\sum_{\omega \in V^{yz}_r}\sum_{\eta\in V^{rw}_s}& [F^{xyz}_q]_{(p;\mu\nu)(r;\omega\sigma)}[F^{xrw}_u]_{(q;\sigma\lambda)(s;\eta\gamma)}[F^{yzw}_s]_{(r;\beta\eta)(t;\alpha\delta)} \\ & = \sum_{\beta \in V^{pt}_u}(-1)^{|\delta||\alpha|}[F^{pzw}_u]_{(p;\nu\lambda)(t;\alpha\beta)}[F^{xyt}_u]_{(P;\mu\beta)(s;\delta\gamma)}, \end{aligned} \ee
where $\mu\in V^{xy}_p,\nu\in V^{pz}_q,\lambda\in V^{qw}_u,\gamma\in V^{xs}_u,\delta\in V^{yt}_s,$ and $\alpha\in V^{zw}_t$. 
The Koszul sign $P_{23}$ appearing in \eqref{endoPentagon} appears in the above formula as $(-1)^{|\delta||\alpha|}$, where as usual $|\delta|$ denotes the parity 
of the vector $\delta$. 


%%%%%%%%%%%%%%%%%%%%
\subsubsection{Pivotal structure (old version)}
%%%%%%%%%%%%%%%%%%%%

Finally, we remark on the pivotal structure of fusion spaces in superfusion categories. First, we have the Frobenius-Schur indicator, which is given by
\begin{align}
&\kappa_a: \;\; V^{a a^*} \tp_{\text{End}(a^*)} V_{a^*a} \rightarrow V^a_a
\end{align}
Diagrammatically, 
\be \mathord{\vcenter{\hbox{\includegraphics[scale=1]{FS_defn.pdf}}}}
 \ee
The Frobenius-Schur move is a special case of the pivot: 
\begin{align}
&P^{ab}_c: \; \; V^{c^* c} \tp_{\End(c)} V^{ab}_c \tp_{\End(b)} V_{b b^*} \rightarrow V^{c^* a}_{b^*} 
\end{align}
Diagrammatically, this looks like 
\be \mathord{\vcenter{\hbox{\includegraphics[scale=1.1]{pivot_defn.pdf}}}}
\ee
In terms of the pivot, we see that $\kappa_a = [P^{0a^*}_{a^*}]_{00}$. From the diagrammatics, we see that the pivot implements a $2\pi/3$ rotation of the fusion space. 
Acting with $P$ three times thus performs a $2\pi$ rotation of a fusion vertex:
\be \mathord{\vcenter{\hbox{\includegraphics[scale=1]{pivot_cubed.pdf}}}}\ee
In bosonic theories, we must always have $P^3=\unit$: rotating a fusion vertex by $2\pi$ is equivalent to doing nothing.
In the superfusion setting there is a more interesting posibility, because acting with $P^3$ on some vector $v\in V^{ab}_c$ performs a $2\pi$ rotation on the fermion framing of $v$.
Rotating the fermion framing is equivalent to multiplication by $-1$ if $v$ has odd fermion parity. 

Therefore, in superfusion categories, the pivotal structure relation $P^3=\unit$ is realized {\it projectively}, in the sense that 
\be P^3 = (-1)^F \unit,\ee
where $(-1)^F$ is the fermion parity operator, which acts on any $v\in V^{abc}$ as $(-1)^F v = (-1)^{|v|}v$.

We now discuss the relationship between the $F$-symbols and the pivotal structure. 
The pivots can be obtained from the quantum dimensions and the $F$-symbols through 
\be [P^{ab}_c]_{\mu\nu} = \sum_\lambda d_b [F^{abb^*}_a]_{(c;\mu\lambda)(0;00)} [F^{c^* c b^*}_{b^*}]_{(0;00)(a;\lambda\nu)}.\ee
Additionally, consistency between the pivotal structure and $F$-moves requires that the following diagram commute: 
\begin{align}
\newcommand{\A}{\bigoplus_x V^{ab}_{x,2} \tp_x V^{xc}_{d,1}}
\newcommand{\B}{\bigoplus_y V^{ay}_{d,1} \tp_y V^{bc}_{y,2} }
\newcommand{\C}{\bigoplus_y V^{dd^*} \tp_{d^*} V^{d^* a}_{y,1} \tp_y V^{yb}_{c^*,2}  \tp_{c^*} V_{c^*c}  }
\newcommand{\D}{\bigoplus_x V^{dd^*} \tp_{d^*} V^{d^*x}_{c^*,2} \tp_x V^{ab}_{x,1}  \tp_{c^*} V_{c^*c} }
\newcommand{\E}{\bigoplus_x V^{ab}_{x,1} \tp_x V^{xc}_{d,2}}
\vcenter{\xymatrix @!0 @M=4mm @R=25mm @C=30mm{
&\A \ar[ld]^{F^{abc}_d}\ar[rr]^{P_{12}} &&\E&\\
\B \ar[rd]^{P^{ay}_{d,1} \tp P^{bc}_{y,2} \circ (\kappa_d  \kappa_y \kappa_c)^{-1}}&&&&\D \ar[ul]^{\kappa_d \kappa_c \circ (P^{d^*x}_{c^*,2})^{-1}} \\
&&\C &\ar[ru]^{F^{d^*ab}_{c^*}}&
	}} 
	\label{pivotconsistent}
\end{align} 

The final pivotal data we will need to employ concerns sliding fermions along q-type strings. 
Define 
\begin{align}
\TwodotCap =  \lambda_{\text{cap}} \; \Qcap \quad \quad
\TwodotCup =  \lambda_{\text{cup}}\; \Qcup \quad \quad
\Qdotdot =  \lambda \; \QIdentity,
\end{align}
where the black lines denote arbitrary string-net configurations on which the q-type strings terminate.
With these definitions one can show that
\begin{align}
\QCapDotL =(-\lambda_{\text{cap}}^{-1} \lambda )\; \QCapDotR \qquad \qquad \QCapDotR  = (\lambda_{\text{cap}}^{-1} \lambda ) \; \QCapDotL\\ 
\\
\QCupDotR= (-\lambda_{\text{cup}}^{-1} \lambda )\; \QCupDotL \qquad \qquad \QCupDotL  = (\lambda_{\text{cup}}^{-1} \lambda) \; \QCupDotR
\end{align}
Sliding a fermion counterclockwise under a cup and then sliding it back must be equivalent to doing nothing, so that we have $\lambda^2 = -\lambda_{\text{cap}}^2$ and $\lambda^2 = -\lambda_{\text{cup}}^2$.
Additionally, when a fermion travels around a closed loop of q-type string which bounds a disk it must pick up a minus sign (from the bounding spin structure the loop inherits). 
Therefore we also have $\lambda^2 = -\lambda_{\text{cap}} \lambda_{\text{cup}}$.
Together, these relations imply that $\lambda_{\text{cup}} = \lambda_{\text{cap}}$, and $(-\lambda_{\text{cap}} \lambda)^2 = -1$, allowing us to  
conclude that the phase produced by a dot slide must be purely imaginary (recall that 
$\lambda$ is fixed to be purely imaginary by the discussion in Appendix \ref{fermion_line_bundle}). 
For example, in the $C_2$ theory considered earlier, we have $\lambda = A^4 = \pm i$ and $\lambda_{\rm cap}=A^8=-1$. 


%%%%%%%%%%%%%%%%%%%%%
 \section{Super pivotal Hamiltonian}
 \label{Super_pivotal_Hamiltonian}
 %%%%%%%%%%%%%%%%%%%%

In this section we will write down a commuting projector Hamiltonian 
for a generic fermionic topological phase. 
Since our goal in this section is to be rather general, we will put a fair amount of effort into making our construction mathematically precise---readers who are only interested in the final result may skip to \ref{terms_in_Hamiltonian}. 

 \begin{figure}
\begin{center}
  \includegraphics{sample_lattice.pdf}
 \caption{A cartoon of the support of the operators appearing in a super pivotal Hamiltonian on a section of a generic graph. 
The motivation for the bizarre-looking vertices is explained in Section \ref{standardized_handles}.
Dashed ellipses indicate the support of various terms in the Hamiltonian, on edges $e,e'$ and a plaquette $p$.
The vertex terms $A_e$ act on edges and project onto states with edge colorings that are consistent between adjacent vertices. 
The edge terms $D_e$ are responsible for sliding fermions along q-type edges. 
The plaquette terms $B_p$ involve all of the vertices and edges neighboring $p$.
They project onto graph configurations that contain no quasiparticles within the plaquette $p$.}
 \label{example_lattice}
 \end{center}
 \end{figure}

We will follow the same basic construction as in \cite{levin2005}, with modifications to take into account 
the fermionic nature of the phases under consideration. 
The most important modifications are as follows:
First, we will need to fix a spin structure on the manifold on which we are working.
This spin structure affects the details of the local projections which constitute the Hamiltonian, and is a necessary feature of any fermionic lattice model.
Additionally, we will need to allow the local degrees of freedom that constitute the 
Hilbert space for our lattice model to be super vector spaces, rather than the regular vector spaces in bosonic models. 
Finally, we will need to add a new term in the Hamiltonian with support on the edges and pairs of neighboring vertices in the lattice that allows fermions to fluctuate across edges 
that host q-type strings.

To begin the construction of the lattice model, we will thus need the following data:
\begin{enumerate}
\item a super pivotal fusion category ${\cal C}$,
\item an oriented spin surface $\Sigma$ 
\item and a graph $\mcg$ embedded in $\Sigma$ (more precisely, a cell decomposition of $\Sigma$) which inherits information about the spin structure.
\end{enumerate}
In the following subsections we define the Hamiltonian explicitly in terms of the above data.
%\kw{I think we should consider not using ``lattice", or at least being more careful with how we use it.
%For a mathematician, a lattice is a translationally-invariant structure on $\mathbb R^n$.}
%\ethan{Ah, good point. ``string-net graph''? ``Cell decomposition'' is also fine (I avoided this at first since most physicists won't have heard it before, but I don't think that matters too much).}
%\dave{I'm fine with not using lattice.
%I like the sound of ``string-net graph" but this may be a little confusing since it mixes the vector space with the lattice (which of course are related).
%I would also be fine with saying ``spin-graph", or ``super-graph", or ``super-spin-graph".
%Probably just ``graph" would do fine.
%}
%We will explicitly write out the Hamiltonian for the example of the honeycomb lattice shown in Fig.~\ref{example_lattice}, although much of what we say holds more generally.

We will write a frustration-free Hamiltonian as a sum of local projectors, which fall into
three classes.
Two of these classes of projector are the fermionic analogues of the plaquette and vertex terms from the usual string-net Hamiltonian, 
while the third is an edge term which allows fermions to fluctuate across edges hosting q-type strings.
The Hamiltonian takes the form
\begin{align} \label{ham}
H = \lambda_p \sum_{p \in P} (1-B_p) + \lambda_e \sum_{e \in E} (1-D_e) + \lambda_v \sum_{v \in V} (1-A_v),
\end{align}
where the sums are over the plaquettes $P$, edges $E$, and vertices $V$ of the graph, respectively, and the $\lambda_p,\lambda_e,\lambda_v$ are positive constants.
%We require a hierarchy in the couplings, $\lambda_p \ll \lambda_e \ll \lambda_v$,
%which ensures that the low energy spectrum can be characterized by simple objects in $\mcz(\mathcal{C})$.
%If we want the excitations to be in correspondence with the primitive idempotents of the tube algebra, then w
As in the bosonic case, we require a hierarchy in the couplings of $\lambda_v \gg \lambda_e \gg \lambda_p$\footnote{This makes the low energy spectrum consist purely of ``flux" excitations: 
the ``charged" idempotents always violate both the plaquette and vertex term, which with this hierarchy of coefficients costs a large amount of energy. 
One way to put charge and flux excitations on an energetically more equal footing is to add ``tails'' to each 
plaquette that host the charge degrees of freedom, as in \cite{hu2015}.}.
%\dave{This makes the low energy spectrum purely ``flux" excitations. 
%The ``charged" idempotents always violate both the plaquette and vertex term, which with this hiearchy costs a lot of energy. 
%We could mention in a footnote that if this bothers the reader then the the plaquette term can be modified by $B_p \rightarrow B_p \prod_{v \in p} A_v$ or make the model an actual commuting projector Hamiltonian by taking $B_p \rightarrow B_p \prod_{e \in p} D_e \prod_{v \in p} A_v$, and $D_e \rightarrow D_e \prod_{v \in e} A_v$. }
%\kw{This is an issue for the usual bosonic LW Hamiltonian too.
%Is there anything we can refer to for the bosonic case?}
%\dave{Perhaps this one \cite{hu2015}. 
%It looks like they circumvent the problem by adding an extra leg to the vertices to accomadate the flux+charge excitations.
%Ethan are you familiar with that paper? Or do you know if there are other appropriate references.}
%\kw{We should add a remark along the lines of Dave's suggestion.}
This is because the operators appearing in the plaquette terms are not well-defined unless the edge term energies are minimized, and in turn the terms appearing in the edge operators are not well-defined unless the vertex term energies are minimized.
Thus, the projectors associated with $k$-handles are only defined on the ground states of the projectors associated with $l$-handles, for all $l<k$.  
%\kw{maybe insert a caveat about later projectors only being defined on the ground state of earlier projectors}
%\ethan{I had a comment along these lines at a later point; moved it here instead}
%\dave{I changed ``commuting projector" to ``frustration free" above. 
%We should elaborate that when the vertex end edge terms the Hamiltonian is a commuting projector model.}
In Fig.~\ref{example_lattice} we illustrate the support of each operator appearing in the Hamiltonian with dashed circles, where we have drawn a section of the graph $\mcg$ embedded in the plane for the sake of visualization. 
For simplicity, we will assume that all vertices in $\mcg$ are trivalent\footnote{Any surface possesses a cell decomposition with trivalent vertices.
Such cell decompositions are Poincar\'e dual to triangulations.}.




%%%%%%%%%%%%%%%
\subsection{Hilbert space} \label{hilbertspacesect}
%%%%%%%%%%%%%%%

We will locate all all degrees of freedom (spins) at the vertices of the graph $\mcg$, so
the big Hilbert space on which the Hamiltonian is defined is
\begin{align}	\label{GraphHilbertSpace}
 \mch_\mcg =\bigotimes_{v \in \mcv} \mch_v  = \mch_{v_1} \tp \mch_{v_{2}} \tp \dots \tp \mch_{v_n} .
\end{align}
The tensor products above are supercommutative, in the sense that for $\psi\in \mch_{v_i},\eta\in \mch_{v_{i+1}}$, $\psi \tp \eta = (-1)^{|\psi||\eta|}\eta\tp\psi \in \mch_{v_{i+1}} \tp \mch_{v_i}$. 

The vertex Hilbert spaces $\mch_{v_n}$ will depend on three sets of choices.
First, we must choose an orientation of each edge of $\mcg$.
This is because of the possibility of non-trivial Frobenius-Schur indicators; see below.
Second, we must choose an ordering of the edges incident to each vertex, consistent with with the intrinsic cyclic ordering of those edges
coming from the embedding of $\mcg$ in the oriented surface
(so if the vertex is $r$-valent, there are $r$ possible orderings).

In order to make the choice of cyclic ordering manifest in diagrams, and in order to simplify spin-structure-related
aspects of our construction, we will choose to draw our graphs in a way such that all of the outgoing 
edges at each trivalent vertex are ``on the same footing''. This is in contrast to the conventions in the physics literature
and in the earlier sections of this paper, where vertices are drawn with one ``incoming'' edges and two 
``outgoing'' edges, since in this convention the incoming edge is distinguished from the two outgoing edges.
We will choose a convention in which all three edges at each trivalent vertex are outgoing: with this
choice, each vertex resembles a pitchfork. 
The cyclic ordering of the edges at a given vertex is determined by the left-to-right ordering of the pitchfork legs. 

Finally, we must choose a spin framing at each vertex, consistent with the ``pitchforkization'' convention.
The pitchforkization and spin framing are needed in order to define an unambiguous
isomorphism between string nets near $v$ is standard vector spaces $V^{abc}$.
Without this standardization, the local Hilbert spaces would be ambiguous up to automorphisms. 
The standardization procedure is nothing more than fixing a convenient choice of gauge in the way we present our fusion diagrams. 

If all the edges incident to a vertex $v$ point out of the vertex, we define the vertex Hilbert space at $v$ by 
\be
	\mch_v = \bigoplus_{a,b,c} V^{abc}  \quad\quad\quad\quad\quad\quad \PitchFork{a}{b}{c}{},
	\label{pitchfork_basis}
\ee
where the sum is over the simple objects of $\mcc$\footnote{We choose our favorite complete set of simple objects at the outset and keep it fixed throughout.}.
If the first edge points in and the other two point out, then we define
\be
	\mch_v = \bigoplus_{a,b,c} V^{a^*bc}  \quad\quad\quad\quad\quad\quad \PitchForkas{a}{b}{c}{} =  \PitchFork{a^*}{b}{c}{},
\ee
and so on for all eight possible patterns of in/out of the three incident edges.

\medskip

This completes the definition on the big Hilbert space for the Hamiltonian.
Impatient readers should now skip to the next subsection, but readers who are puzzled by some of the choices we made above 
are encouraged to read on.

\medskip

Why are there no spins on edges, as in the original Levin-Wen Hamiltonian?
Levin and Wen explicitly assume that $V^{abc}$ is at most 1-dimensional.
This is true for theories based on Temperley-Lieb or $Rep_q(sl_2)$, but it is not true in general,
so we need to add spins on vertices.
But each basis vector in $\bigoplus_{a,b,c} V^{abc}$ ``knows" the labels on the adjacent edges, so once we have these vertex degrees of
freedom the edge degrees of freedom become redundant and can be eliminated\footnote{An argument in favor of edge degrees of freedom is that they can lead to smaller local Hilbert spaces, at least for simple theories.
For example, one can write a Hamiltonian for the $C_2$ theory which has a $(2|0)$-dimensional Hilbert space at each edge
and a $(1|1)$-dimensional Hilbert space at each vertex.
The general Hamiltonian we are now discussing, specialized to the $C_2$ theory, 
would assign a $(4|3)$-dimensional Hilbert space to each vertex (but no Hilbert spaces for edges).}.

Why must we choose an orientation of each edge?
The short answer: because of the possibility of non-trivial Frobenius-Schur indicators.
Now for the longer answer.
If the edges are not oriented, then we would assign vertex Hilbert spaces as above, but with all edges point out at each vertex.
This means that each edge sees two inward pointing edges.
\begin{align}
\PitchForkWithEdge
\end{align}
If the two labels coming from the two adjacent vertices are $a$ and $b$
(which we will assume are both m-type, for simplicity), then the
associated vector space for the edge is $V_{ab}$, which is 0-dimensional unless $a \cong b^*$.
If $a$ is not self-dual, or if $a$ is evenly self-dual with FS indicator 1, then there is a canonical identification of $V_{ab}$ with 
$\cc = \cc^{1|0}$ and we can ignore it.

But if $a$ is evenly self-dual with FS indicator $-1$, then there is a sign ambiguity in identifying $V_{aa}$ with $\cc$, and we will have to
keep careful track of this sign when defining the Hamiltonian.
Even worse, if $a$ is {\it oddly} self-dual (and $a$ is m-type), with FS indicator $\pm i$ (as occurs in the $\halfesix$ theory studied earlier), then $V_{aa}$ is an odd vector space, 
non-canonically isomorphic to $\cc^{0|1}$.
Keeping track of these odd vector spaces would entail even more bookkeeping.

Overall, we think the least annoying solution to the above problems is to orient each edge of the graph.
This allows us to treat $a$ and $a^*$ as distinct objects, even when they happen to be isomorphic.
Now, instead of $V_{aa}$, we have $V_{aa^*} \cong \End(a)$, which has a canonical element $id: a\to a$.

Why the pitchforks? As alluded to earlier, rotations by $2\pi/3$ can act non-trivially on $V^{aaa}$, and so it is helpful to choose a vertex configuration where every outgoing edge is placed on the same footing. 
This is true even in the bosonic case.

Why the spin framings?
Because $V^{abc}$ has a spin-flip automorphism, and also because we need to 
enhance the graph $\mcg$ with information related to the spin structure of the ambient manifold 
in order to write the edge terms, as explained below.










%%%%%%%%%%%%%



%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%



%%%%%%%%%%%%%%%%%%
\subsection{Spin structure considerations and the standardization of the graph} \label{standardized_handles}
%%%%%%%%%%%%%%%%%%


To derive the Hamiltonian \eqref{ham} and explain the nature of the $B_p$, $D_e$, and $A_v$ operators, we will first need to describe how the graph inherits spin structure data from the ambient spin manifold on which it is defined. 

Recall that we have a graph $\mcg$ embedded in an orientable spin surface $\Sigma$.
In order to define the super pivotal Hamiltonian we will need to equip $\mcg$ with information about the spin structure $\sigma$. 
In order to talk about the spin structure data at the vertices and edges of $\mcg$, we will thicken the cell decomposition to a handle decomposition of $\Sigma$.
A handle decomposition is essentially a fattened version of a graph; see Fig.~\ref{HandleDecomposition} for an illustration.
\begin{figure}
  \includegraphics{HandleDecomposition.pdf}
  \caption{A handle decomposition obtained from the graph on the far left.
  The $0$ handles (green disks) are neighborhoods of the vertices, the $1$-handles (purple strips) are neighborhoods of the edges, and the $2$ handles (orange polygons) which are the compliment of the union of the $0$- and $1$-handles.}
  \label{HandleDecomposition}
\end{figure}
The handle decomposition can be obtained by expanding each vertex of the graph into a disk ($0$-handle) and each edge into
a thickened strip (1-handle).
The remaining faces constitute the $2$-handles, which are homeomorphic to disks.

Recall from Subsection \ref{hilbertspacesect} that 
in order to define the local vertex degrees of freedom we choose an orientation for each edge, a ``pitchforkization" for each vertex, and a spin framing at each vertex.
These choices are analogous to choosing a gauge -- different choices lead to isomorphic Hamiltonians and ground states.


The choices of pitchforkization and spin framing are equivalent to choosing a spin diffeomorphism from a 0-handle to a standard model for a 0-handle.
We define a spin diffeomorphism $\varphi_v$ from a generic 0-handle $v$ to a disk in $\rr^2$ with its standard spin structure, so that the attaching regions for the 1-handles terminating on $v$ are all located on the top part of the disk\footnote{Note that there is a large degree of gauge freedom in this construction, realized by performing $2\pi$ rotations of the fermion framing (spin flips) on the spin diffeomorphisms $\varphi_v$.}. 
That is, we use the spin diffeomorphisms to turn each 0-handle into a ``standardized 0-handle'', where the configuration of the 1-handles terminating on each 0-handle means that that each 0-handle looks like a pitchfork.
The spin diffeomorphism $\varphi_v$ that maps a generic 0-cell $v$ to a standardized 0-cell (thereby implementing the pitchforkization procedure) is defined pictorially by
\dave{Will add `directions' to each edge.}
\begin{align} \label{std0handle}
\xymatrix @!0 @M=1mm @R=14mm @C=35mm{
 \varphi_v: \; \; D_v\ar[r]            & D(n) \\
\;\;\;\;\;\;\; \Dv \ar@{|->}[r] & \Dfv
	} 
\end{align} 
where $n$ is the number of edges which terminate at $v$ and the black arrow in the picture on the right hand side denotes the fermion framing of the 0-handle, which is constant throughout the 0-handle.  
When writing down the Hamiltonian we always take $n=3$ without loss of generality, but when discussing tensor network constructions of these phases it is helpful to let $n$ be unspecified. 
Using the pitchforkization map $\varphi_v$ 
we can pull back the standard spin framing of $\rr^2$ to the 0-handle.
This results in a spin framing which is parallel to the outgoing edges at the top of the 0-handle. 

\begin{figure}\centering{
  \includegraphics{SpinIsomorphisms.pdf}}
  \caption{The mapping $\varphi$ that maps a generic handle decomposition (top row) onto a ``standardized'' handle decomposition in which each 0-handle (green disk) has an identical pitchfork configuration (bottom row).
    }
  \label{SpinIsomorphisms}
\end{figure}

Just as we do for the 0-handles, we will ``standardize'' the 1-handles so that they all assume the same form. 
After standardizing our 0-handles, 1-handles will always enter/exit from a 0-handle ``vertically'' (see Figure \ref{SpinIsomorphisms}), 
and so our standardized 1-handles will look like 
\begin{align}
\Horseshoe
\end{align}

For theories with q-type particles, the Hamiltonian will contain terms that allow fermions to fluctuate across a 1-handle from vertex to vertex. 
The spin structure on a 1-handle (relative to the two attaching intervals) will determine what phase factor a fermion picks up when it moves across a 1-handle. 

\begin{figure}
\begin{center}
\includegraphics{framing_rotation.pdf}
\end{center}
\caption{\label{framing_rot} Parallel-transporting a fermion along a q-type edge, which is oriented as shown. 
The red arrow keeps track of the fermion framing, which rotates by $\pi$ when proceeding along the direction of the edge's orientation.
The blue arrows at the ends of the edge indicate the fixed framing at each 0-handle at the endpoints of the edge. 
}
  \label{framing_rotation}
\end{figure}

Once we have chosen coordinates at each vertex, we can associate a spin rotation of $+\pi$ or
$-\pi$ to each 1-handle.
First, we choose a standard spin framing at the incoming side (remember that each edge is directed) of the 1-handle.
A standard choice exists because we have chosen a standard spin framing for the 0-handle at the incoming end of the 1-handle. 
We then parallel transport the spin framing along the 1-handle, keeping the first basis vector of the spin framing tangent to 
the core of
the 1-handle during the transporting process.
This procedure is illustrated in Figure \ref{framing_rotation}, where the red arrow denotes the first basis vector of the spin framing. 
When we arrive at the end of the 1-handle, the spin framing we have transported will not agree with the standardized spin framing at the second 0-handle. 
We can see this from Figure \ref{framing_rotation}; we have chosen the spin framing to point upwards at each 0-handle, but the red arrow points downward when it reaches the end of the 1-handle, which disagrees with the framing at the 0-handle. 
These two framings are related by either a $+\pi$ or $-\pi$ spin rotation in $Spin(2)$.
\begin{figure}
\begin{center}
\includegraphics{alphae_defn.pdf}
\caption{\label{alphae_defn} The action of sliding a fermion across an edge $e$ labeled by the q-type object $b$ is given by $\alpha(e,b)$. 
The spin framings of the 0-handles on either end of $e$ are denoted by the blue arrows, 
and  the spin framing of the fermion on the right hand side is taken to match that of the left 0-handle. }
\end{center}
\end{figure}
We will denote this element of $Spin(2)$ by $\alpha(e)$, where $e$ is the edge corresponding to the 1-handle.

Note that the collection $\{\alpha(e)\}$ is determined by the the spin structure of $\Sigma$ and
the choice of spin framings at each 0-handle.
Conversely, any collection $\{\alpha(e)\}$ determines a spin structure on $\Sigma\setminus\{\mbox{2-handles}\}$.
In order for this spin structure to extend to all of $\Sigma$, $\{\alpha(e)\}$ must satisfy the constraint that the 
boundary of each 2-handle has a bounding spin structure; see below.

Let $b$ be a q-type simple object.
We want to analyze the effect of sliding a fermionic dot over the edge $e$ when $e$ is labeled by $b$.
At the outset, we will choose an odd element $\gamma_b\in\End(b)$ such that $\gamma_b^2 = \id_b$, and also
$\gamma_{b^*}\in\End(b^*)$ such that $\gamma_{b^*}^2 = \id_{b^*}$.
The requirement that $\gamma_b^2 = \id_b$ determines $\gamma_b$ up to sign.
Let $r(b)\in\cc$ be such that $R_\pi\cdot\gamma_b = r(b)\gamma_{b^*}$, where
\be
	R_\pi : \End(b) \to \End(b^*)
\ee
denotes the spin rotation by $+\pi$.
It is easy to see that $r(b) = \pm i$.
The exact value will depend on the choices of standard generators $\gamma_b$ and $\gamma_{b^*}$.
If $b$ is not isomorphic to $b^*$, then we can always choose $\gamma_b$ and $\gamma_{b^*}$ so that $r(b) = i$.
But if $b = b^*$ (as happens in the $C_2$ theory, for example), then $\gamma_b = \gamma_{b^*}$ and the value of $r(b)$
is forced upon us, independent of the choice of $\gamma_b$.\footnote{
The condition that $b$ is equal to, rather than merely isomorphic to, $b^*$ is in some sense pathological.
But for theories build out of unoriented strands, like $C_2$, it is convenient to allow this pathology.}

We can now, finally, describe the effect of sliding a standard fermionic endomorphism (dot) over an edge $e$ labeled by 
a q-type particle $b$.
Let $\gamma_b * e$ denote the edge with the standard generator $\gamma_b$ placed at the incoming end (left side of Figure \ref{alphae_defn}).
Let $e* \gamma_{b^*}$ denote the edge with the standard generator $\gamma_{b^*}$ placed at the outgoing end (right side of Figure \ref{alphae_defn}).
Then
\be
	\gamma_b * e = \alpha(e, b) \cdot e* \gamma_{b^*} ,
	\label{fermion_slide}
\ee
where
\be
	\alpha(e, b) =  \left\{   \begin{array}{ll}  
		r(b) & \mbox{if $\alpha(e) = R_\pi$} \\
		-r(b) & \mbox{if $\alpha(e) = R_{-\pi}$} \\
	\end{array}  \right. .
\ee
This is illustrated in Figure \ref{alphae_defn}.

\kw{should probably move definition of $\Gamma$ to definition section} 
\ethan{we already kinda do with our discussion of displacing dots onto edges. maybe I can try to just expand that discussion}
Fermionic dots can also be ``absorbed'' into vertices, as discussed in Section \eqref{fusion_spaces}. 
We can do this with operators $\Gamma_i$, $i\in \{1,2,3\}$, which absorb a pitchfork with a standard dot ($\gamma_b$)
on the $i$-th outgoing pitchfork edge to a pitchfork without a fermion dot on a leg. 
Graphically, $\Gamma_1$ is defined by 
\be \label{gamma1_defn}
\mathord{\vcenter{\hbox{\includegraphics[scale=1]{Gamma1def.pdf}}}},\ee
where $\psi,\eta$ are basis vectors in the fusion space of the pitchfork for a fixed coloring of the pitchfork's outgoing legs. 
$\Gamma_2$ and $\Gamma_3$ are defined similarly,
\be \label{gamma2gamma3_defn}
\mathord{\vcenter{\hbox{\includegraphics[scale=1]{Gamma2def.pdf}}}},\quad
\mathord{\vcenter{\hbox{\includegraphics[scale=1]{Gamma3def.pdf}}}},\quad
	\ee
Since only q-type particles can host fermionic dots, we set $\Gamma_i=0$ unless the $i$th leg is colored by a q-type object. 
The $\Gamma_i$ are all odd matrices, meaning that they act as $\sigma^x$ on the fermion parity grading.
For more complicated theories, they will also act nontrivially on the multiplicity degrees of freedom by the action of 
some unitary matrix (e.g.\ equation \ref{esixdotslide} for the $\halfesix$ theory). 

The matrix elements of the $\Gamma_i$ matrices for a fixed coloring 
of the legs of a given vertex can be written in terms of evaluated diagrams 
by using the inner product \eqref{reflection_pairing_defn} on pitchforks, which allows us to evaluate 
vectors in $V^{abc} \tp V^{c^*b^*a^*}$.
Denoting the dual of a vector $\psi\in V^{abc}$ by $\psi^*$ so that 
$\mcb(\eta\tp\psi^*)\propto\delta_{\eta,\psi}$, we can write 
\be \mathord{\vcenter{\hbox{\includegraphics[scale=1]{gamma1_matrix_elements.pdf}}}}, \ee
and similarly for $\Gamma_2$ and $\Gamma_3$. 

It is easy to check that when they are non-zero (i.e.\ when they act on q-type edges), the $\Gamma_i$ operators obey the anti-commutation relations 
\be \{ \Gamma_i , \Gamma_j \} = 2\lambda \delta_{ij},\ee
which are the defining relations for the representations of complex Clifford algebras, and where as before, $\lambda=\pm i$ is the phase picked up when removing a pair of dots from a q-type object worldline. 


\medskip

\begin{figure}
\begin{center}
\includegraphics{spin_rot_through_0handle.pdf}
\caption{ \label{spin_rot_through_0handle} An illustration of a $+\pi$ spin framing rotation picked up as the path $\gamma$ (drawn in dashed purple) passes through a 0-handle. 
If we were to proceed along $\gamma$ in the opposite direction, we would pick up a $-\pi$ spin framing rotation instead.   }
\end{center}
\end{figure}

We mentioned above that the collection of $\{\alpha(e)\}$ must satisfy some constraints if it is 
to extend over the 2-cells and give a specified spin structure.
Here are the details:
let $\gamma$ be an oriented framed loop in $\Sigma$.
For simplicity, we will assume that (a) $\gamma$ is embedded, (b) the framing is the natural one coming from the tangent 
space of $\gamma$, and (c) $\gamma$ is contained in the union of the 0- and 1-handles.
We want to compute the spin rotation, either 0 or $2\pi$, which $\gamma$ picks up from the spin structure on the 0- and 1-handles.
When $\gamma$ goes over a 1-handle $e$, it picks up a rotation of $\alpha(e)$ or $-\alpha(e)$, depending on whether it goes over $e$
with or against the orientation of $e$.
Each time $\gamma$ passes though a 0-handle, it also picks up a rotation of $\pm\pi$.
Suppose $\gamma$ enters the 0-handle at the $i$-th 1-handle and exits the 0-handle at the $j$-th 1-handle\footnote{Note that $i$ and $j$ refer to the ordering of 1-handle attachments local to the 0-handle, not to some global ordering. The $i$ and $j$ are assigned in the same way as the $\Gamma_i$ and $\Gamma_j$ in \eqref{gamma1_defn} and \eqref{gamma2gamma3_defn}.}.
With our ordering conventions, this gives a rotation of $+\pi$ if $i<j$ and a rotation of $-\pi$ if $i > j$ (see Figure \ref{spin_rot_through_0handle}).
Combining all of these $\pm\pi$ rotations results in a rotation of 0 or $2\pi$.
A bounding spin structure on $\gamma$ yields a $2\pi$ rotation (since a $2\pi$ rotation acts as 
multiplication by $-1$ and produces the requisite anti-periodic boundary conditions), and a non-bounding 
spin structure corresponds to no rotation.
In particular, if $\gamma$ is the boundary of a single 2-cell/plaquette, then it must correspond to a spin 
framing rotation of $2\pi$, since we assume that the spin structure around each 2-cell is bounding (which 
allows the spin structure on the 0- and 1-handles extends to a spin structure on all of $\Sigma$). 
More generally, $\gamma$ will always get a spin framing rotation by $2\pi$ if it is in the trivial homology 
class of $H_1(\Sigma)$.



\medskip



%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%
\subsection{Terms in the Hamiltonian} \label{terms_in_Hamiltonian}
%%%%%%%%%%%%%%%%%%%%%

In this section we will finally write down the Hamiltonian, and then explain the terms appearing in it in detail. 
As mentioned earlier, the Hamiltonian consists of three kinds of mutually commuting projections:
\begin{align}
H = \lambda_p \sum_{p \in \mathcal{F}} (1-B_p)  + \lambda_e \sum_{e \in E} (1-D_e) + \lambda_v \sum_{v \in V} (1-A_v)
\end{align}
We'll start with the familiar vertex term and then address the new edge term, 
and end with the modifications needed for the plaquette term.




%%%%%%%%%%%%%%%%
\subsubsection{Vertex term}   \label{VertexHamiltonian}
%%%%%%%%%%%%%%%%

Let $v_1$ and $v_2$ be two vertices joined by an edge $e$.
We define
\begin{align}
A_e(\ket{\psi_1} \otimes \ket{\psi_2}) = 
\left\{
                \begin{array}{ll}
                   \ket{\psi_1} \otimes \ket{\psi_2} & \text{if $\psi_1$ and $\psi_2$ assign the same label to $e$} \\
                  0 & \text{otherwise}
                \end{array}
              \right.
\end{align}
In other words, $A_e$ forces the labels on each end of an edge to agree.

Why do we call these ``vertex terms" when they are indexed by edges, and the support is a pair of adjacent vertices, joined by an edge?
Because it does the same work as the vertex term of the usual bosonic LW Hamiltonian.
If our fermionic category happens to be bosonic (i.e.\ it lacks fermions), then the ground state of our ``vertex" term is isomorphic to the ground state
of the vertex term in the usual LW Hamiltonian\footnote{Note that the ``admissibility'' condition that requires $V^{abc}$ to be in the ground state vector space only if $\unit\in a\tp b \tp c$ is already satisfied for us, since our local Hilbert spaces at the vertices already have this condition built in.}
If we had chosen to put spins on edges as well as vertices, then we could write a vertex term that was actually indexed by vertices.
But its ground state would be isomorphic to the above edge-like vertex term.

Note that vectors in the ground state of the vertex term can be interpreted as string nets.
If $K$ is the ground state of the vertex term, we have maps
\be
	K \to \mch(\Sigma \setminus \mbox{2-cells}) \to \mch(\Sigma) .
	\label{ground_state_projection}
\ee
where $\mch(\Sigma \setminus \mbox{2-cells})$ and $\mch(\Sigma)$ are the ground-state Hilbert spaces of $\Sigma \setminus \mbox{2-cells}$ and $\Sigma$, respecitvely.
The job of the edge term (below) will be to pick out a subspace of $K$ on which the first map is an isomorphism. 
The job of the plaquette term will be to further reduce to a subspace such that the composite map to $H(\Sigma)$ is an isomorphism.




%%%%%%%%%%%%%%%%%%%%
\subsubsection{Edge term} 
%%%%%%%%%%%%%%%%%%%%




The edge terms are the qualitatively new feature of this Hamiltonian, and are a necessary ingredient for the Hamiltonian of any theory possessing q-type particles. 
They are only well-defined on ground states of the vertex term. 
They allow fermions to fluctuate across edges of the graph which are labelled by q-type particles,
and provide a way of energetically implementing the isotopy relations associated with sliding fermions along the worldlines of q-type particles. 
Implementing these isotopy relations can be done in two ways. 
One is to add the edge term to the Hamiltonian which allows fermions fluctuate between vertices connected by a q-type edge, while another is to modify the tensor products appearing in the definition of $\mch_\mcg$ to be tensor products in which the algebra we're tensoring over is
chosen from the endomorphism algebras of the edge labels. 
We will describe the edge term approach in this section, and will address the latter method in Section \ref{modified_tensor_product}. 



The edge term will coherently add and remove fermions at the end points of the q-type bonds, as well as tunnel them across\footnote{Heuristically we can think of two adjacent vertices as islands which can hold a number of fermions and whose fermion parity is well defined. 
If these vertices are connected by a q-type edge, we can think of that edge as a 1D superconductor which coherently couples the two islands together.}. 
This term favors an equal-weight (meaning equal up to a phase factor) 
superposition of fermions across all vertices connected by 
q-type simple objects with a fixed fermion parity.
Since the edge term is responsible for allowing fermions to fluctuate (``hop'') across edges labeled by q-type objects, 
it will be absent in any theory with no q-type objects.

Fermion hopping across q-type edges is implemented by the $\Gamma$ operators. 
To do this for an edge $e$, we can create a pair of fermions near the vertex at the beginning of $e$, slide one of the fermions along $e$ to the vertex at the end of $e$, and then use the $\Gamma$ operators to ``absorb'' each fermion into their respective vertices. 
For example, if $e$ hosts a q-type edge label $b$, then we have 
\be \label{dot_slide_gamma} \mathord{\vcenter{\hbox{\includegraphics[scale=1]{dot_slide_gamma.pdf}}}},\ee
where we have defined tensor products of $\Gamma$ operators to act so that operators located further to the left in tensor products absorb fermions with higher order than the operators to their right.
Note that although the first and last steps in the above sequence look the same, they are not: the fermion parity of the vectors in the two vertex Hilbert spaces has been switched. 

In general, if $e$ is oriented from $v_1$ to $v_2$ colored by a fixed object $b$ and $|\psi_1\rangle \tp |\psi_2\rangle$ is a vector in $\mch_{v_1}\tp \mch_{v_2}$, the edge term $D_e$ acts as 
\be D_e(|\psi_1\rangle\tp |\psi_2\rangle) = \begin{cases}
  -\lambda\alpha(e,b)\sum_{\eta_1,\eta_2}[\Gamma_i]_{\psi_1\eta_1} |\eta_1\rangle \tp [\Gamma_j]_{\psi_2\eta_2}|\eta_2\rangle \quad &\text{if $b$ is q-type}\\ 
 |\psi_1\rangle\tp |\psi_2\rangle \quad &\text{if $b$ is m-type} \end{cases}
\ee
where $e$ is the $i$th leg of the pitchfork at $v_1$ and the $j$th leg at $v_2$, and $|\eta_1\rangle \tp |\eta_2\rangle \in \mch_{v_1} \tp \mch_{v_2}$.
Since $D_e$ acts as the identity on edges colored by m-type objects, edges with m-type edges will automatically lie in the ground state of the edge term. 

In summary, including $D_e$ in the Hamiltonian provides a way of energetically enforcing the conditions that the ground states of theories containing q-type particles are realized by superpositions of string-net configurations possessing all possible ways of arranging fermions on the q-type strings. 
Ensuring that ground states are superpositions of different fermion configurations is tantamount to projecting from the Hilbert space $\mch_\mcg$ to the physical Hilbert space $\mch_{\rm phys}$, in which redundant degrees of freedom created by different fermion configurations are modded out.


As mentioned earlier, it can be conceptually helpful to note that a 1D Kitaev wire in the topological phase also exhibits the same behavior as the q-type strings in our theories.
However, since generic theories (like the $\halfesix$ example considered earlier) can have fusion rules in which two q-type simple objects to fuse to a third q-type simple object, this analogy is subtle, since at the junction of three Kitaev wires a zero mode is left behind, which does not occur in the $\halfesix$ theory. 
%\dave{I think we should be careful in saying that they are more general Kitaev wires.
%But lets Skype about this sometime.}

%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%




%%%%%%%%%%%%%%%%%
\subsubsection{Plaquette term}
%%%%%%%%%%%%%%%%%
\dave{skipped this section for now.}

As with the vertex term, the plaquette term is essentially the same as the plaquette term in the usual string-net Hamiltonian: it inserts loops labeled by different objects in $\mcc$ into each plaquette, and uses local isotopy relations to fuse these loops into the boundaries of the plaquettes. 
It is responsible for the dynamics in the string-net phase, and allows us to perform time evolution on string-net states.  
Explicitly, we have
\begin{align} \label{plaquette_term_defn}
B_p =\frac{1}{\mcd} \sum_{a \in \mcc} \frac{d_a}{\text{dim} \; \text{End}(a)} \mcb^a_p, 
\end{align}
where the operator $\mcb_p^a$ fuses in a loop labeled by $a$ into the plaquette $p$ (note that 
as discussed earlier, the operator $\mcb_p^a$ is only defined when all vertices neighboring the plaquette $p$ are stable).

An explicit form for the matrix elements of the $\mco_p^a$ operators can be written down following the straightforward, if tedious, standard procedure of \ref{levin2005}.
Namely, one inserts a loop of $a$ string in the interior of $p$ and fuses it into the boundary of $p$ using a
collection of $F$ and pivoting moves. 
With the ``pitchfork'' conventions adopted in this section, the graphical presentation of the $F$ moves is
slightly different than the standard way they are presented in the literature.


Instead of writing down the explicit formula for the matrix elements of the plaquette operator, there is a 
more general and high-level way of describing the plaquette term in terms of the tube algebra.
From \eqref{plaquette_term_defn}, we see that the plaquette operator acts to insert a 
weighted superposition of all closed loops labeled by objects in $\mcc$.
This corresponds exactly to the trivial idempotent in the tube algebra for the theory, 
which is a weighted superposition of all tubes that have zero charge (so that their boundaries have no marked points on them) and which have fluxes that run over the objects in $\mcc$.
This means that $B_p$ implements the action of the trivial idempotent in the tube algebra applied to the plaquette $p$:
\begin{align}
B_{p} = \Pi_{\unit \in \tube},
\end{align}
where $\unit\in\tube$ denotes the trivial idempotent in the tube algebra. 
From this presentation, we see that $B_p$ projects onto plaquettes that host no quasiparticle excitations\footnote{Recall that in 
string-net models, we think of each plaquette as containing a puncture. Quasiparticles are localized at 
these punctures, and so acting with $\Pi_\unit$ on a puncture projects onto a state in which no 
quasiparticle is present on the puncture.}, 
and so violations of the plaqauette term are the quasiparticle excitations of the theory. 
Plaquettes that satisfy the plaquette term (those with an eigenvalue of $1$ under $B_p$) contain no 
quasiparticles in their interiors, and thus the punctures in their interiors can be smoothly filled in. 
Therefore, we can also think of the plaquette term as energetically providing a way to allow strings to 
fluctuate freely across the interiors of plaquettes. 



%%%%%%%%%%%%%%%%%%%
\subsection{Excitation spectrum} \label{excitations_of_H}
%%%%%%%%%%%%%%%%%%%

Finally, we briefly comment on the spectrum of $H$ and the types of excitations our model supports. 
Each of the terms in the Hamiltonian enforces one of the local relations of the vector space assigned to $\Sigma$ by $\mcc$. 
As such, the zero-energy ground space is just a basis for the vector space assigned to $\Sigma$ by $\mcc$.
The deconfined anyonic excitations in the model correspond to violations of the plaquette terms\footnote{Note that from the structure of the Hamiltonian, pure flux excitations violate only plaquette terms, while general dyonic excitations (with nonzero charge) violate both plaquette and vertex terms.}, and
by construction, these are in one-to-one correspondence with the bounding idempotents of the tube algebra. 
This is simply because as discussed earlier, the $B_p$ operator in the plaquette term is the projector $\Pi_\unit$, which projects onto states containing no quasiparticles in the interior of $p$. 
The fusion rules and braiding properties of the excitations can be computed with the tube algebra methods developed in earlier sections. 
%The specific string operators which create these excitations can also be computed with similar methods, see \ref{APPXXX?}.

\begin{figure}
\begin{center}
\includegraphics{graph_with_edge_excitation.pdf}
\caption{\label{lattice_w_vortices} A region of the graph $\mcg$ containing two vortex excitations. 
The two punctures hosting the vortex excitations are marked as circles, with the label $N$ denoting their non-bounding spin structure. 
The dashed blue line is the spin structure defect connecting the two punctures.
The edge colored red intersects the spin structure defect and is excited, violating the edge term $D_e$ in the Hamiltonian. 
}
\end{center}
\end{figure}

One can also consider the excitations corresponding to violations of the edge terms 
(note that these will only be present in theories with q-type objects).
If a given state has a $-1$ eigenvalue under an edge term $D_e$, then fermions traveling across $e$ pick up an additional minus sign not taken into account by the spin structure data that comes with our handle decomposition.
This implies that violating a single edge term $D_e$ creates a pair of vortex (non-bounding) excitations (the set of which are in one-to-one correspondence with the non-bounding idempotents of the tube algebra) on the plaquettes sharing the edge $e$. 
These two vortex excitations are linked by a spin structure defect line, which crosses $e$ transversely. 
The extra minus sign picked up by fermions when they travel along $e$ is simply the extra minus sign that fermions encounter when they pass over a spin structure defect line. 
This is illustrated in Figure \ref{lattice_w_vortices}, where the violated edge $e$ is shown in red, and the two circles marked $N$ denote the vortex excitations created on either side of $e$. 
The dashed blue line connecting the two vortex excitations is the spin structure defect line. 

Continually violating edge terms along a path of neighboring plaquettes results in two well separated vortex excitations.
These excitations are linked by a spin structure defect line, which excites each edge that it crosses. 
This means that the vortex excitations can only be separated
at the expense of a linear increase in energy, and so the vortex excitations are linearly confined. 
%\dave{Note to self: this is only true if the fusino category has q-type objects, 
%otherwise there are no edge terms to violate.}
%added a statement about this

However, this does not mean that the non-bounding excitations are always necessarily linearly confined, and we can modify the Hamiltonian so that the vortex excitations are not confined.
One way to do this is to modify the Hamiltonian to be defined on a graph with punctures at the locations of the vortex particles, and to incorporate their effect on the spin structure into the $\alpha(e)$ factors appearing in the expression for $D_e$. 
Doing this gives the spin structure defect lines zero energy, and they are free to fluctuate under the action of flat $\zt$ gauge transformations acting on $C^1(\mcg^*)$. 
Incorporating the spin structure of the non-bounding excitations into the model by hand thus removes the confining energy. 
However, in this case the vortex excitations themselves are still immobile. 
Another way to deconfine the vortex quasiparticles and allow them to move freely is to make the spin structure dynamical; we leave the study of this possibility to future work. 


%%%%%%%%%%%%%%%%%%%%%%%
\section{Super pivotal state sums and tensor networks} \label{state_sums}
%%%%%%%%%%%%%%%%%%%%%%%

\dave{Note to self: look at \cite{beliakova1998} and check for relations.}

In this section we write down a Turaev-Viro-Barrett-Westbury (TVBW) state sum for the super pivotal fusion categories\cite{Turaev1992,Barrett1996}, 
and a tensor network for the ground state wave function of the Hamiltonian constructed in \eqref{ham}.
Very closely related work was presented in~\cite{bhardwaj2016}, 
see also \cite{Bultinck2017, upcoming-paper?}.
We first breifly review the TVBW construction for spherical fusion categories. 
We do so in a way that naturally extends to the super-pivotal case with only minor modifications.
Lastly we use the state sum to write down an explicit wave function for the ground ground state of \eqref{ham}.

%We first give a lightning review of the TVBW state sum construction, via the cut-and-glue formalism.
%Since much is known about TVBW state sums, 
%we present the state sum from a slightly different perspective than usual,
%so that the fermionic version of the state sum can be written in essentially the same way.

We view the state sum as a composition of linear maps from finite dimensional tensor product spaces, starting with with the ``vacuum" $\cc$. 
This composition of linear maps can be interpreted as a tensor network, 
which we investigate in the subsequent sections.
Those interested in the details of the original construction are referred to \cite{Turaev1992,Barrett1996}, 
and the one followed here in \cite{Walker2006}. 

%The starting point is a list of data:
%\dave{Is pivotal and spherical the same thing?
%I remember getting quite confused about this in a Muger paper.} %\ethan{I think yes}
%\begin{itemize}
%\item a spherical fusion category $\mcc$,
%\item an oriented 3-manifold $\mcm$,
%\item and a cell decomposition with oriented 1-cells and transversally orientated 2-cells (equivalently, the boundary of the 2-cells has an orientation)
%\end{itemize} 
%from which one defines a partition function $Z(\mcm)$. 

We start with two pieces of data: 
\begin{itemize}
\item a spherical fusion category $\mcc$, 
\item and an oriented 3-manifold $\mcm$ possessing a cell decomposition with transversally oriented 2-cells and oriented 1-cells. 
\end{itemize}
In what follows, we will assume that $\mcm$ is closed for simplicity. 

To define the state-sum we will assign vector spaces to each piece of the cell decomposition and then 
construct the partition function by gluing these pieces together with certain linear maps corresponding to tensor contractions.
In order for our formalism to be most amenable to fermionic modifications, we will need to carry out a 
standardization procedure of the cell decomposition of $\mcm$, in much the same way that we 
performed the standardization procedure to define the lattice Hamiltonian. 
This is the issue to which we now turn. 
Much of the following section is notational; 
readers are invited to familiarize themselves with Figure~\ref{NotationStateSum}
and \eqref{attaching_region}-\eqref{tensor_space}, 
and continue with the next subsection. 



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Notation, standardization, and Hilbert spaces}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

Our first order of business is to fatten the cell decomposition into a handle decomposition, as was done in Section \ref{standardized_handles} (recall that a handle decomposition for an $n+1$-manifold $\mcm$ is built from a series of k-handles, with $k=0,1,\dots,n$, each of which are homeomorphic to $D^{n+1}$). 
We will often refer to a $k$-cell and its associated $k$-handle with the same letter. 
The topology of $\mcm$ is built into the attaching regions where different handles are connected, each of which is homeomorphic to $S^k \times D^{n-k}$.
We are interested in 3-manifolds,
and hence the attaching regions between between the $(k+1)-$ and $k$-handles are given by
$S^2 \times D^0$ (3-handles to 2-handles), $S^1 \times D^1$ (2-handles to 1-handles), and $S^{0} \times D^2$ (1-handles to 0-handles).
Although not necessary, we assume the cell decomposition of $\mcm$ is dual to a triangulation for ease of notation.
The standardization procedure is similar to the pitchforkization procedure defined in \eqref{pitchfork_basis} and surrounding text.

%To define the tensors in \eqref{TVBWss} explicitly, 
%it is helpful to standardize each of the cells, 
%and the vector spaces we assign to each cell. 
%Technically, the partition function is built on a handle decomposition, 
%but its useful to label the data associated to each handle by the corresponding cell. 

\begin{figure}
\begin{center}
\includegraphics{NotationStateSum.pdf}
\caption{\label{NotationStateSum}
Notation used in this section. 
The cells can be used to label the weights that determine the partition function.
In the figure we have labeled a 2-cell (face) by $f$, a 1-cell (edge) by $e$, and a 0-cell (vertex) by $v$. 
We assume a cell decomposition that is dual to a triangulation, so that each 1-cell is neighbored by three 2-cells and two 0-cells, and each 0-cell is neighbored by four 1-cells. 
The boundaries of each 2-cell $f$ possess an orientation (left). 
The 1-cells are also oriented, with the orientation of the edge $e$ in the figure indicted by the double arrow (center). 
The oriented boundary edge of the face $f$ that neighbors the edge $e$ is labeled $c_{fe}$ (left), 
and the opposing edge that is glued to $c_{fe}$ is labelled by $\bar{c}_{fe}$. 
The trivalent junctions occurring at either end of the edge are denoted $c_{ev}$ and 
$c_{ev'}$ (center).
A small $S^2$ surrounding a 0-cell $v'$ intersects six 2-cells in six oriented lines, which 
meet at four trivalent junctions $\bar{c}_{ev'}$ (right). 
}
\end{center}
\end{figure}

%\ethan{tried (valiantly) to make this more comprehensible, but may have not fully succeeded} 
%\dave{A valiant effort indeed.}


We first establish some notation for the attaching regions of the $k$-handles, which are summarized 
in Figure~\ref{NotationStateSum}. 
We denote the collection of 2-cells by $\mcf$, the collection of 1-cells by $\mce$, and the collection of 0-cells by $\mcv$.
Each $f \in \mcf$ is homeomorphic to a simple polygon, see `f' in Figure~\ref{NotationStateSum}.
The transversal orientation of $f$ translates to an orientation of each edge of the simple polygon (equivalently, we could say each 2-cell is equipped with a boundary orientation, rather than a transversal orientation).
%Each edge of $f$ is oriented by the orientation assigned to $f$.% (equivalently, each 2-cell is equipped with a boundary orientation).
%We will denote the edge $e$ at the boundary of the 2-cell $f$ by $c_{fe}$.
We will denote the edge at the boundary of the 2-cell labeled $f$ by $c_{fe}$, where $e$ labels the 1-cell which it attaches too (note the the transversal orientation of the 2-cell and orientation of the 1-cell are chosen independently).


The tubular neighborhood of a given 1-cell $e$ is a 1-handle which intersects 
three neighboring 2-cells.
% in a collection of three rectangles. %On any given $D^2$ cross-section of 
%a 1-handle, these intersection regions meet at a trivalent vertex. %connected by an annulus with three oriented lines.
The surface of each 1-handle comes equipped with three oriented lines, which match up with 
the edges of the three 2-cells whose boundaries include the 1-cell $e$. For an 
illustration of this, see Figure \ref{One_handle}. 
%The intersections of the three 2-cells with the surface of the 1-handle consists of three lines, 
The orientation of these lines is defined to be opposite to that of the neighboring 2-cell boundaries.
We denote the edge on the surface of a 1-handle $e$ that matches up with a boundary component 
of the 2-cell $f$ by $\bar{c}_{fe}$, where the bar signifies that the orientation is opposite that of the edge of the 2-cell (see Figure~\ref{NotationStateSum}). 

A 1-cell $e$ connects two 0-cells, $v$ and $v'$. 
A $D^2$ cross-section of the intersection between a 1-handle $e$ and its three neighboring 2-cells 
is a disk with a trivalent vertex in its interior and three marked points on its boundary. 
We will denote the trivalent vertices appearing at either end of $e$ by $c_{ev}$ and $c_{ev'}$.
The orientations of the edges emanating from these vertices are determined by the neighboring 2-cells.
Again, please see Figure~\ref{NotationStateSum} for clarification.

A small $S^2$ drawn around any given 0-cell is intersected by six 2-cells and four 1-cells.
For our purposes, it is enough to keep track of the four neighboring 1-cells, 
since they contain all the orientation information that the 2-cells assign to the $S^2$ surrounding the 0-cell.
%Removing a single point from this spherical neighbourhood allows us to define a homeomorphism into the plane. 
%Furthurmore, the gluing regions for the 1-cells can all be taken to be pitchforks as in \eqref{pitchfork_basis}, see Figure~\ref{FIGURE}.
%This is our standardized 0-cell (actually spherical neighbourhood of the 0-cell). 
Denote the 0-cell by $v$ and the neighboring 1-cells by $e_j$, $j=1, \cdots 4$.
Each of the four 1-cells intersects the small $S^2$ at a point where three of the intersections of 
the six 2-cells with the $S^2$ meet. 
We denote these four trivalent junctions by $\bar{c}_{e_j v}$, 
and again the bar denotes that these are in the opposite orientation relative to the trivalent vertices $c_{e_jv}$ at the boundaries of the 1-cells. 

The Figure \ref{NotationStateSum} only shows one representative sample of cells, which all others are homeomorphic to. 
We now standardize each cell so that we can keep track of the topological data associated to the handle decomposition relative to a `standard' one. 
This is analogous to the pitchforkization procedure discussed in the text surrounding \eqref{pitchfork_basis}.
We first note that the spherical neighborhood of an arbitrary 0-cell $v$ can be standardized by removing a point and mapping the resulting picture to the plane. 
We can next `pitchforkize' the attaching region where the four 1-handles are attached to $v$ so that each take the form
\begin{align}
\StandardZeroCell,
\end{align}
or some variant thereof obtained by reversing the orientations of the edges. 
The dashed circles in the above equation are the attaching regions for the 1-handles and again, 
the lines in the above diagram represent the intersections of the six 2-cells 
with the spherical neighbourhood of $v$. 
%whose boundaries include $v$
%with the $S^2$ surrounding $v$. 
The numbers indicate which edge is connected to where on the standard 0-handle, and are associated with $\bar{c}_{e_j v}$.

With this standardization procedure, 
the 1-handles which attach two 0-handles are now horseshoe-shaped.
Each 1-handle $e$ can be deformed into the following form:
\begin{align} \label{horshoe_resln} 
\HorshoeIdentity,
\end{align}
where $P_e$ is either the identity, $P$, or $P^2$, where $P$ is the pivot defined in \eqref{Pitchfork_pivot}.
We define $P$ to rotate diagrams counterclockwise relative to the orientation of $e$.
The possible presence of $P$ and $P^2$ is needed to keep track of any relative pivoting
between the pitchforks at either ends of the 1-handles. 


%end of notation bullshit 

%\dave{This sentence has a lot of enthusiasm.} \ethan{:)}
With our vast notational arsenal now fully developed and eager to be utilized, 
we are ready to assign vector spaces to each of the attaching regions $c_{xy}$ defined above.
We define the vector spaces 
\begin{align} \label{EandWdefns}
E = \bigoplus_{x\in\mcc} \cc_x \quad \quad \quad W = \bigoplus_{a,b,c\in\mcc}V^{abc}
\end{align}
where the sums are over a representative set of the simple objects in the input category $\mcc$. 
Momentarily, the vector space $W$ will be assigned to pitchforks.
Not all pitchforks will be oriented with all edges pointing outwards; in this scenario 
we repeat the construction in \eqref{pitchfork_basis} and replace an object labelling an inward-pointing 
edge with its dual. 
The vector space we assign to each of the attachment regions are as follows:
\begin{align}
\label{attaching_region}
  \mch(c_{fe}) &= E \quad \quad \mch(\bar{c}_{fe}) = \mch(c_{fe})^* = E^*\\
\mch(c_{ev} )&= \begin{cases} W &\text{if $e$ is oriented away from $v$} \\
W^* &\text{otherwise} 
\end{cases}\\
\mch(\bar{c}_{ev}) &= \mch(c_{ev})^*
\end{align}
The vector space assigned to each $k$-handle is given by tensoring over the vector spaces assigned to each attachment region.
For a 2-handle $f$, a 1-handle $e$, and a 0-handle $v$, we have 
\begin{align}
& \mch(f) = \bigotimes_{c_{ef} \in \partial f} \mch(c_{ef}),  \\
& \mch(e) = \left(\bigotimes_{\bar{c}_{ef} \in \partial e }\mch (\bar{c}_{ef}) \right)\tp \mch(c_{ev}) \tp \mch (c_{ev'}), \\
& \mch(v) = \bigtp_{i=1}^4 \mch(\bar{c}_{e_{i}v}), 
\label{tensor_space}
\end{align}
where as before, $c_{ef} \in \partial f$ are the oriented attachment regions of the 2-cell labeled by $f$, 
and the $\bar{c}_{ef} \in \partial e$ are the lines on the surface of the 1-handle $e$ (the $\bar{c}_{ef}$ are the edges labeled $a,b,c$ in Figure \ref{One_handle}).

From these assignments, we see that if the vector space $V$ is assigned to the region of a $(k+1)$-handle in which it is glued
to a $k$-handle, the corresponding attaching region on the $k$-handle is assigned 
the dual space $V^*$. 
For example, for each $\mch(c_{ev})$ tensor factor in $\mch(e)$, there is a dual tensor factor $\mch(\bar{c}_{ev})=\mch(c_{ev})^*$ in $\mch(v)$.

%\ethan{I think the $e\in f$ and $f\in e$ notation is kinda confusing. Maybe $e\in \partial f$ or something?}
%\dave{I agree, this is tricky.
%Could definitely use some notational insight. 
%Its doubly confusing since we use the word edge for 3 things at this point. 
%Once for the edges of the 2-cells, once for the corresponding edges on the 1-handles, and again as the thing that we use to identify which 1-handle we are referring to.
%$e \in \partial f$ is great for the 2-cells. 
%But what do we call the edges on the 1-handles ($e in \partial e$ doesn't work.)?
%}
%\ethan{maybe call the 1-handles $t$ (for tube) or something and reserve $e$ for the edges on the 1-handles, so that we can sorta sensibly write $e\in \partial t$ and $e\in \partial f$?}
%The vector spaces have been assigned so that the spaces assigned to the pair of attachment regions on the (k+1)-handle and the k-handle are dual to one another.
%The assignment of vector spaces has been so that the labels of the attachment labels of the (k+1)-handles connecting to the k-handle are dual. 

%\dave{Should this be in the definition section?}
%\ethan{I think keeping it here is good, since we don't use it earlier and in the definition 
%section we aren't pitchforking too hard}%
%\dave{I agree.}

\begin{figure}
\begin{center}
\includegraphics{Onehandle_smaller.pdf}
\caption{\label{One_handle}
Various pictures relating to our presentation of the 1-handles. In the top left picture, we show
three 2-cells which terminate on a given 1-cell, with the orientations of the 2-cells shown. 
In the top right picture we show a 1-handle with its three marked edges and their orientations shown. 
In the bottom left we have the same picture as in the top right, but with the intersection of the 2-cells 
with the 1-handle shaded in color. In the bottom right picture, we show the same picture as in the bottom left, but this time with the vertices standardized via our pitchforkization procedure. 
\dave{Should modify this picture to match text.} \ethan{looks good to me?}
}
\end{center}
\end{figure}



%%%%%%%%%%%%%%%%
\begin{comment}
The fusion category $\mcc$ will allow us to assigns maps from (k+1)-handles to a k-handles via the attaching the attaching maps. 
This is done through the cut-and-glue relation,
\dave{Note to self: Check ch.6 Walker notes.
There's a formula that even looks like the one I want.
It is something like:
}
\begin{align}
Z(M_{\text{gl}}) = \sum_{i,j}Z(M_{\text{cut}} \cup e_i \cup \hat{e}_j)g^{ij}
\end{align}
where $e_i$ and $\hat{e}_j$ are basis of the gluing region on the (k+1)-handle and k-handle respectively, 
and $g^{ij} = (g^{-1})_{ij} $, with $g_{ij} = \langle \hat{e}_j, e_i \rangle_{S^2}$.
This can be simplified by letting $e_i$, and $\hat{e}_j$ run over orthogonal basis for the gluing region and dual gluing region. 
This is done with idempotents etc. 

One can now re-interpret the matrices above $Z(M_{\text{cut}} \cup e_i \cup \hat{e}_j)g^{ij}$ as linear maps from the vector spaces assigned to 
the attaching regions of the (k+1)-handles to the k-handles. 
Abstractly we have,
\begin{align}\nonumber
0 \xrightarrow{??}V(\{ c_3 \}) \xrightarrow{T_{\mcf}} V(\{ c_2 \})  \xrightarrow{T_{\mce}} V(\{ c_1 \})  \xrightarrow{T_{\mcv}} V(\{ c_0 \}) 
\end{align}
where $V(\{c_k \})$ is vector space assigned to the attaching region for the k-handles. 
%\kw{full boundary or non-attaching boundary?}
%\dave{Supposing that non-attaching means what it sounds like, then non-attaching boundary.}
%\kw{more generally, while I think the viewpoint you propose is correct in spirit, when one looks at the details things become a little messier,
%and I doubt it's possible to make a clean (and correct) statement along the lines you propose.}
%\dave{
%I agree it's only worth saying if we can do it cleanly (and obviously has to be correct).
%Lets discuss on Skype.
%The picture I had in mind was to think of each tensor as a linear map from incoming indices, living on (k+1)-handles to outgoing ones living on k-handles.
%Then evaluation of the tensor network is just composition of functions.
%The tensors would be something like basis of net-configurations/local relations on a k-handle sandwiched between
% idempotents on attaching region of $k+1$ handle and idemoptents of outgoing attaching region on $k$ handle.
%}
%Semi-simplicity of $\mcc$ means that each of these vector spaces are finite dimensional.
%Furthurmore, the k-handles are disjoint subsets of $\mcm$ and so the vector spaces appearing above are tensor products of vector spaces associate to each k-handle, e.g., $A(\text{0-handles}) = \tp_{v \in \mcv} A_v$,
%where $\mcv$ denotes the collection of 0-handles, and $A_v$ the vector space assigned to each. 
%The linear maps are naturally described by tensors, 
%and the partition function $Z(\mcm)$ as a tensor trace.
The partition function is given by the image of the composition of the linear maps $T_{\mcv} \circ T_{\mce} \circ T_{\mcf}$, which acts as a projector onto the string-net ground state living at the boundary of $\mcm$. 
%In particular, if $\partial \mcm = \emptyset$, the map $T_{\mcv} \circ T_{\mce} \circ T_{\mcf}$ takes $\mcm$ to a complex number. 
%\begin{align}
%Z(\mcm) \in \text{Im} \; T_{\mcv} \circ T_{\mce} \circ T_{\mcf}
%\end{align}
``Locality" of the handle decomposition means that the linear maps can be expressed as tensor contractions which are local with respect to the handle decomposition.

Denoting the number of 3-cells by $n_3$, the collection of 2-cells by $\mcf$, 
the collection of 1-cells $\mce$, and the collection of 0-cells by $\mcv$, 
the partition function can be written as,
\begin{align}
Z(\mcm) = \frac{1}{\mcd^{2 n_3}}\sum_{\mcl} \prod_{f \in \mcf} T_f \prod_{e \in \mce} T_e \prod_{v \in \mcv} T_v
\label{TVBWss}
\end{align}
where $\mcl$ runs over a label set determined by $\mcc$, 
and the $T_f$, $T_e$, and $T_v$, 
are fixed numbers for a particular labeling. 
Each tensor is solely determined by the labels ascribed to each cell corresponding to the 0-, 1-, and 2-cells,
these numbers are provided by evalutions of diagrams on $S^2$.

Abstractly, the tensors appearing in \eqref{TVBWss}, 
defined by,
\begin{align}\nonumber
\cc \ra A(\text{3-handles}) \ra \tp_{f} A(f) \xrightarrow{T_f} \tp_{e \in \mce} A(e) \xrightarrow{T_e} \tp_{v \in \mcv} A(v) \xrightarrow{T_v} Z(\mcm)
\end{align}
\ethan{note to self: I don't think we've ever defined $A({\rm stuff})$ anywhere. Should find the earliest place we use it and add the defn}
\dave{I changed to $\mch(\text{space})$, 
which I think jibes with what we use earlier.}
where each $T$ is given by,
\dave{Will think about this more carefully in the near term.}
\begin{align}
T = \sum_{\phi, \psi}T_{\phi \psi}  \psi \tp \phi^*
\end{align}
where $\psi$ and $\phi$ are basis vectors in the spaces assigned to $k$-handles and $(k+1)$-handles, respectively. 
For explicit definitions see \cite{Walker2006}.
The above technically gives the correct answer for the fermionic case, 
practical implimentation requires care.
In the next section we present a standardization procedure that allows one to evaluate the partition function.
\end{comment}



\subsection{Constructing the state sum}

We now define the indicator function $\chi$, 
which pairs the vectors in neighboring dual vector spaces and allows us to compute the state sum. 
We define
\begin{align}
\chi: &\mch^* \tp \mch \ra \cc\\
& w^* \tp v \mapsto \delta_{vw}.
\end{align}
This is essentially the same as the bilinear pairing defined in \eqref{reflection_pairing_defn}, just with a different normalization, and ordering on the tensor factors. 
It is defined on every pair of tensor factors $\mch(\bar{c}_{xy}) \tp \mch( c_{xy})$
that are assigned 
to attaching regions in the handle decomposition.
\ethan{strictly speaking, I don't think we need the following (it could just confuse people)}
Under re-arrangement of tensor factors and Koszul signs, $\chi$ behaves as 
\begin{align}
\delta_{wv} = \chi(w^* \tp v)=(-1)^{|v| |w|} \chi(w^*_2 \tp v_1) = (-1)^{|w|}(-1)^{|v| |w|} \chi(v \tp w^*) = (-1)^{|w|(|v|+1)} \delta_{v^* w^{*}},
\end{align}
%\dave{This difference in ordering may Koszul headaches later.}
%\ethan{Don't we usually have $\mch^*\cong\mch$ so that the difference is just a matter of labeling? %However, might be best to dualize the definition of $\chi$}.
%\dave{What does it mean to dualize the definition of $\chi$?}
where as usual, the numerical subscripts indicate an explicit Koszul ordering, and the absence of subscripts 
indicates the standard ordering convention, which increases from left to right. The sign $(-1)^{|w|}$ appears 
when performing a $2\pi$ rotation $P^3 = (-1)^F$ on the vector $w$ when interchanging the order of the tensor factors (recall that $\tp$ corresponds to horizontal superposition of diagrams).
\ethan{I don't like the asymmetry... are we missing something?} 

Since the vector spaces for the attaching regions between $(k+1)-$ and $k$-handles are dual 
to each other, the total Hilbert space 
\begin{align}
\mch(\mcm) = \bigotimes_{f \in \mcf} \mch(f) \bigotimes_{e \in \mce} \mch(e) \bigotimes_{v \in \mcv} \mch(v)
\end{align}
admits a decomposition into a subspace tensored with its dual, and hence we have a map
\begin{align}
\label{indicator}
\chi:\; \mch(\mcm) \rightarrow \cc
\end{align}
which is defined on each basis element of $\mch(\mcm)$ and extended to the whole
Hilbert space by linearity.
A state-sum is specified by $\chi(X)$,
where $ X \in \mch(\mcm)$ is a weighted sum of basis vectors, with the 
weights determined by tensors that we will write down shortly. 
%Note that in practice, 
%one has to specify an ordering on all tensor factors in $\mch(\mcm)$, 
%and keep track of the Koszul signs when evaluating the indicator function.
%\ethan{this seems like $X$ is a graph with a particular coloring (since $\chi$ acts on tensor products of particular vectors in the hilbert spaces), but I thought we needed to sum over all (admissible) colorings to get $Z$\dave{Its defined on each basis element, 
%and extended to the whole vector space by linearity. 
%I guess we should say that.}}


%\ethan{what follows is commented-out cut-and-glue stuff. Might come back and borrow stuff if we decide to expound on things in that direction}
\begin{comment}
Lastly we define a non-degenerate bilinear pairing between vectors in the vector space assigned to a disk with $n$ marked points. 
It is defined by the evaluation map,
\begin{align}
\mcb:\;  &V^{x_1 x_2 \cdots x_n} \tp V^{x_n^* \cdots x_2^* x_1^*} \ra \cc \\
&\Bilineara \tp \Bilinearb \mapsto \Bilinearc
\end{align} 
where $\mu_i \in V^{x_1 x_2 \cdots x_n}$ and $\nu_j \in V^{x_n^* \cdots x_2^* x_1^*}$. 
This bilinear pairing is just the evaluation map. 
We emphasize that it is $\cc$-linear in both its arguments. 
In particular, it gives us a linear action on each basis element $\mu_i  \in V^{abc}$ for each element  $\nu_j \in V^{ c^*b^* a^*}$. 
The non-degeneracy condition means that the matrix $B_{ij} = \mcb(\mu_i \tp \nu_j)$ is invertible. 
Hence we can define a set of vectors $\mu_j^* = \sum_i \nu_i (B^{-1} )_{ij} $ so that,
\begin{align} 
\mcb( \mu_i \tp \mu_j^*)  = \delta_{ij}
\end{align} 
Note that in most of the paper we have re-scaled these vectors so that 
$B(\mu_i \tp  \mu_j^*) = \sqrt{d_a d_b d_c} \delta_{ij}$ for $\mu_i \in V^{abc}$ and $\mu_j^* \in V^{c^*b^*a^*}$.
\ethan{moved the bilinear pairing thing to the definition section (in the fusion spaces subsection) at Dave's suggestion \dave{I made a comment that maybe we shouldnt move it here.}}
We will find it helpful to change the normalization of the bilinear pairing \eqref{reflection_pairing_defn} between 
vectors in $V^{x_1\dots x_n}$ and vectors in $V^{x_n^*\dots x_1^*}$.
Namely, in what follows we will work with the normalization 
\be \mcb(\mu_i\tp \mu_j^*) = \delta_{ij}.\ee
\dave{Is the following sensical, or can I just stipulate it.
Also FS indicators? }For the vector space $E$ above, 
it is natural to identify $v_a \in \cc_a$ with $V^{a a^*}_\unit$, and define $\mcb(v_a \tp v_b) = \delta_{ab^*}$.
\dave{What if $a$ is self dual?}
\ethan{then shouldn't it be $\mcb(v_a \tp v_{a^*}) = \kappa_a$?
\dave{I think $\mcb(v_a \tp v_{a^*}) =1$, but $\mcb(v_a\tp v_a) = \kappa_a d_a$. }}
\dave{Thats actually a good reason why the above is a bad definition. 
Lets use $\mcb(\mu_i \tp \mu_j^*) = \theta(\mu_i,\mu_j^*) \delta_{ij}$ }

\dave{Kevin, this would be something I'd want you to look at.
}
Lastly we define a `tensor contraction' that will be useful for the state sum.
This is found by extending the bilinear pairing to the tensor product space,
\begin{align}
\mcb: \;\mch(\mcm)  \ra \cc
\label{contract}
\end{align}
where $\mch(\mcm) =  \tp_{f\in \mcf } \mch(f) \tp_{e\in \mce}\mch(e) \tp_{\in \mcv} \mch (v)$. 
This is defined by applying $\mcb$ across all pairs of attaching regions.
For example, 
$$
\mcb: \;  \mch(c_{ef}) \tp \mch(e) \ra \bigtp_{f \notin e}  \mch(\bar{c}_{ef}) \tp \mch(c_{ev}) \tp \mch(c_{ev'})
$$
\dave{Does it make sense?
Do picture example?}
\ethan{I'm a little confused by the notation. Is this map supposed to be contracting out 
a given edge in the 1-handle?}
\dave{Yes.
Maybe its better to just describe in words.
Or replace the $\mch(e)$ in the above with a $ \tp_{f \in e}  \mch(\bar{c}_{ef}) \tp \mch(c_{ev}) \tp \mch(c_{ev})$}
\dave{This also highlights how awful the $f \in e$ notation is. 
Lets think of something better.}
\ethan{so then should it actually be $\bigtp_{f'\in e, f'\neq f}$ on the RHS?}
\dave{This is basically a PEPS.}
\dave{To Dave:
Cite Levin's tensor trace paper?
I think they essentially did the same construction, but will need to check.}
\end{comment}



We can now write down the Turaev-Viro-Barrett-Westbury state sum in the language and notation discussed above.
The benefit of defining \eqref{indicator} is that we can now define a partition function by specifying a vector in $\mch(\mcm)$ to evaluate with $\chi$.
Since the construction for the bosonic state sum is well known (see the original works \cite{Turaev1992,Barrett1996}), 
we will just provide the answer and then move on to the fermionic version of the state sum. 

%We now specify three sets of tensors $T_f$, $T_e$, and $T_v$, living the in vector spaces defined in \eqref{tensor_space}. 
%Correspondingly, 
%we define a set of tensors 
As said above, the partition function is defined by writing down a set of tensors for each 2-handle $f$, 1-handle $e$, and 0-handle $v$:
\begin{align}
T_f &= \sum_{w_f \in \mch(f)} T_f(w_f) w_f, \\
 T_e &= \sum_{w_e \in \mch(e)} T_e(w_e) w_e, \\
  T_v &= \sum_{w_v \in \mch(v) } T_v(w_v) w_v,
\end{align}
where each sum runs over the orthogonal basis vectors of the indicated Hilbert space, 
and the tensor is defined by assigning a particular weight to each basis vector. 
The partition function is given by the tensor contraction
\begin{align}
Z(\mcm)  = \chi \left( \bigotimes_{f \in \mcf}  T_f \bigotimes_{e \in \mce}  T_e \bigotimes_{v \in \mcv}  T_v \right). 
\label{ZTensor}
\end{align}
Using linearity, this can be written in more conventional notation as  
\begin{align}
Z(\mcm) = \sum_{\{ w_f \} } \sum_{\{ w_e\}} \sum_{\{ w_v \}} \prod_{f \in \mcf} T_f(w_f) 
\prod_{e \in \mce} T_e(w_e) \prod_{v \in \mcv} T_v(w_v) 
%\chi \left(\bigotimes_{f \in \mcf}  w_f \bigotimes_{e \in \mce}  w_e \bigotimes_{v \in \mcv}  w_v \right) 
\chi(w_\mcl)
\end{align}
where the sums are over all possible basis vectors of $\mch(f)$, $\mch(e)$, and $\mch(v)$, and
where we have defined 
%where the sums are over all possible string-net colorings of the faces, edges, and vertices, and
%where we have defined 
\be w_\mcl = \bigotimes_{f \in \mcf}  w_f \bigotimes_{e \in \mce}  w_e \bigotimes_{v \in \mcv}  w_v\ee
for a particular 
choice of
% string-net colorings 
$w_f,w_e,$ and $w_v$.
We will call a labeling $\mcl$ of the cell decomposition {\it admissible} if $\chi(w_\mcl) =1$.
The state sum can then be written as
\begin{align} 
Z(\mcm) = \sum_{ \mcl } \prod_{f \in \mcf} T_f(w_f) 
\prod_{e \in \mce} T_e(w_e) \prod_{v \in \mcv} T_v(w_v), 
\label{ZConventional}
\end{align} 
where the sum over labelings $\mcl$ is restricted to run only over all admissible labelings $\mcl$. 
This is the familiar form of the partition function given in \cite{Turaev1992,Barrett1996}.

Now we need to define the tensor weights appearing in our expression for the partition function.
For a 2-cell $f$ with $r$ edges, the 2-cell tensor $T_f(w_f)$ is given by
\begin{align} 
T_f(w_f) = T_f(w_{a_1} \tp w_{a_2} \tp \cdots \tp  w_{a_r})   =\sum_{v_x^* \in E} d_x \prod_{i = 1}^r \chi(v_x^* \tp w_{a_i})
% \sum_{x, \; \{ v_{a_{e}}\} \;  : \;e \in f} \left( d_x  \prod_{e \in f} \delta_{x, a_e} \right)   \bigtp_{e \in f}v_{a_e}
\end{align} 
%\begin{align}
%T_f(\tp_{e \in f} a_e) = \sum_x d_x \prod_{e \in f}  \delta_{x, a_e}
%\end{align}
%where each $a_e$ is a basis vector of $A(c_{fe})$.
%\dave{Should we we also draw pictures for each tensor?
%usually good practice for string nets to do (labeled picture) = number}
%For example, for a pentagonal 2-cell we can diagrammatically denote the matrix elements of this tensor as
%\begin{align}
%\FaceWeight = \sum_{x} d_x \prod_i \delta_{x, a_i}
%\end{align}
Note that this tensor is only non-zero if all edge labels of the boundary 1-cells of the 2-cell $f$ are the same.


Now consider a 1-cell $e$. 
Suppose that the boundary 0-cells at the ends of $e$ are labeled as $v$ and $v'$, with $e$ oriented from $v$ to $v'$. 
Let $w_e = v_{a_1} \tp v_{a_2} \tp v_{a_3} \tp \mu \tp \nu$, with $v_{a_i}$ basis vectors in $\mch(\bar{c}_{ef_i})$ for each 2-cell $f_i$ neighboring $e$, and $\mu,\nu$ 
basis vectors in $\mch(c_{ev})$ and $\mch(c_{ev'})$, respectively. We then have
\begin{align}
T_e(w_e) = T_e(v_{a_1} \tp v_{a_2} \tp v_{a_3} \tp \mu \tp \nu^*) = \frac{\mcb(\mu \tp P_e(\nu_j^*))}{\mcb(\mu \tp \mu^*) \mcb(\nu \tp \nu^*)},
\end{align}
where $\mcb$ is the pairing defined in \eqref{b_pairing_defn} (which differs from $\chi$ only in its normalization). 
As before, $P_e$ encodes the pivot of the 1-handle $e$ (i.e. to what degree the pitchforks at either 
end of $e$ differ by $2\pi/3$ rotations).%, and $P_e(\nu_j)$ is zero unless $\text{id}_{a_{1^* }\tp a_{2^*} \tp a_{3^*}} \circ \nu_j = \nu_j$.
Since each 1-handle has three edges, there are $2^3 = 8$ possible orientations that the edges of a given 1-handle can have, 
and hence there are technically $8$ different 1-cell tensors to specify, differing by the presence of either vectors or their duals in the expression for $T_e$ above. 
\dave{Sphericity halves this number.}

Lastly we define the 0-cell tensors $T_v$, which map vectors in $\mch(v)$ to complex numbers. 
The matrix elements of the $T_v$ tensors are defined as evaluations of tetrahedral string-nets whose vertices have been transformed into the pitchfork convention.
That is, 
\begin{align}
T_v(\alpha \tp \beta \tp \gamma \tp \delta) = \Tetrahedron
\end{align}
%where the tetrahedral symbol is defined in our standardization convention by 
%\begin{align}
%\text{Tet}(\alpha \tp \beta \tp \gamma \tp \delta) =\; \Tetrahedron
%\label{Tetrahedron}
%\end{align}
We have defined the tensor by its evaluation on the right with 
$\alpha \in \bigoplus_{abc} V^{abc}$, $\beta \in \bigoplus_{a^* bc} V^{a^* bc}$, $\gamma \in \bigoplus_{a^* b c^*} V^{a^* b c^*}$, $ \delta \in \bigoplus_{a^* b^* c^*} V^{a^* b^* c^*}$.
We have defined this tensor for a particular collection of edge orientations, but generically %; one can flip the direction of an arrow by taking the appropriate object label to its dual. 
there are $2^6 = 64$ possible collections of edge orientations, each of which requires its own $T_v$ tensor and is given by the appropriate diagram evaluation with $\alpha,\beta,\gamma,\delta$ chosen from the appropriate fusion spaces 
\footnote{Not all these $64$ tetrahedra are independent however, as 
some of them can be transformed into one another by using the pivotal and spherical structure of the input category.}. 

Plugging the tensors into \eqref{ZTensor} (or equivalently into \eqref{ZConventional}), one finds the explicit presentation of the TVBW state sum in terms of the evaluation of string-net pictures. 


%Finally, we can write down the TVBW state sum as
%\begin{align}
%Z(\mcm) = \mcb(\tp_{f \in \mcf} T_f \tp_{e \in \mce} T_e \tp_{v \in \mcv} T_v)
%\end{align} 
%where $\mcb$ is used in the sense of \eqref{contract}.
%Lastly we would like to comment that this is the same as the state sum, 
%where one sums over all possible compatible labelings of the attaching regions, with the appropriate weights defined by the tensors above. 
%The benefit of writing the partition function this way 
%is that we can write down the state sum in the fermionic case with little modification. 

%The 1-cell weights are given by $T_e \in A(e)^*$ defined via,%
%\begin{align}
% T_e(\mu_v \tp a_{1}^*\tp a_{2}^* \tp a_{3}^* \tp \mu_{v'})  = 
% \begin{cases} 
 %\phi(\mu_v, \mu_{v'})^{-1}  & \text{if labels agree} \\
% 0 & \text{otherwise}
% \end{cases} 
%\end{align}%
%where $\phi(*,*)$ is the pairing between a disk and a reflected disk. 
%Or diagrammartically we write this as,
%\begin{align}
%\EdgeTensorprime = 
 %\begin{cases} 
% \phi(\mu_v, \mu_{v'})^{-1}  & \text{if labels agree} \\
% 0 & \text{otherwise}
 %\end{cases} 
%\end{align}
%Note that for this to be non-zero $\mu_v \in V^{a_1^* a_2 a_3}$ and $\mu_{v'} = \mu_{v}^*$.
%\dave{What if $a \cong a^*$?}




%\begin{figure}
%\begin{center}
%\includegraphics{HorshoeTube.pdf}
%\caption{\label{HorshoeTube}
%\dave{Will use this later.}
%}
%\end{center}
%\end{figure}



%%%%%%%%%%%%%%%%%%%%%%
\subsection{The fermionic state sum}
%%%%%%%%%%%%%%%%%%%%%%

The fermionic version of the state sum can be computed using the technique described above.  
Here we present only the result, since the methods involved are exactly the same as in the bosonic case.

As in the bosonic case, there are two pieces of input data for the state sum, 
which each acquire extra adjectives in the fermionic setting:
\begin{itemize}
\item a super pivotal fusion category $\mcc$,
\item an oriented spin 3-manifold $\mcm$ possessing a given cell decomposition.
\end{itemize}
We will employ the same notation used in the previous section. 
The vector spaces $E$ and $W$ which are assigned to the attaching regions are again defined in the same way. 
Note however, that $W$ is a super vector space, while $E$ remains bosonic
\footnote{A perhaps more natural choice for the edge vector space would be $E'=\oplus_x\End(x)$, which is generically a super vector space. 
Odd vectors in $E'$ would then correspond to q-type edges which host fermionic dots. However, one 
could always use odd endomorphisms to move these dots to the ends of the edges, which ``displaces'' 
the odd degrees of freedom from the edges to the vertices. This displacement procedure results in a simpler (purely bosonic) edge Hilbert space $E$. 
\dave{What's the benefit? Or are you just saying that there is none?
Also these vector spaces don't have vertices associated with them.}
\ethan{I'm saying that I think the natural edge Hilbert space is $E'$, which is super, as opposed to $E$, which isn't. We can still use $E$, but I wanted to explain why.}
\dave{Where are the vertices that you're displacing the fermions?
On the 1-cells?}
}.
%\ethan{You said $E$ was bosonic, but I was initially thinking that $E = \oplus_x \End(x)$?}
%\dave{We could write it as $(\text{End}(x))^0$ if we want. 
%But I think we should keep them bosonic.
%}
%In the fermionic case the vector space $W$ is a super vector space, while $E$ remain a purely bosonic (even) vector space. 

There are three main differences present in the construction of the fermionic state sum. 
Although we have largely been using unordered tensor products throughout our discussion of fermionic theories, to actually compute
the partition function through a tensor contraction, a particular choice of ordering for the tensors involved in the partition function must be made (with different orderings related by the usual Koszul signs).
%\dave{Need to say ordering on what.
%I would be inclined to say that we need an ordering for every tensor. 
%And then give a prescription to contract over tensors and find a possibly large tensor, with another ordering.}
Secondly, since simple objects in $\mcc$ can have non-trivial endomorphism algebras, some additional care must be taken to ensure the proper normalization of the partition function. 
Finally, spin structure considerations means that the pivot $P_e$ appearing in the definition of the fermionic 1-cell tensor $T_e$ has different properties 
than the one appearing in the bosonic partition function. 


%Except now one must of course define a sign ordering in the tensor product.
%We again define the contraction in \eqref{contract}.
%This is defined on the un-ordered tensor product defined in \ref{koszul_signs}.
%To get a number at the end of the day, one still has to choose a definite ordering of the tensor product spaces, and
%when applying $\mcb$, one needs to have the correct order of tensor factors.
%We will continue to adopt the implicit notation where the Koszul ordering increases
%from left to right in tensor factors. 
%Mapping an arbitrary Koszul ordering to this standard ordering can always be done with a finite number of Koszul isormorphisms.
%\dave{Check Turzillo paper.}
%\dave{I found that the $\mcb(\psi_1 \tp \eta_2) = \mcb(\eta_1 \tp \psi _2)$ is symmetric. }

The difference in the allowed endomorphism algebras for the simple objects in $\mcc$ leads to a modification of 
the 2-cell tensors, which is needed to account for the fact that $\dim\End(x)\neq1$ if $x$ is q-type.
The fermionic version of the 2-cell tensor at a face $f$ with $r$ boundary edges is 
\begin{align}
T_f(w_f)=T_f(w_{a_1} \tp w_{a_2} \tp \cdots \tp  w_{a_r})   =\sum_{v_x^* \in E} \frac{d_x}{\text{dim} \; \text{End}(x)}
\prod_{i = 1}^r \chi(v_x^* \tp w_{a_i}).
\end{align}
This is the same $\text{dim} \; \text{End}(x)$ that appears in the definition of the total quantum dimension $\mcd$ (see \ref{total_qdim_defn}). 
%\dave{removed the following for now.}
%Since the 2-cells inherit a bounding spin structure, any closed loop of string embedded in the 2-cell will 
%have even fermion parity, and so the vector space for the 2-cell tensors remains bosonic, and as such needs no further adjustments for the fermionic setting. 
%\ethan{right?}
%\dave{The tensors always have even parity. 
%The normalization is because it's the trivial idempotent that we plug into the $S^1 \times D^1$ attaching region in the cut and glue picture.
%}

The tensors for the one-handles are also modified when passing to the fermionic setting. 
In the bosonic state sum, we needed to keep track of three possible pivots
in the resolution \eqref{horshoe_resln}.
For the fermionic state sum $P^3 = (-1)^F$ and we now have six possible pivots:
in addition to the three we could have in the bosonic state sum (id, $P$, and $P^2$), 
we can also have an action of the spin-flip $P^3$; recall \eqref{spin_flip_functor}.
Hence, the edge tensors retain the same form, namely
\begin{align}
T_e(v_{a_1} \tp v_{a_2} \tp v_{a_3} \tp \mu \tp \nu^*) = \frac{\mcb(\mu \tp P_e(\nu^*))}{\mcb(\mu \tp \mu^*) \mcb(\nu^* \tp \nu)} ,
%T_e = \sum_{i,j, \; \{ v_{a_r}\} \; :\; r \in e} \mcb(\mu_i \tp P_e \circ \nu_j^*) \tp_{r \in e} v_{a_r}^* \tp \mu_i \tp \nu_j^*
\end{align}
except for the fact that $P_e$ now has order 6, with $P_e^3=(-1)^F$. 
\dave{Need to check ordering on this.}
\dave{are equivalence classes of spin structures in 1-1 with $\{ P_e \}$? 
May be worth commenting on, it seems unlikely that this is the case.
}
As before, we assume that 
the edge $e$ ends on the 0-cells $v,v'$, is oriented from $v$ to $v'$, and that 
$\mu$ is a basis vector in the Hilbert space $\mch(c_{ev})$ and $\nu$ is a basis vector 
in $\mch(c_{ev'})$.
%Additionally, we need to keep track of the Koszul ordering in above the tensor product. 
%In the above we assumed the standard implicit left-to-right ordering convention. 
%If we are given an ordering that departs from this convention, 
%we must introduce the appropriate Koszul sign required to standardize the order. 
%\dave{Which ordering are you referring to? 
%It seems like it's already fixed in the above.}

The 0-cell tensors are exactly the same as in the bosonic case, 
except that we must keep track of an ordering of the four tensor factors when defining the tetrahedral symbol. 
We choose the following ordering convention:
\begin{align}
T(w_v)=T_v(\alpha \tp \beta \tp \gamma \tp \delta) = \Tetrahedron.
% = \sum_{\mu_{e_j} \in \mch(\bar{c}_{e_j v}) } \text{Tet}(\mu_{e_1} \tp \mu_{e_2} \tp \mu_{e_3} \tp \mu_{e_4} )  \mu_{e_1} \tp \mu_{e_2} \tp \mu_{e_3}\tp \mu_{e_4}
\end{align}
%with
%\begin{align}
%\text{Tet}(\alpha \tp \beta \tp \gamma \tp \delta) =\; \Tetrahedron.
%\label{Tetrahedron}
%\end{align}
%If we are given a tetrahedron with a different ordering, we must change the ordering to the standard one, which as usual is done at the cost of the appropriate Koszul signs. 
%\dave{I thought by assumption the 1-cells meeting a tetrahedron are ordered?}
%\dave{I think the only Koszul signs we have to worry about are those appearing in the tensor contraction.}

The fermionic partition function can be written formally in the same way as before:
\begin{align} \label{simple_fermion_Z}
Z(\mcm) = \chi\left( \bigotimes_{f \in \mcf} T_f \bigotimes_{e \in \mce} T_e \bigotimes_{v \in \mcv} T_v\right),
\end{align}
%where the fact that the tensors are all even means that the order on the tensor product does not matter. 
However, when evaluating the RHS, 
one has to be careful about Koszul sign issues when performing the tensor contraction induced by $\chi$. 
When we contract out two tensor indices of a tensor in $\mch^*\tp\mch$, we must be careful to only perform 
the contraction after the two tensor factors have been moved adjacent to one another in the tensor product. 

Suppose we have two tensors $Q \in V_Q$ and $T\in V_T$,
defined by,
\begin{align}
Q &= \sum_{q_L \tp q \tp q_r } Q(q_L \tp q \tp q_R)q_L \tp q \tp q_R\\
T &= \sum_{t_L \tp t \tp t_R} T(t_L \tp t \tp t_R  )t_L \tp t \tp t_R
\end{align}
and we have split the vector spaces $V_Q$ and $V_T$ into tensor factors on 
the left and right of the two indices that we would like to contract, namely $t \in V$ and $q \in V^*$.
Define the contracted tensor by $K$, which is given by
\begin{align}
K = \sum_{ q_L \tp q_R \tp t_L \tp t_R}K(q_L \tp q_R \tp t_L \tp t_R) q_L \tp q_R \tp t_L \tp t_R
\end{align} 
with 
\begin{align}
\label{contraction_example}
K(q_L \tp q_R \tp t_L \tp t_R) &= \sum_{q,t} Q(q_L \tp q \tp q_R)R(t_L \tp t \tp t_R  ) (-1)^{|q| |q_r|}(-1)^{|t_L| | t|} \chi(q \tp t)\\
&= \sum_{t} Q(q_L \tp t^* \tp q_R)R(t_L \tp t \tp t_R  ) (-1)^{|t|( |q_R| +|t_L|)}.
\end{align}
The Koszul sign $(-1)^{|t|( |q_R| +|t_L|)}$ is picked up from commuting the tensor factors $q$ and $t$ next to one another.


%For example, suppose we have two tensors $X \in V_1 \tp \dots \tp V_n$ and $Y \in W_1\tp \dots \tp W_m$,
%defined by
%\begin{align}
%X = \sum_{x_i \in V_i}X(x_1 \tp x_2 \tp \cdots \tp x_n) x_1 \tp \cdots \tp x_n,\\
%Y = \sum_{y_i \in W_i}Y(y_1 \tp y_2 \tp \cdots \tp  y_m) y_1 \tp \cdots \tp y_m,
%\end{align} 
%and suppose we want to contract over the indices $x_p$ and $y_q$ in the tensor $X\tp Y$, where $V_p \cong W_q^*$.
%If we denote the contracted tensor by $Z$,
%then 
%\begin{align}
%Z = \sum_{\substack{x_i \in V_i, i \neq p\\ y_j \in W_j, j \neq q}} Z(x_1 \tp \cdots \tp x_{p-1} \tp x_{p+1} \tp \cdots \tp x_n \tp y_1 \tp \cdots\tp y_{q-1} \tp y_{q+1} \tp \cdots \tp y_m) \\
%\times x_1 \tp \cdots \tp x_{p-1} \tp x_{p+1} \tp \cdots \tp x_n \tp y_1 \tp \cdots\tp y_{q-1} \tp y_{q+1} \tp \cdots \tp y_m
%\end{align}
%where 
%\begin{align} \label{contraction_example}
%Z(x_1 \tp \cdots \tp x_{p-1} \tp & x_{p+1} \tp \cdots \tp x_n \tp y_1 \tp \cdots\tp y_{q-1} \tp y_{q+1} \tp \cdots \tp y_m) \\ 
%=& \sum_{x_p \in V_p, y_q \in W_q}X(x_1 \tp \cdots \tp x_n)Y(y_1 \tp\cdots \tp  y_m) \\ & \qquad \times (-1)^{|x_p|(|x_{p+1}| + \cdots + |x_n|)} (-1)^{(|y_1| + \cdots + |y_{q-1}| ) |y_q|} \chi(x_p \tp y_q).
%\end{align}
%The Koszul signs appearing in the above equation are simply those acquired when re-ordering the tensor factors in $X \tp Y$ so that $x_p$ and $y_q$ appear in the order $x_p\tp y_q$, with no other 
%intervening tensor factors. 

The Koszul signs that appear in this example arise when performing the tensor contraction induced by $\chi$ in the 
partition function \eqref{simple_fermion_Z}.
To be slightly more explicit, we can write 
\begin{align} 
Z(\mcm) = \sum_{ \mcl } (-1)^{k_\mcl} \prod_{f \in \mcf} T_f(w_f) 
\prod_{e \in \mce} T_e(w_e) \prod_{v \in \mcv} T_v(w_v),
\end{align} 
where $\mcl$ runs over all admissible labels and $(-1)^{k_\mcl} = \chi(w_\mcl)$ is the Koszul sign acquired 
when re-arranging the Koszul ordering of the tensor factors in $w_\mcl$ when performing the tensor contraction. The Koszul sign can be found 
by ensuring that tensor factors 
being contracted always have adjacent Koszul-ordering and by using \eqref{contraction_example} repeatedly.


\begin{comment} 

%%%%
%%%%
%%%%
\dave{A sketch of the alternative we discussed on Skype.}
\ethan{I kinda liked having the $T$s be tensors, but I guess no strong preference}
\begin{align}
Z(\mcm)  = \sum_{\mcl} (-1)^{\mcl}\prod_f T_f \prod_e T_e \prod_v T_v
\end{align}
where $\mcl$ runs over all labelings of the tetrahedra. 
An admissible labeling is one a basis vector of the 0-cells defined \eqref{tensor_space}.
A labeling all the 0-cells determines a labeling of all the 1-cells and 0-cells, see Figure \ref{NotationStateSum}.
All we need to do is define the appropriate weights for each cell. 

The zero cell weights are,
\begin{align}
T_v =\text{Tet}(\mu_{e_1} \tp \mu_{e_2} \tp \mu_{e_3} \tp \mu_{e_4} ) 
\end{align}
where the tetrahedral symbol is defined by 
\begin{align}
\text{Tet}(\alpha \tp \beta \tp \gamma \tp \delta) =\; \Tetrahedron
\label{Tetrahedron}
\end{align}

The 1-cell, $e$ oriented from $v$ to $v^\prime$ labeled $\mu_v$ and $\nu_{v^{\prime} }^*$, and edge pivot $P_e$ has weight,
\begin{align}
T_e(\mu_v \tp \nu_{v^{\prime} }) = \frac{\mcb(\mu_v^* \tp P_e(\nu_{v^\prime}) )}{\mcb(\mu_v^* \tp \mu_{v}) \mcb(\nu_{v} \tp \nu_{v^\prime}^*)}
\end{align}
where $\mcb$ is the bilinear pairing (not kronnecker delta).
\dave{I think I was consistent with $*$ in this equation, but may have flipped every one.}

The 2-cells get a factor of $d_x$. 

Fermionic modifications. 
Again sum over all possible label sets. 
For each labeling define an ordering on all odd pitchforks (or define a global ordering). 
Define,
\begin{align}
Z(\mcm)  = \sum_{\mcl} (-1)^{k_\mcl}\prod_f T_f \prod_e T_e \prod_v T_v
\end{align}
where $k_\mcl$ is the number of Koszul isomorphisms needed in order to go from a standard ordering on the 0-cells to a standard ordering on the 1-cells.
By standard ordering, we mean on each 0-cell the Koszul signs are linear increasing with respect to the ordering of \eqref{Tetrahedron}. 
And standard ordering of the 1-cells is chronological with respect to incoming (first) and outgoing (second). 
\end{comment} 


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Shadow world and explicit ground state wave function}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{itemize} 
\item write down explicit wave function on e.g., honeycomb lattice. Using the TV state sum on a slab
\item connection to MPO's/mention tube category/excitations
\item Do some sort of example. At the very least we can write down the wave function for the Kitaev wire.
We could write down the ground state of the $C_2$ theory.
\end{itemize} 

In this subsection we define a tensor network that produces the ground state wavefunction of the Hamiltonian defined in \eqref{ham}.
To do so, we evaluate $Z(\mcm)$ on three manifolds of the form $\mcm =\Sigma \times [0,1]$.
\footnote{Historically, this version of the state sum pre-dates TVBW and was first found by Kirillov and Reshetikhin~\cite{Kirillow1989} who coined the term `shadow world', which was later extended by Turaev~\cite{turaev1992shadow} and included shadows of links which he coined `shlinks'.}


The basic input to the wave-function the same as that of the Hamiltonian defined in \eqref{ham}.
However, in addition we must also specify a cell decomposition for $\Sigma \times [0,1]$. 
The cell decomposition for the slice $\Sigma \times \{ 1 \} $ is fixed by the cell decomposition used for the Hamiltonian \eqref{ham}, and we denote it by $\Sigma_1$.
We also pick a cell decomposition of $\Sigma \times \{0\}$, which we denote $\Sigma_0$.
The partition function then provides a linear map between vector spaces:
\begin{align}
Z(\Sigma_{0\ra1} ): \; \mch(\Sigma_0) \ra \mch(\Sigma_1)
\end{align}
whose image is the space of ground states of \eqref{ham}.
Explicitly, we can prepare wavefunctions by
%\begin{align}
%
%\ket{\Psi} = \sum_{ v_1 \in \mch(\Sigma_1)} \ket{v_1} v_1^* \cdot Z(\Sigma_{0\ra1} ) %\cdot v_0.
%\end{align} 
\begin{align}\label{GroundState}
\ket{\Psi} = \sum_{v_1 \in \mch(\Sigma_1)} \ket{v_1} Z(\Sigma_{0\ra1}; v_0, v_1),
\end{align}
where $Z(\Sigma_{0\ra1}; v_0, v_1)$ is the evaluation of the partition function with 
boundary conditions fixed by $v_0$ and $v_1$. 

We can take the cell decomposition in the bulk of $\Sigma_{0\ra1}$ to be any cell decomposition that agrees with $\Sigma_0$ and $\Sigma_1$ on the boundaries. 
However, there is a natural choice, which corresponds to extending $\Sigma_0$ into $\Sigma \times [0, 1/2]$, and $\Sigma_1$ into $\Sigma \times [1/2, 1]$, see Figure~\ref{CellDecomposition}. 
It is convenient to take the two cell decompositions to be in `normal' position,
meaning that $\Sigma_0$ only intersects $\Sigma_1$ along edges, again see Figure~\ref{CellDecomposition}.

\ethan{I find this pretty cryptic at the moment---will have to go through and derive stuff on my own before I can attempt a clearer writing}

We now specify the amplitude $Z(\Sigma_{0\ra 1}; v_0, v_1) $ in \eqref{GroundState}.
The labels of the 2-cells that extend from $\Sigma_0$ and $\Sigma_1$ are determined by $v_0$ and $v_1$. 
The 2-cell labels living at $\Sigma \times \{ 1/2 \}$ need to be summed over.
We can orient each 2-cell using the orientation of $\Sigma$. 
By looking at Figure~\ref{CellDecomposition}, we see that there are only three kinds of 0-cells that show up \dave{Figure}. 
Rather than drawing a spherical neighborhood of each 0-cell, 
we will draw a cube. 
The three kinds of 0-cells are displayed in Figure~\ref{StandardizedSlabTensors} (first row), along
with their standardized versions (middle row).
The 1-handles that appear in the contraction all need an orientation.
In principle this can be arbitrary, there is a natural choice -- the 1-handles biject with with the 1-cells of $\Sigma_0$ and $\Sigma_1$, and hence assign an orientation to each 1-handle in $\Sigma_{0 \ra 1}$. 
We can use the orientation of the 1-cells descending from $\Sigma_0$ and $\Sigma_1$ to orient the 1-handles.
It is helpful to project each picture in part a) of Figure~\ref{StandardizedSlabTensors} into the into $\Sigma \times \{ \frac{1}{2} \} $, and specify its weight by part c). 

Each vertex on $\Sigma_1$ will have three neighboring 2-cells that need to be summed over, and three 1-handles. 
\begin{align}
\Tensora \; &= \;\sum_{\{ s_i \} }  \Tensoraa \cdot \mu_0 \tp s_1 \tp s_2 \tp s_3 \\
\Tensorb \; &= \;  \Tensorbb \\
\Tensorc \; &= \; \Tensorcc \\
\end{align}


\dave{Do 1-handles?}

\begin{figure}
\begin{center}
\includegraphics[scale=0.6]{StandardizedSlabTensors.pdf}
\caption{\label{StandardizedSlabTensors}
In part a) we show the three kinds of possible 0-cell tensors that could appear in a $\Sigma_{0\ra1}$. 
In part b) we show the first step for one possible standardization procedure. 
In part c) we finish the standardization by making each trivalent vertex a pitchfork. 
\ethan{I still find this figure confusing. In the first row, are these all neighborhoods around a 0-cell at $\Sigma \times 1/2$? And are the blue and orange lines intersections of 2-cells with the cube?}
}
\end{center}
\end{figure}



\begin{figure}
\begin{center}
\includegraphics{CellDecomposition.pdf}
\caption{\label{CellDecomposition}
\dave{Will pitchforkize.}
Cell decomposition used to construct the tensor network.
The top layer denoted $\Sigma_1$ is the cell decomposition that we built the Hamiltonian over in \eqref{ham}.
The input cell decomposition $\Sigma_0$ should be in `normal' position with respect to $\Sigma_1$, that is they should only interesect along edges. 
The intermediary cell decomposition $\Sigma_{0\ra1}$ is found by extending $\Sigma_0$ into 
$\Sigma \times [0,\frac{1}{2}]$, and $\Sigma_{1}$ into $\Sigma \times [\frac{1}{2},1]$.
On the right, we have shown two dimensional representation of the cell decompositions. 
Notice that the orientation of all lines on $\Sigma_{0 \ra1}$ have been reversed relative to $\Sigma_0$ and $\Sigma_1$. 
In the two dimensional pictures we will denote the cells stemming from $\Sigma_0$ by squiggly lines.
}
\end{center}
\end{figure}


A cell decomposition of $\Sigma \times \{ 1 \}$ along with a set of pitchforkization maps \eqref{std0handle}, and a spin structure.
In general, the space of ground states will be degenerate. 
Specifying different states in this degenerate ground space ammounts to choosing different input states for the cell decomposition at $\Sigma \times \{0 \}$. 

 
%%%%%%%%%%%%%%%%%% 
\section{Discussion} \label{discussion}
%%%%%%%%%%%%%%%%%%

One exciting aspect of the fermionic topological orders we have studied in this paper is their potential quantum information 
applications, which we now briefly speculate on. 
First, we can consider a hybrid system with spin structure defects and deconfined anyonic excitations.
Consider the scenario where several q-type defects terminate at a boundary of a sample, as shown in Fig.\ref{QCApplication}, where the q-type defects are drawn as orange lines.
For a system with $n$ such defects,  
the computational space associated with the defects $Q_1,Q_2,\dots,Q_n$ is the fusion space $V^{Q_1 Q_2 \cdots Q_n}$. 
There are two kinds of logical operations we can perform on the defects:
one is given by braiding the deconfined anyons in the bulk, and is familiar from conventional topological quantum computation.
The other is given by the action of $\End(Q_1)\tp\End(Q_2)\tp\dots\tp\End(Q_n)\cong\cl_1^{\tp n} \cong \cl_n$ on the defects.
It is known that the resulting clifford gates are nearly universal, meaning that the addition of a single entangling gate results in a universal gate set.
The action of $\cl_n$ can be implemented by connecting Kitaev wires to the terminations of the q-type defects, as shown in Fig.~\ref{QCApplication}, and tuning the flux through those wires. 
Adiabatically tuning the flux by one flux quantum, one ejects a pair of electrons into the q-type defects, and hence applies the Clifford gate $\Gamma_i \tp \Gamma_j$, where $\Gamma_i$ is the odd generator 
of the $i$th tensor factor in $\cl^{\tp n}$.
%\dave{I'll make this more precise if we want to include a discussion of this sort.
%It may make our paper more appealing to some people.}
%\ethan{should try to make this better}

\begin{figure}
\begin{center}
\includegraphics[scale=.8]{QCApplication.pdf}
\includegraphics[scale=.8]{QCApplication2.pdf}
\caption{\label{QCApplication}  
An illustration of one possible quantum information application of the topological orders discussed in the main text. 
In this setup, we have four q-type defects $Q$ (orange lines) which terminate at the boundary of the sample, and are strongly hybridized with two Kitaev wires (green lines). 
By adiabatically tuning the flux $\Phi_j$ through the Kitaev wires, one implements Clifford gates acting
on the Clifford algebra $\cl_4$. 
In addition to the Clifford gates, we can also braid the deconfined m-type particles appearing the fusion space of the q-type defects (blue lines) to realize a richer gate set. 
}
\end{center}
\end{figure}

Additionally, it would be useful to make more precise connections between physical entities and some of the mathematical 
devices we have used to construct the fermionic theories 
we have studied. 
In particular, it would be useful to clarify the precise physical meaning of the complex line bundle 
and the ``back wall'' that we use to perform fermion condensation. 
In simple examples like the $C_2$ theory, the most natural interpretation for these constructs 
seems to be that they constitute a topological p-wave superconductor.
Indeed, the way we treat the physical fermions we use to perform condensation 
in our models is identical to the behavior of 
superconductors: they are states of 
free fermion states, where wavefunctions that differ by pairs of 
fermions are related by a phase. 
The specialization to the p-wave pairing channel is made because of the spinless-ness
of the fermions we use to induce the condensation, which we assumed from the very 
beginning.  
The superconducting nature of the devices we use to perform condensation is forced on us
by our assumption that the emergent fermion $\psi$ we condense possesses $\zt$
fusion rules, and that in the complex line bundle we construct, pairs of
$\psi$ worldline endpoints can be created or destroyed in pairs. 
Evidence for the presence of a p-wave superconductor is most clearly seen in the $C_2$ theory, 
where additional corroboration emerges after we construct $\tube(C_2)$: 
restricting to the $(N,N)$ sector, both the modular $S$ and $T$ matrices 
factorize as $S=S_{Ising}\tp S_{p\pm ip}, T = T_{Ising} \tp T_{p\pm ip}$ (where the 
choice of $\pm$ is determined by the ``angular momentum'' of the fermionic dots 
in our graphical calculus, i.e. the choice of $\pm A^4$ when removing a semicircular fermion
worldline), suggesting a possible interpretation of this sector 
as a stack of the origin Ising theory with a topological superconductor. 
Indeed, this was noticed recently in \cite{ware2016}.
Furthermore, that the parity of the ground states on the torus with $(N,N)$ spin structure is always 
odd agrees with this interpretation, since the fermion parity of a topological 
p-wave superconductor on such a torus is always odd \cite{you2015}.
For more
complicated theories like the $\halfesix$ theory, whose modular matrices do not obviously contain a superconductor-related factor, 
it is at present unclear how precise this interpretation really is. 

In our discussion of the modular $S$ and $T$ matrices in each of the examples we've worked out, 
we have focused on the modular transformation perspective, rather than on the braiding statistics perspective. 
For example, we have computed the $S$-matrix by considering the way it acts to exchange the two 
cycles of the torus. 
We have not focused on the statistical picture behind the $S$-matrix, in which matrix elements $S_{ab}$ correspond to double braids between $a$ and $b$ particles. 
While we have checked that the computation of double braids reproduces the correct $S$-matrix 
in the tube algebra of the $C_2$ theory, some subtleties involving relative spin structures rear their heads when trying to compute particular braiding data in more general settings. 
We plan to address these subtleties in future work. 

We have analyzed fermion condensation in all its different guises, but have had little to say about the reverse procedure:
starting from a fermionic phase and ``bosonizing'' to obtain a bosonic one. Roughly, this can be done by 
``summing over spin structures'' (see e.g. \cite{bhardwaj2016,kapustin2017}).
Since bosonic theories are defined without reference to spin structures, to obtain a bosonic theory from a fermionic 
one in which $\psi$ has been condensed, we must remove the spin structure dependence. 
Schematically, we can consider ``averaging'' over spin structures by condensing spin structure defect lines: since $\psi$ endpoints braid nontrivially with the defect lines the resulting low-energy theory contains no 
$\psi$ endpoints, and $\psi$ ceases to be isomorphic to the vacuum. 
This process is related to the modular extension construction discussed in \cite{Lan2016b}: a fermionic theory $\mcc /\psi$ with $\psi$ considered as a distinct object is not modular, but can be made modular
constructing a modular extension of $\mcc / \psi$. The minimal such extensions reproduce the different possible 
parent theories $\mcc$. 

A natural question to ask at this stage is: what kind of fermionic topologically ordered phases can exist? 
At this point, there seem to be essentially two broad classes of fermionic phases, both of which can be obtained from bosonic theories. 
The first class is ``trivially'' fermionic: suppose we have some bosonic theory $\mcc$. 
We may then obtain a fermionic theory by simply stacking $\mcc$ with a phase of physical fermions $\mcc_{f} = \mcc \boxtimes {\rm sVec}$, where sVec is the category of supervector spaces, whose simple objects are ${\rm sObj}({\rm sVec}) = \{\unit,f\}$, with $f$ a physical fermion. 
$\mcc_f$ is fermionic, but in a rather trivial sense, since its ``fermionic-ness'' factors and is contained entirely within the sVec part of the product. 
The other (more interesting) way to obtain a fermion phase is to perform fermion condensation, which as we have 
mentioned amounts to stacking $\mcc$ with a phase of physical fermions and condensing pairs of emergent and physical fermions. 
This yields $\mcc_f' = (\mcc \boxtimes {\rm sVec}) / (\psi \boxtimes f),$
where $\psi \in \mcc$ is an emergent fermion. 
It is then natural to wonder whether all fermionic topological phases can be obtained by stacking or condensation in this way. 
It seems reasonable to bet that they can---given a fermionic phase, one can always perform bosonization 
to obtain a bosonic phase, which will contain a fermion that can be condensed to reproduce the 
original fermionic theory. 

%\ethan{talk about $\mcc \boxtimes ({\rm sVec})^{\boxtimes n}$ as adding on a bunch of superconductors, and chiral charge stuff ($c_-$ for invertible fermionic orders is quantized as $n/2$ from cobordism argument)} 
%\ethan{mention difference between our approach and ``double the objects'' approach of wen in 1507.04673}
%\ethan{inverse of condensation is modular extension, and there are 16 modular extensions of sVec: eight Ising ones and eight TC-like ones (arXiv:0906.0620)}

On the more formal side, it would be interesting to extend our methods to theories where particles other than fermions are condensed. 
The simplest possible generalization would be to consider the condensation of objects which obey $\zz_r$ (with $n>2$) fusion rules. 
Instead of spin structures, condensing such objects would likely require equipping the manifold on which the theory is defined with an $r$-spin structure, which could interesting consequences for the structure of the 
tube algebra. \ethan{Kevin, are you planning on thinking about this more?} 
Additionally, in our use of spin structures %(technically a pin$^+$ structure, see Appendix \ref{pins_and_reflection}) 
to perform fermion condensation, we have tacitly assumed that the physical fermions which provide the spin structure are {\it uncharged}. 
If the physical realization we have in mind for these fermions carries a $U(1)$ charge (in scenarios where 
the physical fermions are not provided by superconductors), we would need to generalize this to a spin$_c$ structure instead. 
Whether or not these modifications would have any qualitative effects on the structure of the resulting condensed theories 
is presently unclear.  


 
 \paragraph{Acknowledgements}
 Boulder school, KITP for hosting, Ryan Thorngren for discussions. 
Dave Aasen gratefully acknowledges support from the National Science Foundation through grant DMR- 1723367
and the Caltech Institute for Quantum Information and Matter, 
an NSF Physics Frontiers Center with support of the Gordon and Betty Moore Foundation through Grant GBMF1250.
Ethan Lake is supported by the Fannie and John Hertz Foundation.
Dave Aasen and Ethan Lake acknowledge support by the 2016 Boulder Summer School for Condensed
Matter and Materials Physics through NSF grant DMR-13001648.
 
 

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\phantomsection
\addcontentsline{toc}{section}{References}

\bibliographystyle{utphys}
\bibliography{references}

\clearpage
\appendix


%%%%%%%%%%%%%%%%%%%%%
\section{Spin and pin structures} \label{spin_and_pin}
%%%%%%%%%%%%%%%%%%%%%

In this section we review the basic definitions and properties of spin structures, which are needed for performing our ``fermion condensation'' procedure.   


In brief, a spin structure is a way of describing how spin-$1/2$ particles behave under rotations. 
To make this more precise, we define the group $Spin(n)$ though the short exact sequence
\be \label{spin_gp_seq} 1 \ra \zt \ra Spin(n) \ra SO(n) \ra 1,\ee
meaning that $Spin(n)$ is a central extension of $SO(n)$ by $\zt$ (and for $n>1$, $Spin(n)$ is the connected double-cover of $SO(n)$).  
In terms of representation theory, this means that the representations of $Spin(n)$ are {\it projective} representations of $SO(n)$: relations between $SO(n)$ representations only hold modulo elements of $\zt$ in $Spin(n)$. Most importantly, this means that in $Spin(n)$ a $4\pi$ rotation is trivial while a $2\pi$ rotation picks up a minus sign: in $Spin(n)$, $R_\pi^2 = -1$.  

To define a spin structure on a manifold, we first examine the oriented frame bundle $FSO(M)$ on a base manifold $M$, whose fibers consist of all choices of oriented framings on $M$ with structure group $SO(n)$ with $n=\dim M$\footnote{Here we are assuming that $M$ is oriented so that we can choose a structure group of $SO(n)$ rather than $O(n)$.}. To turn this into a spin bundle, we replace the structure group $SO(n)$ with $Spin(n)$, meaning that $2\pi$ rotations of framings are associated with $-1$ signs. 
This can in turn be encapsulated by the short exact sequence 
\be \label{spinbundleseq} 1 \ra \zt \ra FSp(M) \ra FSO(M) \ra 1.\ee
A given section of $FSp(M)$ is a fermion field. Our choice of a global framing for the $\psi$ ribbons in Section \ref{condensing_psi} is equivalent to fixing a particular fermion field configuration, i.e.\ choosing a particular section of $FSp(M)$. 

Not all exact sequences \eqref{spinbundleseq} provide consistent spin structures. To obtain a spin structure, we require that $FSp(M)$ be ``untwisted'', i.e.\ 
that the second Stiefel-Whitney class $\omega_2 \in H^2(M,\zt)$ be trivial\footnote{More precisely, $\omega_2$ is the cohomology class of the 2-cocycle associated with $M$'s tangent bundle}. For the low-dimensional examples we're interested this can shown to always be the case, as we will always have $H^2(M,\zt) = 0$. This then implies that any 2-cochain $\omega_2$ on $M$ can be written as $\omega_2 = \delta \eta$ for some 1-cochain $\eta \in H^1(M,\zt)$, meaning that different spin structures are parametrized by the group $H^1(M,\zt)$\footnote{On general manifolds (though not the ones we encounter in the text) the assignment of spin-structures to elements in $H^1(M,\zt)$ is non-canonical, and the set of spin-structures is merely an $H^1(M,\zt)$-torsor.}, which is usually easy to calculate. Physically, this assignment corresponds to a choice of fermionic boundary conditions around the noncontrabile loops in $M$. 

To elaborate on this, a spin structure $\sigma$ allows us to define a function $\eta_\sigma \in H^1(\Sigma, \mathbb{Z}_2)$ that takes homotopy classes of framed closed curves 
$\gamma_1, \gamma_2, \cdots, \gamma_n \subset \Sigma$ to elements in $\zt$.
The image of a framed loop $\gamma$ under $\eta_\sigma$ specifies whether $\gamma$ is bounding (anti-periodic boundary conditions) or non-bounding (periodic boundary conditions).
Since contractible loops have anti-periodic boundary conditions, we can define
\be \label{etadefn} \eta_\sigma(\gamma) = \begin{cases} 0 \text{\ if $\gamma$ is bounding,}\\
1 \text{\ if $\gamma$ is non-bounding.}\end{cases} \ee
Thus, the phase picked up by transporting a fermion along a path $\gamma$ is $-(-1)^{\eta_{\sigma}(\gamma)}$.
The failure of $\eta_\sigma$ to factor over the concatenation of two paths $\gamma,\gamma'$ is controlled by whether or not the paths intersect:
\begin{align}
\eta_{\sigma} (\gamma + \gamma') = \eta_{\sigma}(\gamma) + \eta_{\sigma}(\gamma') + \gamma \cap \gamma'
\end{align}
where $\gamma+\gamma'$ is the concatenation of $\gamma$ and $\gamma'$. 
This means that spin structures can be described as a quadratic refinement of the intersection pairing. 

This perspective allows us to easily calculate the number of spin structures that a given manifold admits. 
For example, there are two spin structures on the cylinder: one with periodic boundary conditions (vortex 
spin structure) and one with anti-periodic boundary conditions (non-vortex spin structure). Similarly for the 
torus there are four, one for each combination of boundary conditions around the two non-contractible 
cycles of the torus. There are also four spin structures on the pair of pants: determining boundary 
conditions around two of the punctures uniquely determines the boundary condition around the third 
puncture. Since fermions traveling around {\it contractible} loops have anti-periodic boundary conditions, 
anti-periodic boundary conditions serve as the ``identity'' in the group $H^1(M,\zt)$ of spin structures. This 
means that if two of the punctures on a pair of pants have $P$ boundary conditions, the third must have 
$A$ boundary conditions. This is relevant for determining the fusion rules of quasiparticles in our theory: 
their fusion rules are $\zt$-graded by their spin structures, with vortex spin structures being associated 
with the nontrivial element of $\zt$. If we think of periodic boundary conditions as being implemented by 
branch cuts, this just means that the branch cuts obey $\zt$ fusion rules, and are only allowed to terminate 
on punctures which host a vortex-type quasiparticle. 


To think about inner products of diagrams, we need to have the ability to reflect them in a given spacetime plane. Incorporating reflections into our arsenal means replacing $SO(n)$ with $O(n)$ in \eqref{spin_gp_seq}. This allows us to define the groups $pin_\pm(n)$, which are the ``reflection-enhanced'' versions of $Spin(n)$ defined by the exact sequence 
 The $\pm$ sign in $pin_\pm(n)$ distingiishes between the two different allowed extensions in \eqref{pin_gp_seq}. Physically, they differ by the way in which reflection symmetry is ``fractionalized'': reflection squares to $-1$ on fermions in $pin_-(n)$, and to $+1$ in $\pin_+(n)$. 


In what follows we will need to deal with the action of orientation-reversing reflections, which means that we will actually need the more general construction of a $pin_\pm(n)$ structure. Colloquially, a pin structure is to a spin structure what $O(n)$ is to $SO(n)$. They are therefore defined by replacing $SO(n)$ with $O(n)$ in \eqref{spin_gp_seq}:
\be \label{pin_gp_seq} 1 \ra \zt \ra pin_\pm(n) \ra O(n) \ra 1,\ee
where the $-1$ in the kernel of second-to-last map is identified with a $2\pi$ rotation.
Alternatively, they can be described as $\zt$ central extensions of $Spin(n)$:
\be \label{pinseq} 1\ra Spin(n) \ra pin_\pm(n) \ra \zt \ra 1,\ee 
where second-to-last map $p : pin_\pm(n) \ra \zt$ sends orientation-reversing (orientation-preserving) elements to $-1$ ($+1$). Geometrically, a pin structure is a $\zt$ extension of the unoriented frame bundle on $M$ (the frame bundle on $M$ with structure group $O(n)$), defined in an analogous way to \eqref{spinbundleseq}.

The difference between $\pin_+(n)$ and $pin_-(n)$ is the way in which reflection acts: 
reflection squares to $1$ in $\pin_+(n)$ (i.e.\ carries a trivial reflection quantum number) 
and to $-1$ in $pin_-(n)$ (i.e.\ carries a nontrivial reflection quantum number). 
This in turn corresponds to whether \eqref{pinseq} splits: if it splits we have a $\pin_+(n)$ structure, 
with $\pin_+(n) \cong Spin(n) \rtimes \zt$. If it does not split we have a $pin_-(n)$ structure, 
with $pin_-(n) \cong (Spin(n) \rtimes \zz_4)/\zt$. In what follows, we will fix a $\pin_+(n)$ 
structure for concreteness (which is always possible as long as $M$ is orientable). 
The relation $\pin_+(n) \cong Spin(n) \rtimes \zt$ gives an automorphism of $Spin(n)$ by 
conjugation, $\phi \mapsto \gamma \phi \gamma$, for $\phi \in Spin(n)$ and $\gamma \in \pin_+(n)$. 
This is exactly the isomorphism that establishes the equivalence between $m_\sigma^+$ 
and $m_\sigma^-$ in the main text. 

%\ethan{(the following paragraph might not be needed)}
%So far we have discussed (s)pin structures from a rather geometric point of view, but there is a more algebraic approach that is also useful for us. Consider the real clifford algebra $C\ell_n$, generated by $n$ odd generators $\gamma_1,\dots,\gamma_n$ subject to the anticommutation relations $\{\gamma_i,\gamma_j\} = 2\delta_{ij}$\footnote{Unlike in the complex case, we cannot set the quadratic form $Q_{ij}$ in the more general $\{\gamma_i,\gamma_j\} = 2Q_{ij}$ to be $\delta_{ij}$ without loss of generality, since the signature of the quadratic form is physically meaningful in the real case. Our choice of $Q_{ij} = \delta_{ij}$ is because we are working in Euclidean signature.}. Geometrically, each $\gamma_i$ can be realized as a reflection about the plane normal to $v_i$, where $v_i$ is a basis vector of $\mathbb{R}^n$. Taking all the invertible elements of unit norm in $C\ell_n$ gives us $\pin_+(n)$\footnote{Not $pin_-(n)$, since we have taken the quadratic form $Q_{ij} = \delta_{ij}$ to be positive-definite.}. Taking the even-parity elements (those containing an even number of different $\gamma_i$s) gives us the spin groups:
%\be Spin(n) = \pin_+(n) \cap [C\ell_n]^0.\ee





%%%%%%%%%%%%%%%%%%%%%%%
\section{Constructing the fermion line bundle}
\label{fermion_line_bundle} \label{flb_appendix}
%%%%%%%%%%%%%%%%%%%%%%%

Recall our set-up: we have a back wall $B$, which is a spin (and therefore oriented) 2-manifold.
Associated to $B$ is the configuration space of $\psi$-ribbon endpoints, $\mcr(B)$.
This configuration space is a disjoint union of pieces $\mcr(B)_k$, where $k$ is number of ribbon endpoints
in a configuration.

Our goal in this subsection is to construct a complex line-bundle-with-flat-connection $F(B)$ over $\mcr(B)$,
satisfying the following six conditions alluded to in the previous section:
\begin{enumerate}
\item $F$ is functorial with respect to spin diffeomorphisms. That is,
if $f: B \to B'$ is spin diffeomorphism, then there is a corresponding bundle isomorphism $F(B) \to F(B')$ which
preserves the flat connections and complex structure.
\item $F$ is functorial with respect to orientation-reversing $\mbox{pin}_+$ diffeomorphisms. That is, 
if $f: B \to B'$ is an orientation-reversing $\mbox{pin}_+$ diffeomorphism, then there is a corresponding map
$F(B) \to F(B')$ which preserves the flat connections and is complex antilinear on the fibers.
(Recall that any spin manifold has an associated $\mbox{pin}_+$ structure.
By ``orientation-reversing $\mbox{pin}_+$ diffeomorphism", we mean a $\mbox{pin}_+$ diffeomorphism
of the associated $\mbox{pin}_+$ manifolds which reverses the orientations of the underlying oriented manifolds.)
This condition is needed in order to define Hermitian/unitary structures.
\item The holonomy around a loop in $\mcr(B)$ corresponding to a $2\pi$ rotation of a ribbon endpoint is $-1$.
This condition is needed to compensate for fermionic twist of $\psi$.
\item The holonomy around a loop in $\mcr(B)$ corresponding to an exchange of two ribbon endpoints 
(inside a fixed disk) is $-1$.
This condition is needed to compensate for the fermionic statistics of $\psi$.
\item $F$ is local in the following sense.
Given a decomposition $B = B'\cup B''$, there is an obvious map $u: \mcr(B')\times\mcr(B'')\to\mcr(B)$, 
and a corresponding pull-back bundle $u^*(F(B))$ over $\mcr(B')\times\mcr(B'')$.
We require an isomorphism $u^*(F(B)) \cong F(B')\otimes F(B'')$ which is natural with respect to spin diffeomorphisms.
\item $F$ satisfies a cancellation property.
Given a configuration $r \in \mcr(B)_k$ and a point $x\in B$ distinct from the ribbon endpoints of $c$,
we can create a new configuration $c_+ \in \mcr(B)_{k+2}$ by inserting a pair of endpoints in a standard configuration
near $x$.
We require an isomorphism of fibers $F(B)_c \cong F(B)_{c_+}$ which is compatible with the flat connection as explained below.
This condition is need to allow for well-defined creation and annihilation of pairs of $\psi$ 
endpoints in line with the fusion rule $\psi \tp \psi \cong \unit$.
\end{enumerate}

\medskip

To represent an element of $F(B)$, we will choose spin framings at each ribbon endpoint and also assign
an ordering to the ribbon endpoints.
The main idea is fairly simple, but making this construction compatible with orientation reversal
and ribbon endpoint cancellations requires a bit of fussiness with the details.

\medskip

Recall the group $\pin_+(1) \cong \zz/2 \times \zz/2$.
We will call the non-zero elements of $\pin_+(1)$ the ``spin flip" (aka the $2\pi$ rotation which lies in the kernel of the covering map
$\pin_+(1) \to O(1)$), the ``reflection", and the ``other reflection"
(the latter two reflections map to the single reflection in $O(1)$).

To construct $F(B)$, we will first construct a principal $\pin_+(1)$ bundle $P(B)$ over $\mcr(B)$.
The construction of $P(B)$ will be independent of reversing the orientation of $B$.
We define the action of $\pin_+(1)$ on $\cc$ as follows:
the spin flip sends $z\in \cc$ to $-z$;
the reflection sends $z$ to the complex conjugate $\bar z$;
and the other reflection sends $z$ to $-\bar z$.
Using this action, we can now define $F(B)$ to be
\be \label{fermbundef}
	F(B) = P(B) \times_{\pin_+(1)} \cc ,
\ee
the associated $\cc$ bundle over $\mcr(B)$.
(Recall that this means that elements of $F(B)$ are represented by pairs $(f, z) \in P(B) \times \cc$,
and that for each element $a \in \pin_+(1)$, we identify $(f\cdot a, z)$ with $(f, a \cdot z)$.)
Since $P(B)$ is a bundle with discrete fibers, it has a canonical flat connection.
This induces a flat connection on $F(B)$.

Note that $F(B)$, as defined above, has two different complex-linear structures, one the conjugate of the other.
We will see below that the orientation of $B$ picks out one of the two possible complex structures.

\medskip

We are now ready, finally, to construct $P(B)$.
Let $r \in \mcr(B)_k$ be a configuration of $k$ ribbon endpoints.
At each endpoint of $r$, there is a distinguished unit tangent vector $v \in TB$
pointing in the direction of the front of the ribbon.
There are two unit tangent vectors $w_1$ and $w_2$ in $TB$ orthogonal to the distinguished vector.
The orientation of $B$ allows us to designate one of these two orthogonal vectors as ``positive"
and the other as ``negative".
(We call $w_i$ positive if $(v, w_i)$ is a positively oriented frame with respect to the orientation of $B$.)
We will call a collection of framings $(v, w_i)$ at each endpoint ``consistent" if they are all positive
or all negative.
Note that there are exactly two possible consistent collections of framings for each fixed configuration $r$.
We will denote this set of two elements by $cf(r)$.
Note that reversing the orientation of $B$ does not change $cf(r)$
\footnote{It is tempting to say that $cf(r)$ depends only on the underlying unoriented manifold of $B$, but this
is not true if $B$ has more than one path component.
Reversing the orientation of some but not all of the path components of $B$ would change $cf(r)$.}.

\newcommand{\tcf}{\widetilde{cf}}

Now define $\tcf(r)$ to be the set of all collections of $\pin_+(2)$-framings (one at each endpoint)
which cover an element of $cf(r)$.
At each endpoint, there are two possible lifts of an $O(2)$ framing, 
so $\tcf(r)$ is a set with $2^{k+1}$ elements.
Again, $\tcf(r)$ does not change if we reverse the spin structure on $B$.
\kw{should perhaps define ``reverse the spin structure".  maybe put it in spin str appendix.}
\ethan{Do you mean reversing the orientation (or exchanging positive and negative framings) and then lifting the $O(2)$ framings?}

Let $S(r)$ denote the set of all orderings of the endpoints of $r$.
It is a set with $k!$ elements.
Now consider $\tcf(r) \times S(r)$ yet another set associated to a ribbon endpoint configuration $r$.
This set has a group of symmetries $G$ which is generated by (a) spin flips acting on any single endpoint, 
and (b) the symmetric group $S_k$, acting on the $S(r)$ component.
Let $G_e \subset G$ is the subgroup with even total parity, where 
parity in this context is defined by the homomorphism from $G$ to $\zz/2$
characterized by the condition that is odd for single spin flips and transpositions.
Now, finally, define
\be
	P(B)_r = (\tcf(r) \times S(r))/G_e .
\ee

We claim that $P(B)_r$ is naturally a torsor for $\pin_+(1)$.
First, let's check the cardinality:
$\tcf(r) \times S(r)$ has $2^{k+1} k!$ elements,
$G_e$ has $2^{k-1} k!$ elements, and $G$ acts freely on $\tcf(r) \times S(r)$.
Therefore $P(B)_r$ has four elements.

Now we define the action of $\pin_+(1)$ on $P(B)_r$.
The spin flip acts by changing (any) one of the spin framings of $\tcf(r)$ by a spin flip.
The reflection acts diagonally on all of the spin framings of $\tcf(r)$
(i.e.\ each spin framing is reflected).
These two actions are well-defined and commute, so we have
an action of $\pin_+(1) \cong \zz/2\times\zz/2$.
(If $k = 0$ and $r \in \mcr(B)_0$ is the unique configuration of zero ribbon endpoints,
we define $P(B)_r = \pin_+(1)$ and let $\pin_+(1)$ act in the obvious way.)

\medskip

In summary, an element of $F(B)_r$ is represented by a triple $(f, o, z) \in \tcf(r) \times S(r) \times \cc$.
Spin flips, permutations of ribbon endpoints, and reflections act as
\begin{itemize}
\item If $f$ and $f'$ differ by a spin flip at a single ribbon endpoint, then $(f, o, z) = (f', o, -z)$.
\item If $o$ and $o'$ differ by an odd permutation, then $(f, o, z) = (f, o', -z)$.
\item If $f$ and $f'$ differ by reflecting all of the spin framings, then $(f, o, z) = (f', o, \bar z)$.
\end{itemize}

To define complex multiplication by $a\in\cc$ on $F(B)_r$, we choose a collection of framings $f$ which is positive
with respect to the orientation of $B$ and then define $a\cdot (f, o, z) = (f, o, az)$.
If we were to reverse the orientation of $B$, then we would get the conjugate complex structure on $F(B)$.
In other words, $F(B)_r = F(-B)_r$ as sets (and even as vector spaces over $\rr$), but the identity map from
$F(B)_r$ to $F(-B)_r$ is complex antilinear.

\medskip

We began this subsection with a list of several desiderata for $F(B)$.
It is more or less obvious that $F(B)$ has the desired sort of functoriality for both orientation-preserving
and orientation-reversing spin/pin maps.
It should also be clear that $F(B)$ has the desired holonomies for rotations and exchanges.
So all that's left to discuss is locality (gluing) and ribbon endpoint cancellation.

\medskip

We consider locality first.
Let $B = B_1 \cup B_2$.
Let $r_i \in \mcr(B_i)$ and let $(f_i, o_i, z_i)$ represent an element of $F(B_i)_{r_i}$.
If the spin framing collections $f_1$ and $f_2$ are either both positive or both negative, then
$f_1 \cup f_2$ is a consistent spin framing in $\tcf(r_1 \cup r_2)$, and the triple
$(f_1 \cup f_2, o_1\cup o_2, z_1 z_2)$ represents an element of $F(B)_{r_1\cup r_2}$.
It is easy to check that this map gives a well-defined  isomorphism between $u^*(F(B_1)$ 
and $F(B')\otimes F(B_2)$, both thought of as line bundles over $\mcr(B_1)\times\mcr(B_2)$.

\medskip

Now for cancelations.
We want a relation of the type 
\be \label{eval_psi_semicirc}
\PsiEnd  = \lambda \times \text{(vaccuum)},
 \ee
for some $\lambda \in \cc$. 
On the left hand side we have two ribbon endpoints in a disk $D \subset B$ connected by a ribbon in $D\times I$.
We have chosen coordinates so that the front of the ribbon always points in the same direction.
The spin framings at the two endpoints are chosen to be related by a translation in these coordinates
and to both be positive.
We have chosen the ordering so that the second vector at endpoint 1 points toward endpoint 2;
we will call this a ``standard configuration".
As indicated, we want this standard picture to be equal to $\lambda$ times the empty picture.

We will show that in order for this relation to be compatible with reflections, 
we must have that $\lambda = -\bar\lambda$, i.e.\ $\lambda$ must be pure imaginary.
Note that in order to define the action of a reflection on string-nets, it is essential that we have defined an 
action of $\pin_+(1)$ on $P(B)_r$ (rather than merely an action of $\spin(1)$). 
(A $\pin_-(1)$ structure would also work, but our examples happen to have $\pin_+$ rather than $\pin_-$ structures.)
The existence of a reflection structure also allows us to define inner products of diagrams. 


Consider first the RHS of \eqref{eval_psi_semicirc}. 
Reflections take the empty picture to the empty picture, and so, since reflections act antilinearly on $F(B)$,
the RHS of \eqref{eval_psi_semicirc} maps under reflection to $\bar\lambda$ times the empty picture.

Now for the LHS of \eqref{eval_psi_semicirc}.
After a reflection (by which we mean an orientation-reversing map), 
the framings are no longer positive, and so we must reflect them in order to compare to a standard configuration
in the target manifold.
After the framings are reflected, the second vector at endpoint 1 points away from endpoint 2,
so we must swap the ordering in order for it to be a standard configuration.
This change of orderings means that under a reflection, a standard configuration map to $-1$ times a standard
configuration.
It follows that we must have $\lambda = -\bar\lambda$, and so $\lambda$ must be purely imaginary.
%%KW: dropping figure since we don't have a good way of indicating reversed orientations
%This argument is summarized by 
%\begin{align}
%\lambda^{*} \times ({\rm vaccuum}) = \left( \PsiEnd \right) ^{\dagger}  = \PsiEndExchange = (-1) \PsiEnd  = - \lambda \times ({\rm vaccuum}),
%\label{phase}
%\end{align}
%In order to avoid over-weighting states containing pairs of boxes 
%of the form in \eqref{semicircular_boxes} we set 
%$|\lambda|=1$, so that $\lambda = \pm i$. 

\medskip


\kw{Also need to prove or at least state that cancellation relation is consistent locally.}

\kw{some things to mention: pin+ is only possibility because 1-dim'l; transition functions/spin/pin (?); ...}

\kw{need to discuss dependency on ordering for tensor products}















%%%%%%%%%%%%%%%%%%%%%%%
\section{Basic facts about superalgebras} \label{superstuff}
%%%%%%%%%%%%%%%%%%%%%%%

In this appendix we briefly recall some of the key mathematical facts about superalgebras; details can be found in \cite{jozefiak1988}.

There are two distinct classes of simple superalgebras over $\cc$. One class is the set of superalgebras $M(r|s)$ for $r,s\in\zz$, which are $(r+s)\times(r+s)$ matrices whose even and odd subspaces take the form
\be M(r|s)_0 = \text{matrices of the form\ } \begin{pmatrix} A & 0 \\ 0 & B \end{pmatrix},\qquad M(r|s)_1 = \text{matrices of the form\ } \begin{pmatrix} 0 & C \\ D & 0 \end{pmatrix}.\ee
In these expressions, $A$ is an $r\times r$ matrix, $B$ an $s\times s$ matrix, $C$ an $r\times s$ matrix, and $D$ an $s\times r$ matrix. 

The other class of simple superalgebras are denoted by $Q(n)$ for $n\in \zz$, which are $(2n)\times(2n)$ matrices with even and odd subspaces of the form
\be Q(n)_0 = \text{matrices of the form\ } \begin{pmatrix} A & 0 \\ 0 & A \end{pmatrix},\qquad Q(n)_1 = \text{matrices of the form\ } \begin{pmatrix} 0 & B \\ B & 0 \end{pmatrix},\ee
where both $A$ and $B$ are $n\times n$ matrices. In particular, $Q(1) = \langle \unit, \sigma^x\rangle$ is the first complex Clifford algebra $\cl_1$. 
If $s$ is a simple object in a superfusion category, then $\End(x)$ will be a simple superalgbera. If $\End(x)\cong Q(n)$ for some $n$, then since the superalgebra $Q(n)$ treats even and odd vectors 
on the same footing, $x$ will be invariant under odd morphisms. 
For a fermionic theory in which $\psi$ has been condensed, this translates to the fusion rule $x\tp\psi \cong x$ (such a fusion rule is not possible if $\End(x)\cong M(r|s)$ instead). 
Furthermore, since $\End(x)$ must actually be a division algebra, then either $\End(x) \cong M(1|0) \cong \cc$ or $\End(x) \cong Q(1)$. 
This is our reason for calling simple objects in super fusion categories m-type if their endomorphism algebra is $\cc$, and q-type if their endomorphism algebra is $Q(1)\cong\cl_1$. 

The form of a general simple superalgebra $A$ can be diagnosed by computing the odd subspace $Z(A)_1$ of the center $Z(A)$ (an element $a$ is in $Z(A)$ if it supercommutes with everything in $A$, i.e. if $ax = (-1)^{|a||x|}xa$ for all $x\in A$, with $|x|$ denoting the parity of $x$).
Since the superalgebras $Q(n)$ treat even and odd vectors symmetrically, they expect that they will have odd elements in their center, while this will not be true for the superalgebras $M(r|s)$. 
Indeed, we have that if $Z(A)_1 = 0$ then $A \cong M(r|s)$ for some $r,s$, while if $Z(A)_1 \neq 0$ then $A\cong Q(n)$ for some $n$. 

If $A,B$ are superalgebras, their tensor product $C=A\tp B$ is defined as the superalgebra such that $C_0 = A_0\tp B_0 + A_1\tp B_1$, $C_1 = A_0\tp B_1 + B_1\tp A_0$. 
The simple superalgebras presented above can be tensored together by using the following rules:
\be \begin{aligned} M(r|s) \tp M(p|q) & \cong M(rp+sq|rq+sp) \\ 
M(r|s) \tp Q(n) & \cong Q(rn+sn) \\ 
Q(n) \tp Q(m) & \cong M(nm | nm). \end{aligned}
\ee
Note that all the $Q(n)$ can be generated from $M(n|0)$ and $Q(1)$ according to $Q(n) \cong M(n|0)\tp Q(1)$. 

%\dave{I liked this comment.}
%Then we have an isomorphism 
%\be \End(A) \tp \End(B) \ra \End(A\tp B),\ee
%which is helpful when computing fusion rules. 





%%%%%%%%%%%%% 
\section{Kitaev Wire}
%%%%%%%%%%%%%

\ethan{not saying that this should be an appendix --- just dunno where to put it for now}
\subsubsection{Kitaev wire}
Here we propose a simple application of the above diagrammatic calculus. 
We will re-write the Kitaev-Majorana chain using this basis. 
The idea is to write down the natural anyon spin chain with this calculus and realize that it's exactly the Kitaev-Majorana chain. 
This elucidates the connection between Majorana zero modes and Ising anyons. 

The local ``on site" Hilbert space is spanned by two basis vectors
\begin{align}
    \CupSigma \qquad \text{and} \qquad \CupSigmadot
\end{align}
the first has even fermion parity, while the second has odd fermion parity.
The only terms one can contruct a Hamiltonian out of are
\begin{align}
\Id \qquad \text{and} \qquad \TwoLinedotdot
\end{align}
the first is the identity line, while the second is nontrivial and should be identified with $i \gamma_1 \gamma_2$, a Majorana bi-linear.
To see this, we can just check the action of the Hamiltonian on the basis vectors. 
\begin{align}
\TwoLinedotdot\; \times \; \CupSigma \; =\;  \CupSigma \quad \text{and} \quad \TwoLinedotdot\; \times \; \CupSigmadot \; =\;   - \; \CupSigmadot
\end{align}
\dave{Need to define ordering on vertices properly. I've been doing it by labeling the states first, then the operators have a natural ordering on them and I just begin counting from the last fermion on the state.}
For an $N$-site chain we have the basis of states,
\begin{align}
&\CupSigma \; \CupSigma \; \CupSigma \cdots \CupSigma\\
&\CupSigmadot \; \CupSigma \; \CupSigma \cdots \CupSigma\\
&\CupSigma \; \CupSigmadot \; \CupSigma \cdots \CupSigma\\
&\CupSigma \; \CupSigma \; \CupSigmadot \cdots \CupSigma\\
&\CupSigma \; \CupSigma \; \CupSigma \cdots \CupSigmadot\\
&\CupSigmadot \; \CupSigmadot \; \CupSigma \cdots \CupSigma
\end{align}
etcetera. Where there are $N$ cups appearing, and the fermion dots are ordered from right to left, and any number of them can appear.
If a state has an odd number of dots it has odd fermion parity, while an even number of dots has even fermion parity.
The Hamiltonian has two types of terms. One term mixes the states on site -- or within a single cup, while the other mixes nearest neighbour cups.
We will denote the onsite Hamiltonian terms by $H_{2j}$ and the the term which couples the nearest neighbour cups by $H_{2j+1}$.
Then the Hamiltonian takes on the form,
\begin{align}
H = - \sum_j\; t_j \; \;  \TwoLinedotdot_{\text{site $j$}}
\end{align}
Now in the completely staggered limit it's easy to see what the ground states are,
\begin{align}
\StaggaredGSEven \; \cdots \; \StaggaredGSEvenR  
\qquad \text{and} \qquad 
\StaggaredGSOdd \; \cdots  \; \StaggaredGSEvenR
\end{align}
The first differing from the second by fermion parity.
Excitations are built by putting dots on the intermediate cups. 
A nice feature of the diagrammatic notation is that the ``delocalization" of femrion number is made manifest.
For example the fermion odd state does not have a femrion localized at either end, rather its free to slide from one end to the other.
When transforming back to the original basis, one sees that the state is actually an even superposition of all possible placements of an even number of fermions, similarly for the odd state.

\section{$\frac{1}{2}$E6 data}
\subsection{Associators}
\label{E6Fsymbols}
There are four unitary solutions to the pentagon equation for $\frac{1}{2}$E6. They split into two sets, one pair has all positive quantum dimensions, while the other has negative quantum dimension on the $x$ particle. 
The solutions in each set are related by complex conjugation. 
Here we present one of the solutions with positive quantum dimensions on all particles. 
Several of the $F$ symbols are trivial,
\begin{align}
F^{yyy}_y = F^{xyy}_x = F^{yyx}_x = F^{xxy}_y  = F^{yxx}_y = F^{xyx}_{\mathds{1}} = F^{xxy}_{\mathds{1}} = F^{yxx}_{\mathds{1}}= 1
\end{align}
Let $v_1, v_2$ be orthogonal unit vectors for the two-dimensional splitting space $V^{xx}_x$. 
We define the $F$ symbols acting on these vectors by $V^{xy}_x \tp V^{xx}_x  = F^{xyx}_x V^{xx}_x \tp V^{yx}_x$ in the basis $(v_1, v_2)^{T}$.
Explicitly we have,
\begin{align}
&F^{xyx}_x = \left(\begin{matrix}
0&1\\
1&0
\end{matrix} \right) \quad
F^{xxy}_x = \left(\begin{matrix}
0&-i\\
i&0
\end{matrix} \right) \quad
F^{yxx}_x = \left(\begin{matrix}
1&0\\
0&-1
\end{matrix} \right) 
\\
\\
&F^{xxx}_{\mathds{1}} = c_2^* \left(\begin{matrix}
1&-i\\
1&i
\end{matrix} \right) \quad
F^{xxx}_y = c_2^*\left(\begin{matrix}
1&-i\\
-1&-i
\end{matrix} \right), \quad \quad c_2  = \frac{e^{7 i \pi/12}}{\sqrt{2}}
\end{align}

Lastly we have the $F$ symbol whose four external legs are all labeled by $x$.
We write this $F$ symbol down in the basis $(0,y, v_1\tp v_1,v_1 \tp v_2, v_2 \tp v_1, v_2 \tp v_2)$, where we have 
\begin{align}
F^{xxx}_x  = 
 \left(\begin{matrix}
\frac{1}{d} & \frac{1}{d} & \frac{c_1^*}{\sqrt{2}} & \frac{c_1^*}{\sqrt{2}} & \frac{c_1^*}{\sqrt{2}} & - \frac{c_1^*}{\sqrt{2}} \\
\frac{1}{d} & - \frac{1}{d} & \frac{c_1^*}{\sqrt{2}} & -\frac{c_1^*}{\sqrt{2}} & \frac{c_1^*}{\sqrt{2}} & \frac{c_1^*}{\sqrt{2}} \\
\frac{e^{- i \pi/4}}{\sqrt{d}} & 0 & -\frac{1}{d} & 0 & -i c_4^* & 0 \\
0 & \frac{e^{i \pi /4}}{\sqrt{d}} & 0 &c_4^* & 0 & \frac{ i}{d} \\
0 & \frac{e^{- i \pi /4}}{\sqrt{d}} & 0 & -\frac{1}{d} & 0 & i c_4^* \\ 
\frac{e^{i \pi /4}}{\sqrt{d}} & 0 & c_4^* & 0 & - \frac{i}{d} & 0
\end{matrix} \right) \\
d = 1 + \sqrt{3} \quad \quad c_1 = \frac{e^{-5 i \pi/6} }{\sqrt{d}} \quad \quad c_4 = \frac{e^{-i \pi/4}}{\sqrt{2}}
\end{align}

\newpage
\subsection{Idempotents}
\label{IdempotentsHalfESix}
%\dave{These are data from an older version of the notes. We don't have to include them but they could be useful for other people. }

\begin{table}
{\tabulinesep=1.2mm
\begin{tabu}{ c c | c c c c }
particle & spin &$e$&$l_x$&$l_y$& \\ \hline
$1$ & $
       1       

$ &
$
\frac{1}{2+d^2}
$
 &
$
\frac{1}{2 \sqrt3}
$
 &
$
\frac{1}{2+d^2}
$
 &
\\
$2$ & $
       1       

$ &
$
\frac{1}{2}
$
 &
$
$
 &
$ -
\frac{1}{2}
$
 &
\\
$3$ & $
       1       

$ &
$
\frac{d}{4 \sqrt{3}}
$
 &
$ -
\frac{1}{2 \sqrt3}
$
 &
$
\frac{d}{4 \sqrt{3}}
$
 &
\end{tabu}
\caption{Charge $0$ idempotents. We have used the notation $e$ = empty diagram, $l_x$ = tube with $x$-loop around the meridional cycle, and $l_y$ = tube with a $y$-loop around the meridional cycle.}
}
{\tabulinesep=1.2mm
\begin{tabu}{ c c | c c c c }
particle & spin &$t_y$&$t_y l_x$&$v_y$& \\ \hline
$2$ 
& $       1       $ 
&$\frac{1}{2}$
 &$$
 &$\frac{1}{2}$
 &
\\
$4$ & $
       1/2     

$ &
$ -
\frac{1}{2+d^2}
$
 &
$ e^{\frac{6i\pi}{12}}
\frac{1}{2 \sqrt3}
$
 &
$
\frac{1}{2+d^2}
$
 &
\\
$5$ & $
       1/2     

$ &
$ -
\frac{d}{4 \sqrt{3}}
$
 &
$ e^{\frac{-6i\pi}{12}}
\frac{1}{2 \sqrt3}
$
 &
$
\frac{d}{4 \sqrt{3}}
$
 &
\end{tabu}
}
\caption{Charge $2$ idempotents. We have used the notation $v_y$ = tube with a longitudinal $y$ loop, $t_y$ = tube with a $y$ line wrapping around both cycles, and $t_y l_x$ = tube with a $y$ line around the longitudinal cycle and an $x$ line around the meridional cycle.}
\end{table}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

Here we identify the primitive idempotents of the tube algebra of the $\halfesix$ theory in the notation of \cite{Hong2008}. 
The spins here differ from those in \cite{Hong2008} by complex conjugation. Also, note that at the level of fusion rules and spins, particles $6$ and $8$ are identical---extra data is needed to distinguish them\footnote{In fact, the primitive idempotents $6$ and $8$ in the charge $1$ sector are interchanged under the transformation $(11, 12, 21, 22) \mapsto (12,11,-22,-21)$. }.

\begin{align}
\xymatrix{
1&2&3&4&5&6&7&8&9 &10 \\
\mathds{1} & W& U & Y& V& X_{2,3} &X_1 & X_{3,2}& X_5 & X_4
}
\end{align}

\begin{align}
\xymatrix @!0 @M=2mm @R=22mm @C=19mm{
W \ar@/^2pc/[rr]^{w_{02}} \ar@<.5ex>[r]^{w_{01}}
& W \ar@<.5ex>[l]^{w_{10}} \ar@<.5ex>[r]^{w_{12}}
& W\ar@<.5ex>[l]^{w_{21}} \ar@/^2pc/[ll]^{w_{20}}
}\qquad
\xymatrix @!0 @M=2mm @R=22mm @C=19mm{
U\ar@<.5ex>[r]^{u_{01}}
& U \ar@<.5ex>[l]^{u_{10}} 
}\qquad
\xymatrix @!0 @M=2mm @R=22mm @C=19mm{
V\ar@<.5ex>[r]^{v_{12}}
& V \ar@<.5ex>[l]^{v_{21}} 
}
\end{align}
Where
\begin{align}
w_{01} &= \frac{i}{\sqrt{2 \sqrt{2d}}}(t_{0111;11} - t_{0111;12}) \\
w_{10}  &= \frac{-i}{\sqrt{2\sqrt{2d}}} (t_{1101;11}-t_{1101;21}) \\
w_{12} & = \frac{1}{(8d)^{\frac14}}(t_{1121;11} + t_{1121;21}) \\
w_{21} & = \frac{1}{(8d)^{\frac14}}(t_{2111;11} + t_{2111;12}) \\
w_{02} & \frac{-e^{-i\pi/4}}{\sqrt{2}} t_{0121;11}\\
w_{20} & \frac{-e^{i\pi/4}}{\sqrt{2}} t_{2101;11}
\end{align}
\begin{align}
u_{01}  & = \frac{1}{2}\sqrt{\frac{d}{6}}( t_{0111;11}+t_{0111;12})\\
u_{10} & = \frac{1}{2}\sqrt{\frac{d}{6}}(t_{1101;11}+t_{1101;21})\\
v_{12} & = \frac{i}{2}\left( \frac{d}{6} \right)^{\frac14} (t_{1121;11}-t_{1121;21})\\
v_{21} & = \frac{i}{2}\left( \frac{d}{6} \right)^{\frac14} (t_{2111;11}-t_{2111;21})
\end{align}
so that we have $w_{12} \circ w_{01} = w_{02}$ and $w_{10}\circ w_{21} = w_{20}$, and we have defined
\begin{align}
t_{abcd; \mu \nu } = \AnnularTubexp{\AnnularTubeNoIndex}{a}{b}{c}{d}{\mu}{\nu}{X}{}
\end{align}

\begin{table}
\resizebox{\textwidth}{!}{
{\tabulinesep=1.2mm
\begin{tabu}{ c c | c c c c c c c c c }
particle & spin &$t_x$&$v_x$&$X_{11}$ & $X_{12}$ &$X_{21}$ & $X_{22}$ & $v_x l_y$ & $t_x h_y$ \\ \hline
$2$ & $
       1       
$ &
$
\frac{1}{2d}
$
 &
$
\frac{1}{2d}
$
 &
$ e^{\frac{-9i\pi}{12}}
\frac{\sqrt{3d-8}}{4}
$
 &
$ e^{\frac{-9i\pi}{12}}
\frac{\sqrt{3d-8}}{4}
$
 &
$ e^{\frac{9i\pi}{12}}
\frac{\sqrt{3d-8}}{4}
$
 &
$ e^{\frac{-3i\pi}{12}}
\frac{\sqrt{3d-8}}{4}
$
 &
$ e^{\frac{6i\pi}{12}}
\frac{1}{2d}
$
 &
$ e^{\frac{-6i\pi}{12}}
\frac{1}{2d}
$
 &
\\
$3$ & $
       1       

$ &
$
\frac{1}{4 \sqrt{3}}
$
 &
$
\frac{1}{4 \sqrt{3}}
$
 &
$ e^{\frac{3i\pi}{12}}
\frac{1}{4 \sqrt{d} }
$
 &
$ e^{\frac{9i\pi}{12}}
\beta
$
 &
$ e^{\frac{-9i\pi}{12}}
\beta
$
 &
$ e^{\frac{-3i\pi}{12}}
\frac{1}{4 \sqrt{d} }
$
 &
$ e^{\frac{-6i\pi}{12}}
\frac{1}{4 \sqrt{3}}
$
 &
$ e^{\frac{6i\pi}{12}}
\frac{1}{4 \sqrt{3}}
$
 &
\\
$5$ & $
       1/2     

$ &
$ -
\frac{1}{4 \sqrt{3}}
$
 &
$
\frac{1}{4 \sqrt{3}}
$
 &
$ e^{\frac{-3i\pi}{12}}
\beta
$
 &
$ e^{\frac{-9i\pi}{12}}
\frac{1}{4 \sqrt{d} }
$
 &
$ e^{\frac{-3i\pi}{12}}
\frac{1}{4 \sqrt{d} }
$
 &
$ e^{\frac{-9i\pi}{12}}
\beta
$
 &
$ e^{\frac{-6i\pi}{12}}
\frac{1}{4 \sqrt{3}}
$
 &
$ e^{\frac{-6i\pi}{12}}
\frac{1}{4 \sqrt{3}}
$
 &
\\
$6$ & $
      -5/12    

$ &
$ e^{\frac{-10i\pi}{12}}
\frac{1}{2+d^2}
$
 &
$
\frac{1}{2+d^2}
$
 &
$ e^{\frac{-2i\pi}{12}}
\gamma
$
 &
$ e^{\frac{10i\pi}{12}}
\alpha
$
 &
$ e^{\frac{4i\pi}{12}}
\alpha
$
 &
$ e^{\frac{4i\pi}{12}}
\gamma
$
 &
$ e^{\frac{6i\pi}{12}}
\frac{1}{2+d^2}
$
 &
$ e^{\frac{8i\pi}{12}}
\frac{1}{2+d^2}
$
 &
\\
$7$ & $
       1/4     

$ &
$ e^{\frac{6i\pi}{12}}
\frac{1}{2+d^2}
$
 &
$
\frac{1}{2+d^2}
$
 &
$ e^{\frac{6i\pi}{12}}
\frac{1}{2 \sqrt{6d}}
$
 &
$ e^{\frac{6i\pi}{12}}
\frac{1}{2 \sqrt{6d}}
$
 &
$
\frac{1}{2 \sqrt{6d}}
$
 &
$ -
\frac{1}{2 \sqrt{6d}}
$
 &
$ e^{\frac{6i\pi}{12}}
\frac{1}{2+d^2}
$
 &
$
\frac{1}{2+d^2}
$
 &
\\
$8$ & $
      -5/12    

$ &
$ e^{\frac{-10i\pi}{12}}
\frac{1}{2+d^2}
$
 &
$
\frac{1}{2+d^2}
$
 &
$ e^{\frac{10i\pi}{12}}
\alpha
$
 &
$ e^{\frac{-2i\pi}{12}}
\gamma
$
 &
$ e^{\frac{-8i\pi}{12}}
\gamma
$
 &
$ e^{\frac{-8i\pi}{12}}
\alpha
$
 &
$ e^{\frac{6i\pi}{12}}
\frac{1}{2+d^2}
$
 &
$ e^{\frac{8i\pi}{12}}
\frac{1}{2+d^2}
$
 &
\\
$9$ & $
       1/3     

$ &
$ e^{\frac{8i\pi}{12}}
\frac{1}{2+d^2}
$
 &
$
\frac{1}{2+d^2}
$
 &
$
$
 &
$ e^{\frac{1i\pi}{12}}
\frac{1}{2 \sqrt{3d} }
$
 &
$ e^{\frac{7i\pi}{12}}
\frac{1}{2 \sqrt{3d} }
$
 &
$
$
 &
$ e^{\frac{-6i\pi}{12}}
\frac{1}{2+d^2}
$
 &
$ e^{\frac{-10i\pi}{12}}
\frac{1}{2+d^2}
$
 &
\\
$10$ & $
      -1/6     

$ &
$ e^{\frac{-4i\pi}{12}}
\frac{1}{2+d^2}
$
 &
$
\frac{1}{2+d^2}
$
 &
$ e^{\frac{-11i\pi}{12}}
\frac{1}{2 \sqrt{3d} }
$
 &
$
$
 &
$
$
 &
$ e^{\frac{7i\pi}{12}}
\frac{1}{2 \sqrt{3d} }
$
 &
$ e^{\frac{-6i\pi}{12}}
\frac{1}{2+d^2}
$
 &
$ e^{\frac{2i\pi}{12}}
\frac{1}{2+d^2}
$
 &
\end{tabu}
}
}
\caption{Charge $1$ idempotents. We have used the notation $t_x$ = tube with an $x$ line wrapping around both cycles, $v_x$ = tube with a longitudinal $x$ loop, $X_{ij}$ = tube with all strings labeled by $x$ with index $i$ at the bottom fusion vertex and index $j$ at top fusion vertex, $v_x l_y$ = tube with longitudinal $x$ loop and meridional $y$ loop, and $t_x h_y$ = tube with an $x$ line wrapping both cycles and a $y$ line in the center. }
\end{table}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\end{document}
















